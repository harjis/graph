  [1m[35m (616.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "myapp_test"[0m
  [1m[35m (2674.0ms)[0m  [1m[35mCREATE DATABASE "myapp_test" ENCODING = 'unicode'[0m
  [1m[35m (690.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "myapp_test"[0m
  [1m[35m (3986.6ms)[0m  [1m[35mCREATE DATABASE "myapp_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (8.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "audits" CASCADE[0m
  [1m[35m (135.7ms)[0m  [1m[35mCREATE TABLE "audits" ("id" bigserial primary key, "auditable_id" integer, "auditable_type" character varying, "associated_id" integer, "associated_type" character varying, "user_id" integer, "user_type" character varying, "username" character varying, "action" character varying, "audited_changes" text, "version" integer DEFAULT 0, "comment" character varying, "remote_address" character varying, "request_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (12.4ms)[0m  [1m[35mCREATE  INDEX  "associated_index" ON "audits"  ("associated_type", "associated_id")[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE  INDEX  "auditable_index" ON "audits"  ("auditable_type", "auditable_id", "version")[0m
  [1m[35m (13.7ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_created_at" ON "audits"  ("created_at")[0m
  [1m[35m (11.4ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_request_uuid" ON "audits"  ("request_uuid")[0m
  [1m[35m (13.5ms)[0m  [1m[35mCREATE  INDEX  "user_index" ON "audits"  ("user_id", "user_type")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "edges" CASCADE[0m
  [1m[35m (36.2ms)[0m  [1m[35mCREATE TABLE "edges" ("id" bigserial primary key, "name" character varying, "from_node_id" bigint, "to_node_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (14.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_edges_on_from_node_id_and_to_node_id" ON "edges"  ("from_node_id", "to_node_id")[0m
  [1m[35m (15.0ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_from_node_id" ON "edges"  ("from_node_id")[0m
  [1m[35m (13.7ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_to_node_id" ON "edges"  ("to_node_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "graphs" CASCADE[0m
  [1m[35m (34.1ms)[0m  [1m[35mCREATE TABLE "graphs" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "type" character varying)[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "node_counts" CASCADE[0m
  [1m[35m (22.5ms)[0m  [1m[35mCREATE TABLE "node_counts" ("id" bigserial primary key, "count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "nodes" CASCADE[0m
  [1m[35m (43.5ms)[0m  [1m[35mCREATE TABLE "nodes" ("id" bigserial primary key, "name" character varying, "graph_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "content" json, "x" float DEFAULT 0.0, "y" float DEFAULT 0.0, "type" character varying NOT NULL, "node_ref_id" bigint)[0m
  [1m[35m (15.7ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_graph_id" ON "nodes"  ("graph_id")[0m
  [1m[35m (19.7ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_node_ref_id" ON "nodes"  ("node_ref_id")[0m
  [1m[35m (39.8ms)[0m  [1m[35mALTER TABLE "nodes" ADD CONSTRAINT "fk_rails_10f83f4418"
FOREIGN KEY ("graph_id")
  REFERENCES "graphs" ("id")
[0m
  [1m[35m (34.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (6.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (4.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20190806132227)[0m
  [1m[35m (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20190430113529),
(20190724110012),
(20190411085042),
(20190523112235),
(20190514095100),
(20190514093514),
(20190801105126),
(20190724105907),
(20190429092701),
(20190411113011),
(20190411100036);

[0m
  [1m[35m (36.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (5.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (5.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-08-22 04:58:08.359369"], ["updated_at", "2019-08-22 04:58:08.359369"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (6.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (8.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 04:59:01.636850"], ["updated_at", "2019-08-22 04:59:01.636850"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (17.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 1], ["created_at", "2019-08-22 04:59:01.747075"], ["updated_at", "2019-08-22 04:59:01.747075"], ["type", "InputNode"]]
  [1m[35m (27.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (16.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Node"], ["associated_id", 1], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 1\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "115bfe01-0660-4b4a-bb5d-0773420ad3b3"], ["created_at", "2019-08-22 04:59:01.840585"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (6.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:01:37.465170"], ["updated_at", "2019-08-22 05:01:37.465170"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 2], ["created_at", "2019-08-22 05:01:37.479469"], ["updated_at", "2019-08-22 05:01:37.479469"], ["type", "InputNode"]]
  [1m[35m (17.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Node"], ["associated_id", 2], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 2\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "86d0af3e-cfc6-45fa-9787-5c58277eac7d"], ["created_at", "2019-08-22 05:01:37.526465"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NodeTest: test_cascade_deletes_edges
------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:05:57.850839"], ["updated_at", "2019-08-22 05:05:57.850839"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (5.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 3], ["created_at", "2019-08-22 05:05:57.859752"], ["updated_at", "2019-08-22 05:05:57.859752"], ["type", "InputNode"]]
  [1m[35m (13.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Node"], ["associated_id", 3], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 3\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "61329517-dc49-42f6-9dd4-86f70a68bd68"], ["created_at", "2019-08-22 05:05:57.910741"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NodeTest: test_cascade_deletes_edges
------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NodeTest: test_cascade_deletes_edges
------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:07:27.661895"], ["updated_at", "2019-08-22 05:07:27.661895"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (7.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 4], ["created_at", "2019-08-22 05:07:27.747450"], ["updated_at", "2019-08-22 05:07:27.747450"], ["type", "InputNode"]]
  [1m[35m (18.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Node"], ["associated_id", 4], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 4\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "43b3ab53-918e-4d2d-b2b5-b9ddec197d41"], ["created_at", "2019-08-22 05:07:27.798510"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 4]]
  [1m[36mOutputNode Create (3.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 4], ["created_at", "2019-08-22 05:07:27.867090"], ["updated_at", "2019-08-22 05:07:27.867090"], ["type", "OutputNode"]]
  [1m[35m (8.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Node"], ["associated_id", 4], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 4\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "896a0dab-cde8-4c68-95c4-111e2649ab55"], ["created_at", "2019-08-22 05:07:27.874173"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (21.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 4], ["to_node_id", 5], ["created_at", "2019-08-22 05:07:27.933382"], ["updated_at", "2019-08-22 05:07:27.933382"]]
  [1m[35m (9.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Edge"], ["associated_id", 4], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 4\nto_node_id: 5\n"], ["version", 1], ["request_uuid", "3f4301a0-8b16-4f1c-a26c-52bbc5098d9c"], ["created_at", "2019-08-22 05:07:27.965306"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (18.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NodeTest: test_cascade_deletes_edges
------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:08:03.540789"], ["updated_at", "2019-08-22 05:08:03.540789"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (9.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 5], ["created_at", "2019-08-22 05:08:03.655769"], ["updated_at", "2019-08-22 05:08:03.655769"], ["type", "InputNode"]]
  [1m[35m (14.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 6], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 6], ["auditable_type", "Node"], ["associated_id", 5], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 5\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9330c072-9586-497e-bad6-d3163a8c881b"], ["created_at", "2019-08-22 05:08:03.725826"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 5]]
  [1m[36mOutputNode Create (3.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 5], ["created_at", "2019-08-22 05:08:03.810290"], ["updated_at", "2019-08-22 05:08:03.810290"], ["type", "OutputNode"]]
  [1m[35m (6.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Node"], ["associated_id", 5], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 5\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "98710d1b-33b4-4813-9a52-73853fe96032"], ["created_at", "2019-08-22 05:08:03.822959"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.4ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 6], ["to_node_id", 7], ["created_at", "2019-08-22 05:08:03.885454"], ["updated_at", "2019-08-22 05:08:03.885454"]]
  [1m[35m (7.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Edge"], ["associated_id", 6], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 6\nto_node_id: 7\n"], ["version", 1], ["request_uuid", "3a10608d-05b3-44bd-acb9-ad1d675eae3c"], ["created_at", "2019-08-22 05:08:03.896506"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (8.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mInputNode Destroy (3.3ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 6]]
  [1m[35m (5.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (2.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (9.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NodeTest: test_cascade_deletes_edges
------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:08:25.538926"], ["updated_at", "2019-08-22 05:08:25.538926"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (8.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 6], ["created_at", "2019-08-22 05:08:25.652474"], ["updated_at", "2019-08-22 05:08:25.652474"], ["type", "InputNode"]]
  [1m[35m (24.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Node"], ["associated_id", 6], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 6\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3caeebf0-9d2c-4e5c-80cd-9f3a99523cc9"], ["created_at", "2019-08-22 05:08:25.710677"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (13.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 6]]
  [1m[36mOutputNode Create (4.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 6], ["created_at", "2019-08-22 05:08:25.801533"], ["updated_at", "2019-08-22 05:08:25.801533"], ["type", "OutputNode"]]
  [1m[35m (11.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Node"], ["associated_id", 6], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 6\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2422394c-cd69-4c21-ba67-86d833107a5f"], ["created_at", "2019-08-22 05:08:25.810945"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.4ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 8], ["to_node_id", 9], ["created_at", "2019-08-22 05:08:25.905765"], ["updated_at", "2019-08-22 05:08:25.905765"]]
  [1m[35m (11.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Edge"], ["associated_id", 8], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 8\nto_node_id: 9\n"], ["version", 1], ["request_uuid", "bf734a17-9b9b-41e3-a6d6-9f68a48a2ec9"], ["created_at", "2019-08-22 05:08:25.913983"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (9.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mInputNode Destroy (2.6ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 8]]
  [1m[35m (5.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NodeTest: test_cascade_deletes_edges
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:09:01.318673"], ["updated_at", "2019-08-22 05:09:01.318673"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (7.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 7], ["created_at", "2019-08-22 05:09:01.415135"], ["updated_at", "2019-08-22 05:09:01.415135"], ["type", "InputNode"]]
  [1m[35m (16.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Node"], ["associated_id", 7], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 7\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f1c10645-8f82-4b48-b7fd-b2a093a50c50"], ["created_at", "2019-08-22 05:09:01.479915"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 7]]
  [1m[36mOutputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 7], ["created_at", "2019-08-22 05:09:01.571626"], ["updated_at", "2019-08-22 05:09:01.571626"], ["type", "OutputNode"]]
  [1m[35m (8.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Node"], ["associated_id", 7], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 7\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5e40cb14-da33-463c-bbc3-e204a6d3b2ed"], ["created_at", "2019-08-22 05:09:01.583295"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (6.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 10], ["to_node_id", 11], ["created_at", "2019-08-22 05:09:01.654198"], ["updated_at", "2019-08-22 05:09:01.654198"]]
  [1m[35m (9.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Edge"], ["associated_id", 10], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 10\nto_node_id: 11\n"], ["version", 1], ["request_uuid", "9531ed94-f1c0-4b31-b8bb-aaaf321df726"], ["created_at", "2019-08-22 05:09:01.671439"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (21.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mInputNode Destroy (3.5ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 10]]
  [1m[35m (5.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NodeTest: test_cascade_deletes_edges
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:13:21.540231"], ["updated_at", "2019-08-22 05:13:21.540231"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (7.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 8], ["created_at", "2019-08-22 05:13:21.643056"], ["updated_at", "2019-08-22 05:13:21.643056"], ["type", "InputNode"]]
  [1m[35m (19.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 8\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "980e0d8d-2b26-46d6-b8e3-7c27dfb581c9"], ["created_at", "2019-08-22 05:13:21.716768"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[36mOutputNode Create (2.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 8], ["created_at", "2019-08-22 05:13:21.797020"], ["updated_at", "2019-08-22 05:13:21.797020"], ["type", "OutputNode"]]
  [1m[35m (8.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 8\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "aa3564d4-17cb-481a-a258-f7f26b49f552"], ["created_at", "2019-08-22 05:13:21.813860"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (5.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 12], ["to_node_id", 13], ["created_at", "2019-08-22 05:13:21.899113"], ["updated_at", "2019-08-22 05:13:21.899113"]]
  [1m[35m (9.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Edge"], ["associated_id", 12], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 12\nto_node_id: 13\n"], ["version", 1], ["request_uuid", "0759c297-fd75-4f7e-a3b1-4bea9fcb0749"], ["created_at", "2019-08-22 05:13:21.914519"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (12.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mInputNode Destroy (4.0ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 12]]
  [1m[35m (6.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NodeTest: test_cascade_deletes_edges
------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:13:47.221768"], ["updated_at", "2019-08-22 05:13:47.221768"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (8.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 9], ["created_at", "2019-08-22 05:13:47.314101"], ["updated_at", "2019-08-22 05:13:47.314101"], ["type", "InputNode"]]
  [1m[35m (20.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Node"], ["associated_id", 9], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 9\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "857d5996-a720-41ba-867d-84869ae0f806"], ["created_at", "2019-08-22 05:13:47.392801"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 9]]
  [1m[36mOutputNode Create (3.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 9], ["created_at", "2019-08-22 05:13:47.480038"], ["updated_at", "2019-08-22 05:13:47.480038"], ["type", "OutputNode"]]
  [1m[35m (10.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Node"], ["associated_id", 9], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 9\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "22d34c3d-156b-4910-854a-0a43bc2be6e6"], ["created_at", "2019-08-22 05:13:47.496748"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 14], ["to_node_id", 15], ["created_at", "2019-08-22 05:13:47.568334"], ["updated_at", "2019-08-22 05:13:47.568334"]]
  [1m[35m (9.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 6], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 6], ["auditable_type", "Edge"], ["associated_id", 14], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 14\nto_node_id: 15\n"], ["version", 1], ["request_uuid", "c1b71b52-a642-47ea-be48-98ec87376f76"], ["created_at", "2019-08-22 05:13:47.576986"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (11.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mInputNode Destroy (3.4ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 14]]
  [1m[35m (4.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NodeTest: test_cascade_deletes_edges
------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:14:54.548800"], ["updated_at", "2019-08-22 05:14:54.548800"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (8.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 10], ["created_at", "2019-08-22 05:14:54.642475"], ["updated_at", "2019-08-22 05:14:54.642475"], ["type", "InputNode"]]
  [1m[35m (19.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Node"], ["associated_id", 10], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 10\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "022eaf1a-f82c-4db2-b43e-f70931457ae7"], ["created_at", "2019-08-22 05:14:54.711299"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 10]]
  [1m[36mOutputNode Create (3.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 10], ["created_at", "2019-08-22 05:14:54.796755"], ["updated_at", "2019-08-22 05:14:54.796755"], ["type", "OutputNode"]]
  [1m[35m (7.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Node"], ["associated_id", 10], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 10\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3519283a-ad11-4310-9ef3-9d0bae655982"], ["created_at", "2019-08-22 05:14:54.804410"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (5.4ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 16], ["to_node_id", 17], ["created_at", "2019-08-22 05:14:54.885026"], ["updated_at", "2019-08-22 05:14:54.885026"]]
  [1m[35m (8.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Edge"], ["associated_id", 16], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 16\nto_node_id: 17\n"], ["version", 1], ["request_uuid", "dfdfe62f-531e-4bd6-8c19-389fb4bececc"], ["created_at", "2019-08-22 05:14:54.916426"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (16.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mInputNode Destroy (3.2ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 16]]
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NodeTest: test_cascade_deletes_edges
------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:16:42.137827"], ["updated_at", "2019-08-22 05:16:42.137827"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (5.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 11], ["created_at", "2019-08-22 05:16:42.213965"], ["updated_at", "2019-08-22 05:16:42.213965"], ["type", "InputNode"]]
  [1m[35m (15.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 18], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 18], ["auditable_type", "Node"], ["associated_id", 11], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 11\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "dfabd603-238f-4bf1-aeab-8e38364666c7"], ["created_at", "2019-08-22 05:16:42.272570"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 11]]
  [1m[36mOutputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 11], ["created_at", "2019-08-22 05:16:42.361348"], ["updated_at", "2019-08-22 05:16:42.361348"], ["type", "OutputNode"]]
  [1m[35m (10.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Node"], ["associated_id", 11], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 11\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7119b4f6-3104-4c94-9607-60dafce4918d"], ["created_at", "2019-08-22 05:16:42.373152"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 18], ["to_node_id", 19], ["created_at", "2019-08-22 05:16:42.454402"], ["updated_at", "2019-08-22 05:16:42.454402"]]
  [1m[35m (7.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Edge"], ["associated_id", 18], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 18\nto_node_id: 19\n"], ["version", 1], ["request_uuid", "f34e5c24-de00-4e67-9aa3-00a2dabb53ca"], ["created_at", "2019-08-22 05:16:42.467637"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mInputNode Destroy (2.2ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 18]]
  [1m[35m (4.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NodeTest: test_cascade_deletes_edges
------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:17:34.101807"], ["updated_at", "2019-08-22 05:17:34.101807"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 12], ["created_at", "2019-08-22 05:17:34.184556"], ["updated_at", "2019-08-22 05:17:34.184556"], ["type", "InputNode"]]
  [1m[35m (18.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 20], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 20], ["auditable_type", "Node"], ["associated_id", 12], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 12\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cfd08397-d4a0-46b8-a64c-0c2b62efb7b0"], ["created_at", "2019-08-22 05:17:34.244321"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (9.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[36mOutputNode Create (2.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 12], ["created_at", "2019-08-22 05:17:34.324107"], ["updated_at", "2019-08-22 05:17:34.324107"], ["type", "OutputNode"]]
  [1m[35m (9.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Node"], ["associated_id", 12], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 12\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "326ffc28-7688-4148-a3c8-504319b8ca67"], ["created_at", "2019-08-22 05:17:34.333553"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 20], ["to_node_id", 21], ["created_at", "2019-08-22 05:17:34.408575"], ["updated_at", "2019-08-22 05:17:34.408575"]]
  [1m[35m (10.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Edge"], ["associated_id", 20], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 20\nto_node_id: 21\n"], ["version", 1], ["request_uuid", "23834f8e-e66d-4c86-a822-f2b8bd63b062"], ["created_at", "2019-08-22 05:17:34.422208"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (12.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 20]]
  [1m[35m (12.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Edge"], ["associated_id", 20], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nname: \nfrom_node_id: 20\nto_node_id: 21\n"], ["version", 2], ["request_uuid", "e69c795e-8b93-4cf9-bd46-d8251f43374c"], ["created_at", "2019-08-22 05:17:34.473510"]]
  [1m[36mEdge Destroy (4.0ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 9]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (4.8ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mEdge Load (6.8ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (12.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (11.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (4.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NodeTest: test_cascade_deletes_edges
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (6.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:18:14.058271"], ["updated_at", "2019-08-22 05:18:14.058271"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 13], ["created_at", "2019-08-22 05:18:14.223938"], ["updated_at", "2019-08-22 05:18:14.223938"], ["type", "InputNode"]]
  [1m[35m (16.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 22], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 22], ["auditable_type", "Node"], ["associated_id", 13], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 13\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "125184cc-fa98-4f89-a6fd-f1cf1c7ecf3c"], ["created_at", "2019-08-22 05:18:14.308478"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 13]]
  [1m[36mOutputNode Create (3.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 13], ["created_at", "2019-08-22 05:18:14.399310"], ["updated_at", "2019-08-22 05:18:14.399310"], ["type", "OutputNode"]]
  [1m[35m (10.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Node"], ["associated_id", 13], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 13\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "51729255-f283-4158-b71e-f64cb52ed431"], ["created_at", "2019-08-22 05:18:14.407610"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (5.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 22], ["to_node_id", 23], ["created_at", "2019-08-22 05:18:14.489155"], ["updated_at", "2019-08-22 05:18:14.489155"]]
  [1m[35m (10.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Edge"], ["associated_id", 22], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 22\nto_node_id: 23\n"], ["version", 1], ["request_uuid", "57389dd5-aa3d-4354-bf8d-a36e40bb9d1c"], ["created_at", "2019-08-22 05:18:14.504573"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (10.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (2.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 22]]
  [1m[35m (9.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Edge"], ["associated_id", 22], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nname: \nfrom_node_id: 22\nto_node_id: 23\n"], ["version", 2], ["request_uuid", "dfc78f38-4669-42bf-a73e-a44a8bf5ac4c"], ["created_at", "2019-08-22 05:18:14.557110"]]
  [1m[36mEdge Destroy (4.1ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 10]]
  [1m[36mEdge Load (4.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 22]]
  [1m[35m (12.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 22], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 22], ["auditable_type", "Node"], ["associated_id", 13], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 13\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "c6a1fdd7-cd83-4229-bf29-4d70996cc67a"], ["created_at", "2019-08-22 05:18:14.598254"]]
  [1m[36mInputNode Destroy (3.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 22]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NodeTest: test_cascade_deletes_edges
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:18:37.577010"], ["updated_at", "2019-08-22 05:18:37.577010"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 14], ["created_at", "2019-08-22 05:18:37.676152"], ["updated_at", "2019-08-22 05:18:37.676152"], ["type", "InputNode"]]
  [1m[35m (24.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Node"], ["associated_id", 14], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 14\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5931001f-9d23-455f-bf8f-3bcbfe297987"], ["created_at", "2019-08-22 05:18:37.755847"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 14]]
  [1m[36mOutputNode Create (2.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 14], ["created_at", "2019-08-22 05:18:37.855977"], ["updated_at", "2019-08-22 05:18:37.855977"], ["type", "OutputNode"]]
  [1m[35m (11.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 25], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 25], ["auditable_type", "Node"], ["associated_id", 14], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 14\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "342a400f-7d16-44d2-a2d9-4133c2256b7c"], ["created_at", "2019-08-22 05:18:37.866098"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.2ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 24], ["to_node_id", 25], ["created_at", "2019-08-22 05:18:37.952054"], ["updated_at", "2019-08-22 05:18:37.952054"]]
  [1m[35m (12.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Edge"], ["associated_id", 24], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 24\nto_node_id: 25\n"], ["version", 1], ["request_uuid", "0bdc8320-59f9-483a-a8b1-c8736bb6998c"], ["created_at", "2019-08-22 05:18:37.968349"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (11.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (6.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 24]]
  [1m[35m (10.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Edge"], ["associated_id", 24], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nname: \nfrom_node_id: 24\nto_node_id: 25\n"], ["version", 2], ["request_uuid", "f7d813c3-ef1a-42c7-b9f0-4c8285cc8686"], ["created_at", "2019-08-22 05:18:38.032979"]]
  [1m[36mEdge Destroy (3.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 11]]
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 24]]
  [1m[35m (8.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Node"], ["associated_id", 14], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 14\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "6106e823-e1c5-4498-b734-51ba6531e733"], ["created_at", "2019-08-22 05:18:38.070274"]]
  [1m[36mInputNode Destroy (4.4ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 24]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NodeTest: test_cascade_deletes_edges
------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:29:40.058070"], ["updated_at", "2019-08-22 05:29:40.058070"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 15], ["created_at", "2019-08-22 05:29:40.146280"], ["updated_at", "2019-08-22 05:29:40.146280"], ["type", "InputNode"]]
  [1m[35m (20.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 26], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 26], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e8bebb06-7b4c-4fab-ab7c-c4ed08068b97"], ["created_at", "2019-08-22 05:29:40.227907"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (11.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mOutputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 15], ["created_at", "2019-08-22 05:29:40.333214"], ["updated_at", "2019-08-22 05:29:40.333214"], ["type", "OutputNode"]]
  [1m[35m (9.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 27], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (8.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 27], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "56a72957-63c2-405f-9d3c-821ac09fe931"], ["created_at", "2019-08-22 05:29:40.345551"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 26], ["to_node_id", 27], ["created_at", "2019-08-22 05:29:40.434484"], ["updated_at", "2019-08-22 05:29:40.434484"]]
  [1m[35m (13.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Edge"], ["associated_id", 26], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 26\nto_node_id: 27\n"], ["version", 1], ["request_uuid", "99727305-11ad-4dfe-a4ce-db83bc034d11"], ["created_at", "2019-08-22 05:29:40.451716"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (12.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (14.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 26], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 26], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "c2042041-b391-47b2-8cab-5142960f1d00"], ["created_at", "2019-08-22 05:29:40.502222"]]
  [1m[36mInputNode Destroy (3.7ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 26]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:31:11.555792"], ["updated_at", "2019-08-22 05:31:11.555792"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (7.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 16], ["created_at", "2019-08-22 05:31:11.636442"], ["updated_at", "2019-08-22 05:31:11.636442"], ["type", "InputNode"]]
  [1m[35m (19.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 28], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 28], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c0f10eeb-2500-4857-b850-cb9532c9dbe5"], ["created_at", "2019-08-22 05:31:11.710776"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (9.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mOutputNode Create (4.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 16], ["created_at", "2019-08-22 05:31:11.816421"], ["updated_at", "2019-08-22 05:31:11.816421"], ["type", "OutputNode"]]
  [1m[35m (11.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 29], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 29], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "48f3f1e7-3f81-40ed-a5fa-df3e44224f34"], ["created_at", "2019-08-22 05:31:11.826933"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (5.3ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 28], ["to_node_id", 29], ["created_at", "2019-08-22 05:31:11.899119"], ["updated_at", "2019-08-22 05:31:11.899119"]]
  [1m[35m (10.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Edge"], ["associated_id", 28], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 28\nto_node_id: 29\n"], ["version", 1], ["request_uuid", "82f2de21-2124-49dc-b1ee-348440fb87f9"], ["created_at", "2019-08-22 05:31:11.908229"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (14.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (8.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 28]]
  [1m[35m (16.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (2.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Edge"], ["associated_id", 28], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nname: \nfrom_node_id: 28\nto_node_id: 29\n"], ["version", 2], ["request_uuid", "d3da6aa2-e350-4663-a453-84758fce0a6b"], ["created_at", "2019-08-22 05:31:11.962588"]]
  [1m[36mEdge Destroy (7.3ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 13]]
  [1m[36mEdge Load (5.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 28]]
  [1m[35m (11.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 28], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 28], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "74c7cd9d-c235-4cc4-a000-4c3b5ee54f6e"], ["created_at", "2019-08-22 05:31:12.005421"]]
  [1m[36mInputNode Destroy (4.3ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 28]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:32:05.546578"], ["updated_at", "2019-08-22 05:32:05.546578"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (7.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 17], ["created_at", "2019-08-22 05:32:05.561027"], ["updated_at", "2019-08-22 05:32:05.561027"], ["type", "InputNode"]]
  [1m[35m (17.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 30], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 30], ["auditable_type", "Node"], ["associated_id", 17], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 17\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5477ef0b-6e8b-44b7-b7b7-09fbc4b4a7ba"], ["created_at", "2019-08-22 05:32:05.624674"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:32:05.673844"], ["updated_at", "2019-08-22 05:32:05.673844"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 18], ["created_at", "2019-08-22 05:32:05.684221"], ["updated_at", "2019-08-22 05:32:05.684221"], ["type", "InputNode"]]
  [1m[35m (12.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 31], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 31], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 18\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f90b2bcc-9c27-4f5c-8bbb-66ee57d2c6c2"], ["created_at", "2019-08-22 05:32:05.691898"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mOutputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 18], ["created_at", "2019-08-22 05:32:05.767460"], ["updated_at", "2019-08-22 05:32:05.767460"], ["type", "OutputNode"]]
  [1m[35m (12.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 32], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 32], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 18\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e30cf672-15d5-4037-9f77-6cf67fb3010d"], ["created_at", "2019-08-22 05:32:05.793361"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 31], ["to_node_id", 32], ["created_at", "2019-08-22 05:32:05.864675"], ["updated_at", "2019-08-22 05:32:05.864675"]]
  [1m[35m (14.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Edge"], ["associated_id", 31], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 31\nto_node_id: 32\n"], ["version", 1], ["request_uuid", "e19ac0a1-8cf4-4339-8e88-875018746481"], ["created_at", "2019-08-22 05:32:05.874401"]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (12.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (5.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 31]]
  [1m[35m (14.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Edge"], ["associated_id", 31], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nname: \nfrom_node_id: 31\nto_node_id: 32\n"], ["version", 2], ["request_uuid", "06ece764-86a1-4603-8bd3-82b74e7eae67"], ["created_at", "2019-08-22 05:32:05.939021"]]
  [1m[36mEdge Destroy (4.7ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 14]]
  [1m[36mEdge Load (5.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 31]]
  [1m[35m (10.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 31], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 31], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 18\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "199c287b-c60c-42a6-97b3-4ef54b37461b"], ["created_at", "2019-08-22 05:32:06.008759"]]
  [1m[36mInputNode Destroy (4.3ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 31]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:32:41.705474"], ["updated_at", "2019-08-22 05:32:41.705474"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 19], ["created_at", "2019-08-22 05:32:41.716286"], ["updated_at", "2019-08-22 05:32:41.716286"], ["type", "InputNode"]]
  [1m[35m (14.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 33], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 33], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 19\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cc2edd78-903e-4197-a434-4dec7dfd6065"], ["created_at", "2019-08-22 05:32:41.773185"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (14.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mOutputNode Create (3.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 19], ["created_at", "2019-08-22 05:32:41.878621"], ["updated_at", "2019-08-22 05:32:41.878621"], ["type", "OutputNode"]]
  [1m[35m (65.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 34], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (10.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 34], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 19\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "80460c55-bcaa-4139-9dcb-d0a66f31d4fc"], ["created_at", "2019-08-22 05:32:41.891178"]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (5.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 33], ["to_node_id", 34], ["created_at", "2019-08-22 05:32:42.192875"], ["updated_at", "2019-08-22 05:32:42.192875"]]
  [1m[35m (7.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Edge"], ["associated_id", 33], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 33\nto_node_id: 34\n"], ["version", 1], ["request_uuid", "e8d3f6d9-fd16-46b7-bb8e-6cb784ea726f"], ["created_at", "2019-08-22 05:32:42.216071"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (36.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (8.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 34]]
  [1m[36mEdge Load (4.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 34]]
  [1m[36mNode Load (6.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[35m (15.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (2.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Edge"], ["associated_id", 33], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nname: \nfrom_node_id: 33\nto_node_id: 34\n"], ["version", 2], ["request_uuid", "84757909-4f47-40d1-a091-e46fc366cdc6"], ["created_at", "2019-08-22 05:32:42.498842"]]
  [1m[36mEdge Destroy (6.1ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 15]]
  [1m[35m (12.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 34], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 34], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 19\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "f3c73ea9-c285-404f-96e6-afd2b98aae63"], ["created_at", "2019-08-22 05:32:42.537799"]]
  [1m[36mOutputNode Destroy (3.2ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 34]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (10.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:32:42.600784"], ["updated_at", "2019-08-22 05:32:42.600784"]]
  [1m[35m (30.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (5.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 20], ["created_at", "2019-08-22 05:32:42.686267"], ["updated_at", "2019-08-22 05:32:42.686267"], ["type", "InputNode"]]
  [1m[35m (46.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 35], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 35], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 20\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "59c1929e-c769-40d8-9f05-f4509dedb47b"], ["created_at", "2019-08-22 05:32:42.709277"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:32:42.787738"], ["updated_at", "2019-08-22 05:32:42.787738"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 21], ["created_at", "2019-08-22 05:32:42.797315"], ["updated_at", "2019-08-22 05:32:42.797315"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 36], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 36], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 21\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "068e7352-b572-4df2-a835-22dda0a36b0c"], ["created_at", "2019-08-22 05:32:42.808972"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mOutputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 21], ["created_at", "2019-08-22 05:32:42.829537"], ["updated_at", "2019-08-22 05:32:42.829537"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 37], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 37], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 21\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b691cbf7-9988-4b1f-990f-7e10fa955702"], ["created_at", "2019-08-22 05:32:42.840377"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 36], ["to_node_id", 37], ["created_at", "2019-08-22 05:32:42.854951"], ["updated_at", "2019-08-22 05:32:42.854951"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Edge"], ["associated_id", 36], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nname: \nfrom_node_id: 36\nto_node_id: 37\n"], ["version", 1], ["request_uuid", "3275707a-d230-44d5-a1a1-2740c76139f0"], ["created_at", "2019-08-22 05:32:42.867574"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (22.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (4.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (22.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 36]]
  [1m[35m (3.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Edge"], ["associated_id", 36], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nname: \nfrom_node_id: 36\nto_node_id: 37\n"], ["version", 2], ["request_uuid", "432bde38-98a3-4c9a-9cd4-cbfe4156ffbd"], ["created_at", "2019-08-22 05:32:42.956425"]]
  [1m[36mEdge Destroy (5.0ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 16]]
  [1m[36mEdge Load (5.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 36]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 36], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 36], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 21\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "cb0f4df1-e3bd-4751-8832-c046d3bedfe1"], ["created_at", "2019-08-22 05:32:42.994308"]]
  [1m[36mInputNode Destroy (4.4ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 36]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (10.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (4.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (747.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "myapp_test"[0m
  [1m[35m (3336.6ms)[0m  [1m[35mCREATE DATABASE "myapp_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (5.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "audits" CASCADE[0m
  [1m[35m (114.4ms)[0m  [1m[35mCREATE TABLE "audits" ("id" bigserial primary key, "auditable_id" integer, "auditable_type" character varying, "associated_id" integer, "associated_type" character varying, "user_id" integer, "user_type" character varying, "username" character varying, "action" character varying, "audited_changes" text, "version" integer DEFAULT 0, "comment" character varying, "remote_address" character varying, "request_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE  INDEX  "associated_index" ON "audits"  ("associated_type", "associated_id")[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE  INDEX  "auditable_index" ON "audits"  ("auditable_type", "auditable_id", "version")[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_created_at" ON "audits"  ("created_at")[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_request_uuid" ON "audits"  ("request_uuid")[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE  INDEX  "user_index" ON "audits"  ("user_id", "user_type")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "edges" CASCADE[0m
  [1m[35m (34.4ms)[0m  [1m[35mCREATE TABLE "edges" ("id" bigserial primary key, "name" character varying, "from_node_id" bigint, "to_node_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_edges_on_from_node_id_and_to_node_id" ON "edges"  ("from_node_id", "to_node_id")[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_from_node_id" ON "edges"  ("from_node_id")[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_to_node_id" ON "edges"  ("to_node_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "graphs" CASCADE[0m
  [1m[35m (50.3ms)[0m  [1m[35mCREATE TABLE "graphs" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "type" character varying)[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "node_counts" CASCADE[0m
  [1m[35m (21.3ms)[0m  [1m[35mCREATE TABLE "node_counts" ("id" bigserial primary key, "count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "nodes" CASCADE[0m
  [1m[35m (38.4ms)[0m  [1m[35mCREATE TABLE "nodes" ("id" bigserial primary key, "name" character varying, "graph_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "content" json, "x" float DEFAULT 0.0, "y" float DEFAULT 0.0, "type" character varying NOT NULL, "node_ref_id" bigint)[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_graph_id" ON "nodes"  ("graph_id")[0m
  [1m[35m (13.3ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_node_ref_id" ON "nodes"  ("node_ref_id")[0m
  [1m[35m (25.1ms)[0m  [1m[35mALTER TABLE "nodes" ADD CONSTRAINT "fk_rails_10f83f4418"
FOREIGN KEY ("graph_id")
  REFERENCES "graphs" ("id")
[0m
  [1m[35m (32.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (9.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (3.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20190806132227)[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20190430113529),
(20190724110012),
(20190411085042),
(20190523112235),
(20190514095100),
(20190514093514),
(20190801105126),
(20190724105907),
(20190429092701),
(20190411113011),
(20190411100036);

[0m
  [1m[35m (32.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (5.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (4.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-08-22 05:52:28.762344"], ["updated_at", "2019-08-22 05:52:28.762344"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1235955690063948105)[0m
  [1m[35m (3.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveNameFromEdge (20190822055108)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.2ms)[0m  [1m[35mALTER TABLE "edges" DROP COLUMN "name"[0m
  [1m[36mActiveRecord::SchemaMigration Create (3.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190822055108"]]
  [1m[35m (3.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (5.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(1235955690063948105)[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (11.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (8.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 05:55:24.072107"], ["updated_at", "2019-08-22 05:55:24.072107"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (9.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 1]]
  [1m[36mOutputNode Create (15.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 1], ["created_at", "2019-08-22 05:55:24.182778"], ["updated_at", "2019-08-22 05:55:24.182778"], ["type", "OutputNode"]]
  [1m[35m (29.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (18.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Node"], ["associated_id", 1], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 1\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4cc45653-5646-4646-a1a9-64c47e254203"], ["created_at", "2019-08-22 05:55:24.255889"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:01:50.472514"], ["updated_at", "2019-08-22 06:01:50.472514"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[36mOutputNode Create (4.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 2], ["created_at", "2019-08-22 06:01:50.558459"], ["updated_at", "2019-08-22 06:01:50.558459"], ["type", "OutputNode"]]
  [1m[35m (14.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Node"], ["associated_id", 2], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 2\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bf4edc0a-21d3-4618-bfbe-5672217b93e8"], ["created_at", "2019-08-22 06:01:50.609145"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:01:50.669410"], ["updated_at", "2019-08-22 06:01:50.669410"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 3], ["created_at", "2019-08-22 06:01:50.709376"], ["updated_at", "2019-08-22 06:01:50.709376"], ["type", "InputNode"]]
  [1m[35m (6.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Node"], ["associated_id", 3], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 3\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "23086828-14a8-4788-ace4-112f3b752e40"], ["created_at", "2019-08-22 06:01:50.718813"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 3]]
  [1m[36mOutputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 3], ["created_at", "2019-08-22 06:01:50.744473"], ["updated_at", "2019-08-22 06:01:50.744473"], ["type", "OutputNode"]]
  [1m[35m (6.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Node"], ["associated_id", 3], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 3\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5d68f7f4-acb2-4c2b-8262-ea73e76b4e0e"], ["created_at", "2019-08-22 06:01:50.753914"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (14.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 3], ["to_node_id", 4], ["created_at", "2019-08-22 06:01:50.773019"], ["updated_at", "2019-08-22 06:01:50.773019"]]
  [1m[35m (6.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Edge"], ["associated_id", 3], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 3\nto_node_id: 4\n"], ["version", 1], ["request_uuid", "86a2459a-68bf-468b-99e5-0a64f1f423d2"], ["created_at", "2019-08-22 06:01:50.795602"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:01:50.825392"], ["updated_at", "2019-08-22 06:01:50.825392"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 4], ["created_at", "2019-08-22 06:01:50.835770"], ["updated_at", "2019-08-22 06:01:50.835770"], ["type", "InputNode"]]
  [1m[35m (9.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Node"], ["associated_id", 4], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 4\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d6de229d-a8dc-4667-9195-ab425e96f4d0"], ["created_at", "2019-08-22 06:01:50.847270"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:02:39.138440"], ["updated_at", "2019-08-22 06:02:39.138440"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 5]]
  [1m[36mOutputNode Create (3.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 5], ["created_at", "2019-08-22 06:02:39.225590"], ["updated_at", "2019-08-22 06:02:39.225590"], ["type", "OutputNode"]]
  [1m[35m (13.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 6], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 6], ["auditable_type", "Node"], ["associated_id", 5], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 5\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "32b02126-0656-4ee5-9ba7-05dfb53cbfb9"], ["created_at", "2019-08-22 06:02:39.274817"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:02:39.314200"], ["updated_at", "2019-08-22 06:02:39.314200"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 6], ["created_at", "2019-08-22 06:02:39.368630"], ["updated_at", "2019-08-22 06:02:39.368630"], ["type", "InputNode"]]
  [1m[35m (7.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Node"], ["associated_id", 6], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 6\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e54b5338-bdaa-451f-bcac-693262d0b602"], ["created_at", "2019-08-22 06:02:39.377750"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 6]]
  [1m[36mOutputNode Create (4.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 6], ["created_at", "2019-08-22 06:02:39.403712"], ["updated_at", "2019-08-22 06:02:39.403712"], ["type", "OutputNode"]]
  [1m[35m (11.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Node"], ["associated_id", 6], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 6\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8681c3f4-1f27-44a0-9751-17da69923547"], ["created_at", "2019-08-22 06:02:39.415176"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 7], ["to_node_id", 8], ["created_at", "2019-08-22 06:02:39.440387"], ["updated_at", "2019-08-22 06:02:39.440387"]]
  [1m[35m (7.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Edge"], ["associated_id", 7], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 7\nto_node_id: 8\n"], ["version", 1], ["request_uuid", "d5b61380-9369-49d4-9df2-4e4f57440225"], ["created_at", "2019-08-22 06:02:39.449448"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:02:39.476624"], ["updated_at", "2019-08-22 06:02:39.476624"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (4.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 7], ["created_at", "2019-08-22 06:02:39.484630"], ["updated_at", "2019-08-22 06:02:39.484630"], ["type", "InputNode"]]
  [1m[35m (8.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Node"], ["associated_id", 7], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 7\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7b67e65f-f76c-4535-91b1-c4f1d1e14078"], ["created_at", "2019-08-22 06:02:39.494940"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:02:39.532017"], ["updated_at", "2019-08-22 06:02:39.532017"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 8], ["created_at", "2019-08-22 06:02:39.541985"], ["updated_at", "2019-08-22 06:02:39.541985"], ["type", "InputNode"]]
  [1m[35m (10.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 8\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c954e3eb-c126-4d40-9ff4-c99cf59ec5eb"], ["created_at", "2019-08-22 06:02:39.551464"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[36mOutputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 8], ["created_at", "2019-08-22 06:02:39.580769"], ["updated_at", "2019-08-22 06:02:39.580769"], ["type", "OutputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 8\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "575b7647-e995-4869-8dd4-b352989fe416"], ["created_at", "2019-08-22 06:02:39.588635"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 10], ["to_node_id", 11], ["created_at", "2019-08-22 06:02:39.601251"], ["updated_at", "2019-08-22 06:02:39.601251"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Edge"], ["associated_id", 10], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 10\nto_node_id: 11\n"], ["version", 1], ["request_uuid", "1c7997e6-a639-46f7-8eeb-4e2193bd4a4c"], ["created_at", "2019-08-22 06:02:39.608950"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Edge"], ["associated_id", 10], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 10\nto_node_id: 11\n"], ["version", 2], ["request_uuid", "3d4d1220-4a63-4d15-b4c2-519d4edd8237"], ["created_at", "2019-08-22 06:02:39.621018"]]
  [1m[36mEdge Destroy (8.2ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:04:17.765352"], ["updated_at", "2019-08-22 06:04:17.765352"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 9]]
  [1m[36mOutputNode Create (4.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 9], ["created_at", "2019-08-22 06:04:17.879304"], ["updated_at", "2019-08-22 06:04:17.879304"], ["type", "OutputNode"]]
  [1m[35m (13.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Node"], ["associated_id", 9], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 9\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9faa14d6-9bd5-469e-9907-09dd432f8b7c"], ["created_at", "2019-08-22 06:04:17.963863"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:04:18.096953"], ["updated_at", "2019-08-22 06:04:18.096953"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 10], ["created_at", "2019-08-22 06:04:18.144219"], ["updated_at", "2019-08-22 06:04:18.144219"], ["type", "InputNode"]]
  [1m[35m (8.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Node"], ["associated_id", 10], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 10\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e149ac7d-f79c-46e7-bc8b-022f557a4946"], ["created_at", "2019-08-22 06:04:18.152700"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 10]]
  [1m[36mOutputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 10], ["created_at", "2019-08-22 06:04:18.187675"], ["updated_at", "2019-08-22 06:04:18.187675"], ["type", "OutputNode"]]
  [1m[35m (8.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Node"], ["associated_id", 10], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 10\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a64262e3-4d1e-4f0d-bf3c-c2d772eb3e9b"], ["created_at", "2019-08-22 06:04:18.195065"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 13], ["to_node_id", 14], ["created_at", "2019-08-22 06:04:18.213992"], ["updated_at", "2019-08-22 06:04:18.213992"]]
  [1m[35m (8.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Edge"], ["associated_id", 13], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 13\nto_node_id: 14\n"], ["version", 1], ["request_uuid", "6b196896-7245-4241-afbd-29d27d837fa5"], ["created_at", "2019-08-22 06:04:18.223953"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:04:18.281267"], ["updated_at", "2019-08-22 06:04:18.281267"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 11], ["created_at", "2019-08-22 06:04:18.292581"], ["updated_at", "2019-08-22 06:04:18.292581"], ["type", "InputNode"]]
  [1m[35m (13.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Node"], ["associated_id", 11], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 11\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5ea90f84-a1e9-4599-9cdb-8030912e5bb1"], ["created_at", "2019-08-22 06:04:18.303769"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 11]]
  [1m[36mOutputNode Create (3.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 11], ["created_at", "2019-08-22 06:04:18.335497"], ["updated_at", "2019-08-22 06:04:18.335497"], ["type", "OutputNode"]]
  [1m[35m (9.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Node"], ["associated_id", 11], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 11\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6788cc68-9332-4081-ba63-04468998eb9f"], ["created_at", "2019-08-22 06:04:18.344766"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 15], ["to_node_id", 16], ["created_at", "2019-08-22 06:04:18.366635"], ["updated_at", "2019-08-22 06:04:18.366635"]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (2.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Edge"], ["associated_id", 15], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 15\nto_node_id: 16\n"], ["version", 1], ["request_uuid", "b2309f59-1954-40cc-bed8-4514a170bd47"], ["created_at", "2019-08-22 06:04:18.373639"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Edge"], ["associated_id", 15], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 15\nto_node_id: 16\n"], ["version", 2], ["request_uuid", "8c471531-f9a8-46ab-a7e5-7c46c7693e50"], ["created_at", "2019-08-22 06:04:18.388675"]]
  [1m[36mEdge Destroy (6.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:04:18.423596"], ["updated_at", "2019-08-22 06:04:18.423596"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 12], ["created_at", "2019-08-22 06:04:18.433275"], ["updated_at", "2019-08-22 06:04:18.433275"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Node"], ["associated_id", 12], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 12\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b13a934e-2ac4-45c1-94fb-ac188741c270"], ["created_at", "2019-08-22 06:04:18.446971"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:06:27.490467"], ["updated_at", "2019-08-22 06:06:27.490467"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 13], ["created_at", "2019-08-22 06:06:27.570624"], ["updated_at", "2019-08-22 06:06:27.570624"], ["type", "InputNode"]]
  [1m[35m (17.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 18], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 18], ["auditable_type", "Node"], ["associated_id", 13], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 13\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "01121724-16d7-4f53-9ce9-6878f96dafc0"], ["created_at", "2019-08-22 06:06:27.631485"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 13]]
  [1m[36mOutputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 13], ["created_at", "2019-08-22 06:06:27.694531"], ["updated_at", "2019-08-22 06:06:27.694531"], ["type", "OutputNode"]]
  [1m[35m (10.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Node"], ["associated_id", 13], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 13\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "32a5b76f-6bcf-4764-aaf3-8ded6832598f"], ["created_at", "2019-08-22 06:06:27.700958"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 18], ["to_node_id", 19], ["created_at", "2019-08-22 06:06:27.768064"], ["updated_at", "2019-08-22 06:06:27.768064"]]
  [1m[35m (8.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 6], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 6], ["auditable_type", "Edge"], ["associated_id", 18], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 18\nto_node_id: 19\n"], ["version", 1], ["request_uuid", "a6a67350-51a3-4484-9c40-a662bba73557"], ["created_at", "2019-08-22 06:06:27.780861"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:06:27.816152"], ["updated_at", "2019-08-22 06:06:27.816152"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 14]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 14], ["created_at", "2019-08-22 06:06:27.849269"], ["updated_at", "2019-08-22 06:06:27.849269"], ["type", "OutputNode"]]
  [1m[35m (8.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 20], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 20], ["auditable_type", "Node"], ["associated_id", 14], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 14\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c8bc6a10-e04b-47a9-a73d-f65f62aa5312"], ["created_at", "2019-08-22 06:06:27.863147"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:06:27.928119"], ["updated_at", "2019-08-22 06:06:27.928119"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 15], ["created_at", "2019-08-22 06:06:27.935184"], ["updated_at", "2019-08-22 06:06:27.935184"], ["type", "InputNode"]]
  [1m[35m (10.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b4effa64-fcf2-4c3b-b3b7-bf81890b714a"], ["created_at", "2019-08-22 06:06:27.947679"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:06:27.985198"], ["updated_at", "2019-08-22 06:06:27.985198"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 16], ["created_at", "2019-08-22 06:06:27.993363"], ["updated_at", "2019-08-22 06:06:27.993363"], ["type", "InputNode"]]
  [1m[35m (9.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 22], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 22], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "79caf00b-233b-44e4-b8ac-5aa6fdb58b47"], ["created_at", "2019-08-22 06:06:28.002847"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mOutputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 16], ["created_at", "2019-08-22 06:06:28.026916"], ["updated_at", "2019-08-22 06:06:28.026916"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f77aa83a-ead0-4670-9c1c-1dab0f4e145c"], ["created_at", "2019-08-22 06:06:28.033100"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 22], ["to_node_id", 23], ["created_at", "2019-08-22 06:06:28.042633"], ["updated_at", "2019-08-22 06:06:28.042633"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Edge"], ["associated_id", 22], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 22\nto_node_id: 23\n"], ["version", 1], ["request_uuid", "afab675b-0be2-496f-b7d7-606e8697165a"], ["created_at", "2019-08-22 06:06:28.046795"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Edge"], ["associated_id", 22], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 22\nto_node_id: 23\n"], ["version", 2], ["request_uuid", "5de584ee-e3f5-49ce-be04-8188043a17c9"], ["created_at", "2019-08-22 06:06:28.056346"]]
  [1m[36mEdge Destroy (8.3ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (6.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:09:40.048900"], ["updated_at", "2019-08-22 06:09:40.048900"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (7.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 17], ["created_at", "2019-08-22 06:09:40.151010"], ["updated_at", "2019-08-22 06:09:40.151010"], ["type", "InputNode"]]
  [1m[35m (13.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Node"], ["associated_id", 17], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 17\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e986c906-9cc8-4b3c-99e6-d55989110644"], ["created_at", "2019-08-22 06:09:40.214832"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mOutputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 17], ["created_at", "2019-08-22 06:09:40.288629"], ["updated_at", "2019-08-22 06:09:40.288629"], ["type", "OutputNode"]]
  [1m[35m (7.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 25], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 25], ["auditable_type", "Node"], ["associated_id", 17], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 17\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7a37a633-c1e5-46d2-b033-20b849abbeb7"], ["created_at", "2019-08-22 06:09:40.296734"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 24], ["to_node_id", 25], ["created_at", "2019-08-22 06:09:40.352472"], ["updated_at", "2019-08-22 06:09:40.352472"]]
  [1m[35m (7.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Edge"], ["associated_id", 24], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 24\nto_node_id: 25\n"], ["version", 1], ["request_uuid", "d6830d8f-6865-4b84-bc1a-d10e57ca26ee"], ["created_at", "2019-08-22 06:09:40.363353"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:09:40.388014"], ["updated_at", "2019-08-22 06:09:40.388014"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 18], ["created_at", "2019-08-22 06:09:40.395056"], ["updated_at", "2019-08-22 06:09:40.395056"], ["type", "InputNode"]]
  [1m[35m (9.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 26], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 26], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 18\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "97b33118-5568-4c74-bd9b-bf71e6eb481a"], ["created_at", "2019-08-22 06:09:40.405261"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:09:40.464560"], ["updated_at", "2019-08-22 06:09:40.464560"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 19], ["created_at", "2019-08-22 06:09:40.474398"], ["updated_at", "2019-08-22 06:09:40.474398"], ["type", "InputNode"]]
  [1m[35m (9.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 27], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 27], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 19\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "87e94caf-7608-4b97-a130-73bae81060be"], ["created_at", "2019-08-22 06:09:40.486005"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 06:09:40.506589"], ["updated_at", "2019-08-22 06:09:40.506589"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mOutputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 20], ["created_at", "2019-08-22 06:09:40.518432"], ["updated_at", "2019-08-22 06:09:40.518432"], ["type", "OutputNode"]]
  [1m[35m (6.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 28], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 28], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 20\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1f875fd3-3f93-4a00-b718-38236bc2d04e"], ["created_at", "2019-08-22 06:09:40.526315"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:09:40.575845"], ["updated_at", "2019-08-22 06:09:40.575845"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 21], ["created_at", "2019-08-22 06:09:40.587226"], ["updated_at", "2019-08-22 06:09:40.587226"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 29], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 29], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 21\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d29fa764-08e4-457d-80db-3050f4eba484"], ["created_at", "2019-08-22 06:09:40.600981"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 21], ["created_at", "2019-08-22 06:09:40.622138"], ["updated_at", "2019-08-22 06:09:40.622138"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 30], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 30], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 21\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7b08c464-753a-442c-aece-87415bdb0266"], ["created_at", "2019-08-22 06:09:40.630411"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 29], ["to_node_id", 30], ["created_at", "2019-08-22 06:09:40.642721"], ["updated_at", "2019-08-22 06:09:40.642721"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Edge"], ["associated_id", 29], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 29\nto_node_id: 30\n"], ["version", 1], ["request_uuid", "6a8fdcc8-fc49-4b0d-97fc-aafe2b590ea7"], ["created_at", "2019-08-22 06:09:40.650338"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (6.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Edge"], ["associated_id", 29], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 29\nto_node_id: 30\n"], ["version", 2], ["request_uuid", "9642b063-19de-4c6b-9974-32f79762fe10"], ["created_at", "2019-08-22 06:09:40.664971"]]
  [1m[36mEdge Destroy (9.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 9]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:09:40.708248"], ["updated_at", "2019-08-22 06:09:40.708248"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mOutputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 22], ["created_at", "2019-08-22 06:09:40.726755"], ["updated_at", "2019-08-22 06:09:40.726755"], ["type", "OutputNode"]]
  [1m[35m (2.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 31], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 31], ["auditable_type", "Node"], ["associated_id", 22], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 22\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b8ed9540-ae76-478c-a77c-1ee11de865a5"], ["created_at", "2019-08-22 06:09:40.738822"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (5.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 06:18:07.572399"], ["updated_at", "2019-08-22 06:18:07.572399"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (12.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 23], ["created_at", "2019-08-22 06:18:07.581148"], ["updated_at", "2019-08-22 06:18:07.581148"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (20.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 32], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 32], ["auditable_type", "Node"], ["associated_id", 23], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 23\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7083e31e-e681-4007-9166-fa4b4c559f3c"], ["created_at", "2019-08-22 06:18:07.637516"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------
EdgesControllerTest: test_create
--------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:07.913112"], ["updated_at", "2019-08-22 06:18:07.913112"]]
  [1m[36mInputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 24], ["created_at", "2019-08-22 06:18:07.916160"], ["updated_at", "2019-08-22 06:18:07.916160"], ["type", "InputNode"]]
  [1m[35m (9.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 33], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 33], ["auditable_type", "Node"], ["associated_id", 24], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 24\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "525d0352-6bad-4f8a-8ead-70eb203b0367"], ["created_at", "2019-08-22 06:18:07.922770"]]
  [1m[36mOutputNode Create (2.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 24], ["created_at", "2019-08-22 06:18:07.938844"], ["updated_at", "2019-08-22 06:18:07.938844"], ["type", "OutputNode"]]
  [1m[35m (10.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 34], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 34], ["auditable_type", "Node"], ["associated_id", 24], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 24\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4d67aaa2-87a3-42b3-91b4-3e574ba41f60"], ["created_at", "2019-08-22 06:18:07.953837"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (12.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
Started POST "/graphs/24/edges" for 127.0.0.1 at 2019-08-22 06:18:08 +0000
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------
EdgesControllerTest: test_destroy
---------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:08.167904"], ["updated_at", "2019-08-22 06:18:08.167904"]]
  [1m[36mInputNode Create (3.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 25], ["created_at", "2019-08-22 06:18:08.177583"], ["updated_at", "2019-08-22 06:18:08.177583"], ["type", "InputNode"]]
  [1m[35m (11.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 35], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 35], ["auditable_type", "Node"], ["associated_id", 25], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 25\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9f6344bd-2455-4996-8b41-7b79c34b3d90"], ["created_at", "2019-08-22 06:18:08.198910"]]
  [1m[36mOutputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 25], ["created_at", "2019-08-22 06:18:08.226741"], ["updated_at", "2019-08-22 06:18:08.226741"], ["type", "OutputNode"]]
  [1m[35m (10.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 36], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 36], ["auditable_type", "Node"], ["associated_id", 25], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 25\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f824dd4a-99ce-4197-803e-899072f0099b"], ["created_at", "2019-08-22 06:18:08.241684"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/25/edges" for 127.0.0.1 at 2019-08-22 06:18:08 +0000
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:08.314569"], ["updated_at", "2019-08-22 06:18:08.314569"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 26], ["created_at", "2019-08-22 06:18:08.321331"], ["updated_at", "2019-08-22 06:18:08.321331"], ["type", "InputNode"]]
  [1m[35m (8.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 37], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 37], ["auditable_type", "Node"], ["associated_id", 26], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 26\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bc09dfc7-d045-4f6b-835a-37837ac67658"], ["created_at", "2019-08-22 06:18:08.326414"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 26]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 26], ["created_at", "2019-08-22 06:18:08.362416"], ["updated_at", "2019-08-22 06:18:08.362416"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 38], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 38], ["auditable_type", "Node"], ["associated_id", 26], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 26\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2282a480-b521-4cfa-9703-05cd15224a03"], ["created_at", "2019-08-22 06:18:08.368309"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (5.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mNode Load (7.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 26]]
  [1m[36mEdge Load (11.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 26]]
  [1m[36mEdge Load (9.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 26]]
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (3.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:08.528594"], ["updated_at", "2019-08-22 06:18:08.528594"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 27], ["created_at", "2019-08-22 06:18:08.545467"], ["updated_at", "2019-08-22 06:18:08.545467"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 39], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 39], ["auditable_type", "Node"], ["associated_id", 27], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 27\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "69ed2433-1584-4114-af20-9f532547c841"], ["created_at", "2019-08-22 06:18:08.552536"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 27], ["created_at", "2019-08-22 06:18:08.580042"], ["updated_at", "2019-08-22 06:18:08.580042"], ["type", "OutputNode"]]
  [1m[35m (1.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 40], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 40], ["auditable_type", "Node"], ["associated_id", 27], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 27\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0a3c2d94-48c4-4935-968b-6d63f102276e"], ["created_at", "2019-08-22 06:18:08.590483"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mNode Load (4.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.4ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 39], ["to_node_id", 40], ["created_at", "2019-08-22 06:18:08.645238"], ["updated_at", "2019-08-22 06:18:08.645238"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Edge"], ["associated_id", 39], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 39\nto_node_id: 40\n"], ["version", 1], ["request_uuid", "84a164ad-fc65-4dd0-a84e-aaa56b024799"], ["created_at", "2019-08-22 06:18:08.652358"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mEdge Load (7.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:08.699058"], ["updated_at", "2019-08-22 06:18:08.699058"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 28], ["created_at", "2019-08-22 06:18:08.707280"], ["updated_at", "2019-08-22 06:18:08.707280"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 41], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 41], ["auditable_type", "Node"], ["associated_id", 28], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 28\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b983e5f3-0131-4b75-b330-1642cf98650c"], ["created_at", "2019-08-22 06:18:08.716737"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 28], ["created_at", "2019-08-22 06:18:08.740770"], ["updated_at", "2019-08-22 06:18:08.740770"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 42], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 42], ["auditable_type", "Node"], ["associated_id", 28], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 28\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "50a61bf2-8521-4590-b3d3-ac3c78218f24"], ["created_at", "2019-08-22 06:18:08.749700"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (5.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mNode Load (8.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mEdge Load (11.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mEdge Load (11.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (6.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:08.862849"], ["updated_at", "2019-08-22 06:18:08.862849"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 29], ["created_at", "2019-08-22 06:18:08.874597"], ["updated_at", "2019-08-22 06:18:08.874597"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 43], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 43], ["auditable_type", "Node"], ["associated_id", 29], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 29\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e15d77b1-686e-4390-a80c-8a3a4c89483a"], ["created_at", "2019-08-22 06:18:08.882898"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 29], ["created_at", "2019-08-22 06:18:08.909944"], ["updated_at", "2019-08-22 06:18:08.909944"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 44], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 44], ["auditable_type", "Node"], ["associated_id", 29], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 29\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "23797051-3697-4faa-bb23-315699af1e3f"], ["created_at", "2019-08-22 06:18:08.923771"]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (4.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[36mEdge Load (19.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[36mEdge Load (8.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:09.006695"], ["updated_at", "2019-08-22 06:18:09.006695"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 30], ["created_at", "2019-08-22 06:18:09.012991"], ["updated_at", "2019-08-22 06:18:09.012991"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 45], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 45], ["auditable_type", "Node"], ["associated_id", 30], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 30\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e6a29f4f-4ca4-4ceb-a6f4-e67f13127a50"], ["created_at", "2019-08-22 06:18:09.021370"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 30], ["created_at", "2019-08-22 06:18:09.045860"], ["updated_at", "2019-08-22 06:18:09.045860"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 46], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 46], ["auditable_type", "Node"], ["associated_id", 30], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 30\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6f2454bf-b87f-47ea-8243-e0335430eb81"], ["created_at", "2019-08-22 06:18:09.052097"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (4.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mEdge Load (13.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mEdge Load (8.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:09.133412"], ["updated_at", "2019-08-22 06:18:09.133412"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 31], ["created_at", "2019-08-22 06:18:09.147877"], ["updated_at", "2019-08-22 06:18:09.147877"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 47], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 47], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 31\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e9982344-781e-4808-9b3d-8594f4efcf1c"], ["created_at", "2019-08-22 06:18:09.157055"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mOutputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 31], ["created_at", "2019-08-22 06:18:09.179366"], ["updated_at", "2019-08-22 06:18:09.179366"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 48], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 48], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 31\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "70e49b23-f31c-4da9-8161-1073133692da"], ["created_at", "2019-08-22 06:18:09.191164"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (3.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mEdge Load (11.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mEdge Load (14.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:09.264587"], ["updated_at", "2019-08-22 06:18:09.264587"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 32], ["created_at", "2019-08-22 06:18:09.275026"], ["updated_at", "2019-08-22 06:18:09.275026"], ["type", "InputNode"]]
  [1m[35m (2.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 49], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 49], ["auditable_type", "Node"], ["associated_id", 32], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 32\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6614e2b2-1e0a-4c38-bd90-a3864d8b7e25"], ["created_at", "2019-08-22 06:18:09.284314"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mOutputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 32], ["created_at", "2019-08-22 06:18:09.310409"], ["updated_at", "2019-08-22 06:18:09.310409"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 50], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 50], ["auditable_type", "Node"], ["associated_id", 32], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 32\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d9e57efa-883e-4d46-a5ef-cdd4ab25d60f"], ["created_at", "2019-08-22 06:18:09.320120"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (4.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:09.383772"], ["updated_at", "2019-08-22 06:18:09.383772"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mEdge Load (3.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:09.421939"], ["updated_at", "2019-08-22 06:18:09.421939"]]
  [1m[36mInputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 34], ["created_at", "2019-08-22 06:18:09.426366"], ["updated_at", "2019-08-22 06:18:09.426366"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 51], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 51], ["auditable_type", "Node"], ["associated_id", 34], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 34\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "dcb05dcf-012c-442a-8a29-99cadd4c1c28"], ["created_at", "2019-08-22 06:18:09.438032"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 34], ["created_at", "2019-08-22 06:18:09.452167"], ["updated_at", "2019-08-22 06:18:09.452167"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 52], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 52], ["auditable_type", "Node"], ["associated_id", 34], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 34\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6b1710d3-cfe8-43f0-8742-d4ef8d15d7db"], ["created_at", "2019-08-22 06:18:09.459119"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 34], ["created_at", "2019-08-22 06:18:09.474044"], ["updated_at", "2019-08-22 06:18:09.474044"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 53], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 53], ["auditable_type", "Node"], ["associated_id", 34], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 34\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c5a7920a-3929-4c7d-a229-a0c1be970437"], ["created_at", "2019-08-22 06:18:09.478097"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 51], ["to_node_id", 52], ["created_at", "2019-08-22 06:18:09.489546"], ["updated_at", "2019-08-22 06:18:09.489546"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Edge"], ["associated_id", 51], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 51\nto_node_id: 52\n"], ["version", 1], ["request_uuid", "cba0861d-c696-4b4e-8031-962c2852b478"], ["created_at", "2019-08-22 06:18:09.493176"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Edge"], ["associated_id", 51], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 52\n- 53\n"], ["version", 2], ["request_uuid", "30327686-85cc-4458-a02c-569b9e3715da"], ["created_at", "2019-08-22 06:18:09.501851"]]
  [1m[36mEdge Update (3.2ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 53], ["updated_at", "2019-08-22 06:18:09.500295"], ["id", 11]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[36mAudited::Audit Load (3.2ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 34], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.8ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 11], ["auditable_type", "Edge"]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mEdge Update (3.0ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 52], ["updated_at", "2019-08-22 06:18:09.545130"], ["id", 11]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.5ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 69]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[36mAudited::Audit Load (4.0ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 34], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (5.2ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 11], ["auditable_type", "Edge"]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mEdge Destroy (2.9ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 11]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (4.1ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 68]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:09.634703"], ["updated_at", "2019-08-22 06:18:09.634703"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 35], ["created_at", "2019-08-22 06:18:09.643131"], ["updated_at", "2019-08-22 06:18:09.643131"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 54], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 54], ["auditable_type", "Node"], ["associated_id", 35], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 35\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d050b9bb-24ab-4376-a063-ca7b8c78648f"], ["created_at", "2019-08-22 06:18:09.647241"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:09.693855"], ["updated_at", "2019-08-22 06:18:09.693855"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 36], ["created_at", "2019-08-22 06:18:09.699226"], ["updated_at", "2019-08-22 06:18:09.699226"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 55], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 55], ["auditable_type", "Node"], ["associated_id", 36], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 36\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0fd99306-57ce-4ab4-a633-b0bb74800211"], ["created_at", "2019-08-22 06:18:09.704637"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 36], ["created_at", "2019-08-22 06:18:09.720300"], ["updated_at", "2019-08-22 06:18:09.720300"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 56], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 56], ["auditable_type", "Node"], ["associated_id", 36], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 36\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c45db07d-8911-4390-a45a-e596e2eb9c4e"], ["created_at", "2019-08-22 06:18:09.724555"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 55], ["to_node_id", 56], ["created_at", "2019-08-22 06:18:09.731701"], ["updated_at", "2019-08-22 06:18:09.731701"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Edge"], ["associated_id", 55], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 55\nto_node_id: 56\n"], ["version", 1], ["request_uuid", "0e09196a-909d-485c-a8c8-7e721a757f39"], ["created_at", "2019-08-22 06:18:09.735172"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Edge"], ["associated_id", 55], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 55\nto_node_id: 56\n"], ["version", 2], ["request_uuid", "beb1db4b-f9aa-4f29-8d24-4fa9ddabe469"], ["created_at", "2019-08-22 06:18:09.743101"]]
  [1m[36mEdge Destroy (3.5ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 12]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:09.768725"], ["updated_at", "2019-08-22 06:18:09.768725"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 37], ["created_at", "2019-08-22 06:18:09.775100"], ["updated_at", "2019-08-22 06:18:09.775100"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 57], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 57], ["auditable_type", "Node"], ["associated_id", 37], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 37\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9a56e35a-869e-4b4c-b060-2165cfaef200"], ["created_at", "2019-08-22 06:18:09.783477"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:09.816512"], ["updated_at", "2019-08-22 06:18:09.816512"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 38], ["created_at", "2019-08-22 06:18:09.823860"], ["updated_at", "2019-08-22 06:18:09.823860"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 58], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 58], ["auditable_type", "Node"], ["associated_id", 38], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 38\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e33397e2-ea27-4feb-bcc2-32cb8c31c916"], ["created_at", "2019-08-22 06:18:09.829525"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 06:18:09.836469"], ["updated_at", "2019-08-22 06:18:09.836469"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mOutputNode Create (0.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 39], ["created_at", "2019-08-22 06:18:09.843699"], ["updated_at", "2019-08-22 06:18:09.843699"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 59], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 59], ["auditable_type", "Node"], ["associated_id", 39], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 39\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f24c8649-4579-42bb-8b23-dba27bf24045"], ["created_at", "2019-08-22 06:18:09.847483"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:09.864788"], ["updated_at", "2019-08-22 06:18:09.864788"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 40], ["created_at", "2019-08-22 06:18:09.870755"], ["updated_at", "2019-08-22 06:18:09.870755"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 60], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 60], ["auditable_type", "Node"], ["associated_id", 40], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 40\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f4d449e9-2c86-4e07-a1cf-65a190ba89b8"], ["created_at", "2019-08-22 06:18:09.875636"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 40], ["created_at", "2019-08-22 06:18:09.888429"], ["updated_at", "2019-08-22 06:18:09.888429"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 61], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 61], ["auditable_type", "Node"], ["associated_id", 40], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 40\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "60d64af6-ed23-4da8-987e-3e744effbaf2"], ["created_at", "2019-08-22 06:18:09.893149"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 60], ["to_node_id", 61], ["created_at", "2019-08-22 06:18:09.901708"], ["updated_at", "2019-08-22 06:18:09.901708"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Edge"], ["associated_id", 60], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 60\nto_node_id: 61\n"], ["version", 1], ["request_uuid", "9473e072-537c-4b37-9986-fb40a6bb9f51"], ["created_at", "2019-08-22 06:18:09.905206"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:09.921155"], ["updated_at", "2019-08-22 06:18:09.921155"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 41], ["created_at", "2019-08-22 06:18:09.926564"], ["updated_at", "2019-08-22 06:18:09.926564"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 62], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 62], ["auditable_type", "Node"], ["associated_id", 41], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 41\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f93ab8f0-0812-4f3a-b985-08e6e5989a51"], ["created_at", "2019-08-22 06:18:09.930464"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:09.952164"], ["updated_at", "2019-08-22 06:18:09.952164"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 42], ["created_at", "2019-08-22 06:18:09.958128"], ["updated_at", "2019-08-22 06:18:09.958128"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 63], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 63], ["auditable_type", "Node"], ["associated_id", 42], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 42\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "971d11db-1d96-4de9-90d8-dc779f1b40af"], ["created_at", "2019-08-22 06:18:09.963757"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 42]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 42], ["created_at", "2019-08-22 06:18:09.980043"], ["updated_at", "2019-08-22 06:18:09.980043"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 64], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 64], ["auditable_type", "Node"], ["associated_id", 42], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 42\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "90666f54-0bfa-412b-8732-b6d816180d0e"], ["created_at", "2019-08-22 06:18:09.984001"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 63], ["to_node_id", 64], ["created_at", "2019-08-22 06:18:09.991631"], ["updated_at", "2019-08-22 06:18:09.991631"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Edge"], ["associated_id", 63], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 63\nto_node_id: 64\n"], ["version", 1], ["request_uuid", "c26b9763-2152-4854-90f1-16f420c367bb"], ["created_at", "2019-08-22 06:18:09.995075"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 63]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Edge"], ["associated_id", 63], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 63\nto_node_id: 64\n"], ["version", 2], ["request_uuid", "e231aa23-5b84-4318-b4fb-0a569bae99a5"], ["created_at", "2019-08-22 06:18:10.012778"]]
  [1m[36mEdge Destroy (2.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 14]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 63]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 63], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 63], ["auditable_type", "Node"], ["associated_id", 42], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 42\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "2805f4c3-30f8-4d8b-8a2e-cbf11d1da135"], ["created_at", "2019-08-22 06:18:10.026702"]]
  [1m[36mInputNode Destroy (2.2ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 63]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:10.055434"], ["updated_at", "2019-08-22 06:18:10.055434"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 43], ["created_at", "2019-08-22 06:18:10.065565"], ["updated_at", "2019-08-22 06:18:10.065565"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 65], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 65], ["auditable_type", "Node"], ["associated_id", 43], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 43\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4c35207f-eac7-454e-8b3c-3231a38d872e"], ["created_at", "2019-08-22 06:18:10.069558"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 43]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 43], ["created_at", "2019-08-22 06:18:10.079753"], ["updated_at", "2019-08-22 06:18:10.079753"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 66], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 66], ["auditable_type", "Node"], ["associated_id", 43], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 43\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b760c57b-8319-49c7-8ff3-af25ddb24022"], ["created_at", "2019-08-22 06:18:10.083685"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 65], ["to_node_id", 66], ["created_at", "2019-08-22 06:18:10.093119"], ["updated_at", "2019-08-22 06:18:10.093119"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Edge"], ["associated_id", 65], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 65\nto_node_id: 66\n"], ["version", 1], ["request_uuid", "cb2f1419-cc04-445e-9d96-b6afe70e17ac"], ["created_at", "2019-08-22 06:18:10.098552"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 66]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 66]]
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Edge"], ["associated_id", 65], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 65\nto_node_id: 66\n"], ["version", 2], ["request_uuid", "434187eb-879a-4fe4-9592-8884935f469f"], ["created_at", "2019-08-22 06:18:10.123653"]]
  [1m[36mEdge Destroy (3.3ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 15]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 66], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 66], ["auditable_type", "Node"], ["associated_id", 43], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 43\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "2b6224ac-f794-48f0-ba93-229fe174f695"], ["created_at", "2019-08-22 06:18:10.133504"]]
  [1m[36mOutputNode Destroy (2.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 66]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (3.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 06:18:56.251827"], ["updated_at", "2019-08-22 06:18:56.251827"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (11.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 44], ["created_at", "2019-08-22 06:18:56.258281"], ["updated_at", "2019-08-22 06:18:56.258281"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (14.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 67], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 67], ["auditable_type", "Node"], ["associated_id", 44], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 44\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a6b1536c-d6dd-4369-8878-f025a6731314"], ["created_at", "2019-08-22 06:18:56.330195"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:56.370574"], ["updated_at", "2019-08-22 06:18:56.370574"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 45], ["created_at", "2019-08-22 06:18:56.381395"], ["updated_at", "2019-08-22 06:18:56.381395"], ["type", "InputNode"]]
  [1m[35m (8.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 68], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 68], ["auditable_type", "Node"], ["associated_id", 45], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 45\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c4f2804e-89d9-4f33-ac29-2838f3c3400c"], ["created_at", "2019-08-22 06:18:56.396323"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 45]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 45], ["created_at", "2019-08-22 06:18:56.446883"], ["updated_at", "2019-08-22 06:18:56.446883"], ["type", "OutputNode"]]
  [1m[35m (7.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 69], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 69], ["auditable_type", "Node"], ["associated_id", 45], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 45\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a288f401-60f3-4a3b-b32e-eb9b1207dc8e"], ["created_at", "2019-08-22 06:18:56.456101"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 68], ["to_node_id", 69], ["created_at", "2019-08-22 06:18:56.537207"], ["updated_at", "2019-08-22 06:18:56.537207"]]
  [1m[35m (7.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Edge"], ["associated_id", 68], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 68\nto_node_id: 69\n"], ["version", 1], ["request_uuid", "c924c1c2-2883-4bb5-bfbf-18d8086802ac"], ["created_at", "2019-08-22 06:18:56.546184"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 68]]
  [1m[35m (8.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Edge"], ["associated_id", 68], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 68\nto_node_id: 69\n"], ["version", 2], ["request_uuid", "459b2b26-6307-4a53-85d7-f83c9a5053b4"], ["created_at", "2019-08-22 06:18:56.577550"]]
  [1m[36mEdge Destroy (3.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 16]]
  [1m[36mEdge Load (3.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 68]]
  [1m[35m (8.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 68], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 68], ["auditable_type", "Node"], ["associated_id", 45], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 45\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "8cd522de-901f-40b4-b018-eae0ba1b277e"], ["created_at", "2019-08-22 06:18:56.605058"]]
  [1m[36mInputNode Destroy (3.0ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 68]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:56.638898"], ["updated_at", "2019-08-22 06:18:56.638898"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 46], ["created_at", "2019-08-22 06:18:56.647537"], ["updated_at", "2019-08-22 06:18:56.647537"], ["type", "InputNode"]]
  [1m[35m (2.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 70], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 70], ["auditable_type", "Node"], ["associated_id", 46], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 46\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "dc4779a7-b364-4b99-81c5-e6b60d2bcd07"], ["created_at", "2019-08-22 06:18:56.664477"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:56.731943"], ["updated_at", "2019-08-22 06:18:56.731943"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 47], ["created_at", "2019-08-22 06:18:56.740670"], ["updated_at", "2019-08-22 06:18:56.740670"], ["type", "InputNode"]]
  [1m[35m (2.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 71], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 71], ["auditable_type", "Node"], ["associated_id", 47], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 47\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "829a558c-0422-4a2a-8633-f45d5bd685a7"], ["created_at", "2019-08-22 06:18:56.752168"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 47]]
  [1m[36mOutputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 47], ["created_at", "2019-08-22 06:18:56.773454"], ["updated_at", "2019-08-22 06:18:56.773454"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 72], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 72], ["auditable_type", "Node"], ["associated_id", 47], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 47\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "81226d57-1857-468b-859d-03492fac91de"], ["created_at", "2019-08-22 06:18:56.779506"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 71], ["to_node_id", 72], ["created_at", "2019-08-22 06:18:56.790664"], ["updated_at", "2019-08-22 06:18:56.790664"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Edge"], ["associated_id", 71], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 71\nto_node_id: 72\n"], ["version", 1], ["request_uuid", "dd8b724e-3a7c-4fdc-84ec-3ae0579468fb"], ["created_at", "2019-08-22 06:18:56.797855"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (4.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 72]]
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 72]]
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Edge"], ["associated_id", 71], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 71\nto_node_id: 72\n"], ["version", 2], ["request_uuid", "9df628b9-bf5d-4ba7-8121-601fae38f1c0"], ["created_at", "2019-08-22 06:18:56.832848"]]
  [1m[36mEdge Destroy (2.9ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 17]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 72], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 72], ["auditable_type", "Node"], ["associated_id", 47], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 47\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "bc6690a5-5f88-4003-aa85-f857fc44e9d9"], ["created_at", "2019-08-22 06:18:56.843808"]]
  [1m[36mOutputNode Destroy (3.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 72]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (2.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:56.888375"], ["updated_at", "2019-08-22 06:18:56.888375"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 48], ["created_at", "2019-08-22 06:18:56.894101"], ["updated_at", "2019-08-22 06:18:56.894101"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 73], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 73], ["auditable_type", "Node"], ["associated_id", 48], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 48\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2dd32833-e811-40bb-96f2-2039f400185b"], ["created_at", "2019-08-22 06:18:56.899472"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 48]]
  [1m[36mOutputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 48], ["created_at", "2019-08-22 06:18:56.921830"], ["updated_at", "2019-08-22 06:18:56.921830"], ["type", "OutputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 74], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 74], ["auditable_type", "Node"], ["associated_id", 48], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 48\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5a8c307a-ec90-4515-bcf3-5a16feebf95e"], ["created_at", "2019-08-22 06:18:56.935941"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (11.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  [1m[36mNode Load (6.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 48]]
  [1m[36mEdge Load (6.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 48]]
  [1m[36mEdge Load (6.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 48]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:57.048341"], ["updated_at", "2019-08-22 06:18:57.048341"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 49], ["created_at", "2019-08-22 06:18:57.068974"], ["updated_at", "2019-08-22 06:18:57.068974"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 75], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 75], ["auditable_type", "Node"], ["associated_id", 49], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 49\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4514706c-2db1-402c-8614-cfc5abb6310f"], ["created_at", "2019-08-22 06:18:57.088814"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 49]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 49], ["created_at", "2019-08-22 06:18:57.113560"], ["updated_at", "2019-08-22 06:18:57.113560"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 76], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 76], ["auditable_type", "Node"], ["associated_id", 49], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 49\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a692c0e2-afab-40bb-b0d2-2b02f1661966"], ["created_at", "2019-08-22 06:18:57.122480"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 49]]
  [1m[36mEdge Load (10.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 49]]
  [1m[36mEdge Load (9.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 49]]
  [1m[35m (6.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:57.200939"], ["updated_at", "2019-08-22 06:18:57.200939"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 50], ["created_at", "2019-08-22 06:18:57.206897"], ["updated_at", "2019-08-22 06:18:57.206897"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 77], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 77], ["auditable_type", "Node"], ["associated_id", 50], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 50\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "be9040c8-48c1-418d-924f-eca94acb2063"], ["created_at", "2019-08-22 06:18:57.215198"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 50]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 50], ["created_at", "2019-08-22 06:18:57.238938"], ["updated_at", "2019-08-22 06:18:57.238938"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 78], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 78], ["auditable_type", "Node"], ["associated_id", 50], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 50\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "18b87514-24be-4e99-8003-3a7a63bbfc61"], ["created_at", "2019-08-22 06:18:57.244529"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (3.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[36mNode Load (5.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 50]]
  [1m[36mEdge Load (12.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 50]]
  [1m[36mEdge Load (8.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 50]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:57.343311"], ["updated_at", "2019-08-22 06:18:57.343311"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 51], ["created_at", "2019-08-22 06:18:57.354727"], ["updated_at", "2019-08-22 06:18:57.354727"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 79], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 79], ["auditable_type", "Node"], ["associated_id", 51], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 51\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e40fc58f-f0ec-4790-bf04-9502ce2d8f43"], ["created_at", "2019-08-22 06:18:57.360338"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 51]]
  [1m[36mOutputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 51], ["created_at", "2019-08-22 06:18:57.405846"], ["updated_at", "2019-08-22 06:18:57.405846"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 80], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 80], ["auditable_type", "Node"], ["associated_id", 51], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 51\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ca6c6f02-eca8-4f4b-9514-014d700d4106"], ["created_at", "2019-08-22 06:18:57.418926"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (3.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 51]]
  [1m[36mEdge Load (16.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 51]]
  [1m[36mEdge Load (8.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 51]]
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (3.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:57.525163"], ["updated_at", "2019-08-22 06:18:57.525163"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 52], ["created_at", "2019-08-22 06:18:57.542524"], ["updated_at", "2019-08-22 06:18:57.542524"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 81], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 81], ["auditable_type", "Node"], ["associated_id", 52], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 52\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "35f7a84c-472f-4753-989b-a2a90fe2d758"], ["created_at", "2019-08-22 06:18:57.551263"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 52]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 52], ["created_at", "2019-08-22 06:18:57.563700"], ["updated_at", "2019-08-22 06:18:57.563700"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 82], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 82], ["auditable_type", "Node"], ["associated_id", 52], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 52\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5b37a7a1-5702-4574-b455-4614bc455b72"], ["created_at", "2019-08-22 06:18:57.571593"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 52]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 81], ["to_node_id", 82], ["created_at", "2019-08-22 06:18:57.599792"], ["updated_at", "2019-08-22 06:18:57.599792"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 18], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 18], ["auditable_type", "Edge"], ["associated_id", 81], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 81\nto_node_id: 82\n"], ["version", 1], ["request_uuid", "ce2696fe-5259-45a7-a314-93414a140c57"], ["created_at", "2019-08-22 06:18:57.603977"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (12.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 52]]
  [1m[36mEdge Load (9.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 52]]
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:57.657471"], ["updated_at", "2019-08-22 06:18:57.657471"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 53], ["created_at", "2019-08-22 06:18:57.664126"], ["updated_at", "2019-08-22 06:18:57.664126"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 83], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 83], ["auditable_type", "Node"], ["associated_id", 53], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 53\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cb3b29ce-b030-47ed-8241-284839a36ab6"], ["created_at", "2019-08-22 06:18:57.668598"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 53]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 53], ["created_at", "2019-08-22 06:18:57.690744"], ["updated_at", "2019-08-22 06:18:57.690744"], ["type", "OutputNode"]]
  [1m[35m (2.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 84], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 84], ["auditable_type", "Node"], ["associated_id", 53], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 53\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e875fa77-e850-4f6f-bd00-1bacc752d4bf"], ["created_at", "2019-08-22 06:18:57.696033"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 53]]
  [1m[36mEdge Load (19.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 53]]
  [1m[36mEdge Load (8.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 53]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:57.783870"], ["updated_at", "2019-08-22 06:18:57.783870"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 54]]
  [1m[36mEdge Load (1.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 54]]
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:57.825826"], ["updated_at", "2019-08-22 06:18:57.825826"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 55], ["created_at", "2019-08-22 06:18:57.838465"], ["updated_at", "2019-08-22 06:18:57.838465"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 85], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 85], ["auditable_type", "Node"], ["associated_id", 55], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 55\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5bcf5570-4838-4c16-85dd-69d46976db49"], ["created_at", "2019-08-22 06:18:57.851388"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 55]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 55], ["created_at", "2019-08-22 06:18:57.869971"], ["updated_at", "2019-08-22 06:18:57.869971"], ["type", "OutputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 86], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 86], ["auditable_type", "Node"], ["associated_id", 55], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 55\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "034e32fe-9e3c-4527-a9f4-f472ef1cc251"], ["created_at", "2019-08-22 06:18:57.886568"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 55]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 55]]
  [1m[36mEdge Load (4.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 55]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:57.944665"], ["updated_at", "2019-08-22 06:18:57.944665"]]
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 56], ["created_at", "2019-08-22 06:18:57.948408"], ["updated_at", "2019-08-22 06:18:57.948408"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 87], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 87], ["auditable_type", "Node"], ["associated_id", 56], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 56\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "01a9587e-45d2-4355-8d8c-d188ad5baca9"], ["created_at", "2019-08-22 06:18:57.954909"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 56], ["created_at", "2019-08-22 06:18:57.966163"], ["updated_at", "2019-08-22 06:18:57.966163"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 88], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 88], ["auditable_type", "Node"], ["associated_id", 56], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 56\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "602e6bdf-5c15-4a3a-a460-23ab4fa8b721"], ["created_at", "2019-08-22 06:18:57.970405"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 56], ["created_at", "2019-08-22 06:18:57.977664"], ["updated_at", "2019-08-22 06:18:57.977664"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 89], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 89], ["auditable_type", "Node"], ["associated_id", 56], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 56\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cae02a3e-2e67-406b-8383-b0c71711777c"], ["created_at", "2019-08-22 06:18:57.981597"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 87], ["to_node_id", 88], ["created_at", "2019-08-22 06:18:57.993905"], ["updated_at", "2019-08-22 06:18:57.993905"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Edge"], ["associated_id", 87], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 87\nto_node_id: 88\n"], ["version", 1], ["request_uuid", "4ed10dfc-86c9-4fa8-b88f-cdea9783753d"], ["created_at", "2019-08-22 06:18:57.997451"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Edge"], ["associated_id", 87], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 88\n- 89\n"], ["version", 2], ["request_uuid", "d6beffbf-0db3-4187-961e-3a618d6e8129"], ["created_at", "2019-08-22 06:18:58.006287"]]
  [1m[36mEdge Update (3.7ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 89], ["updated_at", "2019-08-22 06:18:58.004690"], ["id", 19]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 56]]
  [1m[36mEdge Load (3.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 56]]
  [1m[36mAudited::Audit Load (4.7ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 56], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (4.8ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 19], ["auditable_type", "Edge"]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  [1m[36mEdge Update (3.5ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 88], ["updated_at", "2019-08-22 06:18:58.054994"], ["id", 19]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (4.8ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 123]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  [1m[36mEdge Load (5.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 56]]
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 56]]
  [1m[36mAudited::Audit Load (4.7ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 56], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (5.3ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 19], ["auditable_type", "Edge"]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  [1m[36mEdge Destroy (3.7ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 19]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (4.5ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 122]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[36mEdge Load (4.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 56]]
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 56]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:58.156072"], ["updated_at", "2019-08-22 06:18:58.156072"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 57]]
  [1m[36mOutputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 57], ["created_at", "2019-08-22 06:18:58.169218"], ["updated_at", "2019-08-22 06:18:58.169218"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 90], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 90], ["auditable_type", "Node"], ["associated_id", 57], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 57\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0d602be5-6f78-4498-a2b3-6138c81c7145"], ["created_at", "2019-08-22 06:18:58.175111"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:58.198656"], ["updated_at", "2019-08-22 06:18:58.198656"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 58], ["created_at", "2019-08-22 06:18:58.206900"], ["updated_at", "2019-08-22 06:18:58.206900"], ["type", "InputNode"]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 91], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 91], ["auditable_type", "Node"], ["associated_id", 58], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 58\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5bd39dc0-59fb-4df6-9cce-31957be5ab29"], ["created_at", "2019-08-22 06:18:58.211546"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 58]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 58], ["created_at", "2019-08-22 06:18:58.229564"], ["updated_at", "2019-08-22 06:18:58.229564"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 92], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 92], ["auditable_type", "Node"], ["associated_id", 58], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 58\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "28a1624b-9276-44dd-980a-0d20b2de19c8"], ["created_at", "2019-08-22 06:18:58.233901"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 91], ["to_node_id", 92], ["created_at", "2019-08-22 06:18:58.244371"], ["updated_at", "2019-08-22 06:18:58.244371"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 20], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 20], ["auditable_type", "Edge"], ["associated_id", 91], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 91\nto_node_id: 92\n"], ["version", 1], ["request_uuid", "673839d0-4910-46b5-8186-9840592e2dcf"], ["created_at", "2019-08-22 06:18:58.250768"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:58.281063"], ["updated_at", "2019-08-22 06:18:58.281063"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 59], ["created_at", "2019-08-22 06:18:58.285514"], ["updated_at", "2019-08-22 06:18:58.285514"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 93], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 93], ["auditable_type", "Node"], ["associated_id", 59], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 59\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a9baeb54-f520-4264-97be-7004c8a54674"], ["created_at", "2019-08-22 06:18:58.292645"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:58.315775"], ["updated_at", "2019-08-22 06:18:58.315775"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 60], ["created_at", "2019-08-22 06:18:58.321648"], ["updated_at", "2019-08-22 06:18:58.321648"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 94], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 94], ["auditable_type", "Node"], ["associated_id", 60], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 60\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "73a56329-d4e5-4b4a-9976-bb0397bc9c6f"], ["created_at", "2019-08-22 06:18:58.325700"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 06:18:58.335392"], ["updated_at", "2019-08-22 06:18:58.335392"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 61]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 61], ["created_at", "2019-08-22 06:18:58.346151"], ["updated_at", "2019-08-22 06:18:58.346151"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 95], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 95], ["auditable_type", "Node"], ["associated_id", 61], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 61\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b6d95d90-60d0-4072-9765-5fd1be213f53"], ["created_at", "2019-08-22 06:18:58.349913"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:18:58.369714"], ["updated_at", "2019-08-22 06:18:58.369714"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 62], ["created_at", "2019-08-22 06:18:58.377560"], ["updated_at", "2019-08-22 06:18:58.377560"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 96], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 96], ["auditable_type", "Node"], ["associated_id", 62], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 62\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "51c441b5-f82e-447c-aa21-555479661f55"], ["created_at", "2019-08-22 06:18:58.382079"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 62]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 62], ["created_at", "2019-08-22 06:18:58.402859"], ["updated_at", "2019-08-22 06:18:58.402859"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 97], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 97], ["auditable_type", "Node"], ["associated_id", 62], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 62\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b1a4c65c-4299-4b41-bb0f-7bf747a9005f"], ["created_at", "2019-08-22 06:18:58.407075"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 96], ["to_node_id", 97], ["created_at", "2019-08-22 06:18:58.414951"], ["updated_at", "2019-08-22 06:18:58.414951"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Edge"], ["associated_id", 96], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 96\nto_node_id: 97\n"], ["version", 1], ["request_uuid", "906e9d4a-ee0f-42de-9313-dc31d2f65d78"], ["created_at", "2019-08-22 06:18:58.418705"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Edge"], ["associated_id", 96], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 96\nto_node_id: 97\n"], ["version", 2], ["request_uuid", "538832c6-0e55-47bf-b831-74d531a951fd"], ["created_at", "2019-08-22 06:18:58.426619"]]
  [1m[36mEdge Destroy (3.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 21]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:20:58.460732"], ["updated_at", "2019-08-22 06:20:58.460732"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (8.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 63], ["created_at", "2019-08-22 06:20:58.529626"], ["updated_at", "2019-08-22 06:20:58.529626"], ["type", "InputNode"]]
  [1m[35m (15.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 98], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 98], ["auditable_type", "Node"], ["associated_id", 63], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 63\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9e432088-13b7-4ca8-81a7-f100206eaff3"], ["created_at", "2019-08-22 06:20:58.581982"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (11.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 63]]
  [1m[36mOutputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 63], ["created_at", "2019-08-22 06:20:58.664178"], ["updated_at", "2019-08-22 06:20:58.664178"], ["type", "OutputNode"]]
  [1m[35m (7.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 99], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 99], ["auditable_type", "Node"], ["associated_id", 63], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 63\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "03ed2fcf-c5ac-4aa1-a435-05b783587df0"], ["created_at", "2019-08-22 06:20:58.681022"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (7.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  [1m[36mNode Load (6.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 63]]
  [1m[36mEdge Load (11.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 63]]
  [1m[36mEdge Load (5.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 63]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:21:53.808327"], ["updated_at", "2019-08-22 06:21:53.808327"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (9.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 64], ["created_at", "2019-08-22 06:21:53.900385"], ["updated_at", "2019-08-22 06:21:53.900385"], ["type", "InputNode"]]
  [1m[35m (18.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 100], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 100], ["auditable_type", "Node"], ["associated_id", 64], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 64\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7c843b38-d838-447a-9aa5-7cd32b79928b"], ["created_at", "2019-08-22 06:21:53.987524"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 64]]
  [1m[36mOutputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 64], ["created_at", "2019-08-22 06:21:54.050453"], ["updated_at", "2019-08-22 06:21:54.050453"], ["type", "OutputNode"]]
  [1m[35m (8.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 101], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 101], ["auditable_type", "Node"], ["associated_id", 64], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 64\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b166492b-2505-4099-acfe-bc672b7d7f54"], ["created_at", "2019-08-22 06:21:54.056875"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 64]]
  [1m[36mEdge Load (17.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 64]]
  [1m[36mEdge Load (8.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 64]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:38:25.002188"], ["updated_at", "2019-08-22 06:38:25.002188"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:38:58.699645"], ["updated_at", "2019-08-22 06:38:58.699645"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (4.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:41:14.998977"], ["updated_at", "2019-08-22 06:41:14.998977"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (20.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (47.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:41:15.474915"], ["updated_at", "2019-08-22 06:41:15.474915"]]
  [1m[35m (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:41:15.709956"], ["updated_at", "2019-08-22 06:41:15.709956"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (5.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:41:15.917263"], ["updated_at", "2019-08-22 06:41:15.917263"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:41:16.847782"], ["updated_at", "2019-08-22 06:41:16.847782"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:41:17.609374"], ["updated_at", "2019-08-22 06:41:17.609374"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (16.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:41:18.017368"], ["updated_at", "2019-08-22 06:41:18.017368"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:41:18.892022"], ["updated_at", "2019-08-22 06:41:18.892022"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (14.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:41:40.801332"], ["updated_at", "2019-08-22 06:41:40.801332"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (5.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:42:37.155681"], ["updated_at", "2019-08-22 06:42:37.155681"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (5.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:45:00.194860"], ["updated_at", "2019-08-22 06:45:00.194860"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  [1m[36mEdge Load (26.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 77]]
  [1m[36mEdge Load (14.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 77]]
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:45:10.797878"], ["updated_at", "2019-08-22 06:45:10.797878"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (8.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 78], ["created_at", "2019-08-22 06:45:10.916489"], ["updated_at", "2019-08-22 06:45:10.916489"], ["type", "InputNode"]]
  [1m[35m (18.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 102], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 102], ["auditable_type", "Node"], ["associated_id", 78], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 78\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3081c37c-a171-4867-bd24-9d47b72cae18"], ["created_at", "2019-08-22 06:45:10.987004"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (10.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 78]]
  [1m[36mOutputNode Create (3.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 78], ["created_at", "2019-08-22 06:45:11.085874"], ["updated_at", "2019-08-22 06:45:11.085874"], ["type", "OutputNode"]]
  [1m[35m (10.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 103], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 103], ["auditable_type", "Node"], ["associated_id", 78], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 78\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ce479104-f0b6-485d-a588-03a64f1e8669"], ["created_at", "2019-08-22 06:45:11.100355"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  [1m[36mNode Load (4.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 78]]
  [1m[36mEdge Load (17.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 78]]
  [1m[36mEdge Load (9.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 78]]
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  [1m[36mNode Load (4.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (6.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  [1m[35m (12.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 102], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 102], ["auditable_type", "Node"], ["associated_id", 78], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "4c88393e-76f4-4191-8175-d9eb99c2a41b"], ["created_at", "2019-08-22 06:45:11.250104"]]
  [1m[36mInputNode Update (4.7ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 06:45:11.247481"], ["id", 102]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  [1m[36mNode Load (4.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 78]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 78]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  [1m[36mNode Load (4.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 78]]
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  [1m[36mNode Load (5.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 78]]
  [1m[36mEdge Load (8.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 78]]
  [1m[36mEdge Load (9.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 78]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:45:11.363790"], ["updated_at", "2019-08-22 06:45:11.363790"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 79], ["created_at", "2019-08-22 06:45:11.369667"], ["updated_at", "2019-08-22 06:45:11.369667"], ["type", "InputNode"]]
  [1m[35m (14.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 104], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 104], ["auditable_type", "Node"], ["associated_id", 79], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 79\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4b7f97f9-b379-415d-9707-79688da2ed01"], ["created_at", "2019-08-22 06:45:11.378081"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 79]]
  [1m[36mOutputNode Create (5.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 79], ["created_at", "2019-08-22 06:45:11.405773"], ["updated_at", "2019-08-22 06:45:11.405773"], ["type", "OutputNode"]]
  [1m[35m (9.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 105], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 105], ["auditable_type", "Node"], ["associated_id", 79], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 79\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ecc28925-f2b8-420c-8c94-ccefe449ef32"], ["created_at", "2019-08-22 06:45:11.414877"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 79]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 104], ["to_node_id", 105], ["created_at", "2019-08-22 06:45:11.458586"], ["updated_at", "2019-08-22 06:45:11.458586"]]
  [1m[35m (7.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 22], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 22], ["auditable_type", "Edge"], ["associated_id", 104], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 104\nto_node_id: 105\n"], ["version", 1], ["request_uuid", "2552749b-0e9b-4250-a820-b31fa3867a70"], ["created_at", "2019-08-22 06:45:11.464989"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 79]]
  [1m[36mEdge Load (7.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 79]]
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:45:11.518120"], ["updated_at", "2019-08-22 06:45:11.518120"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 80], ["created_at", "2019-08-22 06:45:11.527029"], ["updated_at", "2019-08-22 06:45:11.527029"], ["type", "InputNode"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 106], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 106], ["auditable_type", "Node"], ["associated_id", 80], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 80\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "fff35c4b-f8eb-49db-9c23-e4cdca1f6e93"], ["created_at", "2019-08-22 06:45:11.537424"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 80], ["created_at", "2019-08-22 06:45:11.551633"], ["updated_at", "2019-08-22 06:45:11.551633"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 107], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 107], ["auditable_type", "Node"], ["associated_id", 80], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 80\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0d26ba90-b72c-473f-bab5-76b5695c064a"], ["created_at", "2019-08-22 06:45:11.556137"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[36mEdge Load (9.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[36mEdge Load (8.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 106], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 106], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 106], ["auditable_type", "Node"], ["associated_id", 80], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "c4a8f0a7-3701-4b2e-8a96-b6f79397d829"], ["created_at", "2019-08-22 06:45:11.631816"]]
  [1m[36mInputNode Update (3.5ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 06:45:11.624712"], ["id", 106]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 107], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[35m (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[36mEdge Load (8.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[36mEdge Load (8.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 106], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 107], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 106], ["to_node_id", 107], ["created_at", "2019-08-22 06:45:11.780315"], ["updated_at", "2019-08-22 06:45:11.780315"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Edge"], ["associated_id", 106], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 106\nto_node_id: 107\n"], ["version", 1], ["request_uuid", "68f2171c-d034-4ef9-a6cc-4689ff96b2b4"], ["created_at", "2019-08-22 06:45:11.786055"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[36mEdge Load (7.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 80]]
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 106], ["LIMIT", 1]]
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 107], ["LIMIT", 1]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (4.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:45:11.864191"], ["updated_at", "2019-08-22 06:45:11.864191"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 81]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 81]]
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:45:11.904143"], ["updated_at", "2019-08-22 06:45:11.904143"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 82], ["created_at", "2019-08-22 06:45:11.915057"], ["updated_at", "2019-08-22 06:45:11.915057"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 108], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 108], ["auditable_type", "Node"], ["associated_id", 82], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 82\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b677f6f8-b660-4890-aa3f-495804f50e44"], ["created_at", "2019-08-22 06:45:11.935373"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 82], ["created_at", "2019-08-22 06:45:11.949921"], ["updated_at", "2019-08-22 06:45:11.949921"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 109], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 109], ["auditable_type", "Node"], ["associated_id", 82], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 82\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d12d7a8e-6e1b-4f86-812c-ed1f21b230b6"], ["created_at", "2019-08-22 06:45:11.960686"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 108], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 108], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 108], ["auditable_type", "Node"], ["associated_id", 82], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "3660434a-3401-4a62-9163-4bd821727a78"], ["created_at", "2019-08-22 06:45:11.998559"]]
  [1m[36mInputNode Update (2.9ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 06:45:11.995188"], ["id", 108]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 109], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 108], ["to_node_id", 109], ["created_at", "2019-08-22 06:45:12.052108"], ["updated_at", "2019-08-22 06:45:12.052108"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Edge"], ["associated_id", 108], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 108\nto_node_id: 109\n"], ["version", 1], ["request_uuid", "b7d06dfe-6f52-499d-bab0-b661f4035736"], ["created_at", "2019-08-22 06:45:12.055813"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 108], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 109], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 82]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 108], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Edge"], ["associated_id", 108], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 108\nto_node_id: 109\n"], ["version", 2], ["request_uuid", "1e3e9b25-943e-4984-9106-65854194e5d6"], ["created_at", "2019-08-22 06:45:12.125083"]]
  [1m[36mEdge Destroy (3.2ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 24]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:45:12.157346"], ["updated_at", "2019-08-22 06:45:12.157346"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 83], ["created_at", "2019-08-22 06:45:12.164510"], ["updated_at", "2019-08-22 06:45:12.164510"], ["type", "InputNode"]]
  [1m[35m (2.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 110], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 110], ["auditable_type", "Node"], ["associated_id", 83], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 83\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "91171eaf-f973-4fe4-b032-18e3403255e4"], ["created_at", "2019-08-22 06:45:12.176677"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 83]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 83], ["created_at", "2019-08-22 06:45:12.196314"], ["updated_at", "2019-08-22 06:45:12.196314"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 111], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 111], ["auditable_type", "Node"], ["associated_id", 83], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 83\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e5d907ed-567f-4b15-a3a7-09dac2c03541"], ["created_at", "2019-08-22 06:45:12.203520"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 83]]
  [1m[36mEdge Load (4.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 83]]
  [1m[36mEdge Load (4.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 83]]
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 111], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 83]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 83]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 83]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 83]]
  [1m[36mNode Destroy (2.6ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 110]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 83]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 83]]
  [1m[35m (5.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 83]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:45:12.299849"], ["updated_at", "2019-08-22 06:45:12.299849"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 84], ["created_at", "2019-08-22 06:45:12.309858"], ["updated_at", "2019-08-22 06:45:12.309858"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 112], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 112], ["auditable_type", "Node"], ["associated_id", 84], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 84\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "57827694-4350-43e1-85de-c790342cac9d"], ["created_at", "2019-08-22 06:45:12.320633"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 84]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 84], ["created_at", "2019-08-22 06:45:12.339458"], ["updated_at", "2019-08-22 06:45:12.339458"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 113], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 113], ["auditable_type", "Node"], ["associated_id", 84], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 84\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b2beef5f-10c0-4f2c-abef-13bfb5aaa992"], ["created_at", "2019-08-22 06:45:12.346203"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 84]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 84]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 84]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 112], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 112], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 112], ["auditable_type", "Node"], ["associated_id", 84], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "d6bba5ed-915e-4fa0-90ec-bc8c9853c248"], ["created_at", "2019-08-22 06:45:12.378241"]]
  [1m[36mInputNode Update (2.7ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 06:45:12.376097"], ["id", 112]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 113], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 84]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 84]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 84]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 84]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 112], ["to_node_id", 113], ["created_at", "2019-08-22 06:45:12.426574"], ["updated_at", "2019-08-22 06:45:12.426574"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 25], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 25], ["auditable_type", "Edge"], ["associated_id", 112], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 112\nto_node_id: 113\n"], ["version", 1], ["request_uuid", "33517421-2835-4f77-9518-baf725868ee3"], ["created_at", "2019-08-22 06:45:12.430155"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 112], ["to_node_id", 113], ["created_at", "2019-08-22 06:45:12.437810"], ["updated_at", "2019-08-22 06:45:12.437810"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 06:45:12.461403"], ["updated_at", "2019-08-22 06:45:12.461403"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 85], ["created_at", "2019-08-22 06:45:12.469070"], ["updated_at", "2019-08-22 06:45:12.469070"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 114], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 114], ["auditable_type", "Node"], ["associated_id", 85], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 85\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6d44f5d4-ea15-4961-afa0-21a71b977876"], ["created_at", "2019-08-22 06:45:12.475011"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 85]]
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 85], ["created_at", "2019-08-22 06:45:12.489807"], ["updated_at", "2019-08-22 06:45:12.489807"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 115], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 115], ["auditable_type", "Node"], ["associated_id", 85], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 85\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "48472ac9-fd3c-47b7-86ea-631ab301d9c2"], ["created_at", "2019-08-22 06:45:12.495690"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 85]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 85]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 85]]
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (5.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (8.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
Started POST "/graphs/save_all" for 127.0.0.1 at 2019-08-22 07:10:47 +0000
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:12:17.842905"], ["updated_at", "2019-08-22 07:12:17.842905"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (7.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
Started POST "/graphs/86/save_all" for 127.0.0.1 at 2019-08-22 07:12:17 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"id"=>"86", "name"=>"Graph 1", "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"c58b9b43-2c3e-4241-ba76-7ac3ef8e7b1d"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"c11ece8b-16cb-4601-a065-95491f69d308"}]}
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (5.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 86], ["created_at", "2019-08-22 07:12:18.134674"], ["updated_at", "2019-08-22 07:12:18.134674"], ["type", "InputNode"]]
  [1m[35m (13.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 116], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 116], ["auditable_type", "Node"], ["associated_id", 86], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 86\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "c0355e29-4051-4932-b0a7-cda27d035f38"], ["created_at", "2019-08-22 07:12:18.222247"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 86]]
  [1m[36mOutputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 86], ["created_at", "2019-08-22 07:12:18.298336"], ["updated_at", "2019-08-22 07:12:18.298336"], ["type", "OutputNode"]]
  [1m[35m (6.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 117], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 117], ["auditable_type", "Node"], ["associated_id", 86], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 86\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "c0355e29-4051-4932-b0a7-cda27d035f38"], ["created_at", "2019-08-22 07:12:18.307568"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  [1m[36mNode Load (4.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 86]]
  [1m[36mGraph Load (2.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 86]]
  [1m[36mEdge Load (13.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 86]]
  [1m[36mEdge Load (6.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 86]]
Completed 500 Internal Server Error in 426ms (ActiveRecord: 103.4ms)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:13:56.241058"], ["updated_at", "2019-08-22 07:13:56.241058"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (8.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
Started POST "/graphs/87/save_all" for 127.0.0.1 at 2019-08-22 07:13:56 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"id"=>"87", "name"=>"Graph 1", "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"5d535fb2-cc38-455a-be14-74eb4f98660e"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"91ef0455-e729-4f1c-8d84-5a877277eaaa"}]}
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (5.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 87], ["created_at", "2019-08-22 07:13:56.482060"], ["updated_at", "2019-08-22 07:13:56.482060"], ["type", "InputNode"]]
  [1m[35m (16.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 118], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 118], ["auditable_type", "Node"], ["associated_id", 87], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 87\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "7baff11e-5987-4716-98df-acb9054b910b"], ["created_at", "2019-08-22 07:13:56.571286"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 87]]
  [1m[36mOutputNode Create (3.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 87], ["created_at", "2019-08-22 07:13:56.637697"], ["updated_at", "2019-08-22 07:13:56.637697"], ["type", "OutputNode"]]
  [1m[35m (8.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 119], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 119], ["auditable_type", "Node"], ["associated_id", 87], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 87\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "7baff11e-5987-4716-98df-acb9054b910b"], ["created_at", "2019-08-22 07:13:56.644684"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 87]]
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 87]]
  [1m[36mEdge Load (13.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 87]]
  [1m[36mEdge Load (7.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 87]]
Completed 200 OK in 365ms (Views: 0.4ms | ActiveRecord: 108.7ms)
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:45.810715"], ["updated_at", "2019-08-22 07:15:45.810715"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (11.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
Started POST "/graphs/88/save_all" for 127.0.0.1 at 2019-08-22 07:15:45 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"id"=>"88", "name"=>"Graph 1", "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"8396a6de-9bb8-44b0-909c-ba13599b3eb5"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"640a1ca1-03e0-4885-98f6-bd6ec4c6de0d"}]}
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 27ms (ActiveRecord: 2.7ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:46.100407"], ["updated_at", "2019-08-22 07:15:46.100407"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 89]]
  [1m[36mOutputNode Create (7.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 89], ["created_at", "2019-08-22 07:15:46.245283"], ["updated_at", "2019-08-22 07:15:46.245283"], ["type", "OutputNode"]]
  [1m[35m (21.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 120], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 120], ["auditable_type", "Node"], ["associated_id", 89], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 89\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "09c4f9bd-8168-40da-a2c6-f275d2de30a9"], ["created_at", "2019-08-22 07:15:46.293536"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:46.349324"], ["updated_at", "2019-08-22 07:15:46.349324"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 90], ["created_at", "2019-08-22 07:15:46.386577"], ["updated_at", "2019-08-22 07:15:46.386577"], ["type", "InputNode"]]
  [1m[35m (10.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 121], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 121], ["auditable_type", "Node"], ["associated_id", 90], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 90\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0ca840ef-3304-4c3c-9b1d-9442c739e0e7"], ["created_at", "2019-08-22 07:15:46.397576"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 07:15:46.419813"], ["updated_at", "2019-08-22 07:15:46.419813"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 91]]
  [1m[36mOutputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 91], ["created_at", "2019-08-22 07:15:46.436649"], ["updated_at", "2019-08-22 07:15:46.436649"], ["type", "OutputNode"]]
  [1m[35m (9.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 122], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 122], ["auditable_type", "Node"], ["associated_id", 91], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 91\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ad0a3dc5-a923-4b79-aba5-2a5831fb7db0"], ["created_at", "2019-08-22 07:15:46.448380"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:46.488709"], ["updated_at", "2019-08-22 07:15:46.488709"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 92], ["created_at", "2019-08-22 07:15:46.497412"], ["updated_at", "2019-08-22 07:15:46.497412"], ["type", "InputNode"]]
  [1m[35m (14.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 123], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 123], ["auditable_type", "Node"], ["associated_id", 92], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 92\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "22bb1917-8d26-472f-84d2-c705f0179bef"], ["created_at", "2019-08-22 07:15:46.509298"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 92]]
  [1m[36mOutputNode Create (3.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 92], ["created_at", "2019-08-22 07:15:46.545386"], ["updated_at", "2019-08-22 07:15:46.545386"], ["type", "OutputNode"]]
  [1m[35m (10.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 124], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 124], ["auditable_type", "Node"], ["associated_id", 92], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 92\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "33cb75a2-486a-4931-81aa-7ac1544ecc2b"], ["created_at", "2019-08-22 07:15:46.558308"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (5.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 123], ["to_node_id", 124], ["created_at", "2019-08-22 07:15:46.582678"], ["updated_at", "2019-08-22 07:15:46.582678"]]
  [1m[35m (8.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 27], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 27], ["auditable_type", "Edge"], ["associated_id", 123], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 123\nto_node_id: 124\n"], ["version", 1], ["request_uuid", "3d0d9339-45e0-4fbd-a011-b04a89f62617"], ["created_at", "2019-08-22 07:15:46.599716"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 27], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 27], ["auditable_type", "Edge"], ["associated_id", 123], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 123\nto_node_id: 124\n"], ["version", 2], ["request_uuid", "7ddef679-4fbb-400e-823e-275850d64f87"], ["created_at", "2019-08-22 07:15:46.622052"]]
  [1m[36mEdge Destroy (10.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 27]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:46.671375"], ["updated_at", "2019-08-22 07:15:46.671375"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 93], ["created_at", "2019-08-22 07:15:46.683308"], ["updated_at", "2019-08-22 07:15:46.683308"], ["type", "InputNode"]]
  [1m[35m (2.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 125], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 125], ["auditable_type", "Node"], ["associated_id", 93], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 93\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a4ed81f4-7f74-467c-a6bd-eec955ccfc79"], ["created_at", "2019-08-22 07:15:46.697743"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:46.730453"], ["updated_at", "2019-08-22 07:15:46.730453"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 94], ["created_at", "2019-08-22 07:15:46.737400"], ["updated_at", "2019-08-22 07:15:46.737400"], ["type", "InputNode"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 126], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 126], ["auditable_type", "Node"], ["associated_id", 94], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 94\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9d666336-3ee3-4c8c-a949-71fa9bcce580"], ["created_at", "2019-08-22 07:15:46.745637"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 94]]
  [1m[36mOutputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 94], ["created_at", "2019-08-22 07:15:46.762925"], ["updated_at", "2019-08-22 07:15:46.762925"], ["type", "OutputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 127], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 127], ["auditable_type", "Node"], ["associated_id", 94], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 94\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "be4f06ab-f7c5-4b8e-aa5f-4fc3a729cd14"], ["created_at", "2019-08-22 07:15:46.767931"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 126], ["to_node_id", 127], ["created_at", "2019-08-22 07:15:46.781986"], ["updated_at", "2019-08-22 07:15:46.781986"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 28], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 28], ["auditable_type", "Edge"], ["associated_id", 126], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 126\nto_node_id: 127\n"], ["version", 1], ["request_uuid", "4e0484bb-3ee6-4200-a26c-61e8b65ee321"], ["created_at", "2019-08-22 07:15:46.790382"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:46.812525"], ["updated_at", "2019-08-22 07:15:46.812525"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 95], ["created_at", "2019-08-22 07:15:46.820851"], ["updated_at", "2019-08-22 07:15:46.820851"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 128], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 128], ["auditable_type", "Node"], ["associated_id", 95], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 95\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "01bf5fa0-c20e-4ce5-90ea-d3b9ce7f8fd3"], ["created_at", "2019-08-22 07:15:46.830890"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:46.856737"], ["updated_at", "2019-08-22 07:15:46.856737"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 96], ["created_at", "2019-08-22 07:15:46.862628"], ["updated_at", "2019-08-22 07:15:46.862628"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 129], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 129], ["auditable_type", "Node"], ["associated_id", 96], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 96\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f4e2a97a-d98c-4780-9b64-d5e41bfba05b"], ["created_at", "2019-08-22 07:15:46.870432"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 96]]
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 96], ["created_at", "2019-08-22 07:15:46.894760"], ["updated_at", "2019-08-22 07:15:46.894760"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 130], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 130], ["auditable_type", "Node"], ["associated_id", 96], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 96\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5940336e-4916-4e5b-9c12-2621acf050b1"], ["created_at", "2019-08-22 07:15:46.903513"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 129], ["to_node_id", 130], ["created_at", "2019-08-22 07:15:46.917550"], ["updated_at", "2019-08-22 07:15:46.917550"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 29], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 29], ["auditable_type", "Edge"], ["associated_id", 129], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 129\nto_node_id: 130\n"], ["version", 1], ["request_uuid", "445249c6-571d-4ee7-be55-8addc09f391e"], ["created_at", "2019-08-22 07:15:46.926351"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 129]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 29], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 29], ["auditable_type", "Edge"], ["associated_id", 129], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 129\nto_node_id: 130\n"], ["version", 2], ["request_uuid", "6064f59f-73f0-44ed-9f14-ab9a3ebab35e"], ["created_at", "2019-08-22 07:15:46.955035"]]
  [1m[36mEdge Destroy (3.0ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 29]]
  [1m[36mEdge Load (3.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 129]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 129], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 129], ["auditable_type", "Node"], ["associated_id", 96], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 96\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "be2ea6ec-106c-40f6-9f1c-c31e3109a85b"], ["created_at", "2019-08-22 07:15:46.976078"]]
  [1m[36mInputNode Destroy (2.6ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 129]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:47.003879"], ["updated_at", "2019-08-22 07:15:47.003879"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 97], ["created_at", "2019-08-22 07:15:47.011509"], ["updated_at", "2019-08-22 07:15:47.011509"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 131], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 131], ["auditable_type", "Node"], ["associated_id", 97], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 97\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "51df2f2e-ff96-4b51-afef-606f7ff768d3"], ["created_at", "2019-08-22 07:15:47.019151"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 97]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 97], ["created_at", "2019-08-22 07:15:47.043739"], ["updated_at", "2019-08-22 07:15:47.043739"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 132], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 132], ["auditable_type", "Node"], ["associated_id", 97], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 97\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c11fa60a-9364-4efb-9972-d590c6b8a5fc"], ["created_at", "2019-08-22 07:15:47.050522"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 131], ["to_node_id", 132], ["created_at", "2019-08-22 07:15:47.061682"], ["updated_at", "2019-08-22 07:15:47.061682"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 30], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 30], ["auditable_type", "Edge"], ["associated_id", 131], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 131\nto_node_id: 132\n"], ["version", 1], ["request_uuid", "59966c1e-1bca-473b-aa63-57862a800d1c"], ["created_at", "2019-08-22 07:15:47.068002"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 132]]
  [1m[36mEdge Load (5.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 132]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 30], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 30], ["auditable_type", "Edge"], ["associated_id", 131], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 131\nto_node_id: 132\n"], ["version", 2], ["request_uuid", "bfb05c46-c5da-4682-a5c2-1113630a77bc"], ["created_at", "2019-08-22 07:15:47.108402"]]
  [1m[36mEdge Destroy (4.3ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 30]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 132], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 132], ["auditable_type", "Node"], ["associated_id", 97], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 97\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "2982fc0a-2e1d-4801-8f4e-87e1928d3e60"], ["created_at", "2019-08-22 07:15:47.124072"]]
  [1m[36mOutputNode Destroy (3.6ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 132]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:47.178118"], ["updated_at", "2019-08-22 07:15:47.178118"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 98], ["created_at", "2019-08-22 07:15:47.194367"], ["updated_at", "2019-08-22 07:15:47.194367"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 133], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 133], ["auditable_type", "Node"], ["associated_id", 98], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 98\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4b82c4e0-6648-4614-896a-6df6ad123bdd"], ["created_at", "2019-08-22 07:15:47.203897"]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 98]]
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 98], ["created_at", "2019-08-22 07:15:47.227437"], ["updated_at", "2019-08-22 07:15:47.227437"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 134], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 134], ["auditable_type", "Node"], ["associated_id", 98], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 98\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3478c16f-bd07-4ea7-a910-48309033abae"], ["created_at", "2019-08-22 07:15:47.235827"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 98], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 98]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 133], ["to_node_id", 134], ["created_at", "2019-08-22 07:15:47.258646"], ["updated_at", "2019-08-22 07:15:47.258646"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 31], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 31], ["auditable_type", "Edge"], ["associated_id", 133], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 133\nto_node_id: 134\n"], ["version", 1], ["request_uuid", "d7f7eeca-08fd-49fc-803c-2bcfc6ea1da1"], ["created_at", "2019-08-22 07:15:47.266820"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (6.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 98]]
  [1m[36mEdge Load (7.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 98]]
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:47.334021"], ["updated_at", "2019-08-22 07:15:47.334021"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 99], ["created_at", "2019-08-22 07:15:47.343941"], ["updated_at", "2019-08-22 07:15:47.343941"], ["type", "InputNode"]]
  [1m[35m (3.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 135], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 135], ["auditable_type", "Node"], ["associated_id", 99], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 99\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "205fae43-80c8-4867-97a6-673e876d3570"], ["created_at", "2019-08-22 07:15:47.351348"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 99]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 99], ["created_at", "2019-08-22 07:15:47.369460"], ["updated_at", "2019-08-22 07:15:47.369460"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 136], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 136], ["auditable_type", "Node"], ["associated_id", 99], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 99\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5305c3d8-7e45-4f09-ae95-62a2ffee1335"], ["created_at", "2019-08-22 07:15:47.374166"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 99]]
  [1m[36mEdge Load (10.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 99]]
  [1m[36mEdge Load (8.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 99]]
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 135], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 135], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 135], ["auditable_type", "Node"], ["associated_id", 99], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "10539934-474d-4252-8d43-47a1da425f73"], ["created_at", "2019-08-22 07:15:47.435042"]]
  [1m[36mInputNode Update (2.8ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:15:47.430964"], ["id", 135]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 136], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 99]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 99]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 99]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 99]]
  [1m[36mEdge Load (6.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 99]]
  [1m[36mEdge Load (8.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 99]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:47.522532"], ["updated_at", "2019-08-22 07:15:47.522532"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mEdge Load (8.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 100]]
  [1m[36mEdge Load (6.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 100]]
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:47.566395"], ["updated_at", "2019-08-22 07:15:47.566395"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 101], ["created_at", "2019-08-22 07:15:47.572844"], ["updated_at", "2019-08-22 07:15:47.572844"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 137], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 137], ["auditable_type", "Node"], ["associated_id", 101], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 101\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e4dd45e3-c403-49dc-a4e9-ec7b3f95089e"], ["created_at", "2019-08-22 07:15:47.578932"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 101], ["created_at", "2019-08-22 07:15:47.596206"], ["updated_at", "2019-08-22 07:15:47.596206"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 138], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 138], ["auditable_type", "Node"], ["associated_id", 101], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 101\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5af58487-a7d4-491f-b532-4bf864f497d5"], ["created_at", "2019-08-22 07:15:47.606724"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[36mEdge Load (7.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[36mEdge Load (6.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 137], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 137], ["auditable_type", "Node"], ["associated_id", 101], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "bbf7bf91-2b13-4ebf-b1b3-321d289ee273"], ["created_at", "2019-08-22 07:15:47.651183"]]
  [1m[36mInputNode Update (2.8ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:15:47.649344"], ["id", 137]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 138], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 137], ["to_node_id", 138], ["created_at", "2019-08-22 07:15:47.692954"], ["updated_at", "2019-08-22 07:15:47.692954"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 32], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 32], ["auditable_type", "Edge"], ["associated_id", 137], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 137\nto_node_id: 138\n"], ["version", 1], ["request_uuid", "ae0b375c-3c35-445c-a0a1-1f9723b693f1"], ["created_at", "2019-08-22 07:15:47.697132"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (6.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[36mEdge Load (5.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 138], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 101]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 32], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 32], ["auditable_type", "Edge"], ["associated_id", 137], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 137\nto_node_id: 138\n"], ["version", 2], ["request_uuid", "d4fdb5c6-f7df-4ba5-9374-95a82737d5b6"], ["created_at", "2019-08-22 07:15:47.770774"]]
  [1m[36mEdge Destroy (2.7ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 32]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:47.790714"], ["updated_at", "2019-08-22 07:15:47.790714"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 102], ["created_at", "2019-08-22 07:15:47.796338"], ["updated_at", "2019-08-22 07:15:47.796338"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 139], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 139], ["auditable_type", "Node"], ["associated_id", 102], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 102\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "dc826027-afb8-4b5e-909e-d7b22dc541ec"], ["created_at", "2019-08-22 07:15:47.802035"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 102]]
  [1m[36mOutputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 102], ["created_at", "2019-08-22 07:15:47.817119"], ["updated_at", "2019-08-22 07:15:47.817119"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 140], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 140], ["auditable_type", "Node"], ["associated_id", 102], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 102\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a043d391-a9ee-41ba-880e-2642b47206c9"], ["created_at", "2019-08-22 07:15:47.823098"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 102]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 102]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 102]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 139], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 139], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 139], ["auditable_type", "Node"], ["associated_id", 102], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "f151329c-1ca7-4543-a342-30b9315629ea"], ["created_at", "2019-08-22 07:15:47.853179"]]
  [1m[36mInputNode Update (2.5ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:15:47.851170"], ["id", 139]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 140], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 102]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 102]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 102]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 102]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 139], ["to_node_id", 140], ["created_at", "2019-08-22 07:15:47.891666"], ["updated_at", "2019-08-22 07:15:47.891666"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 33], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 33], ["auditable_type", "Edge"], ["associated_id", 139], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 139\nto_node_id: 140\n"], ["version", 1], ["request_uuid", "48aed7e3-6db5-458a-b4e3-619e44d0eefc"], ["created_at", "2019-08-22 07:15:47.895202"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 139], ["to_node_id", 140], ["created_at", "2019-08-22 07:15:47.902788"], ["updated_at", "2019-08-22 07:15:47.902788"]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:47.915520"], ["updated_at", "2019-08-22 07:15:47.915520"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 103], ["created_at", "2019-08-22 07:15:47.922247"], ["updated_at", "2019-08-22 07:15:47.922247"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 141], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 141], ["auditable_type", "Node"], ["associated_id", 103], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 103\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4097f03b-ad79-4daf-bf69-4ecd8a48a308"], ["created_at", "2019-08-22 07:15:47.927698"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 103], ["created_at", "2019-08-22 07:15:47.940982"], ["updated_at", "2019-08-22 07:15:47.940982"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 142], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 142], ["auditable_type", "Node"], ["associated_id", 103], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 103\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d4a979f1-66df-41e5-9b08-99f859daf3e9"], ["created_at", "2019-08-22 07:15:47.948007"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 141], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 141], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 141], ["auditable_type", "Node"], ["associated_id", 103], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "b1b148bf-151f-4020-8367-4de4cba72250"], ["created_at", "2019-08-22 07:15:47.979413"]]
  [1m[36mInputNode Update (3.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:15:47.977573"], ["id", 141]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 142], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 141], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 142], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 141], ["to_node_id", 142], ["created_at", "2019-08-22 07:15:48.067049"], ["updated_at", "2019-08-22 07:15:48.067049"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 35], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 35], ["auditable_type", "Edge"], ["associated_id", 141], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 141\nto_node_id: 142\n"], ["version", 1], ["request_uuid", "d5ac2bf7-19e7-48b7-a164-383c0f936c44"], ["created_at", "2019-08-22 07:15:48.070644"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 103]]
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 141], ["LIMIT", 1]]
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 142], ["LIMIT", 1]]
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:48.118081"], ["updated_at", "2019-08-22 07:15:48.118081"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 104], ["created_at", "2019-08-22 07:15:48.124311"], ["updated_at", "2019-08-22 07:15:48.124311"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 143], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 143], ["auditable_type", "Node"], ["associated_id", 104], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 104\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d9eb57e7-587b-4709-bbf4-a0d00eedc29b"], ["created_at", "2019-08-22 07:15:48.130691"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 104]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 104], ["created_at", "2019-08-22 07:15:48.147434"], ["updated_at", "2019-08-22 07:15:48.147434"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 144], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 144], ["auditable_type", "Node"], ["associated_id", 104], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 104\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2a61eb86-f658-44c8-bcf6-a478f6144633"], ["created_at", "2019-08-22 07:15:48.151840"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 104], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 104]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 104]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 104]]
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 104], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 144], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 104], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 104]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 104]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 104], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 104]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 104], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 104]]
  [1m[36mNode Destroy (3.2ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 143]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 104]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 104]]
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 104]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:48.235818"], ["updated_at", "2019-08-22 07:15:48.235818"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 105], ["created_at", "2019-08-22 07:15:48.243514"], ["updated_at", "2019-08-22 07:15:48.243514"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 145], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 145], ["auditable_type", "Node"], ["associated_id", 105], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 105\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "66bdc240-5128-484b-88a0-488fe0748568"], ["created_at", "2019-08-22 07:15:48.248728"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 105]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 105], ["created_at", "2019-08-22 07:15:48.269507"], ["updated_at", "2019-08-22 07:15:48.269507"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 146], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 146], ["auditable_type", "Node"], ["associated_id", 105], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 105\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1b47fb4e-7b57-4719-88cd-135f30c47864"], ["created_at", "2019-08-22 07:15:48.273555"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 105], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 105]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 105]]
  [1m[36mEdge Load (4.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 105]]
  [1m[35m (4.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 07:15:48.336704"], ["updated_at", "2019-08-22 07:15:48.336704"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 106], ["created_at", "2019-08-22 07:15:48.340305"], ["updated_at", "2019-08-22 07:15:48.340305"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 147], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 147], ["auditable_type", "Node"], ["associated_id", 106], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 106\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9cce7fa7-bad7-4eb7-a9a3-8b8db906ed0d"], ["created_at", "2019-08-22 07:15:48.345282"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:15:48.378861"], ["updated_at", "2019-08-22 07:15:48.378861"]]
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 107], ["created_at", "2019-08-22 07:15:48.381992"], ["updated_at", "2019-08-22 07:15:48.381992"], ["type", "InputNode"]]
  [1m[35m (2.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 148], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 148], ["auditable_type", "Node"], ["associated_id", 107], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 107\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "57b71c5a-cbdd-46d8-81d0-98f27b70836f"], ["created_at", "2019-08-22 07:15:48.387040"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 107], ["created_at", "2019-08-22 07:15:48.399809"], ["updated_at", "2019-08-22 07:15:48.399809"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 149], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 149], ["auditable_type", "Node"], ["associated_id", 107], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 107\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ae4cb639-729c-4e78-878b-244e5f41e61a"], ["created_at", "2019-08-22 07:15:48.403964"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 107], ["created_at", "2019-08-22 07:15:48.411992"], ["updated_at", "2019-08-22 07:15:48.411992"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 150], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 150], ["auditable_type", "Node"], ["associated_id", 107], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 107\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8a101044-a640-42f0-8686-7f7473fe4e21"], ["created_at", "2019-08-22 07:15:48.416084"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 107], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 148], ["to_node_id", 149], ["created_at", "2019-08-22 07:15:48.429006"], ["updated_at", "2019-08-22 07:15:48.429006"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 36], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 36], ["auditable_type", "Edge"], ["associated_id", 148], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 148\nto_node_id: 149\n"], ["version", 1], ["request_uuid", "62676c2d-4a28-465d-8ca2-3bc3e3d3c58a"], ["created_at", "2019-08-22 07:15:48.433019"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 36], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 36], ["auditable_type", "Edge"], ["associated_id", 148], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 149\n- 150\n"], ["version", 2], ["request_uuid", "8de17a96-ce55-4c73-9bb1-cf0f7dc8017e"], ["created_at", "2019-08-22 07:15:48.442201"]]
  [1m[36mEdge Update (3.0ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 150], ["updated_at", "2019-08-22 07:15:48.440851"], ["id", 36]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 107]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 107]]
  [1m[36mAudited::Audit Load (3.4ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 107], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.8ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 36], ["auditable_type", "Edge"]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 148], ["LIMIT", 1]]
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 149], ["LIMIT", 1]]
  [1m[36mEdge Update (3.6ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 149], ["updated_at", "2019-08-22 07:15:48.480375"], ["id", 36]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (5.2ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 216]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 107], ["LIMIT", 1]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 149], ["LIMIT", 1]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 107]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 107]]
  [1m[36mAudited::Audit Load (3.9ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 107], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.5ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 36], ["auditable_type", "Edge"]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 148], ["LIMIT", 1]]
  [1m[36mEdge Destroy (2.9ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 36]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.5ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 215]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 107], ["LIMIT", 1]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 107]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 107]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:53.165691"], ["updated_at", "2019-08-22 07:16:53.165691"]]
  [1m[36mInputNode Create (7.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 108], ["created_at", "2019-08-22 07:16:53.175531"], ["updated_at", "2019-08-22 07:16:53.175531"], ["type", "InputNode"]]
  [1m[35m (21.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 151], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (6.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 151], ["auditable_type", "Node"], ["associated_id", 108], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 108\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ddc05619-fec6-409a-9d85-37ee858a2128"], ["created_at", "2019-08-22 07:16:53.220387"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (2.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 108], ["created_at", "2019-08-22 07:16:53.287044"], ["updated_at", "2019-08-22 07:16:53.287044"], ["type", "OutputNode"]]
  [1m[35m (9.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 152], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 152], ["auditable_type", "Node"], ["associated_id", 108], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 108\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d0305a7b-1854-4221-b4f8-fef18d2006f4"], ["created_at", "2019-08-22 07:16:53.309327"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 108], ["created_at", "2019-08-22 07:16:53.329849"], ["updated_at", "2019-08-22 07:16:53.329849"], ["type", "InputNode"]]
  [1m[35m (8.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 153], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 153], ["auditable_type", "Node"], ["associated_id", 108], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 108\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ccb2a570-8adc-437a-8cce-c943f28ba29a"], ["created_at", "2019-08-22 07:16:53.340031"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 108], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 151], ["to_node_id", 152], ["created_at", "2019-08-22 07:16:53.408939"], ["updated_at", "2019-08-22 07:16:53.408939"]]
  [1m[35m (9.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 37], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 37], ["auditable_type", "Edge"], ["associated_id", 151], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 151\nto_node_id: 152\n"], ["version", 1], ["request_uuid", "4359807f-be59-4eb4-bb8b-e0ed302abda1"], ["created_at", "2019-08-22 07:16:53.417027"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (10.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 37], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 37], ["auditable_type", "Edge"], ["associated_id", 151], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 152\n- 153\n"], ["version", 2], ["request_uuid", "08cfa2b9-8b52-4361-8d9e-7cd9e9c881fe"], ["created_at", "2019-08-22 07:16:53.436168"]]
  [1m[36mEdge Update (10.1ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 153], ["updated_at", "2019-08-22 07:16:53.434154"], ["id", 37]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (16.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 108]]
  [1m[36mEdge Load (8.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 108]]
  [1m[36mAudited::Audit Load (4.4ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 108], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (4.4ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 37], ["auditable_type", "Edge"]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[36mEdge Update (3.3ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 152], ["updated_at", "2019-08-22 07:16:53.539845"], ["id", 37]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (4.6ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 221]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 108], ["LIMIT", 1]]
  [1m[36mEdge Load (4.1ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[36mNode Load (4.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[36mEdge Load (9.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 108]]
  [1m[36mEdge Load (8.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 108]]
  [1m[36mAudited::Audit Load (4.7ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 108], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (4.8ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 37], ["auditable_type", "Edge"]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
  [1m[36mEdge Destroy (3.5ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 37]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (4.4ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 220]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 108], ["LIMIT", 1]]
  [1m[36mEdge Load (9.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 108]]
  [1m[36mEdge Load (8.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 108]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:53.672999"], ["updated_at", "2019-08-22 07:16:53.672999"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 109], ["created_at", "2019-08-22 07:16:53.679550"], ["updated_at", "2019-08-22 07:16:53.679550"], ["type", "InputNode"]]
  [1m[35m (10.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 154], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 154], ["auditable_type", "Node"], ["associated_id", 109], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 109\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "293e9078-45ec-49e0-9ea7-c7dc4dcc37a1"], ["created_at", "2019-08-22 07:16:53.688876"]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:53.760270"], ["updated_at", "2019-08-22 07:16:53.760270"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (4.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 110], ["created_at", "2019-08-22 07:16:53.768557"], ["updated_at", "2019-08-22 07:16:53.768557"], ["type", "InputNode"]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 155], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 155], ["auditable_type", "Node"], ["associated_id", 110], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 110\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "07a95d2b-f324-45e1-a789-b6c4a69a699a"], ["created_at", "2019-08-22 07:16:53.780515"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 110]]
  [1m[36mOutputNode Create (3.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 110], ["created_at", "2019-08-22 07:16:53.797733"], ["updated_at", "2019-08-22 07:16:53.797733"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 156], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 156], ["auditable_type", "Node"], ["associated_id", 110], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 110\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "826466e2-34ee-4e12-8a55-d4499c552d0c"], ["created_at", "2019-08-22 07:16:53.812923"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 155], ["to_node_id", 156], ["created_at", "2019-08-22 07:16:53.832540"], ["updated_at", "2019-08-22 07:16:53.832540"]]
  [1m[35m (2.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 38], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 38], ["auditable_type", "Edge"], ["associated_id", 155], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 155\nto_node_id: 156\n"], ["version", 1], ["request_uuid", "e8624712-a9b0-435d-ab3b-ff7eeda77e21"], ["created_at", "2019-08-22 07:16:53.844487"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 155]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 38], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 38], ["auditable_type", "Edge"], ["associated_id", 155], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 155\nto_node_id: 156\n"], ["version", 2], ["request_uuid", "803fe6e5-3d0f-43b4-93a4-15bef6d5b47d"], ["created_at", "2019-08-22 07:16:53.885430"]]
  [1m[36mEdge Destroy (3.3ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 38]]
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 155]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 155], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 155], ["auditable_type", "Node"], ["associated_id", 110], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 110\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "c7b56848-8864-46b7-8bb5-0557bb9ccdd8"], ["created_at", "2019-08-22 07:16:53.913821"]]
  [1m[36mInputNode Destroy (2.7ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 155]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:53.950890"], ["updated_at", "2019-08-22 07:16:53.950890"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 111], ["created_at", "2019-08-22 07:16:53.962867"], ["updated_at", "2019-08-22 07:16:53.962867"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 157], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 157], ["auditable_type", "Node"], ["associated_id", 111], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 111\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "80e5dee5-ceb6-4766-af24-ac2cd9d7e44a"], ["created_at", "2019-08-22 07:16:53.981382"]]
  [1m[35m (2.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 111]]
  [1m[36mOutputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 111], ["created_at", "2019-08-22 07:16:54.008928"], ["updated_at", "2019-08-22 07:16:54.008928"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 158], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 158], ["auditable_type", "Node"], ["associated_id", 111], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 111\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "dc87e828-ac15-4c6c-9b37-eb04bcdc2580"], ["created_at", "2019-08-22 07:16:54.020833"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.4ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 157], ["to_node_id", 158], ["created_at", "2019-08-22 07:16:54.035332"], ["updated_at", "2019-08-22 07:16:54.035332"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 39], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 39], ["auditable_type", "Edge"], ["associated_id", 157], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 157\nto_node_id: 158\n"], ["version", 1], ["request_uuid", "0bf2316d-cd9c-45ea-9e8c-e033d32f1163"], ["created_at", "2019-08-22 07:16:54.045827"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 158]]
  [1m[36mEdge Load (4.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 158]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 157], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 39], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 39], ["auditable_type", "Edge"], ["associated_id", 157], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 157\nto_node_id: 158\n"], ["version", 2], ["request_uuid", "d7f8002c-219f-488e-accf-59ee26939616"], ["created_at", "2019-08-22 07:16:54.090239"]]
  [1m[36mEdge Destroy (3.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 39]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 158], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 158], ["auditable_type", "Node"], ["associated_id", 111], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 111\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "33626b14-a66b-462d-83e8-25084cd997ae"], ["created_at", "2019-08-22 07:16:54.111003"]]
  [1m[36mOutputNode Destroy (3.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 158]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (1.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 07:16:54.175637"], ["updated_at", "2019-08-22 07:16:54.175637"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 112], ["created_at", "2019-08-22 07:16:54.184472"], ["updated_at", "2019-08-22 07:16:54.184472"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 159], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 159], ["auditable_type", "Node"], ["associated_id", 112], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 112\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e3aa802d-3692-437d-90a6-625bf01ad95e"], ["created_at", "2019-08-22 07:16:54.197359"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:54.334818"], ["updated_at", "2019-08-22 07:16:54.334818"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/113/save_all" for 127.0.0.1 at 2019-08-22 07:16:54 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"id"=>"113", "name"=>"Updated Graph 1", "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"5fea3a09-67c3-431c-9308-d46f626970b1"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"70ca37b3-a38c-424b-8c9b-5bf48efa0834"}]}
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 113], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 26ms (ActiveRecord: 3.5ms)
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:54.468459"], ["updated_at", "2019-08-22 07:16:54.468459"]]
  [1m[35m (2.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 114], ["created_at", "2019-08-22 07:16:54.482331"], ["updated_at", "2019-08-22 07:16:54.482331"], ["type", "InputNode"]]
  [1m[35m (2.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 160], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 160], ["auditable_type", "Node"], ["associated_id", 114], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 114\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f30816de-b661-4d7d-aaff-93d79508b1c7"], ["created_at", "2019-08-22 07:16:54.497265"]]
  [1m[35m (2.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:54.543822"], ["updated_at", "2019-08-22 07:16:54.543822"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 115], ["created_at", "2019-08-22 07:16:54.554295"], ["updated_at", "2019-08-22 07:16:54.554295"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 161], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 161], ["auditable_type", "Node"], ["associated_id", 115], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 115\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d8d37f07-f8ca-487e-8d3c-c472c78b25cf"], ["created_at", "2019-08-22 07:16:54.564381"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 115]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 115], ["created_at", "2019-08-22 07:16:54.583971"], ["updated_at", "2019-08-22 07:16:54.583971"], ["type", "OutputNode"]]
  [1m[35m (4.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 162], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 162], ["auditable_type", "Node"], ["associated_id", 115], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 115\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "91b5330a-c508-4cc1-b020-728dc18084a9"], ["created_at", "2019-08-22 07:16:54.590846"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 161], ["to_node_id", 162], ["created_at", "2019-08-22 07:16:54.604452"], ["updated_at", "2019-08-22 07:16:54.604452"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 40], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 40], ["auditable_type", "Edge"], ["associated_id", 161], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 161\nto_node_id: 162\n"], ["version", 1], ["request_uuid", "40aa679c-7cf5-4def-987d-d132f3859feb"], ["created_at", "2019-08-22 07:16:54.608974"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:54.641586"], ["updated_at", "2019-08-22 07:16:54.641586"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 116]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 116], ["created_at", "2019-08-22 07:16:54.657513"], ["updated_at", "2019-08-22 07:16:54.657513"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 163], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 163], ["auditable_type", "Node"], ["associated_id", 116], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 116\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a05b6882-27fc-4a8a-bac6-1520f1036c24"], ["created_at", "2019-08-22 07:16:54.663488"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:54.685932"], ["updated_at", "2019-08-22 07:16:54.685932"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 117], ["created_at", "2019-08-22 07:16:54.693957"], ["updated_at", "2019-08-22 07:16:54.693957"], ["type", "InputNode"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 164], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 164], ["auditable_type", "Node"], ["associated_id", 117], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 117\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4d03ae55-6465-4c9c-b333-316679797903"], ["created_at", "2019-08-22 07:16:54.700842"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 117]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 117], ["created_at", "2019-08-22 07:16:54.717384"], ["updated_at", "2019-08-22 07:16:54.717384"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 165], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 165], ["auditable_type", "Node"], ["associated_id", 117], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 117\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "01f18ecf-4b1c-40d3-90c8-a1f130137a56"], ["created_at", "2019-08-22 07:16:54.722074"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 164], ["to_node_id", 165], ["created_at", "2019-08-22 07:16:54.731183"], ["updated_at", "2019-08-22 07:16:54.731183"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 41], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 41], ["auditable_type", "Edge"], ["associated_id", 164], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 164\nto_node_id: 165\n"], ["version", 1], ["request_uuid", "b84b4c91-637a-4348-a2cf-f401ca4fcddf"], ["created_at", "2019-08-22 07:16:54.735036"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 41], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 41], ["auditable_type", "Edge"], ["associated_id", 164], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 164\nto_node_id: 165\n"], ["version", 2], ["request_uuid", "cf6ff2e9-bb0c-4a05-852d-5d1c62d160ac"], ["created_at", "2019-08-22 07:16:54.743773"]]
  [1m[36mEdge Destroy (2.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 41]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:54.774537"], ["updated_at", "2019-08-22 07:16:54.774537"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 118], ["created_at", "2019-08-22 07:16:54.781183"], ["updated_at", "2019-08-22 07:16:54.781183"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 166], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 166], ["auditable_type", "Node"], ["associated_id", 118], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 118\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "69a0694d-be67-46c2-b694-10862d2dce7a"], ["created_at", "2019-08-22 07:16:54.789662"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 07:16:54.798723"], ["updated_at", "2019-08-22 07:16:54.798723"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 119]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 119], ["created_at", "2019-08-22 07:16:54.809259"], ["updated_at", "2019-08-22 07:16:54.809259"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 167], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 167], ["auditable_type", "Node"], ["associated_id", 119], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 119\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bd6e097e-0811-4ee5-add1-d4419e06c729"], ["created_at", "2019-08-22 07:16:54.814385"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:54.836924"], ["updated_at", "2019-08-22 07:16:54.836924"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 120], ["created_at", "2019-08-22 07:16:54.844415"], ["updated_at", "2019-08-22 07:16:54.844415"], ["type", "InputNode"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 168], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 168], ["auditable_type", "Node"], ["associated_id", 120], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 120\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "32540530-0348-40f1-a60a-4c5f08660000"], ["created_at", "2019-08-22 07:16:54.851807"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 120]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 120], ["created_at", "2019-08-22 07:16:54.866324"], ["updated_at", "2019-08-22 07:16:54.866324"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 169], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 169], ["auditable_type", "Node"], ["associated_id", 120], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 120\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ed84fa9b-d503-4468-8a96-e9320d321ce8"], ["created_at", "2019-08-22 07:16:54.870464"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 120], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 120]]
  [1m[36mEdge Load (6.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 120]]
  [1m[36mEdge Load (6.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 120]]
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 120], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 168], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 120], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 168], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 168], ["auditable_type", "Node"], ["associated_id", 120], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "952f6e84-983b-4c7a-9413-6de4d347c460"], ["created_at", "2019-08-22 07:16:54.919742"]]
  [1m[36mInputNode Update (2.9ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:16:54.917315"], ["id", 168]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 169], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 120], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 120]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 120]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 120], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 120]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 120], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 120]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 168], ["to_node_id", 169], ["created_at", "2019-08-22 07:16:54.965599"], ["updated_at", "2019-08-22 07:16:54.965599"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 42], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 42], ["auditable_type", "Edge"], ["associated_id", 168], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 168\nto_node_id: 169\n"], ["version", 1], ["request_uuid", "328d0589-ca86-4181-ade6-a54b35ba7a78"], ["created_at", "2019-08-22 07:16:54.969738"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 168], ["to_node_id", 169], ["created_at", "2019-08-22 07:16:54.978542"], ["updated_at", "2019-08-22 07:16:54.978542"]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:54.999142"], ["updated_at", "2019-08-22 07:16:54.999142"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 121], ["created_at", "2019-08-22 07:16:55.008442"], ["updated_at", "2019-08-22 07:16:55.008442"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 170], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 170], ["auditable_type", "Node"], ["associated_id", 121], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 121\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9a3752f7-5068-4a6c-b0d7-979c3519f62d"], ["created_at", "2019-08-22 07:16:55.015892"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 121]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 121], ["created_at", "2019-08-22 07:16:55.028877"], ["updated_at", "2019-08-22 07:16:55.028877"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 171], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 171], ["auditable_type", "Node"], ["associated_id", 121], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 121\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9769eeed-7242-4eee-87cc-13177b2f812c"], ["created_at", "2019-08-22 07:16:55.035706"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 121], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 121]]
  [1m[36mEdge Load (6.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 121]]
  [1m[36mEdge Load (5.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 121]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 121], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 170], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 121], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 170], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 170], ["auditable_type", "Node"], ["associated_id", 121], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "4f8810ea-9810-4a5f-8101-4c49d12739f9"], ["created_at", "2019-08-22 07:16:55.080173"]]
  [1m[36mInputNode Update (3.4ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:16:55.077747"], ["id", 170]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 171], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 121], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 121]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 121]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 121], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 121]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 121], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 121]]
  [1m[36mEdge Load (7.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 121]]
  [1m[36mEdge Load (7.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 121]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:55.152313"], ["updated_at", "2019-08-22 07:16:55.152313"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 122], ["created_at", "2019-08-22 07:16:55.158411"], ["updated_at", "2019-08-22 07:16:55.158411"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 172], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 172], ["auditable_type", "Node"], ["associated_id", 122], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 122\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "22cd0f45-54a7-4f09-902f-e8f5f2168230"], ["created_at", "2019-08-22 07:16:55.163137"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 122], ["created_at", "2019-08-22 07:16:55.177883"], ["updated_at", "2019-08-22 07:16:55.177883"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 173], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 173], ["auditable_type", "Node"], ["associated_id", 122], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 122\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "64703328-15ae-4978-aa47-18d9424b68af"], ["created_at", "2019-08-22 07:16:55.186523"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 172], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 172], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 172], ["auditable_type", "Node"], ["associated_id", 122], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "2d35e219-7333-4cb8-aaf0-7f6fec65ea05"], ["created_at", "2019-08-22 07:16:55.221349"]]
  [1m[36mInputNode Update (2.9ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:16:55.219188"], ["id", 172]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 173], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 172], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 173], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 172], ["to_node_id", 173], ["created_at", "2019-08-22 07:16:55.328267"], ["updated_at", "2019-08-22 07:16:55.328267"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 44], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 44], ["auditable_type", "Edge"], ["associated_id", 172], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 172\nto_node_id: 173\n"], ["version", 1], ["request_uuid", "e404beb0-8499-4267-ab67-acda836c0c63"], ["created_at", "2019-08-22 07:16:55.332746"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 122]]
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 172], ["LIMIT", 1]]
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 173], ["LIMIT", 1]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:55.392783"], ["updated_at", "2019-08-22 07:16:55.392783"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 123]]
  [1m[36mEdge Load (1.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 123]]
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:55.424380"], ["updated_at", "2019-08-22 07:16:55.424380"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 124], ["created_at", "2019-08-22 07:16:55.432598"], ["updated_at", "2019-08-22 07:16:55.432598"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 174], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 174], ["auditable_type", "Node"], ["associated_id", 124], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 124\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f6487f2a-ae25-4c44-b8c9-40a7b08caa36"], ["created_at", "2019-08-22 07:16:55.437506"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 124]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 124], ["created_at", "2019-08-22 07:16:55.453601"], ["updated_at", "2019-08-22 07:16:55.453601"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 175], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 175], ["auditable_type", "Node"], ["associated_id", 124], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 124\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7034b8b4-2cfb-4fd5-ae6b-8005d559de9c"], ["created_at", "2019-08-22 07:16:55.457746"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 124], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 124]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 174], ["to_node_id", 175], ["created_at", "2019-08-22 07:16:55.471631"], ["updated_at", "2019-08-22 07:16:55.471631"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 45], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 45], ["auditable_type", "Edge"], ["associated_id", 174], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 174\nto_node_id: 175\n"], ["version", 1], ["request_uuid", "d101ce9b-4309-4d3c-8fa7-b3ebb4f0fda7"], ["created_at", "2019-08-22 07:16:55.475536"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 124]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 124]]
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:55.517319"], ["updated_at", "2019-08-22 07:16:55.517319"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 125], ["created_at", "2019-08-22 07:16:55.524747"], ["updated_at", "2019-08-22 07:16:55.524747"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 176], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 176], ["auditable_type", "Node"], ["associated_id", 125], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 125\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4631c01b-4b3a-46a8-8cbc-3fa748243e5b"], ["created_at", "2019-08-22 07:16:55.532711"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 125]]
  [1m[36mOutputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 125], ["created_at", "2019-08-22 07:16:55.547308"], ["updated_at", "2019-08-22 07:16:55.547308"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 177], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 177], ["auditable_type", "Node"], ["associated_id", 125], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 125\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "193dc556-059f-4df6-9aba-d739dbfd0e2a"], ["created_at", "2019-08-22 07:16:55.553224"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 125], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 125]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 125]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 125]]
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:55.590607"], ["updated_at", "2019-08-22 07:16:55.590607"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 126], ["created_at", "2019-08-22 07:16:55.596275"], ["updated_at", "2019-08-22 07:16:55.596275"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 178], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 178], ["auditable_type", "Node"], ["associated_id", 126], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 126\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ff13e1b2-eeed-4e99-93a2-11856c0fefe4"], ["created_at", "2019-08-22 07:16:55.601391"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 126]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 126], ["created_at", "2019-08-22 07:16:55.628129"], ["updated_at", "2019-08-22 07:16:55.628129"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 179], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 179], ["auditable_type", "Node"], ["associated_id", 126], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 126\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "947955a0-d6d3-4924-b945-ae2e6264ebc0"], ["created_at", "2019-08-22 07:16:55.632202"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 126], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 126]]
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 126]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 126]]
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 126], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 179], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 126], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 126]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 126]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 126], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 126]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 126], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 126]]
  [1m[36mNode Destroy (2.9ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 178]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 126]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 126]]
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 126]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:16:55.718184"], ["updated_at", "2019-08-22 07:16:55.718184"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 127], ["created_at", "2019-08-22 07:16:55.725061"], ["updated_at", "2019-08-22 07:16:55.725061"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 180], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 180], ["auditable_type", "Node"], ["associated_id", 127], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 127\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5c9b56f0-e6b5-4fc7-b94d-d18d7e318236"], ["created_at", "2019-08-22 07:16:55.732927"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 127], ["created_at", "2019-08-22 07:16:55.746691"], ["updated_at", "2019-08-22 07:16:55.746691"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 181], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 181], ["auditable_type", "Node"], ["associated_id", 127], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 127\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "78201e4a-54c3-48ff-9e3d-e0b6ce638a28"], ["created_at", "2019-08-22 07:16:55.751370"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 127], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 127], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 180], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 127], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 180], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 180], ["auditable_type", "Node"], ["associated_id", 127], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "bb19a065-2393-4a73-a0e8-7e222693ac40"], ["created_at", "2019-08-22 07:16:55.787382"]]
  [1m[36mInputNode Update (2.7ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:16:55.785283"], ["id", 180]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 181], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 127], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 127], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 127], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 180], ["to_node_id", 181], ["created_at", "2019-08-22 07:16:55.833199"], ["updated_at", "2019-08-22 07:16:55.833199"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 46], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 46], ["auditable_type", "Edge"], ["associated_id", 180], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 180\nto_node_id: 181\n"], ["version", 1], ["request_uuid", "63b18d25-4e5f-41b9-9b14-ae5731619168"], ["created_at", "2019-08-22 07:16:55.837518"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 127], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 180], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 127], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 181], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 127], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 127], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 127], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 127]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 180], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 46], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 46], ["auditable_type", "Edge"], ["associated_id", 180], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 180\nto_node_id: 181\n"], ["version", 2], ["request_uuid", "24c615ca-4323-4af5-96a0-f0a4e5bde671"], ["created_at", "2019-08-22 07:16:55.913565"]]
  [1m[36mEdge Destroy (2.7ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 46]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (10.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (3.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (15.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:17:09.135216"], ["updated_at", "2019-08-22 07:17:09.135216"]]
  [1m[35m (5.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/128/save_all" for 127.0.0.1 at 2019-08-22 07:17:09 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"id"=>"128", "name"=>"Updated Graph 1", "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"f380d097-97ec-4605-837f-bd7e259d7dbe"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"b2bc3e8f-ccb8-4e34-bedb-fed57604403a"}]}
  [1m[36mGraph Load (8.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 128], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 71ms (ActiveRecord: 20.4ms)
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (11.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:18:15.023877"], ["updated_at", "2019-08-22 07:18:15.023877"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/129/save_all" for 127.0.0.1 at 2019-08-22 07:18:15 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"129", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"fb1b8337-adb2-4162-94be-e2593553fca7"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"8b965296-bc5a-44fe-a286-4908e88e556a"}], "id"=>"129"}
  [1m[36mGraph Load (4.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 129], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (3.4ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:18:15.210503"], ["id", 129]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (11.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 129], ["created_at", "2019-08-22 07:18:15.379866"], ["updated_at", "2019-08-22 07:18:15.379866"], ["type", "InputNode"]]
  [1m[35m (16.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 182], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 182], ["auditable_type", "Node"], ["associated_id", 129], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 129\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "bb575cea-aadb-459b-a0e3-904260965b86"], ["created_at", "2019-08-22 07:18:15.488165"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 129]]
  [1m[36mOutputNode Create (3.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 129], ["created_at", "2019-08-22 07:18:15.586715"], ["updated_at", "2019-08-22 07:18:15.586715"], ["type", "OutputNode"]]
  [1m[35m (7.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 183], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 183], ["auditable_type", "Node"], ["associated_id", 129], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 129\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "bb575cea-aadb-459b-a0e3-904260965b86"], ["created_at", "2019-08-22 07:18:15.596765"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 129], ["LIMIT", 1]]
  [1m[36mNode Load (10.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 129]]
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 129], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 129]]
  [1m[36mEdge Load (13.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 129]]
  [1m[36mEdge Load (7.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 129]]
Completed 200 OK in 527ms (Views: 0.4ms | ActiveRecord: 167.3ms)
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:35.102532"], ["updated_at", "2019-08-22 07:21:35.102532"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (8.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 130], ["created_at", "2019-08-22 07:21:35.189340"], ["updated_at", "2019-08-22 07:21:35.189340"], ["type", "InputNode"]]
  [1m[35m (19.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 184], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 184], ["auditable_type", "Node"], ["associated_id", 130], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 130\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ace2a228-6d4c-4e63-a8d0-0c920e643bf6"], ["created_at", "2019-08-22 07:21:35.261391"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 130]]
  [1m[36mOutputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 130], ["created_at", "2019-08-22 07:21:35.340553"], ["updated_at", "2019-08-22 07:21:35.340553"], ["type", "OutputNode"]]
  [1m[35m (12.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 185], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 185], ["auditable_type", "Node"], ["associated_id", 130], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 130\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "07a0d3af-7c3f-487a-b920-7a0972373c6d"], ["created_at", "2019-08-22 07:21:35.351467"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 130], ["LIMIT", 1]]
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 130]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (7.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 184], ["to_node_id", 185], ["created_at", "2019-08-22 07:21:35.424505"], ["updated_at", "2019-08-22 07:21:35.424505"]]
  [1m[35m (8.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 47], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 47], ["auditable_type", "Edge"], ["associated_id", 184], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 184\nto_node_id: 185\n"], ["version", 1], ["request_uuid", "05ec11a7-213f-42b1-98dc-f148d5402d68"], ["created_at", "2019-08-22 07:21:35.440505"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (15.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 130]]
  [1m[36mEdge Load (9.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 130]]
  [1m[35m (4.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (4.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:35.531489"], ["updated_at", "2019-08-22 07:21:35.531489"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 131], ["created_at", "2019-08-22 07:21:35.540721"], ["updated_at", "2019-08-22 07:21:35.540721"], ["type", "InputNode"]]
  [1m[35m (9.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 186], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 186], ["auditable_type", "Node"], ["associated_id", 131], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 131\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ca9f2bc4-724a-428b-93de-6830f97636b2"], ["created_at", "2019-08-22 07:21:35.553681"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[36mOutputNode Create (2.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 131], ["created_at", "2019-08-22 07:21:35.586693"], ["updated_at", "2019-08-22 07:21:35.586693"], ["type", "OutputNode"]]
  [1m[35m (9.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 187], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 187], ["auditable_type", "Node"], ["associated_id", 131], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 131\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3ae5de1f-ff79-4044-86f7-2470f4ecea53"], ["created_at", "2019-08-22 07:21:35.599017"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[36mNode Load (4.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[36mEdge Load (9.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[36mEdge Load (9.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[36mGraph Load (2.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 186], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[35m (11.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 186], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 186], ["auditable_type", "Node"], ["associated_id", 131], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "51559241-e265-469e-8bdd-4c760a9b72d8"], ["created_at", "2019-08-22 07:21:35.690187"]]
  [1m[36mInputNode Update (4.3ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:21:35.683681"], ["id", 186]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 187], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 186], ["to_node_id", 187], ["created_at", "2019-08-22 07:21:35.787460"], ["updated_at", "2019-08-22 07:21:35.787460"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 48], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 48], ["auditable_type", "Edge"], ["associated_id", 186], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 186\nto_node_id: 187\n"], ["version", 1], ["request_uuid", "7c4c6479-c96b-493b-8e49-cf2e7b64e77e"], ["created_at", "2019-08-22 07:21:35.797648"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (9.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[36mEdge Load (10.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 186], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 187], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[36mEdge Load (8.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[36mEdge Load (9.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 131]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 186], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 48], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 48], ["auditable_type", "Edge"], ["associated_id", 186], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 186\nto_node_id: 187\n"], ["version", 2], ["request_uuid", "c39d5355-60c2-4ebc-b2c8-ca1fcf19a7cf"], ["created_at", "2019-08-22 07:21:35.952922"]]
  [1m[36mEdge Destroy (3.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 48]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (10.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:36.000221"], ["updated_at", "2019-08-22 07:21:36.000221"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 132], ["LIMIT", 1]]
  [1m[36mEdge Load (11.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 132]]
  [1m[36mEdge Load (8.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 132]]
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:36.056947"], ["updated_at", "2019-08-22 07:21:36.056947"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 133], ["created_at", "2019-08-22 07:21:36.063515"], ["updated_at", "2019-08-22 07:21:36.063515"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 188], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 188], ["auditable_type", "Node"], ["associated_id", 133], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 133\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "97d06b55-372c-4582-802f-4e2446e26a40"], ["created_at", "2019-08-22 07:21:36.071644"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 133]]
  [1m[36mOutputNode Create (3.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 133], ["created_at", "2019-08-22 07:21:36.089481"], ["updated_at", "2019-08-22 07:21:36.089481"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 189], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 189], ["auditable_type", "Node"], ["associated_id", 133], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 133\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c85ec01c-a131-4b1d-80d1-348b49b0b352"], ["created_at", "2019-08-22 07:21:36.102420"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 133], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 133]]
  [1m[36mEdge Load (9.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 133]]
  [1m[36mEdge Load (8.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 133]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 133], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 188], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 133], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 188], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 188], ["auditable_type", "Node"], ["associated_id", 133], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "f4178477-6120-48f5-bcf2-eb8d0f7813f4"], ["created_at", "2019-08-22 07:21:36.167945"]]
  [1m[36mInputNode Update (3.6ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:21:36.163394"], ["id", 188]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 189], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 133], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 133]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 133]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 133], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 133]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 133], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 133]]
  [1m[36mEdge Load (4.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 133]]
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 133]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (5.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:36.260450"], ["updated_at", "2019-08-22 07:21:36.260450"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 134], ["created_at", "2019-08-22 07:21:36.270886"], ["updated_at", "2019-08-22 07:21:36.270886"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 190], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 190], ["auditable_type", "Node"], ["associated_id", 134], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 134\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bb7e5ff7-a9dc-430a-b927-2300041f787b"], ["created_at", "2019-08-22 07:21:36.277597"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 134]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 134], ["created_at", "2019-08-22 07:21:36.298886"], ["updated_at", "2019-08-22 07:21:36.298886"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 191], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 191], ["auditable_type", "Node"], ["associated_id", 134], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 134\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "37fec4b3-3558-4f25-9bcb-cd1a0446a9ee"], ["created_at", "2019-08-22 07:21:36.306700"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 134], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 134]]
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 134]]
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 134]]
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:36.352718"], ["updated_at", "2019-08-22 07:21:36.352718"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 135], ["created_at", "2019-08-22 07:21:36.362962"], ["updated_at", "2019-08-22 07:21:36.362962"], ["type", "InputNode"]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 192], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 192], ["auditable_type", "Node"], ["associated_id", 135], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 135\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "43dc470d-e714-45f5-8303-d53e7f89eefb"], ["created_at", "2019-08-22 07:21:36.373401"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 135]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 135], ["created_at", "2019-08-22 07:21:36.394395"], ["updated_at", "2019-08-22 07:21:36.394395"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 193], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 193], ["auditable_type", "Node"], ["associated_id", 135], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 135\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c53e7f49-708f-48eb-b104-87174bf30a68"], ["created_at", "2019-08-22 07:21:36.400712"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 135], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 135]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 135]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 135]]
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 135], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 193], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 135], ["LIMIT", 1]]
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 135]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 135]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (6.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 135], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 135]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 135], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 135]]
  [1m[36mNode Destroy (2.6ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 192]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 135]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 135]]
  [1m[35m (5.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 135]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:36.507489"], ["updated_at", "2019-08-22 07:21:36.507489"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 136], ["created_at", "2019-08-22 07:21:36.516435"], ["updated_at", "2019-08-22 07:21:36.516435"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 194], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 194], ["auditable_type", "Node"], ["associated_id", 136], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 136\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f08d7484-c456-46f7-bc98-a77d90b4388e"], ["created_at", "2019-08-22 07:21:36.524059"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 136]]
  [1m[36mOutputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 136], ["created_at", "2019-08-22 07:21:36.545081"], ["updated_at", "2019-08-22 07:21:36.545081"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 195], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 195], ["auditable_type", "Node"], ["associated_id", 136], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 136\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4917f026-abcc-48f1-b718-0a07f7bb6358"], ["created_at", "2019-08-22 07:21:36.553091"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 136], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 136]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 136]]
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 136]]
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 136], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 136], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 194], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 194], ["auditable_type", "Node"], ["associated_id", 136], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "5e68e84e-5d2a-4c20-9b4c-b26701f94879"], ["created_at", "2019-08-22 07:21:36.605320"]]
  [1m[36mInputNode Update (3.3ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:21:36.600429"], ["id", 194]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 195], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 136], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 136]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 136]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 136], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 136]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 136], ["LIMIT", 1]]
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 136]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.2ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 194], ["to_node_id", 195], ["created_at", "2019-08-22 07:21:36.662516"], ["updated_at", "2019-08-22 07:21:36.662516"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 49], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 49], ["auditable_type", "Edge"], ["associated_id", 194], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 194\nto_node_id: 195\n"], ["version", 1], ["request_uuid", "1ba48ec0-4938-44b8-b479-e41aa5bc1379"], ["created_at", "2019-08-22 07:21:36.667463"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 194], ["to_node_id", 195], ["created_at", "2019-08-22 07:21:36.677269"], ["updated_at", "2019-08-22 07:21:36.677269"]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:36.691789"], ["updated_at", "2019-08-22 07:21:36.691789"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 137], ["created_at", "2019-08-22 07:21:36.700013"], ["updated_at", "2019-08-22 07:21:36.700013"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 196], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 196], ["auditable_type", "Node"], ["associated_id", 137], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 137\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c132958f-d70a-4903-950f-bcdc93ab9a9c"], ["created_at", "2019-08-22 07:21:36.710221"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 137], ["created_at", "2019-08-22 07:21:36.730881"], ["updated_at", "2019-08-22 07:21:36.730881"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 197], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 197], ["auditable_type", "Node"], ["associated_id", 137], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 137\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ae3000c3-9db0-4f4c-86d9-f25898d1091f"], ["created_at", "2019-08-22 07:21:36.742346"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 196], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 196], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 196], ["auditable_type", "Node"], ["associated_id", 137], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "c4460986-5b1a-4bec-8324-364601eaa96d"], ["created_at", "2019-08-22 07:21:36.792996"]]
  [1m[36mInputNode Update (3.3ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:21:36.787877"], ["id", 196]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 197], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 196], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 197], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 196], ["to_node_id", 197], ["created_at", "2019-08-22 07:21:36.913934"], ["updated_at", "2019-08-22 07:21:36.913934"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 51], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 51], ["auditable_type", "Edge"], ["associated_id", 196], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 196\nto_node_id: 197\n"], ["version", 1], ["request_uuid", "1d899f53-7998-46a3-86a2-abd0c78d2680"], ["created_at", "2019-08-22 07:21:36.918503"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 137]]
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (3.6ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 196], ["LIMIT", 1]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 197], ["LIMIT", 1]]
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (6.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:49.635913"], ["updated_at", "2019-08-22 07:21:49.635913"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (9.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 138], ["created_at", "2019-08-22 07:21:49.649222"], ["updated_at", "2019-08-22 07:21:49.649222"], ["type", "InputNode"]]
  [1m[35m (18.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 198], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 198], ["auditable_type", "Node"], ["associated_id", 138], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 138\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "53cc325e-f836-46ae-b07a-6a7a782841db"], ["created_at", "2019-08-22 07:21:49.699602"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (10.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 138]]
  [1m[36mOutputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 138], ["created_at", "2019-08-22 07:21:49.774952"], ["updated_at", "2019-08-22 07:21:49.774952"], ["type", "OutputNode"]]
  [1m[35m (8.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 199], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 199], ["auditable_type", "Node"], ["associated_id", 138], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 138\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "76c458ec-7ce7-4e0b-9acc-7c56509fefeb"], ["created_at", "2019-08-22 07:21:49.782497"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (5.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 198], ["to_node_id", 199], ["created_at", "2019-08-22 07:21:49.846975"], ["updated_at", "2019-08-22 07:21:49.846975"]]
  [1m[35m (10.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 52], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 52], ["auditable_type", "Edge"], ["associated_id", 198], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 198\nto_node_id: 199\n"], ["version", 1], ["request_uuid", "db4d10c9-e2d4-4e45-b659-3fa2db849acc"], ["created_at", "2019-08-22 07:21:49.857070"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (11.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (4.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 199]]
  [1m[36mEdge Load (4.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 199]]
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 198], ["LIMIT", 1]]
  [1m[35m (13.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 52], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 52], ["auditable_type", "Edge"], ["associated_id", 198], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 198\nto_node_id: 199\n"], ["version", 2], ["request_uuid", "cb5a5e65-b6e9-447b-8ff0-7125f86343fe"], ["created_at", "2019-08-22 07:21:49.913097"]]
  [1m[36mEdge Destroy (4.1ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 52]]
  [1m[35m (10.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 199], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 199], ["auditable_type", "Node"], ["associated_id", 138], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 138\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "9887bce0-b29d-436e-b70d-ef50ad518f56"], ["created_at", "2019-08-22 07:21:49.939164"]]
  [1m[36mOutputNode Destroy (3.3ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 199]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:49.981018"], ["updated_at", "2019-08-22 07:21:49.981018"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 139], ["created_at", "2019-08-22 07:21:49.988735"], ["updated_at", "2019-08-22 07:21:49.988735"], ["type", "InputNode"]]
  [1m[35m (9.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 200], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 200], ["auditable_type", "Node"], ["associated_id", 139], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 139\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8f9f2541-ac88-43c2-9057-46f84004e994"], ["created_at", "2019-08-22 07:21:49.999480"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 139]]
  [1m[36mOutputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 139], ["created_at", "2019-08-22 07:21:50.024415"], ["updated_at", "2019-08-22 07:21:50.024415"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 201], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 201], ["auditable_type", "Node"], ["associated_id", 139], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 139\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1c5bc946-183b-4e17-a14b-b664a3cef631"], ["created_at", "2019-08-22 07:21:50.030172"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 200], ["to_node_id", 201], ["created_at", "2019-08-22 07:21:50.039538"], ["updated_at", "2019-08-22 07:21:50.039538"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 53], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 53], ["auditable_type", "Edge"], ["associated_id", 200], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 200\nto_node_id: 201\n"], ["version", 1], ["request_uuid", "21ecae23-0588-4470-b034-c67b35db4d50"], ["created_at", "2019-08-22 07:21:50.043743"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (4.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 200]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 53], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 53], ["auditable_type", "Edge"], ["associated_id", 200], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 200\nto_node_id: 201\n"], ["version", 2], ["request_uuid", "ec9e4640-ae44-45aa-9080-b60eda28a6db"], ["created_at", "2019-08-22 07:21:50.067259"]]
  [1m[36mEdge Destroy (3.7ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 53]]
  [1m[36mEdge Load (3.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 200]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 200], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 200], ["auditable_type", "Node"], ["associated_id", 139], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 139\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "1ee08e44-4893-4a2c-9e10-164ea85e7680"], ["created_at", "2019-08-22 07:21:50.095116"]]
  [1m[36mInputNode Destroy (3.6ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 200]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:50.126746"], ["updated_at", "2019-08-22 07:21:50.126746"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 140], ["created_at", "2019-08-22 07:21:50.133676"], ["updated_at", "2019-08-22 07:21:50.133676"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 202], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 202], ["auditable_type", "Node"], ["associated_id", 140], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 140\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cedf37a6-3a9f-4569-a741-7a1c7c65bb60"], ["created_at", "2019-08-22 07:21:50.140654"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 07:21:50.203725"], ["updated_at", "2019-08-22 07:21:50.203725"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 141], ["created_at", "2019-08-22 07:21:50.207103"], ["updated_at", "2019-08-22 07:21:50.207103"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 203], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 203], ["auditable_type", "Node"], ["associated_id", 141], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 141\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ead30c82-6724-4a69-be2f-f941760b8e21"], ["created_at", "2019-08-22 07:21:50.214967"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:50.246200"], ["updated_at", "2019-08-22 07:21:50.246200"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 142]]
  [1m[36mOutputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 142], ["created_at", "2019-08-22 07:21:50.262297"], ["updated_at", "2019-08-22 07:21:50.262297"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 204], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 204], ["auditable_type", "Node"], ["associated_id", 142], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 142\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e8c5cf22-fb8c-47eb-80b2-87375e070982"], ["created_at", "2019-08-22 07:21:50.278396"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:50.313446"], ["updated_at", "2019-08-22 07:21:50.313446"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 143], ["created_at", "2019-08-22 07:21:50.322107"], ["updated_at", "2019-08-22 07:21:50.322107"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 205], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 205], ["auditable_type", "Node"], ["associated_id", 143], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 143\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cc464ebf-09ac-46d5-a372-7bf026f92f33"], ["created_at", "2019-08-22 07:21:50.345240"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 143]]
  [1m[36mOutputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 143], ["created_at", "2019-08-22 07:21:50.369388"], ["updated_at", "2019-08-22 07:21:50.369388"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 206], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 206], ["auditable_type", "Node"], ["associated_id", 143], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 143\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ccb46db0-e3b2-4a16-a887-7dc6b4ecf876"], ["created_at", "2019-08-22 07:21:50.385302"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 205], ["to_node_id", 206], ["created_at", "2019-08-22 07:21:50.397286"], ["updated_at", "2019-08-22 07:21:50.397286"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 54], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 54], ["auditable_type", "Edge"], ["associated_id", 205], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 205\nto_node_id: 206\n"], ["version", 1], ["request_uuid", "e23bcfc7-fb97-4331-b808-b3273880ff6e"], ["created_at", "2019-08-22 07:21:50.403061"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:50.423017"], ["updated_at", "2019-08-22 07:21:50.423017"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 144], ["created_at", "2019-08-22 07:21:50.434501"], ["updated_at", "2019-08-22 07:21:50.434501"], ["type", "InputNode"]]
  [1m[35m (2.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 207], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 207], ["auditable_type", "Node"], ["associated_id", 144], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 144\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a91daca6-96d4-40c1-9c75-31783f84b553"], ["created_at", "2019-08-22 07:21:50.456753"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:50.516368"], ["updated_at", "2019-08-22 07:21:50.516368"]]
  [1m[35m (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 145], ["created_at", "2019-08-22 07:21:50.533804"], ["updated_at", "2019-08-22 07:21:50.533804"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 208], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 208], ["auditable_type", "Node"], ["associated_id", 145], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 145\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4c55ceda-4181-4dd0-8268-a91cea109e09"], ["created_at", "2019-08-22 07:21:50.568331"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 145]]
  [1m[36mOutputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 145], ["created_at", "2019-08-22 07:21:50.589421"], ["updated_at", "2019-08-22 07:21:50.589421"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 209], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (6.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 209], ["auditable_type", "Node"], ["associated_id", 145], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 145\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b9f5ba04-51f5-45d7-9b73-6332b16934b0"], ["created_at", "2019-08-22 07:21:50.595950"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 208], ["to_node_id", 209], ["created_at", "2019-08-22 07:21:50.613047"], ["updated_at", "2019-08-22 07:21:50.613047"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 55], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 55], ["auditable_type", "Edge"], ["associated_id", 208], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 208\nto_node_id: 209\n"], ["version", 1], ["request_uuid", "d9d1b9ce-d1b6-48db-a40f-d3703c0c278f"], ["created_at", "2019-08-22 07:21:50.618382"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 55], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 55], ["auditable_type", "Edge"], ["associated_id", 208], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 208\nto_node_id: 209\n"], ["version", 2], ["request_uuid", "8546dd23-0c5b-4bf2-bcc2-d08ff660115f"], ["created_at", "2019-08-22 07:21:50.651994"]]
  [1m[36mEdge Destroy (3.5ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 55]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:50.705763"], ["updated_at", "2019-08-22 07:21:50.705763"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 146], ["created_at", "2019-08-22 07:21:50.718391"], ["updated_at", "2019-08-22 07:21:50.718391"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 210], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 210], ["auditable_type", "Node"], ["associated_id", 146], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 146\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "59d344b0-40e7-48d2-bf19-a7f82fbeb64f"], ["created_at", "2019-08-22 07:21:50.740439"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 07:21:50.751545"], ["updated_at", "2019-08-22 07:21:50.751545"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 147]]
  [1m[36mOutputNode Create (1.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 147], ["created_at", "2019-08-22 07:21:50.764171"], ["updated_at", "2019-08-22 07:21:50.764171"], ["type", "OutputNode"]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 211], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 211], ["auditable_type", "Node"], ["associated_id", 147], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 147\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a5937efd-e172-4ce1-9792-866ac30d60ee"], ["created_at", "2019-08-22 07:21:50.769828"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:50.801534"], ["updated_at", "2019-08-22 07:21:50.801534"]]
  [1m[36mInputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 148], ["created_at", "2019-08-22 07:21:50.807709"], ["updated_at", "2019-08-22 07:21:50.807709"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 212], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 212], ["auditable_type", "Node"], ["associated_id", 148], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 148\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "31a1465c-0dac-4c00-b4eb-d18b5b8c14d6"], ["created_at", "2019-08-22 07:21:50.819240"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 148], ["created_at", "2019-08-22 07:21:50.830218"], ["updated_at", "2019-08-22 07:21:50.830218"], ["type", "OutputNode"]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 213], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 213], ["auditable_type", "Node"], ["associated_id", 148], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 148\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "eb02719f-5d52-46f6-bb68-5dfee5a1a00c"], ["created_at", "2019-08-22 07:21:50.842851"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 148], ["created_at", "2019-08-22 07:21:50.859968"], ["updated_at", "2019-08-22 07:21:50.859968"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 214], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 214], ["auditable_type", "Node"], ["associated_id", 148], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 148\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e6df0331-dd9b-4bd7-a800-a860be0f2484"], ["created_at", "2019-08-22 07:21:50.865131"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 148], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 212], ["to_node_id", 213], ["created_at", "2019-08-22 07:21:50.887124"], ["updated_at", "2019-08-22 07:21:50.887124"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 56], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 56], ["auditable_type", "Edge"], ["associated_id", 212], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 212\nto_node_id: 213\n"], ["version", 1], ["request_uuid", "a4b933ae-d9b1-4ed7-8682-0be6fd2538da"], ["created_at", "2019-08-22 07:21:50.891514"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 56], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 56], ["auditable_type", "Edge"], ["associated_id", 212], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 213\n- 214\n"], ["version", 2], ["request_uuid", "bfe71c01-b7c4-48e0-8203-2fc353964f59"], ["created_at", "2019-08-22 07:21:50.902478"]]
  [1m[36mEdge Update (3.5ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 214], ["updated_at", "2019-08-22 07:21:50.900641"], ["id", 56]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 148]]
  [1m[36mEdge Load (7.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 148]]
  [1m[36mAudited::Audit Load (4.4ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 148], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (6.3ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 56], ["auditable_type", "Edge"]]
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 212], ["LIMIT", 1]]
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 213], ["LIMIT", 1]]
  [1m[36mEdge Update (3.6ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 213], ["updated_at", "2019-08-22 07:21:50.982923"], ["id", 56]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (4.7ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 320]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 148], ["LIMIT", 1]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 213], ["LIMIT", 1]]
  [1m[36mEdge Load (9.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 148]]
  [1m[36mEdge Load (6.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 148]]
  [1m[36mAudited::Audit Load (4.1ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 148], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.9ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 56], ["auditable_type", "Edge"]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 212], ["LIMIT", 1]]
  [1m[36mEdge Destroy (3.9ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 56]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (4.3ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 319]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 148], ["LIMIT", 1]]
  [1m[36mEdge Load (7.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 148]]
  [1m[36mEdge Load (7.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 148]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:51.205604"], ["updated_at", "2019-08-22 07:21:51.205604"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/149/save_all" for 127.0.0.1 at 2019-08-22 07:21:51 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"149", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"9c8d5c37-4fda-454a-8e47-25797f051ddf"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"ee44a3b9-65dd-452d-a985-8a294c12920a"}], "id"=>"149"}
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 149], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.0ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:21:51.313875"], ["id", 149]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 149], ["created_at", "2019-08-22 07:21:51.322330"], ["updated_at", "2019-08-22 07:21:51.322330"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 215], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 215], ["auditable_type", "Node"], ["associated_id", 149], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 149\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "d1ad8592-467c-4aa7-b47d-42dd8a1e5fd7"], ["created_at", "2019-08-22 07:21:51.327543"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 149]]
  [1m[36mOutputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 149], ["created_at", "2019-08-22 07:21:51.340428"], ["updated_at", "2019-08-22 07:21:51.340428"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 216], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 216], ["auditable_type", "Node"], ["associated_id", 149], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 149\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "d1ad8592-467c-4aa7-b47d-42dd8a1e5fd7"], ["created_at", "2019-08-22 07:21:51.345184"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 149], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 149]]
  [1m[36mGraph Load (2.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 149], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 149]]
  [1m[36mEdge Load (7.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 149]]
  [1m[36mEdge Load (7.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 149]]
Completed 200 OK in 114ms (Views: 0.7ms | ActiveRecord: 36.0ms)
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:51.429931"], ["updated_at", "2019-08-22 07:21:51.429931"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 150], ["created_at", "2019-08-22 07:21:51.441303"], ["updated_at", "2019-08-22 07:21:51.441303"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 217], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 217], ["auditable_type", "Node"], ["associated_id", 150], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 150\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "888eb6a0-af7a-4260-90c3-37d5a133822d"], ["created_at", "2019-08-22 07:21:51.457928"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 150]]
  [1m[36mOutputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 150], ["created_at", "2019-08-22 07:21:51.472565"], ["updated_at", "2019-08-22 07:21:51.472565"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 218], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 218], ["auditable_type", "Node"], ["associated_id", 150], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 150\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4ab271c1-44fd-4403-8977-b6b9abd7f3bc"], ["created_at", "2019-08-22 07:21:51.477846"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 150], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 150]]
  [1m[36mEdge Load (7.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 150]]
  [1m[36mEdge Load (7.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 150]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 150], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 217], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 150], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 217], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 217], ["auditable_type", "Node"], ["associated_id", 150], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "a2af8b5f-4b7b-46be-9bf1-d1a4df5045c5"], ["created_at", "2019-08-22 07:21:51.529208"]]
  [1m[36mInputNode Update (3.0ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:21:51.527112"], ["id", 217]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 150], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 150]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 150]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 150], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 150]]
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 150], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 150]]
  [1m[36mEdge Load (6.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 150]]
  [1m[36mEdge Load (7.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 150]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:51.608122"], ["updated_at", "2019-08-22 07:21:51.608122"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 151], ["created_at", "2019-08-22 07:21:51.615833"], ["updated_at", "2019-08-22 07:21:51.615833"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 219], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 219], ["auditable_type", "Node"], ["associated_id", 151], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 151\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ab671dc4-bef1-4d0d-9c4d-d7ee8cd97e1c"], ["created_at", "2019-08-22 07:21:51.621166"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 151]]
  [1m[36mOutputNode Create (2.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 151], ["created_at", "2019-08-22 07:21:51.641539"], ["updated_at", "2019-08-22 07:21:51.641539"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 220], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 220], ["auditable_type", "Node"], ["associated_id", 151], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 151\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b0b259e6-7542-43b5-b8cf-e322dfd5738b"], ["created_at", "2019-08-22 07:21:51.652592"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 151]]
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 151]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 151]]
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 151]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 151]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 151]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 151]]
  [1m[36mNode Destroy (3.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 219]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 151]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 151]]
  [1m[35m (5.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 151]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:51.759012"], ["updated_at", "2019-08-22 07:21:51.759012"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 152], ["created_at", "2019-08-22 07:21:51.768012"], ["updated_at", "2019-08-22 07:21:51.768012"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 221], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 221], ["auditable_type", "Node"], ["associated_id", 152], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 152\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1033b40d-8fb9-4edc-86bb-f8031c973b69"], ["created_at", "2019-08-22 07:21:51.777113"]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 152], ["created_at", "2019-08-22 07:21:51.791831"], ["updated_at", "2019-08-22 07:21:51.791831"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 222], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 222], ["auditable_type", "Node"], ["associated_id", 152], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 152\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "33954c76-dd8a-44a6-8a80-3952f743b9f3"], ["created_at", "2019-08-22 07:21:51.796365"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 221], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 221], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 221], ["auditable_type", "Node"], ["associated_id", 152], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "004a0c95-c93f-44ba-9e79-54c85973a91a"], ["created_at", "2019-08-22 07:21:51.835791"]]
  [1m[36mInputNode Update (3.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:21:51.833965"], ["id", 221]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 222], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 221], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 222], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 221], ["to_node_id", 222], ["created_at", "2019-08-22 07:21:51.990097"], ["updated_at", "2019-08-22 07:21:51.990097"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 57], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 57], ["auditable_type", "Edge"], ["associated_id", 221], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 221\nto_node_id: 222\n"], ["version", 1], ["request_uuid", "c814c0b2-c681-42d9-98e2-a0eeeb671b6a"], ["created_at", "2019-08-22 07:21:52.008251"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 152]]
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 221], ["LIMIT", 1]]
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 222], ["LIMIT", 1]]
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:52.083583"], ["updated_at", "2019-08-22 07:21:52.083583"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 153], ["created_at", "2019-08-22 07:21:52.109459"], ["updated_at", "2019-08-22 07:21:52.109459"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 223], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 223], ["auditable_type", "Node"], ["associated_id", 153], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 153\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f806ff2c-e4fa-491c-8489-9f517fd9bb92"], ["created_at", "2019-08-22 07:21:52.116529"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 153]]
  [1m[36mOutputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 153], ["created_at", "2019-08-22 07:21:52.130024"], ["updated_at", "2019-08-22 07:21:52.130024"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 224], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 224], ["auditable_type", "Node"], ["associated_id", 153], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 153\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ad593c98-0187-41de-8247-2c9a7b78b8aa"], ["created_at", "2019-08-22 07:21:52.135027"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 153], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 153]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 223], ["to_node_id", 224], ["created_at", "2019-08-22 07:21:52.151635"], ["updated_at", "2019-08-22 07:21:52.151635"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 58], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 58], ["auditable_type", "Edge"], ["associated_id", 223], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 223\nto_node_id: 224\n"], ["version", 1], ["request_uuid", "9cf920cc-6768-4b2e-ae33-e895cfdd850a"], ["created_at", "2019-08-22 07:21:52.156273"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 153]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 153]]
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:52.196048"], ["updated_at", "2019-08-22 07:21:52.196048"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 154], ["LIMIT", 1]]
  [1m[36mEdge Load (1.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 154]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 154]]
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:52.233664"], ["updated_at", "2019-08-22 07:21:52.233664"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 155], ["created_at", "2019-08-22 07:21:52.240980"], ["updated_at", "2019-08-22 07:21:52.240980"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 225], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 225], ["auditable_type", "Node"], ["associated_id", 155], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 155\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1ca4588c-c3df-4429-87a2-51e35949cff5"], ["created_at", "2019-08-22 07:21:52.247090"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[36mOutputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 155], ["created_at", "2019-08-22 07:21:52.265248"], ["updated_at", "2019-08-22 07:21:52.265248"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 226], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 226], ["auditable_type", "Node"], ["associated_id", 155], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 155\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "842dea4a-a31b-4797-a805-3cf010e5ef65"], ["created_at", "2019-08-22 07:21:52.275960"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 225], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 225], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 225], ["auditable_type", "Node"], ["associated_id", 155], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "c54ded62-b491-445d-829d-3b626a8fc34c"], ["created_at", "2019-08-22 07:21:52.343306"]]
  [1m[36mInputNode Update (3.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:21:52.341093"], ["id", 225]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 226], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[36mGraph Load (1.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 225], ["to_node_id", 226], ["created_at", "2019-08-22 07:21:52.399311"], ["updated_at", "2019-08-22 07:21:52.399311"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 59], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 59], ["auditable_type", "Edge"], ["associated_id", 225], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 225\nto_node_id: 226\n"], ["version", 1], ["request_uuid", "500430ec-56ff-47c7-a3ac-ce62fa675fe2"], ["created_at", "2019-08-22 07:21:52.403543"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 225], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 226], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[36mEdge Load (3.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 155]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 225], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 59], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 59], ["auditable_type", "Edge"], ["associated_id", 225], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 225\nto_node_id: 226\n"], ["version", 2], ["request_uuid", "06cf63eb-b7fa-438c-ba03-0e3d8edd59ad"], ["created_at", "2019-08-22 07:21:52.488059"]]
  [1m[36mEdge Destroy (4.0ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 59]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:52.528141"], ["updated_at", "2019-08-22 07:21:52.528141"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 156], ["created_at", "2019-08-22 07:21:52.538063"], ["updated_at", "2019-08-22 07:21:52.538063"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 227], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 227], ["auditable_type", "Node"], ["associated_id", 156], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 156\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c8213d09-8f2d-48d9-a169-d35f57c2d0a0"], ["created_at", "2019-08-22 07:21:52.546161"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 156]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 156], ["created_at", "2019-08-22 07:21:52.561728"], ["updated_at", "2019-08-22 07:21:52.561728"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 228], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 228], ["auditable_type", "Node"], ["associated_id", 156], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 156\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c6ad81fd-c53e-45b7-85a9-fcca9aace988"], ["created_at", "2019-08-22 07:21:52.566174"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 156], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 156]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 156]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 156]]
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:21:52.602270"], ["updated_at", "2019-08-22 07:21:52.602270"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 157], ["created_at", "2019-08-22 07:21:52.609461"], ["updated_at", "2019-08-22 07:21:52.609461"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 229], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 229], ["auditable_type", "Node"], ["associated_id", 157], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 157\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "92766b8d-b110-4650-be59-99be50cfd569"], ["created_at", "2019-08-22 07:21:52.616965"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 157]]
  [1m[36mOutputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 157], ["created_at", "2019-08-22 07:21:52.633704"], ["updated_at", "2019-08-22 07:21:52.633704"], ["type", "OutputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 230], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 230], ["auditable_type", "Node"], ["associated_id", 157], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 157\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e22a9235-4186-4eab-acf9-62f20eebdc94"], ["created_at", "2019-08-22 07:21:52.640804"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 157], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 157]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 157]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 157]]
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 157], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 229], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 157], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 229], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 229], ["auditable_type", "Node"], ["associated_id", 157], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "22f07bad-d355-4c69-a9f2-a734901123a9"], ["created_at", "2019-08-22 07:21:52.700284"]]
  [1m[36mInputNode Update (3.5ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:21:52.693537"], ["id", 229]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 230], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 157], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 157]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 157]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 157], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 157]]
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 157], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 157]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 229], ["to_node_id", 230], ["created_at", "2019-08-22 07:21:52.764112"], ["updated_at", "2019-08-22 07:21:52.764112"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 60], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 60], ["auditable_type", "Edge"], ["associated_id", 229], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 229\nto_node_id: 230\n"], ["version", 1], ["request_uuid", "d087dc67-5531-4098-ba7c-41cce060095c"], ["created_at", "2019-08-22 07:21:52.768604"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 229], ["to_node_id", 230], ["created_at", "2019-08-22 07:21:52.778606"], ["updated_at", "2019-08-22 07:21:52.778606"]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (6.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:22:57.498823"], ["updated_at", "2019-08-22 07:22:57.498823"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/158/save_all" for 127.0.0.1 at 2019-08-22 07:22:57 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"158", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"a481b1bb-603b-477c-881e-8859d4165cd6"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"f8ba990b-9851-4110-acb7-d8eb60b55d1c"}], "id"=>"158"}
  [1m[36mGraph Load (4.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 158], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.9ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:22:57.677878"], ["id", 158]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 158], ["created_at", "2019-08-22 07:22:57.863328"], ["updated_at", "2019-08-22 07:22:57.863328"], ["type", "InputNode"]]
  [1m[35m (16.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 231], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 231], ["auditable_type", "Node"], ["associated_id", 158], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 158\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "3c73e61e-e244-4761-863b-5f88dc11a683"], ["created_at", "2019-08-22 07:22:57.934974"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 158]]
  [1m[36mOutputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 158], ["created_at", "2019-08-22 07:22:58.016602"], ["updated_at", "2019-08-22 07:22:58.016602"], ["type", "OutputNode"]]
  [1m[35m (7.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 232], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 232], ["auditable_type", "Node"], ["associated_id", 158], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 158\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "3c73e61e-e244-4761-863b-5f88dc11a683"], ["created_at", "2019-08-22 07:22:58.022928"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 158], ["LIMIT", 1]]
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 158]]
  [1m[36mGraph Load (2.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 158], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 158]]
  [1m[36mEdge Load (20.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 158]]
  [1m[36mEdge Load (8.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 158]]
Completed 200 OK in 508ms (Views: 0.4ms | ActiveRecord: 150.8ms)
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (8.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:22:58.189049"], ["updated_at", "2019-08-22 07:22:58.189049"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 159], ["created_at", "2019-08-22 07:22:58.196620"], ["updated_at", "2019-08-22 07:22:58.196620"], ["type", "InputNode"]]
  [1m[35m (10.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 233], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 233], ["auditable_type", "Node"], ["associated_id", 159], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 159\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "59be9994-3bd4-4d9f-9fb9-740f79bdf7c4"], ["created_at", "2019-08-22 07:22:58.204867"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 159]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 159], ["created_at", "2019-08-22 07:22:58.230710"], ["updated_at", "2019-08-22 07:22:58.230710"], ["type", "OutputNode"]]
  [1m[35m (7.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 234], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 234], ["auditable_type", "Node"], ["associated_id", 159], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 159\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "fd39b005-022d-4abe-b1ac-6f4586f43d39"], ["created_at", "2019-08-22 07:22:58.237158"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 159], ["LIMIT", 1]]
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 159]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.3ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 233], ["to_node_id", 234], ["created_at", "2019-08-22 07:22:58.271707"], ["updated_at", "2019-08-22 07:22:58.271707"]]
  [1m[35m (6.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 62], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 62], ["auditable_type", "Edge"], ["associated_id", 233], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 233\nto_node_id: 234\n"], ["version", 1], ["request_uuid", "1436f486-be7d-488d-a4bc-5f92eeddb568"], ["created_at", "2019-08-22 07:22:58.280065"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (5.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 159]]
  [1m[36mEdge Load (5.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 159]]
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:22:58.327647"], ["updated_at", "2019-08-22 07:22:58.327647"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (4.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 160], ["created_at", "2019-08-22 07:22:58.335193"], ["updated_at", "2019-08-22 07:22:58.335193"], ["type", "InputNode"]]
  [1m[35m (8.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 235], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 235], ["auditable_type", "Node"], ["associated_id", 160], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 160\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d89d0ab3-0202-4cd0-9c6f-24a29a855b99"], ["created_at", "2019-08-22 07:22:58.343980"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[36mOutputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 160], ["created_at", "2019-08-22 07:22:58.369699"], ["updated_at", "2019-08-22 07:22:58.369699"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 236], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 236], ["auditable_type", "Node"], ["associated_id", 160], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 160\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7fa72e8f-e0e6-4fc3-b36d-70cdc31d7116"], ["created_at", "2019-08-22 07:22:58.378340"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[36mEdge Load (6.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[36mEdge Load (6.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 235], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 235], ["auditable_type", "Node"], ["associated_id", 160], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "7dfb0d23-d27f-4358-88cc-7d7b874c1547"], ["created_at", "2019-08-22 07:22:58.447719"]]
  [1m[36mInputNode Update (3.0ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:22:58.441879"], ["id", 235]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 236], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[36mEdge Load (5.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[36mEdge Load (5.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 236], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.3ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 235], ["to_node_id", 236], ["created_at", "2019-08-22 07:22:58.588019"], ["updated_at", "2019-08-22 07:22:58.588019"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 63], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 63], ["auditable_type", "Edge"], ["associated_id", 235], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 235\nto_node_id: 236\n"], ["version", 1], ["request_uuid", "d09f8808-b071-4bef-845d-f4bd01134437"], ["created_at", "2019-08-22 07:22:58.597111"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (5.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[36mEdge Load (6.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 160]]
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 236], ["LIMIT", 1]]
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:22:58.677349"], ["updated_at", "2019-08-22 07:22:58.677349"]]
  [1m[35m (2.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 161], ["LIMIT", 1]]
  [1m[36mEdge Load (6.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 161]]
  [1m[36mEdge Load (4.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 161]]
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:22:58.724518"], ["updated_at", "2019-08-22 07:22:58.724518"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 162], ["created_at", "2019-08-22 07:22:58.736567"], ["updated_at", "2019-08-22 07:22:58.736567"], ["type", "InputNode"]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 237], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 237], ["auditable_type", "Node"], ["associated_id", 162], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 162\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3192e7b9-1bcc-47ab-96aa-749aa3b89190"], ["created_at", "2019-08-22 07:22:58.747780"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 162]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 162], ["created_at", "2019-08-22 07:22:58.766646"], ["updated_at", "2019-08-22 07:22:58.766646"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 238], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 238], ["auditable_type", "Node"], ["associated_id", 162], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 162\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "847cf2c1-82bf-4a36-bc78-83b779246a37"], ["created_at", "2019-08-22 07:22:58.771474"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 162], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 162]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 162]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 162]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 162], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 237], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 162], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 237], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 237], ["auditable_type", "Node"], ["associated_id", 162], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "8a704a09-1629-419a-8aff-6c67c2e7df91"], ["created_at", "2019-08-22 07:22:58.810537"]]
  [1m[36mInputNode Update (2.9ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:22:58.808382"], ["id", 237]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 238], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 162], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 162]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 162]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 162], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 162]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 162], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 162]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 162]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 162]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:22:58.882581"], ["updated_at", "2019-08-22 07:22:58.882581"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 163], ["created_at", "2019-08-22 07:22:58.891727"], ["updated_at", "2019-08-22 07:22:58.891727"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 239], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 239], ["auditable_type", "Node"], ["associated_id", 163], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 163\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "909ddce7-64d8-4b50-add1-4ba5673e3123"], ["created_at", "2019-08-22 07:22:58.905187"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 163]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 163], ["created_at", "2019-08-22 07:22:58.923183"], ["updated_at", "2019-08-22 07:22:58.923183"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 240], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 240], ["auditable_type", "Node"], ["associated_id", 163], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 163\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "131d2882-d6fe-4166-9364-a458cfefcdf6"], ["created_at", "2019-08-22 07:22:58.928255"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 163], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 163]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 163]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 163]]
  [1m[36mGraph Load (1.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 163], ["LIMIT", 1]]
  [1m[35m (2.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 163], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 239], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 239], ["auditable_type", "Node"], ["associated_id", 163], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "13dadda1-21c8-4bf6-a6a5-79407c14f8ec"], ["created_at", "2019-08-22 07:22:58.987076"]]
  [1m[36mInputNode Update (3.1ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:22:58.980704"], ["id", 239]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 163], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 163]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 163]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 163], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 163]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 163], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 163]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 239], ["to_node_id", 240], ["created_at", "2019-08-22 07:22:59.044737"], ["updated_at", "2019-08-22 07:22:59.044737"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 64], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 64], ["auditable_type", "Edge"], ["associated_id", 239], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 239\nto_node_id: 240\n"], ["version", 1], ["request_uuid", "7cd1d5ff-9c1b-401e-a469-c58ffce47623"], ["created_at", "2019-08-22 07:22:59.049492"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.2ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 239], ["to_node_id", 240], ["created_at", "2019-08-22 07:22:59.061297"], ["updated_at", "2019-08-22 07:22:59.061297"]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:22:59.086086"], ["updated_at", "2019-08-22 07:22:59.086086"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 164], ["created_at", "2019-08-22 07:22:59.098141"], ["updated_at", "2019-08-22 07:22:59.098141"], ["type", "InputNode"]]
  [1m[35m (3.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 241], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 241], ["auditable_type", "Node"], ["associated_id", 164], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 164\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "564c32b9-2232-4b90-a13f-bc469c55c11a"], ["created_at", "2019-08-22 07:22:59.111348"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 164]]
  [1m[36mOutputNode Create (1.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 164], ["created_at", "2019-08-22 07:22:59.135069"], ["updated_at", "2019-08-22 07:22:59.135069"], ["type", "OutputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 242], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 242], ["auditable_type", "Node"], ["associated_id", 164], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 164\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "39754050-d74d-4d65-8c6d-babd23fe90b6"], ["created_at", "2019-08-22 07:22:59.146871"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 164], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 164]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 164]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 164]]
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:22:59.195136"], ["updated_at", "2019-08-22 07:22:59.195136"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 165], ["created_at", "2019-08-22 07:22:59.200439"], ["updated_at", "2019-08-22 07:22:59.200439"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 243], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 243], ["auditable_type", "Node"], ["associated_id", 165], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 165\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "88e6795a-b858-42f4-b620-559bd2bb1c95"], ["created_at", "2019-08-22 07:22:59.205123"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 165]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 165], ["created_at", "2019-08-22 07:22:59.219342"], ["updated_at", "2019-08-22 07:22:59.219342"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 244], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 244], ["auditable_type", "Node"], ["associated_id", 165], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 165\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0518bc9a-22f8-4877-af62-f4402f1fef5c"], ["created_at", "2019-08-22 07:22:59.227140"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 165], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 165]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 165]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 165]]
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 165], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 244], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 165], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 165]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 165]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 165], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 165]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 165], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 165]]
  [1m[36mNode Destroy (2.5ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 243]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 165]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 165]]
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 165]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:22:59.308643"], ["updated_at", "2019-08-22 07:22:59.308643"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 166], ["created_at", "2019-08-22 07:22:59.314177"], ["updated_at", "2019-08-22 07:22:59.314177"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 245], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 245], ["auditable_type", "Node"], ["associated_id", 166], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 166\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a38c9202-1844-41bf-bb52-eb17d68bf02f"], ["created_at", "2019-08-22 07:22:59.320481"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[36mOutputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 166], ["created_at", "2019-08-22 07:22:59.336730"], ["updated_at", "2019-08-22 07:22:59.336730"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 246], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 246], ["auditable_type", "Node"], ["associated_id", 166], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 166\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0981f4ea-7f6d-49bb-96ca-affbb2b0ebe4"], ["created_at", "2019-08-22 07:22:59.342352"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 166], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 166], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 245], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 166], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 245], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 245], ["auditable_type", "Node"], ["associated_id", 166], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "3e911080-6654-444e-af2f-01a73774dbf7"], ["created_at", "2019-08-22 07:22:59.376442"]]
  [1m[36mInputNode Update (2.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:22:59.374295"], ["id", 245]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 246], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 166], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 166], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 166], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 245], ["to_node_id", 246], ["created_at", "2019-08-22 07:22:59.419609"], ["updated_at", "2019-08-22 07:22:59.419609"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 66], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 66], ["auditable_type", "Edge"], ["associated_id", 245], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 245\nto_node_id: 246\n"], ["version", 1], ["request_uuid", "967e0c85-929a-4b39-ba2e-e3534bff1bbc"], ["created_at", "2019-08-22 07:22:59.424199"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 166], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 245], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 166], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 246], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 166], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 166], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 166], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 166]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 245], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 66], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 66], ["auditable_type", "Edge"], ["associated_id", 245], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 245\nto_node_id: 246\n"], ["version", 2], ["request_uuid", "c7af14dd-456e-4503-b03f-44c6b66a53c9"], ["created_at", "2019-08-22 07:22:59.495148"]]
  [1m[36mEdge Destroy (2.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 66]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:22:59.562296"], ["updated_at", "2019-08-22 07:22:59.562296"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 167], ["created_at", "2019-08-22 07:22:59.569713"], ["updated_at", "2019-08-22 07:22:59.569713"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 247], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 247], ["auditable_type", "Node"], ["associated_id", 167], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 167\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b5e23803-9b0b-4afe-b962-307e0307fc25"], ["created_at", "2019-08-22 07:22:59.578610"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:22:59.602038"], ["updated_at", "2019-08-22 07:22:59.602038"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 168], ["created_at", "2019-08-22 07:22:59.607865"], ["updated_at", "2019-08-22 07:22:59.607865"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 248], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 248], ["auditable_type", "Node"], ["associated_id", 168], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 168\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d12e6995-a0dd-4b6c-8ed2-5c8f83e4b32c"], ["created_at", "2019-08-22 07:22:59.613091"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 168]]
  [1m[36mOutputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 168], ["created_at", "2019-08-22 07:22:59.626915"], ["updated_at", "2019-08-22 07:22:59.626915"], ["type", "OutputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 249], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 249], ["auditable_type", "Node"], ["associated_id", 168], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 168\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d8c7158d-28b3-4b4f-a463-5add44afc303"], ["created_at", "2019-08-22 07:22:59.635332"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 248], ["to_node_id", 249], ["created_at", "2019-08-22 07:22:59.644968"], ["updated_at", "2019-08-22 07:22:59.644968"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 67], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 67], ["auditable_type", "Edge"], ["associated_id", 248], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 248\nto_node_id: 249\n"], ["version", 1], ["request_uuid", "7e606da6-feae-472c-a4f0-612091b2bd90"], ["created_at", "2019-08-22 07:22:59.649146"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (4.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 248]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 67], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 67], ["auditable_type", "Edge"], ["associated_id", 248], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 248\nto_node_id: 249\n"], ["version", 2], ["request_uuid", "bd43a24a-289a-48dc-bcb2-7a405c05f7fe"], ["created_at", "2019-08-22 07:22:59.671671"]]
  [1m[36mEdge Destroy (3.3ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 67]]
  [1m[36mEdge Load (4.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 248]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 248], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 248], ["auditable_type", "Node"], ["associated_id", 168], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 168\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "12097d64-9728-45ee-90e1-3ccb0cfa7ddb"], ["created_at", "2019-08-22 07:22:59.689578"]]
  [1m[36mInputNode Destroy (3.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 248]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:22:59.713328"], ["updated_at", "2019-08-22 07:22:59.713328"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 169], ["created_at", "2019-08-22 07:22:59.718537"], ["updated_at", "2019-08-22 07:22:59.718537"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 250], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 250], ["auditable_type", "Node"], ["associated_id", 169], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 169\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "48e53ce4-e7e7-4ca2-8afb-e0f57368c3f7"], ["created_at", "2019-08-22 07:22:59.722959"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 169]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 169], ["created_at", "2019-08-22 07:22:59.736325"], ["updated_at", "2019-08-22 07:22:59.736325"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 251], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 251], ["auditable_type", "Node"], ["associated_id", 169], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 169\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "13fe1451-1239-4256-9e46-67a5fdcb18da"], ["created_at", "2019-08-22 07:22:59.742634"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 250], ["to_node_id", 251], ["created_at", "2019-08-22 07:22:59.756495"], ["updated_at", "2019-08-22 07:22:59.756495"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 68], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 68], ["auditable_type", "Edge"], ["associated_id", 250], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 250\nto_node_id: 251\n"], ["version", 1], ["request_uuid", "8d46d643-6ff8-4828-8244-a2ef360ae1b5"], ["created_at", "2019-08-22 07:22:59.760666"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 251]]
  [1m[36mEdge Load (4.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 251]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 250], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 68], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 68], ["auditable_type", "Edge"], ["associated_id", 250], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 250\nto_node_id: 251\n"], ["version", 2], ["request_uuid", "40fefdbf-aeac-483c-98b5-09a48b4a42d8"], ["created_at", "2019-08-22 07:22:59.788778"]]
  [1m[36mEdge Destroy (3.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 68]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 251], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 251], ["auditable_type", "Node"], ["associated_id", 169], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 169\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "985b8c0b-09c9-47ea-991e-e592c8801e04"], ["created_at", "2019-08-22 07:22:59.800297"]]
  [1m[36mOutputNode Destroy (3.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 251]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (1.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 07:22:59.855475"], ["updated_at", "2019-08-22 07:22:59.855475"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 170], ["created_at", "2019-08-22 07:22:59.864367"], ["updated_at", "2019-08-22 07:22:59.864367"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 252], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 252], ["auditable_type", "Node"], ["associated_id", 170], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 170\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "edfc7127-ff4d-4604-bbd8-ee84fe67faf3"], ["created_at", "2019-08-22 07:22:59.877671"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (5.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (4.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:22:59.942449"], ["updated_at", "2019-08-22 07:22:59.942449"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 171], ["created_at", "2019-08-22 07:22:59.955362"], ["updated_at", "2019-08-22 07:22:59.955362"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 253], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 253], ["auditable_type", "Node"], ["associated_id", 171], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 171\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "300e88e7-f64f-43bd-83a2-bca8b22abd25"], ["created_at", "2019-08-22 07:22:59.972176"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:22:59.994537"], ["updated_at", "2019-08-22 07:22:59.994537"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 172], ["created_at", "2019-08-22 07:23:00.003003"], ["updated_at", "2019-08-22 07:23:00.003003"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 254], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 254], ["auditable_type", "Node"], ["associated_id", 172], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 172\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "adf16d04-339e-440f-b400-cf60e5558204"], ["created_at", "2019-08-22 07:23:00.016152"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 172]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 172], ["created_at", "2019-08-22 07:23:00.031094"], ["updated_at", "2019-08-22 07:23:00.031094"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 255], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 255], ["auditable_type", "Node"], ["associated_id", 172], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 172\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a47c5270-c06e-46a7-a10d-734e83b99de9"], ["created_at", "2019-08-22 07:23:00.036081"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 254], ["to_node_id", 255], ["created_at", "2019-08-22 07:23:00.048817"], ["updated_at", "2019-08-22 07:23:00.048817"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 69], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 69], ["auditable_type", "Edge"], ["associated_id", 254], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 254\nto_node_id: 255\n"], ["version", 1], ["request_uuid", "44ab12a4-7cba-41ef-a17b-f18bbcdd7d6d"], ["created_at", "2019-08-22 07:23:00.054767"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:23:00.071089"], ["updated_at", "2019-08-22 07:23:00.071089"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 173], ["created_at", "2019-08-22 07:23:00.077749"], ["updated_at", "2019-08-22 07:23:00.077749"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 256], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 256], ["auditable_type", "Node"], ["associated_id", 173], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 173\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1ed42517-3968-43d2-8700-085cce33367b"], ["created_at", "2019-08-22 07:23:00.082280"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 07:23:00.097592"], ["updated_at", "2019-08-22 07:23:00.097592"]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 174]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 174], ["created_at", "2019-08-22 07:23:00.120534"], ["updated_at", "2019-08-22 07:23:00.120534"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 257], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 257], ["auditable_type", "Node"], ["associated_id", 174], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 174\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "518d4fd4-9e8a-4931-a1af-bcb7ed9e7e4a"], ["created_at", "2019-08-22 07:23:00.125104"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:23:00.144273"], ["updated_at", "2019-08-22 07:23:00.144273"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 175], ["created_at", "2019-08-22 07:23:00.150445"], ["updated_at", "2019-08-22 07:23:00.150445"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 258], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (6.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 258], ["auditable_type", "Node"], ["associated_id", 175], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 175\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f5b3a3be-6888-48e9-9a18-d9f29ced5203"], ["created_at", "2019-08-22 07:23:00.156294"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 175]]
  [1m[36mOutputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 175], ["created_at", "2019-08-22 07:23:00.183962"], ["updated_at", "2019-08-22 07:23:00.183962"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 259], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 259], ["auditable_type", "Node"], ["associated_id", 175], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 175\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "83339468-3476-415a-a111-f177a6e790df"], ["created_at", "2019-08-22 07:23:00.189842"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.2ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 258], ["to_node_id", 259], ["created_at", "2019-08-22 07:23:00.203763"], ["updated_at", "2019-08-22 07:23:00.203763"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 70], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 70], ["auditable_type", "Edge"], ["associated_id", 258], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 258\nto_node_id: 259\n"], ["version", 1], ["request_uuid", "a34e400b-5f0b-4f4c-811e-e613f64d209f"], ["created_at", "2019-08-22 07:23:00.210285"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 70], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 70], ["auditable_type", "Edge"], ["associated_id", 258], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 258\nto_node_id: 259\n"], ["version", 2], ["request_uuid", "43c2565a-9c88-4283-ba11-0cf13e29d620"], ["created_at", "2019-08-22 07:23:00.225879"]]
  [1m[36mEdge Destroy (4.7ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 70]]
  [1m[35m (2.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:23:00.267431"], ["updated_at", "2019-08-22 07:23:00.267431"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (9.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 176]]
  [1m[36mOutputNode Create (5.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 176], ["created_at", "2019-08-22 07:23:00.300111"], ["updated_at", "2019-08-22 07:23:00.300111"], ["type", "OutputNode"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 260], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 260], ["auditable_type", "Node"], ["associated_id", 176], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 176\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f51c04e4-7219-44ec-8dde-95592d8f25f3"], ["created_at", "2019-08-22 07:23:00.316827"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:23:00.355577"], ["updated_at", "2019-08-22 07:23:00.355577"]]
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 177], ["created_at", "2019-08-22 07:23:00.358845"], ["updated_at", "2019-08-22 07:23:00.358845"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 261], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 261], ["auditable_type", "Node"], ["associated_id", 177], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 177\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3afb734b-e7cb-45f8-b9d6-b60227cc0292"], ["created_at", "2019-08-22 07:23:00.366440"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 177], ["created_at", "2019-08-22 07:23:00.383699"], ["updated_at", "2019-08-22 07:23:00.383699"], ["type", "OutputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 262], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 262], ["auditable_type", "Node"], ["associated_id", 177], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 177\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4c73e7b0-af47-4309-badf-a557b686815b"], ["created_at", "2019-08-22 07:23:00.391763"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 177], ["created_at", "2019-08-22 07:23:00.401613"], ["updated_at", "2019-08-22 07:23:00.401613"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 263], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 263], ["auditable_type", "Node"], ["associated_id", 177], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 177\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "902c7f44-e6f0-42e1-b30c-6520b8360fc6"], ["created_at", "2019-08-22 07:23:00.406282"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 177], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 261], ["to_node_id", 262], ["created_at", "2019-08-22 07:23:00.426395"], ["updated_at", "2019-08-22 07:23:00.426395"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 71], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 71], ["auditable_type", "Edge"], ["associated_id", 261], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 261\nto_node_id: 262\n"], ["version", 1], ["request_uuid", "4bf57b6c-e4ea-4cdd-9b60-b50142f0967f"], ["created_at", "2019-08-22 07:23:00.432464"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 71], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 71], ["auditable_type", "Edge"], ["associated_id", 261], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 262\n- 263\n"], ["version", 2], ["request_uuid", "2b2c871f-1547-40a8-920b-f4cd6eef8ca4"], ["created_at", "2019-08-22 07:23:00.448376"]]
  [1m[36mEdge Update (3.5ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 263], ["updated_at", "2019-08-22 07:23:00.446172"], ["id", 71]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 177]]
  [1m[36mEdge Load (3.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 177]]
  [1m[36mAudited::Audit Load (12.5ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 177], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (4.3ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 71], ["auditable_type", "Edge"]]
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[36mNode Load (4.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 262], ["LIMIT", 1]]
  [1m[36mEdge Update (4.2ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 262], ["updated_at", "2019-08-22 07:23:00.528463"], ["id", 71]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (4.3ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 398]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 177], ["LIMIT", 1]]
  [1m[36mEdge Load (3.9ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 262], ["LIMIT", 1]]
  [1m[36mEdge Load (3.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 177]]
  [1m[36mEdge Load (3.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 177]]
  [1m[36mAudited::Audit Load (4.1ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 177], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.1ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 71], ["auditable_type", "Edge"]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[36mEdge Destroy (3.1ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 71]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.1ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 397]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 177], ["LIMIT", 1]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 177]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 177]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:23:27.494842"], ["updated_at", "2019-08-22 07:23:27.494842"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/178/save_all" for 127.0.0.1 at 2019-08-22 07:23:27 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"178", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"f568e3ae-c0bf-421b-b71c-30fdd5d43cf4"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"df5aeb9b-1f30-4932-ade6-d61a4ac523c9"}], "id"=>"178"}
  [1m[36mGraph Load (3.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 178], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.3ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:23:27.656323"], ["id", 178]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 178], ["created_at", "2019-08-22 07:23:27.788843"], ["updated_at", "2019-08-22 07:23:27.788843"], ["type", "InputNode"]]
  [1m[35m (19.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 264], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 264], ["auditable_type", "Node"], ["associated_id", 178], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 178\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "dbe31737-c9f2-4c0a-8e75-2159b963a7a8"], ["created_at", "2019-08-22 07:23:27.866271"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 178]]
  [1m[36mOutputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 178], ["created_at", "2019-08-22 07:23:27.941247"], ["updated_at", "2019-08-22 07:23:27.941247"], ["type", "OutputNode"]]
  [1m[35m (5.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 265], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 265], ["auditable_type", "Node"], ["associated_id", 178], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 178\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "dbe31737-c9f2-4c0a-8e75-2159b963a7a8"], ["created_at", "2019-08-22 07:23:27.948806"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 178], ["LIMIT", 1]]
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 178]]
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 178], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 178]]
  [1m[36mEdge Load (10.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 178]]
  [1m[36mEdge Load (5.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 178]]
Completed 200 OK in 415ms (Views: 0.5ms | ActiveRecord: 123.2ms)
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:23:54.353925"], ["updated_at", "2019-08-22 07:23:54.353925"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/179/save_all" for 127.0.0.1 at 2019-08-22 07:23:54 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"179", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"913915d1-c6ff-4a84-86d6-21e588f336ac"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"cee7b32c-bbad-4b05-b8e8-c39252922b1c"}], "id"=>"179"}
  [1m[36mGraph Load (2.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 179], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.7ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:23:54.480307"], ["id", 179]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (5.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 179], ["created_at", "2019-08-22 07:23:54.589540"], ["updated_at", "2019-08-22 07:23:54.589540"], ["type", "InputNode"]]
  [1m[35m (15.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 266], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 266], ["auditable_type", "Node"], ["associated_id", 179], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 179\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "bfbd9f92-c152-47ae-908f-360f94909217"], ["created_at", "2019-08-22 07:23:54.669796"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 179]]
  [1m[36mOutputNode Create (3.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 179], ["created_at", "2019-08-22 07:23:54.734982"], ["updated_at", "2019-08-22 07:23:54.734982"], ["type", "OutputNode"]]
  [1m[35m (7.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 267], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 267], ["auditable_type", "Node"], ["associated_id", 179], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 179\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "bfbd9f92-c152-47ae-908f-360f94909217"], ["created_at", "2019-08-22 07:23:54.743503"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 179], ["LIMIT", 1]]
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 179]]
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 179], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 179]]
  [1m[36mEdge Load (11.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 179]]
  [1m[36mEdge Load (7.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 179]]
Completed 200 OK in 391ms (Views: 1.3ms | ActiveRecord: 120.1ms)
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:24:14.594638"], ["updated_at", "2019-08-22 07:24:14.594638"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/180/save_all" for 127.0.0.1 at 2019-08-22 07:24:14 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"180", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"7a93185b-c137-4366-912c-89980f6ac6d9"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"83353af8-e886-4e0d-93bb-ecb7262426fb"}], "id"=>"180"}
  [1m[36mGraph Load (4.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 180], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.0ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:24:14.741935"], ["id", 180]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (9.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 180], ["created_at", "2019-08-22 07:24:14.878887"], ["updated_at", "2019-08-22 07:24:14.878887"], ["type", "InputNode"]]
  [1m[35m (14.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 268], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 268], ["auditable_type", "Node"], ["associated_id", 180], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 180\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "70ca25f9-db64-4653-a9d9-f5b441b92b69"], ["created_at", "2019-08-22 07:24:14.973044"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 180]]
  [1m[36mOutputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 180], ["created_at", "2019-08-22 07:24:15.034263"], ["updated_at", "2019-08-22 07:24:15.034263"], ["type", "OutputNode"]]
  [1m[35m (6.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 269], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 269], ["auditable_type", "Node"], ["associated_id", 180], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 180\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "70ca25f9-db64-4653-a9d9-f5b441b92b69"], ["created_at", "2019-08-22 07:24:15.042011"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 180], ["LIMIT", 1]]
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 180]]
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 180], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 180]]
  [1m[36mEdge Load (14.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 180]]
  [1m[36mEdge Load (5.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 180]]
Completed 200 OK in 430ms (Views: 1.2ms | ActiveRecord: 123.0ms)
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (7.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:25:12.415129"], ["updated_at", "2019-08-22 07:25:12.415129"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/181/save_all" for 127.0.0.1 at 2019-08-22 07:25:12 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"181", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"15fec4de-19ff-405e-bb46-9602945de336"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"52c79eb0-859f-46ae-9991-d093559bb68c"}], "id"=>"181"}
  [1m[36mGraph Load (5.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 181], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.5ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:25:12.528652"], ["id", 181]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (7.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 181], ["created_at", "2019-08-22 07:25:12.629451"], ["updated_at", "2019-08-22 07:25:12.629451"], ["type", "InputNode"]]
  [1m[35m (20.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 270], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (7.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 270], ["auditable_type", "Node"], ["associated_id", 181], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 181\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "61ae7156-1dde-4af9-ab83-f13aad598490"], ["created_at", "2019-08-22 07:25:12.724396"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 289ms (ActiveRecord: 86.5ms)
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:25:35.018499"], ["updated_at", "2019-08-22 07:25:35.018499"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/182/save_all" for 127.0.0.1 at 2019-08-22 07:25:35 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"182", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"5ef46c34-da83-437f-9c98-6d775c3fe76c"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"1b4ea245-5b12-4ba8-a926-a6320345f7bb"}], "id"=>"182"}
  [1m[36mGraph Load (3.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 182], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.8ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:25:35.151193"], ["id", 182]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (4.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 182], ["created_at", "2019-08-22 07:25:35.260835"], ["updated_at", "2019-08-22 07:25:35.260835"], ["type", "InputNode"]]
  [1m[35m (12.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 271], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 271], ["auditable_type", "Node"], ["associated_id", 182], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 182\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "9f68f206-b782-48e9-9bb9-1265366fea62"], ["created_at", "2019-08-22 07:25:35.352170"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 258ms (ActiveRecord: 59.4ms)
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:26:27.250864"], ["updated_at", "2019-08-22 07:26:27.250864"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/183/save_all" for 127.0.0.1 at 2019-08-22 07:26:27 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"183", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"00dbf153-c99a-43b4-9a65-3ead4b107956"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"1b925647-85d8-4736-b39c-e8553be9ced7"}], "id"=>"183"}
  [1m[36mGraph Load (3.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 183], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.9ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:26:27.386525"], ["id", 183]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (4.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 183], ["created_at", "2019-08-22 07:26:27.509812"], ["updated_at", "2019-08-22 07:26:27.509812"], ["type", "InputNode"]]
  [1m[35m (17.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 272], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 272], ["auditable_type", "Node"], ["associated_id", 183], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 183\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "99c70606-7933-4ee7-8b23-94342fea376d"], ["created_at", "2019-08-22 07:26:27.622501"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 303ms (ActiveRecord: 66.3ms)
  [1m[35m (7.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:27:07.282435"], ["updated_at", "2019-08-22 07:27:07.282435"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/184/save_all" for 127.0.0.1 at 2019-08-22 07:27:07 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"184", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"55a90476-6e03-4037-86a3-e4fa9c1cc74b"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"c2e9c4f2-dc0e-4dae-90fe-e74e0f4d5376"}], "id"=>"184"}
  [1m[36mGraph Load (4.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 184], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.1ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:27:07.471263"], ["id", 184]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 184], ["created_at", "2019-08-22 07:27:07.604253"], ["updated_at", "2019-08-22 07:27:07.604253"], ["type", "InputNode"]]
  [1m[35m (14.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 273], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 273], ["auditable_type", "Node"], ["associated_id", 184], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 184\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "64c22104-8d1e-4bc4-903d-0b045576cc47"], ["created_at", "2019-08-22 07:27:07.740903"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 184]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 184], ["created_at", "2019-08-22 07:27:07.795905"], ["updated_at", "2019-08-22 07:27:07.795905"], ["type", "OutputNode"]]
  [1m[35m (7.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 274], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 274], ["auditable_type", "Node"], ["associated_id", 184], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 184\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "64c22104-8d1e-4bc4-903d-0b045576cc47"], ["created_at", "2019-08-22 07:27:07.801782"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 184], ["LIMIT", 1]]
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 184]]
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 184], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 184]]
  [1m[36mEdge Load (12.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 184]]
  [1m[36mEdge Load (7.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 184]]
Completed 500 Internal Server Error in 465ms (ActiveRecord: 120.8ms)
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (7.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:27:28.444938"], ["updated_at", "2019-08-22 07:27:28.444938"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/185/save_all" for 127.0.0.1 at 2019-08-22 07:27:28 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"185", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"a294e133-782a-407e-824c-be93d8e1b8b2"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"15bb0615-93ce-452b-83d5-6a66d3315ac3"}], "id"=>"185"}
  [1m[36mGraph Load (3.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 185], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.5ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:27:28.584664"], ["id", 185]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 185], ["created_at", "2019-08-22 07:27:28.726446"], ["updated_at", "2019-08-22 07:27:28.726446"], ["type", "InputNode"]]
  [1m[35m (19.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 275], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 275], ["auditable_type", "Node"], ["associated_id", 185], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 185\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "6dde9f19-a67c-4937-a6aa-710e90d6dbf5"], ["created_at", "2019-08-22 07:27:28.821903"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 185]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 185], ["created_at", "2019-08-22 07:27:28.901277"], ["updated_at", "2019-08-22 07:27:28.901277"], ["type", "OutputNode"]]
  [1m[35m (6.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 276], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 276], ["auditable_type", "Node"], ["associated_id", 185], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 185\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "6dde9f19-a67c-4937-a6aa-710e90d6dbf5"], ["created_at", "2019-08-22 07:27:28.910550"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 185], ["LIMIT", 1]]
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 185]]
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 185], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 185]]
  [1m[36mEdge Load (11.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 185]]
  [1m[36mEdge Load (6.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 185]]
Completed 200 OK in 458ms (Views: 4.6ms | ActiveRecord: 128.1ms)
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (4.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (4.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (6.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:07.066337"], ["updated_at", "2019-08-22 07:29:07.066337"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (10.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 186]]
  [1m[36mOutputNode Create (5.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 186], ["created_at", "2019-08-22 07:29:07.176765"], ["updated_at", "2019-08-22 07:29:07.176765"], ["type", "OutputNode"]]
  [1m[35m (16.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 277], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 277], ["auditable_type", "Node"], ["associated_id", 186], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 186\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "defe5037-5992-4e36-8ac0-3fd6cfd97e4d"], ["created_at", "2019-08-22 07:29:07.245539"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:07.301400"], ["updated_at", "2019-08-22 07:29:07.301400"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 187], ["created_at", "2019-08-22 07:29:07.348025"], ["updated_at", "2019-08-22 07:29:07.348025"], ["type", "InputNode"]]
  [1m[35m (9.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 278], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 278], ["auditable_type", "Node"], ["associated_id", 187], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 187\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "de834fe6-cda1-4011-949f-c74aee5b3719"], ["created_at", "2019-08-22 07:29:07.357665"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 187]]
  [1m[36mOutputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 187], ["created_at", "2019-08-22 07:29:07.387891"], ["updated_at", "2019-08-22 07:29:07.387891"], ["type", "OutputNode"]]
  [1m[35m (8.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 279], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 279], ["auditable_type", "Node"], ["associated_id", 187], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 187\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "eb334a70-260d-4643-9357-635ee43fdaa2"], ["created_at", "2019-08-22 07:29:07.398157"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 278], ["to_node_id", 279], ["created_at", "2019-08-22 07:29:07.422748"], ["updated_at", "2019-08-22 07:29:07.422748"]]
  [1m[35m (11.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 72], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (3.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 72], ["auditable_type", "Edge"], ["associated_id", 278], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 278\nto_node_id: 279\n"], ["version", 1], ["request_uuid", "3402fa0d-c524-4cd3-92f7-11d747f78331"], ["created_at", "2019-08-22 07:29:07.436111"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (10.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 72], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 72], ["auditable_type", "Edge"], ["associated_id", 278], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 278\nto_node_id: 279\n"], ["version", 2], ["request_uuid", "5e39625c-65fe-47ec-b355-a520e55a121d"], ["created_at", "2019-08-22 07:29:07.466341"]]
  [1m[36mEdge Destroy (7.2ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 72]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:07.522139"], ["updated_at", "2019-08-22 07:29:07.522139"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (4.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 188], ["created_at", "2019-08-22 07:29:07.534302"], ["updated_at", "2019-08-22 07:29:07.534302"], ["type", "InputNode"]]
  [1m[35m (13.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 280], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 280], ["auditable_type", "Node"], ["associated_id", 188], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 188\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6303bf53-a0f2-454d-87ad-b19b21d419d5"], ["created_at", "2019-08-22 07:29:07.546616"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:07.600588"], ["updated_at", "2019-08-22 07:29:07.600588"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 189], ["created_at", "2019-08-22 07:29:07.614108"], ["updated_at", "2019-08-22 07:29:07.614108"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 281], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 281], ["auditable_type", "Node"], ["associated_id", 189], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 189\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b17cc346-e58f-44c4-84bf-57b25535a251"], ["created_at", "2019-08-22 07:29:07.623844"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 07:29:07.634083"], ["updated_at", "2019-08-22 07:29:07.634083"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 190]]
  [1m[36mOutputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 190], ["created_at", "2019-08-22 07:29:07.646307"], ["updated_at", "2019-08-22 07:29:07.646307"], ["type", "OutputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 282], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 282], ["auditable_type", "Node"], ["associated_id", 190], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 190\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "08844aea-f5bc-46e9-85c7-ae30ed31fe20"], ["created_at", "2019-08-22 07:29:07.654209"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:07.681570"], ["updated_at", "2019-08-22 07:29:07.681570"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 191], ["created_at", "2019-08-22 07:29:07.696995"], ["updated_at", "2019-08-22 07:29:07.696995"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 283], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 283], ["auditable_type", "Node"], ["associated_id", 191], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 191\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "be2917e4-7b0f-43d2-b1f8-65dbcfae4141"], ["created_at", "2019-08-22 07:29:07.705323"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 191]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 191], ["created_at", "2019-08-22 07:29:07.728213"], ["updated_at", "2019-08-22 07:29:07.728213"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 284], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 284], ["auditable_type", "Node"], ["associated_id", 191], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 191\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "aaefacfb-a142-4191-b3aa-af5f5c1eeccf"], ["created_at", "2019-08-22 07:29:07.737437"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 283], ["to_node_id", 284], ["created_at", "2019-08-22 07:29:07.748034"], ["updated_at", "2019-08-22 07:29:07.748034"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 73], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 73], ["auditable_type", "Edge"], ["associated_id", 283], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 283\nto_node_id: 284\n"], ["version", 1], ["request_uuid", "41e737d0-9c86-480a-81f0-843158195843"], ["created_at", "2019-08-22 07:29:07.753667"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 07:29:07.816112"], ["updated_at", "2019-08-22 07:29:07.816112"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 192], ["created_at", "2019-08-22 07:29:07.821227"], ["updated_at", "2019-08-22 07:29:07.821227"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 285], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 285], ["auditable_type", "Node"], ["associated_id", 192], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 192\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7cfee9ec-971e-4bce-8a12-b448bb3d8747"], ["created_at", "2019-08-22 07:29:07.830916"]]
  [1m[35m (3.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:07.878150"], ["updated_at", "2019-08-22 07:29:07.878150"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 193], ["LIMIT", 1]]
  [1m[36mEdge Load (5.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 193]]
  [1m[36mEdge Load (6.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 193]]
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:07.929357"], ["updated_at", "2019-08-22 07:29:07.929357"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 194], ["created_at", "2019-08-22 07:29:07.936301"], ["updated_at", "2019-08-22 07:29:07.936301"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 286], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 286], ["auditable_type", "Node"], ["associated_id", 194], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 194\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "187a6250-13e3-4d38-99ce-d6c19d4110c6"], ["created_at", "2019-08-22 07:29:07.944003"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 194], ["created_at", "2019-08-22 07:29:07.967769"], ["updated_at", "2019-08-22 07:29:07.967769"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 287], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 287], ["auditable_type", "Node"], ["associated_id", 194], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 194\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "26a5928c-fbda-477d-92f4-a8b25124a8ca"], ["created_at", "2019-08-22 07:29:07.977321"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[36mEdge Load (4.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[36mEdge Load (5.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 286], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 286], ["auditable_type", "Node"], ["associated_id", 194], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "063c4c15-d692-4f08-9d42-ac07ee1b8c67"], ["created_at", "2019-08-22 07:29:08.041260"]]
  [1m[36mInputNode Update (3.1ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:29:08.039181"], ["id", 286]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 287], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[36mEdge Load (5.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[36mEdge Load (6.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 287], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 286], ["to_node_id", 287], ["created_at", "2019-08-22 07:29:08.167544"], ["updated_at", "2019-08-22 07:29:08.167544"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 74], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 74], ["auditable_type", "Edge"], ["associated_id", 286], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 286\nto_node_id: 287\n"], ["version", 1], ["request_uuid", "0f30aeab-ce8a-494c-b924-487304eb2988"], ["created_at", "2019-08-22 07:29:08.174873"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (5.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[36mEdge Load (5.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 194]]
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 287], ["LIMIT", 1]]
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:08.243651"], ["updated_at", "2019-08-22 07:29:08.243651"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 195], ["created_at", "2019-08-22 07:29:08.250215"], ["updated_at", "2019-08-22 07:29:08.250215"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 288], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 288], ["auditable_type", "Node"], ["associated_id", 195], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 195\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c96ebcfa-2a88-4e53-879d-2dfafae925f5"], ["created_at", "2019-08-22 07:29:08.254794"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 195]]
  [1m[36mOutputNode Create (1.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 195], ["created_at", "2019-08-22 07:29:08.276587"], ["updated_at", "2019-08-22 07:29:08.276587"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 289], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 289], ["auditable_type", "Node"], ["associated_id", 195], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 195\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2e4ac3c1-5ca2-448d-8ef8-a63d96a1e82f"], ["created_at", "2019-08-22 07:29:08.283708"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 195], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 195]]
  [1m[36mEdge Load (5.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 195]]
  [1m[36mEdge Load (9.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 195]]
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 195], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 289], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 195], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 195]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 195]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 195], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 195]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 195], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 195]]
  [1m[36mNode Destroy (2.7ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 288]]
  [1m[36mEdge Load (7.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 195]]
  [1m[36mEdge Load (6.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 195]]
  [1m[35m (5.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 195]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:08.398211"], ["updated_at", "2019-08-22 07:29:08.398211"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 196], ["created_at", "2019-08-22 07:29:08.404737"], ["updated_at", "2019-08-22 07:29:08.404737"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 290], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 290], ["auditable_type", "Node"], ["associated_id", 196], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 196\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5a271b85-f746-4758-b0c9-f9d1a53e8f56"], ["created_at", "2019-08-22 07:29:08.411155"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 196]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 196], ["created_at", "2019-08-22 07:29:08.450894"], ["updated_at", "2019-08-22 07:29:08.450894"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 291], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (13.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 291], ["auditable_type", "Node"], ["associated_id", 196], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 196\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2cac2e2f-fe39-44f3-b75a-3eca65876b3c"], ["created_at", "2019-08-22 07:29:08.458784"]]
  [1m[35m (4.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 196], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 196]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 196]]
  [1m[36mEdge Load (11.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 196]]
  [1m[36mGraph Load (1.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 196], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (5.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 290], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 196], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 290], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 290], ["auditable_type", "Node"], ["associated_id", 196], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "743cefe3-d223-4514-8e8c-1532cbbfd883"], ["created_at", "2019-08-22 07:29:08.648098"]]
  [1m[36mInputNode Update (3.5ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:29:08.644114"], ["id", 290]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 291], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 196], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 196]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 196]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 196], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 196]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 196], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 196]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.3ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 290], ["to_node_id", 291], ["created_at", "2019-08-22 07:29:08.706332"], ["updated_at", "2019-08-22 07:29:08.706332"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 75], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 75], ["auditable_type", "Edge"], ["associated_id", 290], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 290\nto_node_id: 291\n"], ["version", 1], ["request_uuid", "4b53eea7-cb1d-4a71-9490-e726874df853"], ["created_at", "2019-08-22 07:29:08.712825"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (5.2ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 290], ["to_node_id", 291], ["created_at", "2019-08-22 07:29:08.727782"], ["updated_at", "2019-08-22 07:29:08.727782"]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:08.756322"], ["updated_at", "2019-08-22 07:29:08.756322"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 197], ["created_at", "2019-08-22 07:29:08.768232"], ["updated_at", "2019-08-22 07:29:08.768232"], ["type", "InputNode"]]
  [1m[35m (2.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 292], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 292], ["auditable_type", "Node"], ["associated_id", 197], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 197\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5abd2843-ea7e-4658-b378-a823bd1432e3"], ["created_at", "2019-08-22 07:29:08.776039"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 197]]
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 197], ["created_at", "2019-08-22 07:29:08.795289"], ["updated_at", "2019-08-22 07:29:08.795289"], ["type", "OutputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 293], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 293], ["auditable_type", "Node"], ["associated_id", 197], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 197\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9720ac72-4e97-4183-8829-456a569cf87a"], ["created_at", "2019-08-22 07:29:08.801098"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 197], ["LIMIT", 1]]
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 197]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 197]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 197]]
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:08.843945"], ["updated_at", "2019-08-22 07:29:08.843945"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 198], ["created_at", "2019-08-22 07:29:08.851155"], ["updated_at", "2019-08-22 07:29:08.851155"], ["type", "InputNode"]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 294], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 294], ["auditable_type", "Node"], ["associated_id", 198], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 198\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7f849a1f-988a-40f2-97a9-3c5701f8a04a"], ["created_at", "2019-08-22 07:29:08.860042"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 198]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 198], ["created_at", "2019-08-22 07:29:08.879357"], ["updated_at", "2019-08-22 07:29:08.879357"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 295], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 295], ["auditable_type", "Node"], ["associated_id", 198], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 198\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4fee7262-0575-4db0-bab8-d05777d913f9"], ["created_at", "2019-08-22 07:29:08.883426"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 198], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 198]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 294], ["to_node_id", 295], ["created_at", "2019-08-22 07:29:08.941658"], ["updated_at", "2019-08-22 07:29:08.941658"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 77], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 77], ["auditable_type", "Edge"], ["associated_id", 294], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 294\nto_node_id: 295\n"], ["version", 1], ["request_uuid", "9e6ff7d3-5104-415a-8eb7-9b249d53601c"], ["created_at", "2019-08-22 07:29:08.945976"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 198]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 198]]
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:08.985212"], ["updated_at", "2019-08-22 07:29:08.985212"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 199], ["created_at", "2019-08-22 07:29:08.991886"], ["updated_at", "2019-08-22 07:29:08.991886"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 296], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 296], ["auditable_type", "Node"], ["associated_id", 199], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 199\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bf0a5d45-6afe-49af-a5f0-032b902e75eb"], ["created_at", "2019-08-22 07:29:08.996525"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[36mOutputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 199], ["created_at", "2019-08-22 07:29:09.013780"], ["updated_at", "2019-08-22 07:29:09.013780"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 297], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 297], ["auditable_type", "Node"], ["associated_id", 199], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 199\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "21751e57-9772-4f6d-a04a-3d7f3feecbe0"], ["created_at", "2019-08-22 07:29:09.022565"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 199], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 199], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 296], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 199], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 296], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 296], ["auditable_type", "Node"], ["associated_id", 199], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "afdb1c09-1d66-49f4-bf56-8fdaa4fac88a"], ["created_at", "2019-08-22 07:29:09.060947"]]
  [1m[36mInputNode Update (2.6ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:29:09.058382"], ["id", 296]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 297], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 199], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 199], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 199], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 296], ["to_node_id", 297], ["created_at", "2019-08-22 07:29:09.108960"], ["updated_at", "2019-08-22 07:29:09.108960"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 78], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 78], ["auditable_type", "Edge"], ["associated_id", 296], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 296\nto_node_id: 297\n"], ["version", 1], ["request_uuid", "7c7a9b65-0dbf-4204-92ca-8f4477c109fb"], ["created_at", "2019-08-22 07:29:09.115405"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 199], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 296], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 199], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 297], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 199], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 199], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 199], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 199]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 296], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 78], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (5.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 78], ["auditable_type", "Edge"], ["associated_id", 296], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 296\nto_node_id: 297\n"], ["version", 2], ["request_uuid", "0a97803b-6a49-4878-a46b-1067721d3acb"], ["created_at", "2019-08-22 07:29:09.200155"]]
  [1m[36mEdge Destroy (3.5ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 78]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:09.233874"], ["updated_at", "2019-08-22 07:29:09.233874"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 200], ["created_at", "2019-08-22 07:29:09.242294"], ["updated_at", "2019-08-22 07:29:09.242294"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 298], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 298], ["auditable_type", "Node"], ["associated_id", 200], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 200\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "50e59bc9-d25a-4ef7-9da6-3a558da352f7"], ["created_at", "2019-08-22 07:29:09.247994"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 200]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 200], ["created_at", "2019-08-22 07:29:09.266690"], ["updated_at", "2019-08-22 07:29:09.266690"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 299], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 299], ["auditable_type", "Node"], ["associated_id", 200], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 200\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5ac8d96a-39ca-4fb5-8f08-ecafab21dad2"], ["created_at", "2019-08-22 07:29:09.273110"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 200]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 200]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 200]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 298], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 298], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 298], ["auditable_type", "Node"], ["associated_id", 200], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "df745558-5910-496a-926b-e0c1348ad899"], ["created_at", "2019-08-22 07:29:09.310393"]]
  [1m[36mInputNode Update (4.3ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:29:09.307731"], ["id", 298]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 299], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 200]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 200]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 200]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 200]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 200]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 200]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:09.383280"], ["updated_at", "2019-08-22 07:29:09.383280"]]
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 201], ["created_at", "2019-08-22 07:29:09.385897"], ["updated_at", "2019-08-22 07:29:09.385897"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 300], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 300], ["auditable_type", "Node"], ["associated_id", 201], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 201\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2f346f6e-51b2-4791-8833-5db057d8c2f0"], ["created_at", "2019-08-22 07:29:09.390590"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 201], ["created_at", "2019-08-22 07:29:09.401447"], ["updated_at", "2019-08-22 07:29:09.401447"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 301], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 301], ["auditable_type", "Node"], ["associated_id", 201], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 201\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6fbce782-c75f-40a1-8357-8b9052324068"], ["created_at", "2019-08-22 07:29:09.409522"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 201], ["created_at", "2019-08-22 07:29:09.421500"], ["updated_at", "2019-08-22 07:29:09.421500"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 302], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 302], ["auditable_type", "Node"], ["associated_id", 201], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 201\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c0951192-c912-44fe-99db-9fbf846132a7"], ["created_at", "2019-08-22 07:29:09.426671"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 201], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 300], ["to_node_id", 301], ["created_at", "2019-08-22 07:29:09.441566"], ["updated_at", "2019-08-22 07:29:09.441566"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 79], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 79], ["auditable_type", "Edge"], ["associated_id", 300], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 300\nto_node_id: 301\n"], ["version", 1], ["request_uuid", "1063535e-170f-4933-aa4d-94a35ef62264"], ["created_at", "2019-08-22 07:29:09.446009"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 79], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 79], ["auditable_type", "Edge"], ["associated_id", 300], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 301\n- 302\n"], ["version", 2], ["request_uuid", "f6b1796d-ab2b-4a95-87ab-5d26220e234e"], ["created_at", "2019-08-22 07:29:09.457177"]]
  [1m[36mEdge Update (3.1ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 302], ["updated_at", "2019-08-22 07:29:09.455492"], ["id", 79]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 201]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 201]]
  [1m[36mAudited::Audit Load (3.3ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 201], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.5ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 79], ["auditable_type", "Edge"]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 300], ["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 301], ["LIMIT", 1]]
  [1m[36mEdge Update (2.6ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 301], ["updated_at", "2019-08-22 07:29:09.500174"], ["id", 79]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (4.4ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 451]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 201], ["LIMIT", 1]]
  [1m[36mEdge Load (4.1ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 301], ["LIMIT", 1]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 201]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 201]]
  [1m[36mAudited::Audit Load (3.0ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 201], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.0ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 79], ["auditable_type", "Edge"]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 300], ["LIMIT", 1]]
  [1m[36mEdge Destroy (2.9ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 79]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.9ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 450]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 201], ["LIMIT", 1]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 201]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 201]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:09.589619"], ["updated_at", "2019-08-22 07:29:09.589619"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 202], ["created_at", "2019-08-22 07:29:09.597114"], ["updated_at", "2019-08-22 07:29:09.597114"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 303], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 303], ["auditable_type", "Node"], ["associated_id", 202], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 202\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "64b508e6-21d3-467e-9c8a-234a8fa35f73"], ["created_at", "2019-08-22 07:29:09.602620"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:09.639033"], ["updated_at", "2019-08-22 07:29:09.639033"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 203], ["created_at", "2019-08-22 07:29:09.646822"], ["updated_at", "2019-08-22 07:29:09.646822"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 304], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 304], ["auditable_type", "Node"], ["associated_id", 203], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 203\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "023ab95f-64a4-4de6-a158-79b0bba46d3e"], ["created_at", "2019-08-22 07:29:09.655482"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 203]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 203], ["created_at", "2019-08-22 07:29:09.667673"], ["updated_at", "2019-08-22 07:29:09.667673"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 305], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 305], ["auditable_type", "Node"], ["associated_id", 203], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 203\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "624e4bec-e6cf-4df3-bf2f-5a63144d257e"], ["created_at", "2019-08-22 07:29:09.672290"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 304], ["to_node_id", 305], ["created_at", "2019-08-22 07:29:09.681116"], ["updated_at", "2019-08-22 07:29:09.681116"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 80], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 80], ["auditable_type", "Edge"], ["associated_id", 304], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 304\nto_node_id: 305\n"], ["version", 1], ["request_uuid", "3e6d534c-84a5-478c-83e1-57262408ec6a"], ["created_at", "2019-08-22 07:29:09.685469"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 304]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 80], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 80], ["auditable_type", "Edge"], ["associated_id", 304], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 304\nto_node_id: 305\n"], ["version", 2], ["request_uuid", "29dc1c84-f325-42cf-a358-e288682f02fb"], ["created_at", "2019-08-22 07:29:09.704909"]]
  [1m[36mEdge Destroy (2.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 80]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 304]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 304], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 304], ["auditable_type", "Node"], ["associated_id", 203], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 203\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "cdcf45ed-f276-4d73-a46a-d6ae08e3766e"], ["created_at", "2019-08-22 07:29:09.721080"]]
  [1m[36mInputNode Destroy (2.5ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 304]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:09.744252"], ["updated_at", "2019-08-22 07:29:09.744252"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 204], ["created_at", "2019-08-22 07:29:09.749937"], ["updated_at", "2019-08-22 07:29:09.749937"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 306], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 306], ["auditable_type", "Node"], ["associated_id", 204], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 204\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "50318e41-280f-4077-be66-a6734d0b405d"], ["created_at", "2019-08-22 07:29:09.754549"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 204]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 204], ["created_at", "2019-08-22 07:29:09.769186"], ["updated_at", "2019-08-22 07:29:09.769186"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 307], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 307], ["auditable_type", "Node"], ["associated_id", 204], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 204\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "35469a72-11d3-4003-b2a6-b8c98153ff94"], ["created_at", "2019-08-22 07:29:09.775126"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 306], ["to_node_id", 307], ["created_at", "2019-08-22 07:29:09.786856"], ["updated_at", "2019-08-22 07:29:09.786856"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 81], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 81], ["auditable_type", "Edge"], ["associated_id", 306], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 306\nto_node_id: 307\n"], ["version", 1], ["request_uuid", "311bf260-b772-445a-b8af-e518a8ff6169"], ["created_at", "2019-08-22 07:29:09.792467"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 307]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 307]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 306], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 81], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 81], ["auditable_type", "Edge"], ["associated_id", 306], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 306\nto_node_id: 307\n"], ["version", 2], ["request_uuid", "e5e780a9-05d4-4f4e-bb38-c4bab133d872"], ["created_at", "2019-08-22 07:29:09.818033"]]
  [1m[36mEdge Destroy (2.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 81]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 307], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 307], ["auditable_type", "Node"], ["associated_id", 204], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 204\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "a57dc564-c2dc-437b-b7dd-c4a3db58e481"], ["created_at", "2019-08-22 07:29:09.828469"]]
  [1m[36mOutputNode Destroy (2.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 307]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:09.917727"], ["updated_at", "2019-08-22 07:29:09.917727"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/205/save_all" for 127.0.0.1 at 2019-08-22 07:29:09 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"205", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"fa93b5b4-503d-469e-a18b-4637d85e3770"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"f634ec09-4a5d-4f00-a1c9-f27a7a8c9ee5"}], "id"=>"205"}
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 205], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.7ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:29:09.981900"], ["id", 205]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 205], ["created_at", "2019-08-22 07:29:09.988491"], ["updated_at", "2019-08-22 07:29:09.988491"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 308], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 308], ["auditable_type", "Node"], ["associated_id", 205], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 205\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "c6ab5c76-f3a5-4e46-a9c8-4af644bd89ab"], ["created_at", "2019-08-22 07:29:09.992938"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 205]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 205], ["created_at", "2019-08-22 07:29:10.004494"], ["updated_at", "2019-08-22 07:29:10.004494"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 309], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 309], ["auditable_type", "Node"], ["associated_id", 205], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 205\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "c6ab5c76-f3a5-4e46-a9c8-4af644bd89ab"], ["created_at", "2019-08-22 07:29:10.009276"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 205], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 205]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 205], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 205]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 205]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 205]]
Completed 200 OK in 64ms (Views: 1.6ms | ActiveRecord: 17.9ms)
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:45.007221"], ["updated_at", "2019-08-22 07:29:45.007221"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (10.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 206]]
  [1m[36mOutputNode Create (6.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 206], ["created_at", "2019-08-22 07:29:45.081251"], ["updated_at", "2019-08-22 07:29:45.081251"], ["type", "OutputNode"]]
  [1m[35m (13.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 310], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 310], ["auditable_type", "Node"], ["associated_id", 206], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 206\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "de0cf6bc-d725-4d5b-9235-7982797324d8"], ["created_at", "2019-08-22 07:29:45.137245"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:45.231240"], ["updated_at", "2019-08-22 07:29:45.231240"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 207], ["created_at", "2019-08-22 07:29:45.274881"], ["updated_at", "2019-08-22 07:29:45.274881"], ["type", "InputNode"]]
  [1m[35m (6.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 311], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 311], ["auditable_type", "Node"], ["associated_id", 207], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 207\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "65c664ba-c33d-4f16-8927-e07bb6a6fe92"], ["created_at", "2019-08-22 07:29:45.283415"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:45.332159"], ["updated_at", "2019-08-22 07:29:45.332159"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 208], ["created_at", "2019-08-22 07:29:45.342646"], ["updated_at", "2019-08-22 07:29:45.342646"], ["type", "InputNode"]]
  [1m[35m (5.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 312], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 312], ["auditable_type", "Node"], ["associated_id", 208], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 208\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e67303e9-9102-4e7c-887c-e90daa378cd0"], ["created_at", "2019-08-22 07:29:45.354594"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 208]]
  [1m[36mOutputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 208], ["created_at", "2019-08-22 07:29:45.376963"], ["updated_at", "2019-08-22 07:29:45.376963"], ["type", "OutputNode"]]
  [1m[35m (5.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 313], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 313], ["auditable_type", "Node"], ["associated_id", 208], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 208\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5a0f0ad5-1edf-4c23-b259-348a3b587aac"], ["created_at", "2019-08-22 07:29:45.384437"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (5.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 312], ["to_node_id", 313], ["created_at", "2019-08-22 07:29:45.399911"], ["updated_at", "2019-08-22 07:29:45.399911"]]
  [1m[35m (8.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 82], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 82], ["auditable_type", "Edge"], ["associated_id", 312], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 312\nto_node_id: 313\n"], ["version", 1], ["request_uuid", "809bfd33-a737-49e8-a158-be9448519e26"], ["created_at", "2019-08-22 07:29:45.411468"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (7.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 82], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 82], ["auditable_type", "Edge"], ["associated_id", 312], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 312\nto_node_id: 313\n"], ["version", 2], ["request_uuid", "d3449d37-2099-4310-b0dd-4fe675983c0e"], ["created_at", "2019-08-22 07:29:45.433223"]]
  [1m[36mEdge Destroy (6.0ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 82]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:45.480884"], ["updated_at", "2019-08-22 07:29:45.480884"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 209], ["created_at", "2019-08-22 07:29:45.492177"], ["updated_at", "2019-08-22 07:29:45.492177"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 314], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 314], ["auditable_type", "Node"], ["associated_id", 209], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 209\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0c4b3d86-8fef-4b59-9e49-94ff3ecd2321"], ["created_at", "2019-08-22 07:29:45.498614"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 209]]
  [1m[36mOutputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 209], ["created_at", "2019-08-22 07:29:45.514335"], ["updated_at", "2019-08-22 07:29:45.514335"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 315], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 315], ["auditable_type", "Node"], ["associated_id", 209], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 209\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6b7bc448-caaf-4467-97ce-235bec58f6b6"], ["created_at", "2019-08-22 07:29:45.522027"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 314], ["to_node_id", 315], ["created_at", "2019-08-22 07:29:45.532719"], ["updated_at", "2019-08-22 07:29:45.532719"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 83], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 83], ["auditable_type", "Edge"], ["associated_id", 314], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 314\nto_node_id: 315\n"], ["version", 1], ["request_uuid", "0c38f370-ddfd-4b42-9618-04ea738e40fa"], ["created_at", "2019-08-22 07:29:45.538795"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:45.556504"], ["updated_at", "2019-08-22 07:29:45.556504"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 210], ["created_at", "2019-08-22 07:29:45.566623"], ["updated_at", "2019-08-22 07:29:45.566623"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 316], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 316], ["auditable_type", "Node"], ["associated_id", 210], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 210\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "89f04866-37f9-491d-96ee-aca858f21bd8"], ["created_at", "2019-08-22 07:29:45.577252"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 07:29:45.586859"], ["updated_at", "2019-08-22 07:29:45.586859"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 211]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 211], ["created_at", "2019-08-22 07:29:45.598810"], ["updated_at", "2019-08-22 07:29:45.598810"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 317], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 317], ["auditable_type", "Node"], ["associated_id", 211], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 211\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "15d9274f-a710-4959-822e-fffe5c8d4e03"], ["created_at", "2019-08-22 07:29:45.605447"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:45.827285"], ["updated_at", "2019-08-22 07:29:45.827285"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/212/save_all" for 127.0.0.1 at 2019-08-22 07:29:45 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"212", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"1318a9d3-ca15-4d40-8556-1739a15d9783"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"653fb145-0e87-4314-95b2-31a0aa32e517"}], "id"=>"212"}
  [1m[36mGraph Load (1.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 212], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.8ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:29:45.941322"], ["id", 212]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 212], ["created_at", "2019-08-22 07:29:45.951105"], ["updated_at", "2019-08-22 07:29:45.951105"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 318], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 318], ["auditable_type", "Node"], ["associated_id", 212], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 212\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "c1fc9fab-060b-4a8a-8798-8b378c61a15b"], ["created_at", "2019-08-22 07:29:45.958859"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 212]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 212], ["created_at", "2019-08-22 07:29:45.980136"], ["updated_at", "2019-08-22 07:29:45.980136"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 319], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 319], ["auditable_type", "Node"], ["associated_id", 212], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 212\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "c1fc9fab-060b-4a8a-8798-8b378c61a15b"], ["created_at", "2019-08-22 07:29:45.986437"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 212], ["LIMIT", 1]]
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 212]]
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 212], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 212]]
  [1m[36mEdge Load (4.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 212]]
  [1m[36mEdge Load (4.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 212]]
Completed 500 Internal Server Error in 113ms (ActiveRecord: 31.4ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:46.046436"], ["updated_at", "2019-08-22 07:29:46.046436"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 213], ["created_at", "2019-08-22 07:29:46.057157"], ["updated_at", "2019-08-22 07:29:46.057157"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 320], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 320], ["auditable_type", "Node"], ["associated_id", 213], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 213\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0e57fce1-4b0e-4adb-9dca-13371707cb6c"], ["created_at", "2019-08-22 07:29:46.063126"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 213]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 213], ["created_at", "2019-08-22 07:29:46.078958"], ["updated_at", "2019-08-22 07:29:46.078958"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 321], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 321], ["auditable_type", "Node"], ["associated_id", 213], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 213\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e3d35049-555b-4b59-9728-90237c2fee2b"], ["created_at", "2019-08-22 07:29:46.083338"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 213], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 213]]
  [1m[36mEdge Load (6.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 213]]
  [1m[36mEdge Load (5.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 213]]
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 213], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 321], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 213], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 213]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 213]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 213], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 213]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 213], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 213]]
  [1m[36mNode Destroy (2.3ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 320]]
  [1m[36mEdge Load (5.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 213]]
  [1m[36mEdge Load (5.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 213]]
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 213]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:46.187054"], ["updated_at", "2019-08-22 07:29:46.187054"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 214], ["created_at", "2019-08-22 07:29:46.193453"], ["updated_at", "2019-08-22 07:29:46.193453"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 322], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 322], ["auditable_type", "Node"], ["associated_id", 214], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 214\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a25e5863-a2d0-4343-b08e-b3926b3c23e2"], ["created_at", "2019-08-22 07:29:46.199131"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 214]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 214], ["created_at", "2019-08-22 07:29:46.215626"], ["updated_at", "2019-08-22 07:29:46.215626"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 323], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 323], ["auditable_type", "Node"], ["associated_id", 214], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 214\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2d723713-fbfd-4c86-852c-f8141d1423f6"], ["created_at", "2019-08-22 07:29:46.219889"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 214], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 214]]
  [1m[36mEdge Load (5.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 214]]
  [1m[36mEdge Load (5.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 214]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 214], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 322], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 214], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 322], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 322], ["auditable_type", "Node"], ["associated_id", 214], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "63a7c84f-a0d9-4002-b145-7d6eb0c8a5b0"], ["created_at", "2019-08-22 07:29:46.262025"]]
  [1m[36mInputNode Update (2.5ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:29:46.259467"], ["id", 322]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 323], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 214], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 214]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 214]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 214], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 214]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 214], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 214]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 322], ["to_node_id", 323], ["created_at", "2019-08-22 07:29:46.307471"], ["updated_at", "2019-08-22 07:29:46.307471"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 84], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 84], ["auditable_type", "Edge"], ["associated_id", 322], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 322\nto_node_id: 323\n"], ["version", 1], ["request_uuid", "045cea86-f173-43f8-a0db-2cfb7f860f4d"], ["created_at", "2019-08-22 07:29:46.312128"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 322], ["to_node_id", 323], ["created_at", "2019-08-22 07:29:46.320452"], ["updated_at", "2019-08-22 07:29:46.320452"]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:46.337032"], ["updated_at", "2019-08-22 07:29:46.337032"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 215], ["created_at", "2019-08-22 07:29:46.344190"], ["updated_at", "2019-08-22 07:29:46.344190"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 324], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 324], ["auditable_type", "Node"], ["associated_id", 215], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 215\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8af791ab-eda9-4b99-ab0e-93d64cd75fd3"], ["created_at", "2019-08-22 07:29:46.349140"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 215]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 215], ["created_at", "2019-08-22 07:29:46.364669"], ["updated_at", "2019-08-22 07:29:46.364669"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 325], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 325], ["auditable_type", "Node"], ["associated_id", 215], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 215\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7998378d-86d3-473b-afb2-6a39b711d49a"], ["created_at", "2019-08-22 07:29:46.371688"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 215], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 215]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 324], ["to_node_id", 325], ["created_at", "2019-08-22 07:29:46.385552"], ["updated_at", "2019-08-22 07:29:46.385552"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 86], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 86], ["auditable_type", "Edge"], ["associated_id", 324], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 324\nto_node_id: 325\n"], ["version", 1], ["request_uuid", "e6d9efba-7225-46b7-ba7a-89c091cf6c93"], ["created_at", "2019-08-22 07:29:46.389591"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (6.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 215]]
  [1m[36mEdge Load (8.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 215]]
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:46.439269"], ["updated_at", "2019-08-22 07:29:46.439269"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 216], ["LIMIT", 1]]
  [1m[36mEdge Load (9.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 216]]
  [1m[36mEdge Load (4.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 216]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:46.483564"], ["updated_at", "2019-08-22 07:29:46.483564"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 217], ["created_at", "2019-08-22 07:29:46.493790"], ["updated_at", "2019-08-22 07:29:46.493790"], ["type", "InputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 326], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 326], ["auditable_type", "Node"], ["associated_id", 217], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 217\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3774786c-b317-4599-8572-707bccfa2e75"], ["created_at", "2019-08-22 07:29:46.498483"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 217]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 217], ["created_at", "2019-08-22 07:29:46.510539"], ["updated_at", "2019-08-22 07:29:46.510539"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 327], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 327], ["auditable_type", "Node"], ["associated_id", 217], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 217\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e188666d-75fc-43ce-94de-dcca744a35ec"], ["created_at", "2019-08-22 07:29:46.515221"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 217], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 217]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 217]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 217]]
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:46.551871"], ["updated_at", "2019-08-22 07:29:46.551871"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 218], ["created_at", "2019-08-22 07:29:46.560153"], ["updated_at", "2019-08-22 07:29:46.560153"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 328], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 328], ["auditable_type", "Node"], ["associated_id", 218], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 218\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0ea653fb-29b2-4648-9938-bc9fa4c548e1"], ["created_at", "2019-08-22 07:29:46.565148"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 218], ["created_at", "2019-08-22 07:29:46.581783"], ["updated_at", "2019-08-22 07:29:46.581783"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 329], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 329], ["auditable_type", "Node"], ["associated_id", 218], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 218\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cd27aa58-8b23-4975-ab37-a2f965f635b4"], ["created_at", "2019-08-22 07:29:46.586747"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 328], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 328], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 328], ["auditable_type", "Node"], ["associated_id", 218], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "69c79014-eefa-421c-b3e5-fa3afdc7aa0f"], ["created_at", "2019-08-22 07:29:46.629116"]]
  [1m[36mInputNode Update (2.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:29:46.626984"], ["id", 328]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 329], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 328], ["to_node_id", 329], ["created_at", "2019-08-22 07:29:46.673884"], ["updated_at", "2019-08-22 07:29:46.673884"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 87], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 87], ["auditable_type", "Edge"], ["associated_id", 328], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 328\nto_node_id: 329\n"], ["version", 1], ["request_uuid", "4673295e-3a48-43fa-87df-99af8211e99f"], ["created_at", "2019-08-22 07:29:46.678399"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 328], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 329], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 218]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 328], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 87], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 87], ["auditable_type", "Edge"], ["associated_id", 328], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 328\nto_node_id: 329\n"], ["version", 2], ["request_uuid", "db80afa3-f67b-4293-a7bb-fb0fb4ebd155"], ["created_at", "2019-08-22 07:29:46.751260"]]
  [1m[36mEdge Destroy (2.0ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 87]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:46.772763"], ["updated_at", "2019-08-22 07:29:46.772763"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 219], ["created_at", "2019-08-22 07:29:46.778610"], ["updated_at", "2019-08-22 07:29:46.778610"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 330], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 330], ["auditable_type", "Node"], ["associated_id", 219], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 219\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "eebb16a2-db36-458b-ab32-353bed71f547"], ["created_at", "2019-08-22 07:29:46.783274"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 219]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 219], ["created_at", "2019-08-22 07:29:46.798687"], ["updated_at", "2019-08-22 07:29:46.798687"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 331], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 331], ["auditable_type", "Node"], ["associated_id", 219], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 219\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "015d121d-170c-4f50-ba0f-d497ea0e19b8"], ["created_at", "2019-08-22 07:29:46.805676"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 219], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 219]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 219]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 219]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 219], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 330], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 219], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 330], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 330], ["auditable_type", "Node"], ["associated_id", 219], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "84eee74a-7033-4e00-a3c2-60a64c18b810"], ["created_at", "2019-08-22 07:29:46.840657"]]
  [1m[36mInputNode Update (2.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:29:46.838380"], ["id", 330]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 331], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 219], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 219]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 219]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 219], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 219]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 219], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 219]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 219]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 219]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:46.903694"], ["updated_at", "2019-08-22 07:29:46.903694"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 220], ["created_at", "2019-08-22 07:29:46.911942"], ["updated_at", "2019-08-22 07:29:46.911942"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 332], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 332], ["auditable_type", "Node"], ["associated_id", 220], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 220\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "093a429f-ac78-4dba-88ff-a9d40fcbf6d6"], ["created_at", "2019-08-22 07:29:46.915942"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 220], ["created_at", "2019-08-22 07:29:46.928492"], ["updated_at", "2019-08-22 07:29:46.928492"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 333], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 333], ["auditable_type", "Node"], ["associated_id", 220], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 220\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "05e6780e-67d8-4ec6-b576-40133238c3ea"], ["created_at", "2019-08-22 07:29:46.933037"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 332], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 332], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 332], ["auditable_type", "Node"], ["associated_id", 220], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "8718d5d9-71fb-4347-8185-7042e6e027c2"], ["created_at", "2019-08-22 07:29:46.967253"]]
  [1m[36mInputNode Update (2.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:29:46.965066"], ["id", 332]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 333], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[36mEdge Load (1.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 332], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 333], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 332], ["to_node_id", 333], ["created_at", "2019-08-22 07:29:47.065630"], ["updated_at", "2019-08-22 07:29:47.065630"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 88], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 88], ["auditable_type", "Edge"], ["associated_id", 332], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 332\nto_node_id: 333\n"], ["version", 1], ["request_uuid", "630a9670-af72-455d-8191-7112b73fd59c"], ["created_at", "2019-08-22 07:29:47.071409"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 220]]
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 332], ["LIMIT", 1]]
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 333], ["LIMIT", 1]]
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 07:29:47.149910"], ["updated_at", "2019-08-22 07:29:47.149910"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 221], ["created_at", "2019-08-22 07:29:47.153408"], ["updated_at", "2019-08-22 07:29:47.153408"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 334], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 334], ["auditable_type", "Node"], ["associated_id", 221], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 221\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "fb68fd44-b855-4273-b004-fe3f9955e961"], ["created_at", "2019-08-22 07:29:47.160463"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:47.184008"], ["updated_at", "2019-08-22 07:29:47.184008"]]
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 222], ["created_at", "2019-08-22 07:29:47.186894"], ["updated_at", "2019-08-22 07:29:47.186894"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 335], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (9.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 335], ["auditable_type", "Node"], ["associated_id", 222], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 222\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "baa5e0d6-0877-464f-b881-42f236b3b608"], ["created_at", "2019-08-22 07:29:47.191673"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 222], ["created_at", "2019-08-22 07:29:47.216784"], ["updated_at", "2019-08-22 07:29:47.216784"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 336], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 336], ["auditable_type", "Node"], ["associated_id", 222], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 222\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7f0a705d-41a6-4281-b291-c48e5bb95231"], ["created_at", "2019-08-22 07:29:47.221791"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 222], ["created_at", "2019-08-22 07:29:47.234805"], ["updated_at", "2019-08-22 07:29:47.234805"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 337], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 337], ["auditable_type", "Node"], ["associated_id", 222], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 222\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6afeed8c-601e-4f95-a658-6984997ece5f"], ["created_at", "2019-08-22 07:29:47.239230"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 222], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 335], ["to_node_id", 336], ["created_at", "2019-08-22 07:29:47.254043"], ["updated_at", "2019-08-22 07:29:47.254043"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 89], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 89], ["auditable_type", "Edge"], ["associated_id", 335], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 335\nto_node_id: 336\n"], ["version", 1], ["request_uuid", "b8b60582-765b-4540-922b-0891c44ce736"], ["created_at", "2019-08-22 07:29:47.263926"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 89], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 89], ["auditable_type", "Edge"], ["associated_id", 335], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 336\n- 337\n"], ["version", 2], ["request_uuid", "d958799f-a1d5-4bc4-816f-a06dec217d75"], ["created_at", "2019-08-22 07:29:47.274444"]]
  [1m[36mEdge Update (2.9ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 337], ["updated_at", "2019-08-22 07:29:47.272918"], ["id", 89]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 222]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 222]]
  [1m[36mAudited::Audit Load (3.2ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 222], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.0ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 89], ["auditable_type", "Edge"]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 335], ["LIMIT", 1]]
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 336], ["LIMIT", 1]]
  [1m[36mEdge Update (2.7ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 336], ["updated_at", "2019-08-22 07:29:47.313993"], ["id", 89]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.0ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 506]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 222], ["LIMIT", 1]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 336], ["LIMIT", 1]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 222]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 222]]
  [1m[36mAudited::Audit Load (3.7ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 222], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (2.9ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 89], ["auditable_type", "Edge"]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 335], ["LIMIT", 1]]
  [1m[36mEdge Destroy (2.9ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 89]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (2.8ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 505]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 222], ["LIMIT", 1]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 222]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 222]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:47.393856"], ["updated_at", "2019-08-22 07:29:47.393856"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 223], ["created_at", "2019-08-22 07:29:47.401994"], ["updated_at", "2019-08-22 07:29:47.401994"], ["type", "InputNode"]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 338], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 338], ["auditable_type", "Node"], ["associated_id", 223], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 223\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c17a9ff5-9a36-47cf-b437-a4b39d7fafa5"], ["created_at", "2019-08-22 07:29:47.409652"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 223]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 223], ["created_at", "2019-08-22 07:29:47.424439"], ["updated_at", "2019-08-22 07:29:47.424439"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 339], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 339], ["auditable_type", "Node"], ["associated_id", 223], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 223\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "37ef0740-b65f-4afc-be9e-78d8c7e39186"], ["created_at", "2019-08-22 07:29:47.428408"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 338], ["to_node_id", 339], ["created_at", "2019-08-22 07:29:47.437159"], ["updated_at", "2019-08-22 07:29:47.437159"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 90], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 90], ["auditable_type", "Edge"], ["associated_id", 338], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 338\nto_node_id: 339\n"], ["version", 1], ["request_uuid", "012cd576-2440-49d4-8498-fde2b9b2bf67"], ["created_at", "2019-08-22 07:29:47.441900"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 338]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 90], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 90], ["auditable_type", "Edge"], ["associated_id", 338], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 338\nto_node_id: 339\n"], ["version", 2], ["request_uuid", "62586b60-7632-4a0a-9b1f-ba44aee67559"], ["created_at", "2019-08-22 07:29:47.461348"]]
  [1m[36mEdge Destroy (3.4ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 90]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 338]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 338], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 338], ["auditable_type", "Node"], ["associated_id", 223], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 223\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "ea345975-740c-4646-a8c9-695a54157363"], ["created_at", "2019-08-22 07:29:47.479692"]]
  [1m[36mInputNode Destroy (4.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 338]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:47.507174"], ["updated_at", "2019-08-22 07:29:47.507174"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 224], ["created_at", "2019-08-22 07:29:47.514578"], ["updated_at", "2019-08-22 07:29:47.514578"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 340], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 340], ["auditable_type", "Node"], ["associated_id", 224], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 224\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3eea66b3-83b8-434a-bce6-6b7d77931b53"], ["created_at", "2019-08-22 07:29:47.523530"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 224]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 224], ["created_at", "2019-08-22 07:29:47.535365"], ["updated_at", "2019-08-22 07:29:47.535365"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 341], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 341], ["auditable_type", "Node"], ["associated_id", 224], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 224\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7931e65a-1f90-46a8-b2d2-8972e82723a5"], ["created_at", "2019-08-22 07:29:47.539365"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 340], ["to_node_id", 341], ["created_at", "2019-08-22 07:29:47.548247"], ["updated_at", "2019-08-22 07:29:47.548247"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 91], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 91], ["auditable_type", "Edge"], ["associated_id", 340], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 340\nto_node_id: 341\n"], ["version", 1], ["request_uuid", "4333184f-3c3f-4d06-af3c-befcc2eeaa9d"], ["created_at", "2019-08-22 07:29:47.552675"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 341]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 341]]
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 340], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 91], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 91], ["auditable_type", "Edge"], ["associated_id", 340], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 340\nto_node_id: 341\n"], ["version", 2], ["request_uuid", "f6760ef0-28cd-48ac-ae2e-d4f3eb94f629"], ["created_at", "2019-08-22 07:29:47.576732"]]
  [1m[36mEdge Destroy (2.4ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 91]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 341], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 341], ["auditable_type", "Node"], ["associated_id", 224], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 224\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "9c239e3c-fc91-4397-aad0-9bd59db83eae"], ["created_at", "2019-08-22 07:29:47.587046"]]
  [1m[36mOutputNode Destroy (5.7ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 341]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:29:47.620279"], ["updated_at", "2019-08-22 07:29:47.620279"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 225], ["created_at", "2019-08-22 07:29:47.629248"], ["updated_at", "2019-08-22 07:29:47.629248"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 342], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 342], ["auditable_type", "Node"], ["associated_id", 225], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 225\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e8e97823-c235-4b73-ad5d-575ee7350f29"], ["created_at", "2019-08-22 07:29:47.633824"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:12.946180"], ["updated_at", "2019-08-22 07:30:12.946180"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/226/save_all" for 127.0.0.1 at 2019-08-22 07:30:12 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"226", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"6d804a13-7bb3-4fe8-a2df-874ccc347877"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"3a8aaba1-a981-41b5-bc00-d03d85d01574"}], "id"=>"226"}
  [1m[36mGraph Load (3.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 226], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.4ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:30:13.069370"], ["id", 226]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (8.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 226], ["created_at", "2019-08-22 07:30:13.196048"], ["updated_at", "2019-08-22 07:30:13.196048"], ["type", "InputNode"]]
  [1m[35m (17.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 343], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 343], ["auditable_type", "Node"], ["associated_id", 226], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 226\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "c14467ad-26f0-49b9-a206-e891ccee83f4"], ["created_at", "2019-08-22 07:30:13.280879"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 226]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 226], ["created_at", "2019-08-22 07:30:13.346276"], ["updated_at", "2019-08-22 07:30:13.346276"], ["type", "OutputNode"]]
  [1m[35m (8.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 344], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 344], ["auditable_type", "Node"], ["associated_id", 226], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 226\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "c14467ad-26f0-49b9-a206-e891ccee83f4"], ["created_at", "2019-08-22 07:30:13.354496"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 226], ["LIMIT", 1]]
  [1m[36mNode Load (4.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 226]]
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 226], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 226]]
  [1m[36mEdge Load (15.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 226]]
  [1m[36mEdge Load (6.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 226]]
Completed 500 Internal Server Error in 416ms (ActiveRecord: 149.7ms)
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:13.474677"], ["updated_at", "2019-08-22 07:30:13.474677"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (4.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 227], ["created_at", "2019-08-22 07:30:13.482945"], ["updated_at", "2019-08-22 07:30:13.482945"], ["type", "InputNode"]]
  [1m[35m (16.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 345], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 345], ["auditable_type", "Node"], ["associated_id", 227], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 227\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d6beeb7c-6f11-42f1-9010-5ba971eb0204"], ["created_at", "2019-08-22 07:30:13.494077"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 07:30:13.520919"], ["updated_at", "2019-08-22 07:30:13.520919"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 228]]
  [1m[36mOutputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 228], ["created_at", "2019-08-22 07:30:13.531804"], ["updated_at", "2019-08-22 07:30:13.531804"], ["type", "OutputNode"]]
  [1m[35m (6.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 346], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 346], ["auditable_type", "Node"], ["associated_id", 228], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 228\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7fdcaa7c-1054-4ca7-9cd7-02729792c31d"], ["created_at", "2019-08-22 07:30:13.538650"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:13.580055"], ["updated_at", "2019-08-22 07:30:13.580055"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 229]]
  [1m[36mOutputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 229], ["created_at", "2019-08-22 07:30:13.592410"], ["updated_at", "2019-08-22 07:30:13.592410"], ["type", "OutputNode"]]
  [1m[35m (7.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 347], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 347], ["auditable_type", "Node"], ["associated_id", 229], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 229\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9e1349cd-d24d-42de-aa91-4f8b0a7c6a94"], ["created_at", "2019-08-22 07:30:13.604184"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:13.670737"], ["updated_at", "2019-08-22 07:30:13.670737"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 230], ["created_at", "2019-08-22 07:30:13.683930"], ["updated_at", "2019-08-22 07:30:13.683930"], ["type", "InputNode"]]
  [1m[35m (10.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 348], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 348], ["auditable_type", "Node"], ["associated_id", 230], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 230\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "21723c15-4f89-49d8-9116-259412957780"], ["created_at", "2019-08-22 07:30:13.699321"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 230]]
  [1m[36mOutputNode Create (1.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 230], ["created_at", "2019-08-22 07:30:13.730806"], ["updated_at", "2019-08-22 07:30:13.730806"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 349], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 349], ["auditable_type", "Node"], ["associated_id", 230], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 230\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2d5365b7-a696-49c3-ab62-076fb10d23b0"], ["created_at", "2019-08-22 07:30:13.742231"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 348], ["to_node_id", 349], ["created_at", "2019-08-22 07:30:13.757150"], ["updated_at", "2019-08-22 07:30:13.757150"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 92], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 92], ["auditable_type", "Edge"], ["associated_id", 348], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 348\nto_node_id: 349\n"], ["version", 1], ["request_uuid", "e4fd85ee-bf51-4a88-94d5-073dce6680cc"], ["created_at", "2019-08-22 07:30:13.768442"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 92], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 92], ["auditable_type", "Edge"], ["associated_id", 348], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 348\nto_node_id: 349\n"], ["version", 2], ["request_uuid", "a2a96c31-85fc-475d-8f3b-38a4edd7cf8e"], ["created_at", "2019-08-22 07:30:13.782014"]]
  [1m[36mEdge Destroy (4.1ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 92]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:13.820238"], ["updated_at", "2019-08-22 07:30:13.820238"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 231], ["created_at", "2019-08-22 07:30:13.827212"], ["updated_at", "2019-08-22 07:30:13.827212"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 350], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 350], ["auditable_type", "Node"], ["associated_id", 231], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 231\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "636cb39c-75ff-4b71-a16f-edaa6877f036"], ["created_at", "2019-08-22 07:30:13.834268"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 231]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 231], ["created_at", "2019-08-22 07:30:13.849762"], ["updated_at", "2019-08-22 07:30:13.849762"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 351], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 351], ["auditable_type", "Node"], ["associated_id", 231], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 231\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7395fc43-e6de-4157-b7b9-2cb55ce3ab3a"], ["created_at", "2019-08-22 07:30:13.854392"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 350], ["to_node_id", 351], ["created_at", "2019-08-22 07:30:13.862890"], ["updated_at", "2019-08-22 07:30:13.862890"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 93], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 93], ["auditable_type", "Edge"], ["associated_id", 350], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 350\nto_node_id: 351\n"], ["version", 1], ["request_uuid", "ce1228f3-ca4a-4d40-8cb2-5fb5f7b7540d"], ["created_at", "2019-08-22 07:30:13.867037"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:13.895092"], ["updated_at", "2019-08-22 07:30:13.895092"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 232], ["created_at", "2019-08-22 07:30:13.903802"], ["updated_at", "2019-08-22 07:30:13.903802"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 352], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 352], ["auditable_type", "Node"], ["associated_id", 232], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 232\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "23263c07-1813-4c87-bdae-c3f9e521f31d"], ["created_at", "2019-08-22 07:30:13.909898"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:13.941743"], ["updated_at", "2019-08-22 07:30:13.941743"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 233], ["created_at", "2019-08-22 07:30:13.949986"], ["updated_at", "2019-08-22 07:30:13.949986"], ["type", "InputNode"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 353], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 353], ["auditable_type", "Node"], ["associated_id", 233], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 233\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "741885cb-707f-45b6-8a67-43dd325352fa"], ["created_at", "2019-08-22 07:30:13.954148"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 233]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 233], ["created_at", "2019-08-22 07:30:13.967998"], ["updated_at", "2019-08-22 07:30:13.967998"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 354], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 354], ["auditable_type", "Node"], ["associated_id", 233], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 233\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ea1e8721-cf0c-40f0-91a6-5b696c223edd"], ["created_at", "2019-08-22 07:30:13.972221"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 233], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 233]]
  [1m[36mEdge Load (6.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 233]]
  [1m[36mEdge Load (5.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 233]]
  [1m[35m (7.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:14.018005"], ["updated_at", "2019-08-22 07:30:14.018005"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 234], ["created_at", "2019-08-22 07:30:14.026099"], ["updated_at", "2019-08-22 07:30:14.026099"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 355], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 355], ["auditable_type", "Node"], ["associated_id", 234], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 234\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b5ad6451-484a-4f14-af79-247988539b9f"], ["created_at", "2019-08-22 07:30:14.033660"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 234]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 234], ["created_at", "2019-08-22 07:30:14.045813"], ["updated_at", "2019-08-22 07:30:14.045813"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 356], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 356], ["auditable_type", "Node"], ["associated_id", 234], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 234\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0c5e6566-d077-4af6-b0ac-30a3d85989cd"], ["created_at", "2019-08-22 07:30:14.049830"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 234], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 234]]
  [1m[36mEdge Load (6.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 234]]
  [1m[36mEdge Load (5.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 234]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 234], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 234], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 234]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 234]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 234], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 234]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 234], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 234]]
  [1m[36mNode Destroy (3.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 355]]
  [1m[36mEdge Load (6.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 234]]
  [1m[36mEdge Load (5.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 234]]
  [1m[35m (5.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 234]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:14.155645"], ["updated_at", "2019-08-22 07:30:14.155645"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 235], ["created_at", "2019-08-22 07:30:14.164687"], ["updated_at", "2019-08-22 07:30:14.164687"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 357], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 357], ["auditable_type", "Node"], ["associated_id", 235], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 235\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3d630c1c-896b-4572-a92d-9252a6d4aae7"], ["created_at", "2019-08-22 07:30:14.168796"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 235]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 235], ["created_at", "2019-08-22 07:30:14.181233"], ["updated_at", "2019-08-22 07:30:14.181233"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 358], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 358], ["auditable_type", "Node"], ["associated_id", 235], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 235\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "11041861-d73f-4fac-b93e-fcf5396613b7"], ["created_at", "2019-08-22 07:30:14.185234"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 235]]
  [1m[36mEdge Load (5.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 235]]
  [1m[36mEdge Load (6.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 235]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 357], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 357], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 357], ["auditable_type", "Node"], ["associated_id", 235], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "b522c7de-dbde-456f-877a-93c6ae45a479"], ["created_at", "2019-08-22 07:30:14.227472"]]
  [1m[36mInputNode Update (2.4ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:30:14.225230"], ["id", 357]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 358], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 235]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 235]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 235]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 235]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 357], ["to_node_id", 358], ["created_at", "2019-08-22 07:30:14.279117"], ["updated_at", "2019-08-22 07:30:14.279117"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 94], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 94], ["auditable_type", "Edge"], ["associated_id", 357], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 357\nto_node_id: 358\n"], ["version", 1], ["request_uuid", "ea0927a0-14de-4734-96ce-239d481cbb12"], ["created_at", "2019-08-22 07:30:14.282926"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 357], ["to_node_id", 358], ["created_at", "2019-08-22 07:30:14.291009"], ["updated_at", "2019-08-22 07:30:14.291009"]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:14.311289"], ["updated_at", "2019-08-22 07:30:14.311289"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 236], ["LIMIT", 1]]
  [1m[36mEdge Load (7.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 236]]
  [1m[36mEdge Load (6.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 236]]
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:14.358132"], ["updated_at", "2019-08-22 07:30:14.358132"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 237], ["created_at", "2019-08-22 07:30:14.367104"], ["updated_at", "2019-08-22 07:30:14.367104"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 359], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 359], ["auditable_type", "Node"], ["associated_id", 237], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 237\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4a2e2551-c417-44ab-ba99-da5b3d4b20c8"], ["created_at", "2019-08-22 07:30:14.371508"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 237]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 237], ["created_at", "2019-08-22 07:30:14.384578"], ["updated_at", "2019-08-22 07:30:14.384578"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 360], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 360], ["auditable_type", "Node"], ["associated_id", 237], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 237\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7563db83-6504-4731-9c20-c95c066dee22"], ["created_at", "2019-08-22 07:30:14.388942"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 237], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 237]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 359], ["to_node_id", 360], ["created_at", "2019-08-22 07:30:14.403566"], ["updated_at", "2019-08-22 07:30:14.403566"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 96], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 96], ["auditable_type", "Edge"], ["associated_id", 359], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 359\nto_node_id: 360\n"], ["version", 1], ["request_uuid", "23192e1a-afbc-48a6-8740-69a9f12f0b7d"], ["created_at", "2019-08-22 07:30:14.407837"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 237]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 237]]
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:14.443833"], ["updated_at", "2019-08-22 07:30:14.443833"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 238], ["created_at", "2019-08-22 07:30:14.452179"], ["updated_at", "2019-08-22 07:30:14.452179"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 361], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 361], ["auditable_type", "Node"], ["associated_id", 238], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 238\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6fbcf355-92ca-42b1-90b6-cf7c9b0263ed"], ["created_at", "2019-08-22 07:30:14.459055"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 238]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 238], ["created_at", "2019-08-22 07:30:14.470910"], ["updated_at", "2019-08-22 07:30:14.470910"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 362], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 362], ["auditable_type", "Node"], ["associated_id", 238], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 238\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "35d0285b-61a8-487b-88fb-72f57be09846"], ["created_at", "2019-08-22 07:30:14.475024"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 238], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 238]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 238]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 238]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 238], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 361], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 238], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 361], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 361], ["auditable_type", "Node"], ["associated_id", 238], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "11dbc303-c6fe-4181-bf57-2efd1def6b90"], ["created_at", "2019-08-22 07:30:14.512332"]]
  [1m[36mInputNode Update (2.5ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:30:14.510407"], ["id", 361]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 362], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 238], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 238]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 238]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 238], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 238]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 238], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 238]]
  [1m[36mEdge Load (1.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 238]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 238]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:14.571954"], ["updated_at", "2019-08-22 07:30:14.571954"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 239], ["created_at", "2019-08-22 07:30:14.578837"], ["updated_at", "2019-08-22 07:30:14.578837"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 363], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 363], ["auditable_type", "Node"], ["associated_id", 239], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 239\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f61fe7a2-b025-478e-a91d-f6766648a1f4"], ["created_at", "2019-08-22 07:30:14.585658"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 239], ["created_at", "2019-08-22 07:30:14.597780"], ["updated_at", "2019-08-22 07:30:14.597780"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 364], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 364], ["auditable_type", "Node"], ["associated_id", 239], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 239\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4abb90b8-c6a5-4464-9403-f617c7019480"], ["created_at", "2019-08-22 07:30:14.601774"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 363], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 363], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 363], ["auditable_type", "Node"], ["associated_id", 239], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "11978084-a023-4d0b-8a35-64b93add2095"], ["created_at", "2019-08-22 07:30:14.633702"]]
  [1m[36mInputNode Update (2.4ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:30:14.631874"], ["id", 363]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 364], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[36mEdge Load (1.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 363], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 364], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 363], ["to_node_id", 364], ["created_at", "2019-08-22 07:30:14.722790"], ["updated_at", "2019-08-22 07:30:14.722790"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 97], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 97], ["auditable_type", "Edge"], ["associated_id", 363], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 363\nto_node_id: 364\n"], ["version", 1], ["request_uuid", "61074e83-c728-4101-b4c1-59504b7d98e7"], ["created_at", "2019-08-22 07:30:14.726753"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 239]]
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 363], ["LIMIT", 1]]
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 364], ["LIMIT", 1]]
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:14.773395"], ["updated_at", "2019-08-22 07:30:14.773395"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 240], ["created_at", "2019-08-22 07:30:14.779308"], ["updated_at", "2019-08-22 07:30:14.779308"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 365], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 365], ["auditable_type", "Node"], ["associated_id", 240], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 240\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4f2dcfaa-521a-4fca-a623-b81578013307"], ["created_at", "2019-08-22 07:30:14.783203"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 240], ["created_at", "2019-08-22 07:30:14.795671"], ["updated_at", "2019-08-22 07:30:14.795671"], ["type", "OutputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 366], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 366], ["auditable_type", "Node"], ["associated_id", 240], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 240\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e62dbe00-82b4-4b3a-9217-49196c8b9fa3"], ["created_at", "2019-08-22 07:30:14.801182"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[36mEdge Load (3.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 365], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 365], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 365], ["auditable_type", "Node"], ["associated_id", 240], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "407b1f29-ec9d-44ad-b9a5-8f63c44fafb0"], ["created_at", "2019-08-22 07:30:14.851969"]]
  [1m[36mInputNode Update (2.7ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:30:14.849861"], ["id", 365]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 366], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 365], ["to_node_id", 366], ["created_at", "2019-08-22 07:30:14.893367"], ["updated_at", "2019-08-22 07:30:14.893367"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 98], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 98], ["auditable_type", "Edge"], ["associated_id", 365], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 365\nto_node_id: 366\n"], ["version", 1], ["request_uuid", "bb06567c-d15c-4a21-9a68-408c612e2c12"], ["created_at", "2019-08-22 07:30:14.897096"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 365], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 366], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[36mEdge Load (1.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 240]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 365], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 98], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 98], ["auditable_type", "Edge"], ["associated_id", 365], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 365\nto_node_id: 366\n"], ["version", 2], ["request_uuid", "05e6df03-e254-4bc7-905c-c169597347fd"], ["created_at", "2019-08-22 07:30:14.968465"]]
  [1m[36mEdge Destroy (2.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 98]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 07:30:15.022974"], ["updated_at", "2019-08-22 07:30:15.022974"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 241], ["created_at", "2019-08-22 07:30:15.027197"], ["updated_at", "2019-08-22 07:30:15.027197"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (1.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 367], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 367], ["auditable_type", "Node"], ["associated_id", 241], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 241\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "74e4441a-9dd3-41c6-a764-92b61ee795ea"], ["created_at", "2019-08-22 07:30:15.038423"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:15.061422"], ["updated_at", "2019-08-22 07:30:15.061422"]]
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 242], ["created_at", "2019-08-22 07:30:15.063893"], ["updated_at", "2019-08-22 07:30:15.063893"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 368], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (11.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 368], ["auditable_type", "Node"], ["associated_id", 242], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 242\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9c3bc62d-7bf1-44ac-8c0e-4f34ed8bcfd8"], ["created_at", "2019-08-22 07:30:15.068715"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 242], ["created_at", "2019-08-22 07:30:15.058995"], ["updated_at", "2019-08-22 07:30:15.058995"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 369], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 369], ["auditable_type", "Node"], ["associated_id", 242], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 242\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b302aae1-ff9d-4ab4-90a2-a05a4a86e0dc"], ["created_at", "2019-08-22 07:30:15.062826"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 242], ["created_at", "2019-08-22 07:30:15.071308"], ["updated_at", "2019-08-22 07:30:15.071308"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 370], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 370], ["auditable_type", "Node"], ["associated_id", 242], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 242\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6e23f053-5477-4cef-8ab6-e5cde1da70d6"], ["created_at", "2019-08-22 07:30:15.075293"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 242], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 368], ["to_node_id", 369], ["created_at", "2019-08-22 07:30:15.088763"], ["updated_at", "2019-08-22 07:30:15.088763"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 99], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 99], ["auditable_type", "Edge"], ["associated_id", 368], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 368\nto_node_id: 369\n"], ["version", 1], ["request_uuid", "4826b6a6-ecc9-494e-ba5a-e7c54810d357"], ["created_at", "2019-08-22 07:30:15.092394"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 99], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 99], ["auditable_type", "Edge"], ["associated_id", 368], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 369\n- 370\n"], ["version", 2], ["request_uuid", "aa3e734e-b86c-4bb9-9f84-364bb56880dc"], ["created_at", "2019-08-22 07:30:15.101814"]]
  [1m[36mEdge Update (2.4ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 370], ["updated_at", "2019-08-22 07:30:15.100501"], ["id", 99]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 242]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 242]]
  [1m[36mAudited::Audit Load (2.9ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 242], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (4.4ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 99], ["auditable_type", "Edge"]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 368], ["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 369], ["LIMIT", 1]]
  [1m[36mEdge Update (2.5ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 369], ["updated_at", "2019-08-22 07:30:15.140966"], ["id", 99]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (2.7ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 559]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 242], ["LIMIT", 1]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 369], ["LIMIT", 1]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 242]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 242]]
  [1m[36mAudited::Audit Load (2.8ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 242], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (2.4ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 99], ["auditable_type", "Edge"]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 368], ["LIMIT", 1]]
  [1m[36mEdge Destroy (2.2ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 99]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (2.4ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 558]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 242], ["LIMIT", 1]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 242]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 242]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:15.220657"], ["updated_at", "2019-08-22 07:30:15.220657"]]
  [1m[35m (2.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 243], ["created_at", "2019-08-22 07:30:15.230893"], ["updated_at", "2019-08-22 07:30:15.230893"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 371], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 371], ["auditable_type", "Node"], ["associated_id", 243], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 243\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ef6858f5-d6d1-4d60-a2fe-5a15e07d1a7a"], ["created_at", "2019-08-22 07:30:15.236376"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 243]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 243], ["created_at", "2019-08-22 07:30:15.251624"], ["updated_at", "2019-08-22 07:30:15.251624"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 372], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 372], ["auditable_type", "Node"], ["associated_id", 243], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 243\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7acddd94-69cf-4039-a5ff-68f7a2c99d37"], ["created_at", "2019-08-22 07:30:15.255659"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 371], ["to_node_id", 372], ["created_at", "2019-08-22 07:30:15.267590"], ["updated_at", "2019-08-22 07:30:15.267590"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 100], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 100], ["auditable_type", "Edge"], ["associated_id", 371], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 371\nto_node_id: 372\n"], ["version", 1], ["request_uuid", "a4c103c6-51d3-410c-b925-ab6fab12c663"], ["created_at", "2019-08-22 07:30:15.271306"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 372]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 372]]
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 371], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 100], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 100], ["auditable_type", "Edge"], ["associated_id", 371], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 371\nto_node_id: 372\n"], ["version", 2], ["request_uuid", "bbc18423-9d92-4ffe-9392-380ffaab99af"], ["created_at", "2019-08-22 07:30:15.295998"]]
  [1m[36mEdge Destroy (2.3ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 372], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 372], ["auditable_type", "Node"], ["associated_id", 243], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 243\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "5c9c6904-ebff-4daa-bcbb-b02250cdcf96"], ["created_at", "2019-08-22 07:30:15.305442"]]
  [1m[36mOutputNode Destroy (2.3ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 372]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:15.332531"], ["updated_at", "2019-08-22 07:30:15.332531"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 244], ["created_at", "2019-08-22 07:30:15.338493"], ["updated_at", "2019-08-22 07:30:15.338493"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 373], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 373], ["auditable_type", "Node"], ["associated_id", 244], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 244\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f87a6332-a3f5-4c07-a4ee-9942f863d9dc"], ["created_at", "2019-08-22 07:30:15.345211"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 244]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 244], ["created_at", "2019-08-22 07:30:15.363242"], ["updated_at", "2019-08-22 07:30:15.363242"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 374], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 374], ["auditable_type", "Node"], ["associated_id", 244], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 244\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "fb32bd26-ac57-4b86-a42b-b85607577f90"], ["created_at", "2019-08-22 07:30:15.367570"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 373], ["to_node_id", 374], ["created_at", "2019-08-22 07:30:15.375526"], ["updated_at", "2019-08-22 07:30:15.375526"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 101], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 101], ["auditable_type", "Edge"], ["associated_id", 373], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 373\nto_node_id: 374\n"], ["version", 1], ["request_uuid", "f1851d6c-aa8f-46cc-905a-1f63bbcb4d41"], ["created_at", "2019-08-22 07:30:15.379344"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 373]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 101], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 101], ["auditable_type", "Edge"], ["associated_id", 373], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 373\nto_node_id: 374\n"], ["version", 2], ["request_uuid", "8cfd8075-a70a-4d0f-9574-bea827a72334"], ["created_at", "2019-08-22 07:30:15.396866"]]
  [1m[36mEdge Destroy (2.5ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 101]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 373]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 373], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 373], ["auditable_type", "Node"], ["associated_id", 244], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 244\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "7a41e85a-c3a1-425a-a998-60cfed31dbe5"], ["created_at", "2019-08-22 07:30:15.410164"]]
  [1m[36mInputNode Destroy (2.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 373]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:15.431160"], ["updated_at", "2019-08-22 07:30:15.431160"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 245], ["created_at", "2019-08-22 07:30:15.436458"], ["updated_at", "2019-08-22 07:30:15.436458"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 375], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 375], ["auditable_type", "Node"], ["associated_id", 245], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 245\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "684efc79-f072-4119-81fa-b27df8053fa2"], ["created_at", "2019-08-22 07:30:15.440621"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:54.750528"], ["updated_at", "2019-08-22 07:30:54.750528"]]
  [1m[36mInputNode Create (7.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 246], ["created_at", "2019-08-22 07:30:54.758595"], ["updated_at", "2019-08-22 07:30:54.758595"], ["type", "InputNode"]]
  [1m[35m (18.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 376], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 376], ["auditable_type", "Node"], ["associated_id", 246], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 246\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "01302209-f34c-4e7b-bde3-eced163def66"], ["created_at", "2019-08-22 07:30:54.808384"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 246], ["created_at", "2019-08-22 07:30:54.877546"], ["updated_at", "2019-08-22 07:30:54.877546"], ["type", "OutputNode"]]
  [1m[35m (9.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 377], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 377], ["auditable_type", "Node"], ["associated_id", 246], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 246\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c1ace094-95be-4f90-9e2a-2afce4ac292e"], ["created_at", "2019-08-22 07:30:54.888099"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 246], ["created_at", "2019-08-22 07:30:54.910496"], ["updated_at", "2019-08-22 07:30:54.910496"], ["type", "InputNode"]]
  [1m[35m (8.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 378], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 378], ["auditable_type", "Node"], ["associated_id", 246], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 246\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7426d695-42e1-4630-8aa6-3f3f004af583"], ["created_at", "2019-08-22 07:30:54.918637"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 246], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 376], ["to_node_id", 377], ["created_at", "2019-08-22 07:30:54.990042"], ["updated_at", "2019-08-22 07:30:54.990042"]]
  [1m[35m (7.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 102], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 102], ["auditable_type", "Edge"], ["associated_id", 376], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 376\nto_node_id: 377\n"], ["version", 1], ["request_uuid", "c97f4713-6c35-4e1d-9fd2-ea6d0d1beae0"], ["created_at", "2019-08-22 07:30:55.002017"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (8.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 102], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 102], ["auditable_type", "Edge"], ["associated_id", 376], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 377\n- 378\n"], ["version", 2], ["request_uuid", "12eee081-d176-422b-9ebf-64fab821439c"], ["created_at", "2019-08-22 07:30:55.022788"]]
  [1m[36mEdge Update (8.6ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 378], ["updated_at", "2019-08-22 07:30:55.019426"], ["id", 102]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (13.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 246]]
  [1m[36mEdge Load (8.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 246]]
  [1m[36mAudited::Audit Load (3.7ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 246], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (4.0ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 102], ["auditable_type", "Edge"]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 376], ["LIMIT", 1]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 377], ["LIMIT", 1]]
  [1m[36mEdge Update (5.3ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 377], ["updated_at", "2019-08-22 07:30:55.115257"], ["id", 102]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (6.5ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 575]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (3.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 246], ["LIMIT", 1]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 377], ["LIMIT", 1]]
  [1m[36mEdge Load (9.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 246]]
  [1m[36mEdge Load (7.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 246]]
  [1m[36mAudited::Audit Load (4.1ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 246], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (4.0ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 102], ["auditable_type", "Edge"]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 376], ["LIMIT", 1]]
  [1m[36mEdge Destroy (3.5ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 102]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.9ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 574]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 246], ["LIMIT", 1]]
  [1m[36mEdge Load (7.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 246]]
  [1m[36mEdge Load (8.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 246]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:55.417162"], ["updated_at", "2019-08-22 07:30:55.417162"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/247/save_all" for 127.0.0.1 at 2019-08-22 07:30:55 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"247", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"ce6cc7d3-ef50-494d-8e23-c9b3615ebf4d"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"f2744292-fc97-4f70-a8cc-c6eb32f86296"}], "id"=>"247"}
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 247], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.7ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:30:55.521478"], ["id", 247]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 247], ["created_at", "2019-08-22 07:30:55.527990"], ["updated_at", "2019-08-22 07:30:55.527990"], ["type", "InputNode"]]
  [1m[35m (7.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 379], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 379], ["auditable_type", "Node"], ["associated_id", 247], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 247\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "9d27758f-3aab-4c8d-b778-0b32416cd609"], ["created_at", "2019-08-22 07:30:55.533738"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 247]]
  [1m[36mOutputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 247], ["created_at", "2019-08-22 07:30:55.554801"], ["updated_at", "2019-08-22 07:30:55.554801"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 380], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 380], ["auditable_type", "Node"], ["associated_id", 247], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 247\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "9d27758f-3aab-4c8d-b778-0b32416cd609"], ["created_at", "2019-08-22 07:30:55.560785"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 247], ["LIMIT", 1]]
  [1m[36mNode Load (4.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 247]]
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 247], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 247]]
  [1m[36mEdge Load (7.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 247]]
  [1m[36mEdge Load (8.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 247]]
Completed 200 OK in 102ms (Views: 0.9ms | ActiveRecord: 45.2ms)
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:55.624361"], ["updated_at", "2019-08-22 07:30:55.624361"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 248]]
  [1m[36mOutputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 248], ["created_at", "2019-08-22 07:30:55.634867"], ["updated_at", "2019-08-22 07:30:55.634867"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 381], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 381], ["auditable_type", "Node"], ["associated_id", 248], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 248\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a96b995f-0791-40be-9e15-2f9cbb450b5c"], ["created_at", "2019-08-22 07:30:55.642654"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:55.681197"], ["updated_at", "2019-08-22 07:30:55.681197"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 249], ["created_at", "2019-08-22 07:30:55.687901"], ["updated_at", "2019-08-22 07:30:55.687901"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 382], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 382], ["auditable_type", "Node"], ["associated_id", 249], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 249\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5f8e13cf-50ac-4caf-b855-c0fe9169500d"], ["created_at", "2019-08-22 07:30:55.692928"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 249]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 249], ["created_at", "2019-08-22 07:30:55.709103"], ["updated_at", "2019-08-22 07:30:55.709103"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 383], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 383], ["auditable_type", "Node"], ["associated_id", 249], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 249\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a2723b2f-f7ad-4e57-aecf-f78949165689"], ["created_at", "2019-08-22 07:30:55.712902"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 382], ["to_node_id", 383], ["created_at", "2019-08-22 07:30:55.720499"], ["updated_at", "2019-08-22 07:30:55.720499"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 103], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 103], ["auditable_type", "Edge"], ["associated_id", 382], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 382\nto_node_id: 383\n"], ["version", 1], ["request_uuid", "763eadee-25ae-4457-a9a8-28f13e1aa9e9"], ["created_at", "2019-08-22 07:30:55.724173"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 103], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 103], ["auditable_type", "Edge"], ["associated_id", 382], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 382\nto_node_id: 383\n"], ["version", 2], ["request_uuid", "c76e3295-ad82-45bb-9950-ddbc87519864"], ["created_at", "2019-08-22 07:30:55.732540"]]
  [1m[36mEdge Destroy (3.3ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 103]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:55.757916"], ["updated_at", "2019-08-22 07:30:55.757916"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 250], ["created_at", "2019-08-22 07:30:55.763616"], ["updated_at", "2019-08-22 07:30:55.763616"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 384], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 384], ["auditable_type", "Node"], ["associated_id", 250], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 250\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "215b7e1a-6b71-48e0-b7c2-a87711f545a5"], ["created_at", "2019-08-22 07:30:55.768385"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 07:30:55.777545"], ["updated_at", "2019-08-22 07:30:55.777545"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 251]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 251], ["created_at", "2019-08-22 07:30:55.791464"], ["updated_at", "2019-08-22 07:30:55.791464"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 385], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 385], ["auditable_type", "Node"], ["associated_id", 251], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 251\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5dc21dba-b89f-43fe-9da7-0db0648c9fae"], ["created_at", "2019-08-22 07:30:55.795761"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:55.814017"], ["updated_at", "2019-08-22 07:30:55.814017"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 252], ["created_at", "2019-08-22 07:30:55.819864"], ["updated_at", "2019-08-22 07:30:55.819864"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 386], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 386], ["auditable_type", "Node"], ["associated_id", 252], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 252\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "52ee5904-c373-43c9-a4eb-dd235918e1f6"], ["created_at", "2019-08-22 07:30:55.828646"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 252]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 252], ["created_at", "2019-08-22 07:30:55.841730"], ["updated_at", "2019-08-22 07:30:55.841730"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 387], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 387], ["auditable_type", "Node"], ["associated_id", 252], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 252\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a3f6376b-d0f3-4412-b1d5-ddc3f539bc3f"], ["created_at", "2019-08-22 07:30:55.846179"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 386], ["to_node_id", 387], ["created_at", "2019-08-22 07:30:55.853736"], ["updated_at", "2019-08-22 07:30:55.853736"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 104], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 104], ["auditable_type", "Edge"], ["associated_id", 386], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 386\nto_node_id: 387\n"], ["version", 1], ["request_uuid", "abb5fb05-f595-4025-9f2f-631e29dc5740"], ["created_at", "2019-08-22 07:30:55.857286"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:55.886801"], ["updated_at", "2019-08-22 07:30:55.886801"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 253], ["created_at", "2019-08-22 07:30:55.896155"], ["updated_at", "2019-08-22 07:30:55.896155"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 388], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 388], ["auditable_type", "Node"], ["associated_id", 253], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 253\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "872f81ab-56f3-4a78-94eb-4e648943fce9"], ["created_at", "2019-08-22 07:30:55.900232"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:55.924997"], ["updated_at", "2019-08-22 07:30:55.924997"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 254], ["created_at", "2019-08-22 07:30:55.931370"], ["updated_at", "2019-08-22 07:30:55.931370"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 389], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 389], ["auditable_type", "Node"], ["associated_id", 254], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 254\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1aabf8c0-158e-4155-98bb-09909575570e"], ["created_at", "2019-08-22 07:30:55.935439"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 254]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 254], ["created_at", "2019-08-22 07:30:55.950223"], ["updated_at", "2019-08-22 07:30:55.950223"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 390], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 390], ["auditable_type", "Node"], ["associated_id", 254], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 254\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1cbdece6-f4d9-4171-9318-a34d025004f7"], ["created_at", "2019-08-22 07:30:55.954233"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 254], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 254]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 389], ["to_node_id", 390], ["created_at", "2019-08-22 07:30:55.966634"], ["updated_at", "2019-08-22 07:30:55.966634"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 105], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 105], ["auditable_type", "Edge"], ["associated_id", 389], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 389\nto_node_id: 390\n"], ["version", 1], ["request_uuid", "a5fba09a-02e3-4f16-b380-ae4ddf5ec28d"], ["created_at", "2019-08-22 07:30:55.970349"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (8.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 254]]
  [1m[36mEdge Load (8.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 254]]
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:56.014864"], ["updated_at", "2019-08-22 07:30:56.014864"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 255], ["created_at", "2019-08-22 07:30:56.023538"], ["updated_at", "2019-08-22 07:30:56.023538"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 391], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 391], ["auditable_type", "Node"], ["associated_id", 255], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 255\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "776100cd-701e-467c-9468-e0c0952ad18d"], ["created_at", "2019-08-22 07:30:56.030126"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 255]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 255], ["created_at", "2019-08-22 07:30:56.040693"], ["updated_at", "2019-08-22 07:30:56.040693"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 392], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 392], ["auditable_type", "Node"], ["associated_id", 255], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 255\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1a7f46e1-9925-4229-9ccc-46a870b37e5e"], ["created_at", "2019-08-22 07:30:56.044923"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 255], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 255]]
  [1m[36mEdge Load (8.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 255]]
  [1m[36mEdge Load (9.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 255]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 255], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 391], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 255], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 391], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 391], ["auditable_type", "Node"], ["associated_id", 255], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "274e968b-ed30-4990-9ed3-d262b326993b"], ["created_at", "2019-08-22 07:30:56.092902"]]
  [1m[36mInputNode Update (3.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:30:56.090783"], ["id", 391]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 392], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 255], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 255]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 255]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 255], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 255]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 255], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 255]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 391], ["to_node_id", 392], ["created_at", "2019-08-22 07:30:56.135183"], ["updated_at", "2019-08-22 07:30:56.135183"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 106], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 106], ["auditable_type", "Edge"], ["associated_id", 391], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 391\nto_node_id: 392\n"], ["version", 1], ["request_uuid", "e63bd3da-8994-430c-bf43-914776c43f8d"], ["created_at", "2019-08-22 07:30:56.138827"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 391], ["to_node_id", 392], ["created_at", "2019-08-22 07:30:56.146079"], ["updated_at", "2019-08-22 07:30:56.146079"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:56.165280"], ["updated_at", "2019-08-22 07:30:56.165280"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 256], ["LIMIT", 1]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 256]]
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 256]]
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:56.199867"], ["updated_at", "2019-08-22 07:30:56.199867"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 257], ["created_at", "2019-08-22 07:30:56.205620"], ["updated_at", "2019-08-22 07:30:56.205620"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 393], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 393], ["auditable_type", "Node"], ["associated_id", 257], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 257\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "94074ec8-998d-41d3-8dd1-6301ae406fe4"], ["created_at", "2019-08-22 07:30:56.211518"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 257]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 257], ["created_at", "2019-08-22 07:30:56.228186"], ["updated_at", "2019-08-22 07:30:56.228186"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 394], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 394], ["auditable_type", "Node"], ["associated_id", 257], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 257\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "419f070f-eee6-4e6d-a947-f4034e9941f9"], ["created_at", "2019-08-22 07:30:56.232377"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 257], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 257]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 257]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 257]]
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:56.263043"], ["updated_at", "2019-08-22 07:30:56.263043"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 258], ["created_at", "2019-08-22 07:30:56.268313"], ["updated_at", "2019-08-22 07:30:56.268313"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 395], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 395], ["auditable_type", "Node"], ["associated_id", 258], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 258\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ee470e10-8af4-4821-8eef-3a7e4ea3c7b6"], ["created_at", "2019-08-22 07:30:56.272853"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 258]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 258], ["created_at", "2019-08-22 07:30:56.285728"], ["updated_at", "2019-08-22 07:30:56.285728"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 396], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 396], ["auditable_type", "Node"], ["associated_id", 258], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 258\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "70b297fa-6628-420e-8608-db825b300ffa"], ["created_at", "2019-08-22 07:30:56.293987"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 258], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 258]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 258]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 258]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 258], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 395], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 258], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 395], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 395], ["auditable_type", "Node"], ["associated_id", 258], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "38d0699c-dd9b-46e6-ad7b-7525fedf1da7"], ["created_at", "2019-08-22 07:30:56.327223"]]
  [1m[36mInputNode Update (2.9ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:30:56.325398"], ["id", 395]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 396], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 258], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 258]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 258]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 258], ["LIMIT", 1]]
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 258]]
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 258], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 258]]
  [1m[36mEdge Load (3.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 258]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 258]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:56.380698"], ["updated_at", "2019-08-22 07:30:56.380698"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 259], ["created_at", "2019-08-22 07:30:56.386114"], ["updated_at", "2019-08-22 07:30:56.386114"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 397], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 397], ["auditable_type", "Node"], ["associated_id", 259], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 259\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4b2c0d90-aac0-4e08-b04a-cdcf8389b229"], ["created_at", "2019-08-22 07:30:56.390830"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 259]]
  [1m[36mOutputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 259], ["created_at", "2019-08-22 07:30:56.404438"], ["updated_at", "2019-08-22 07:30:56.404438"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 398], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 398], ["auditable_type", "Node"], ["associated_id", 259], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 259\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "72798055-331d-4bad-a96a-c90393596a87"], ["created_at", "2019-08-22 07:30:56.410137"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 259], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 259]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 259]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 259]]
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 259], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 398], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 259], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 259]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 259]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 259], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 259]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 259], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 259]]
  [1m[36mNode Destroy (3.0ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 397]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 259]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 259]]
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 259]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:56.491046"], ["updated_at", "2019-08-22 07:30:56.491046"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 260], ["created_at", "2019-08-22 07:30:56.496380"], ["updated_at", "2019-08-22 07:30:56.496380"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 399], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 399], ["auditable_type", "Node"], ["associated_id", 260], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 260\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "435a3ef1-e010-425b-b5ee-dbf1d845def6"], ["created_at", "2019-08-22 07:30:56.500242"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 260], ["created_at", "2019-08-22 07:30:56.512308"], ["updated_at", "2019-08-22 07:30:56.512308"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 400], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 400], ["auditable_type", "Node"], ["associated_id", 260], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 260\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c2d9a194-5528-4648-a389-25f1c925c12b"], ["created_at", "2019-08-22 07:30:56.519094"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 399], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 399], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 399], ["auditable_type", "Node"], ["associated_id", 260], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "a68375cb-c29c-4cc3-b051-0047028680fb"], ["created_at", "2019-08-22 07:30:56.550639"]]
  [1m[36mInputNode Update (2.8ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:30:56.548828"], ["id", 399]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 400], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 399], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 400], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 399], ["to_node_id", 400], ["created_at", "2019-08-22 07:30:56.640429"], ["updated_at", "2019-08-22 07:30:56.640429"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 108], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 108], ["auditable_type", "Edge"], ["associated_id", 399], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 399\nto_node_id: 400\n"], ["version", 1], ["request_uuid", "c4d450aa-1054-4ecb-93d2-e607f5df71fc"], ["created_at", "2019-08-22 07:30:56.644031"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 260]]
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 399], ["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 400], ["LIMIT", 1]]
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:56.692142"], ["updated_at", "2019-08-22 07:30:56.692142"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 261], ["created_at", "2019-08-22 07:30:56.697525"], ["updated_at", "2019-08-22 07:30:56.697525"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 401], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 401], ["auditable_type", "Node"], ["associated_id", 261], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 261\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e8316bf2-a825-497e-ac7e-1c7b14202212"], ["created_at", "2019-08-22 07:30:56.701463"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 261], ["created_at", "2019-08-22 07:30:56.713770"], ["updated_at", "2019-08-22 07:30:56.713770"], ["type", "OutputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 402], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 402], ["auditable_type", "Node"], ["associated_id", 261], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 261\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "380a34a8-0bae-493d-b547-261e1fa9d5bd"], ["created_at", "2019-08-22 07:30:56.718440"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 402], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 402], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 402], ["auditable_type", "Node"], ["associated_id", 261], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 2\n- New Node 1\n"], ["version", 2], ["request_uuid", "f0eaaa56-1fa3-4621-9b5e-1620421912cf"], ["created_at", "2019-08-22 07:30:56.757292"]]
  [1m[36mOutputNode Update (3.1ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "type" = $2, "updated_at" = $3 WHERE "nodes"."id" = $4[0m  [["name", "New Node 1"], ["type", "InputNode"], ["updated_at", "2019-08-22 07:30:56.755520"], ["id", 402]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 401], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 401], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 401], ["auditable_type", "Node"], ["associated_id", 261], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- Node 2\n"], ["version", 2], ["request_uuid", "2d2a5559-8d03-4fee-a12e-a5944c2f1d33"], ["created_at", "2019-08-22 07:30:56.780299"]]
  [1m[36mInputNode Update (3.0ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "type" = $2, "updated_at" = $3 WHERE "nodes"."id" = $4[0m  [["name", "Node 2"], ["type", "OutputNode"], ["updated_at", "2019-08-22 07:30:56.778396"], ["id", 401]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 402], ["to_node_id", 401], ["created_at", "2019-08-22 07:30:56.805018"], ["updated_at", "2019-08-22 07:30:56.805018"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 109], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 109], ["auditable_type", "Edge"], ["associated_id", 402], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 402\nto_node_id: 401\n"], ["version", 1], ["request_uuid", "8ac17c82-29f7-4051-a9b7-82cf83cad4aa"], ["created_at", "2019-08-22 07:30:56.808727"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 402], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 401], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 261]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 402], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 109], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 109], ["auditable_type", "Edge"], ["associated_id", 402], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 402\nto_node_id: 401\n"], ["version", 2], ["request_uuid", "aa69cc58-9425-4a4e-a050-4e6fbc41e68d"], ["created_at", "2019-08-22 07:30:56.882463"]]
  [1m[36mEdge Destroy (3.0ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 109]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:56.916117"], ["updated_at", "2019-08-22 07:30:56.916117"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 262], ["created_at", "2019-08-22 07:30:56.922793"], ["updated_at", "2019-08-22 07:30:56.922793"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 403], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 403], ["auditable_type", "Node"], ["associated_id", 262], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 262\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "793748e5-023c-4e69-97c4-a1718e7b3010"], ["created_at", "2019-08-22 07:30:56.930804"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 262]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 262], ["created_at", "2019-08-22 07:30:56.943665"], ["updated_at", "2019-08-22 07:30:56.943665"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 404], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 404], ["auditable_type", "Node"], ["associated_id", 262], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 262\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "231128d4-9d27-49e9-9737-046aa8f1e7a9"], ["created_at", "2019-08-22 07:30:56.950201"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 403], ["to_node_id", 404], ["created_at", "2019-08-22 07:30:56.959779"], ["updated_at", "2019-08-22 07:30:56.959779"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 110], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 110], ["auditable_type", "Edge"], ["associated_id", 403], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 403\nto_node_id: 404\n"], ["version", 1], ["request_uuid", "b0dd231a-0553-4606-8a44-646df9aaf1e4"], ["created_at", "2019-08-22 07:30:56.963499"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 403]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 110], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 110], ["auditable_type", "Edge"], ["associated_id", 403], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 403\nto_node_id: 404\n"], ["version", 2], ["request_uuid", "8adb1a05-aea7-41df-8a91-246779b89468"], ["created_at", "2019-08-22 07:30:56.982866"]]
  [1m[36mEdge Destroy (3.0ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 110]]
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 403]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 403], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 403], ["auditable_type", "Node"], ["associated_id", 262], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 262\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "3e633556-e52e-4e33-bc45-ddec93409348"], ["created_at", "2019-08-22 07:30:56.999280"]]
  [1m[36mInputNode Destroy (3.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 403]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:57.022340"], ["updated_at", "2019-08-22 07:30:57.022340"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 263], ["created_at", "2019-08-22 07:30:57.029549"], ["updated_at", "2019-08-22 07:30:57.029549"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 405], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 405], ["auditable_type", "Node"], ["associated_id", 263], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 263\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4a3476c1-22e4-4d5b-8cbe-b4cf9463ffbd"], ["created_at", "2019-08-22 07:30:57.034889"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 263]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 263], ["created_at", "2019-08-22 07:30:57.049950"], ["updated_at", "2019-08-22 07:30:57.049950"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 406], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 406], ["auditable_type", "Node"], ["associated_id", 263], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 263\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "480f9af5-f89f-47e4-932f-a955aba6156d"], ["created_at", "2019-08-22 07:30:57.054158"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 405], ["to_node_id", 406], ["created_at", "2019-08-22 07:30:57.061773"], ["updated_at", "2019-08-22 07:30:57.061773"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 111], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 111], ["auditable_type", "Edge"], ["associated_id", 405], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 405\nto_node_id: 406\n"], ["version", 1], ["request_uuid", "ad43e499-1c42-4580-ae66-68908a96653f"], ["created_at", "2019-08-22 07:30:57.065518"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 406]]
  [1m[36mEdge Load (3.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 406]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 405], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 111], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 111], ["auditable_type", "Edge"], ["associated_id", 405], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 405\nto_node_id: 406\n"], ["version", 2], ["request_uuid", "fb926746-d492-4289-824e-68c1735089b9"], ["created_at", "2019-08-22 07:30:57.092775"]]
  [1m[36mEdge Destroy (3.2ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 111]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 406], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 406], ["auditable_type", "Node"], ["associated_id", 263], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 263\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "1f75f2f7-8625-48da-8910-10847eeb63ce"], ["created_at", "2019-08-22 07:30:57.103609"]]
  [1m[36mOutputNode Destroy (2.8ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 406]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:30:57.124597"], ["updated_at", "2019-08-22 07:30:57.124597"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 264], ["created_at", "2019-08-22 07:30:57.129932"], ["updated_at", "2019-08-22 07:30:57.129932"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 407], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 407], ["auditable_type", "Node"], ["associated_id", 264], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 264\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ebaf535c-2245-4028-b217-671cd1aae603"], ["created_at", "2019-08-22 07:30:57.135524"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 07:30:57.185606"], ["updated_at", "2019-08-22 07:30:57.185606"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 265], ["created_at", "2019-08-22 07:30:57.187822"], ["updated_at", "2019-08-22 07:30:57.187822"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 408], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 408], ["auditable_type", "Node"], ["associated_id", 265], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 265\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "324d7867-a8e8-4fb0-bae1-f2f07c362896"], ["created_at", "2019-08-22 07:30:57.192118"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:17.321189"], ["updated_at", "2019-08-22 07:32:17.321189"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/266/save_all" for 127.0.0.1 at 2019-08-22 07:32:17 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"266", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"f44622e4-cade-4495-815d-57fc1d0e0ee8"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"6979d813-0f8b-423b-8634-842e6d5fc64a"}], "id"=>"266"}
  [1m[36mGraph Load (3.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 266], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.1ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:32:17.493436"], ["id", 266]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 266], ["created_at", "2019-08-22 07:32:17.615964"], ["updated_at", "2019-08-22 07:32:17.615964"], ["type", "InputNode"]]
  [1m[35m (16.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 409], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 409], ["auditable_type", "Node"], ["associated_id", 266], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 266\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "754aba00-cf54-4570-ae23-1c5bb960cc09"], ["created_at", "2019-08-22 07:32:17.726402"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 266]]
  [1m[36mOutputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 266], ["created_at", "2019-08-22 07:32:17.786388"], ["updated_at", "2019-08-22 07:32:17.786388"], ["type", "OutputNode"]]
  [1m[35m (7.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 410], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 410], ["auditable_type", "Node"], ["associated_id", 266], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 266\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "754aba00-cf54-4570-ae23-1c5bb960cc09"], ["created_at", "2019-08-22 07:32:17.796973"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 266], ["LIMIT", 1]]
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 266]]
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 266], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 266]]
  [1m[36mEdge Load (15.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 266]]
  [1m[36mEdge Load (7.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 266]]
Completed 200 OK in 452ms (Views: 2.3ms | ActiveRecord: 128.1ms)
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:17.940813"], ["updated_at", "2019-08-22 07:32:17.940813"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 267], ["created_at", "2019-08-22 07:32:17.958947"], ["updated_at", "2019-08-22 07:32:17.958947"], ["type", "InputNode"]]
  [1m[35m (10.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 411], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 411], ["auditable_type", "Node"], ["associated_id", 267], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 267\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cb0b3ead-e6bf-4c86-9d49-e9062583899f"], ["created_at", "2019-08-22 07:32:17.972312"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:18.057351"], ["updated_at", "2019-08-22 07:32:18.057351"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 268], ["created_at", "2019-08-22 07:32:18.067719"], ["updated_at", "2019-08-22 07:32:18.067719"], ["type", "InputNode"]]
  [1m[35m (8.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 412], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 412], ["auditable_type", "Node"], ["associated_id", 268], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 268\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f3c056dc-bdad-43fd-b0c0-dc7e2235fc6b"], ["created_at", "2019-08-22 07:32:18.085123"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 268]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 268], ["created_at", "2019-08-22 07:32:18.110935"], ["updated_at", "2019-08-22 07:32:18.110935"], ["type", "OutputNode"]]
  [1m[35m (9.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 413], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 413], ["auditable_type", "Node"], ["associated_id", 268], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 268\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d81c6840-b11e-404e-8381-06b2b4c62528"], ["created_at", "2019-08-22 07:32:18.116334"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 412], ["to_node_id", 413], ["created_at", "2019-08-22 07:32:18.148774"], ["updated_at", "2019-08-22 07:32:18.148774"]]
  [1m[35m (8.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 112], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 112], ["auditable_type", "Edge"], ["associated_id", 412], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 412\nto_node_id: 413\n"], ["version", 1], ["request_uuid", "c296e2e1-f672-449e-aa7b-94d608231c68"], ["created_at", "2019-08-22 07:32:18.156185"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (4.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 412]]
  [1m[35m (2.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 112], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 112], ["auditable_type", "Edge"], ["associated_id", 412], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 412\nto_node_id: 413\n"], ["version", 2], ["request_uuid", "5a7fad15-b2bd-40d3-a3a3-6bbf2c84b3e0"], ["created_at", "2019-08-22 07:32:18.190416"]]
  [1m[36mEdge Destroy (3.5ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 112]]
  [1m[36mEdge Load (4.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 412]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 412], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 412], ["auditable_type", "Node"], ["associated_id", 268], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 268\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "1e268e6a-d0fd-4d58-b061-3a1d7ef65843"], ["created_at", "2019-08-22 07:32:18.211596"]]
  [1m[36mInputNode Destroy (3.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 412]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:18.243343"], ["updated_at", "2019-08-22 07:32:18.243343"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (4.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 269], ["created_at", "2019-08-22 07:32:18.255920"], ["updated_at", "2019-08-22 07:32:18.255920"], ["type", "InputNode"]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 414], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 414], ["auditable_type", "Node"], ["associated_id", 269], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 269\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a103ee42-9701-40c0-9585-b8a9311ca94c"], ["created_at", "2019-08-22 07:32:18.272161"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 269]]
  [1m[36mOutputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 269], ["created_at", "2019-08-22 07:32:18.299329"], ["updated_at", "2019-08-22 07:32:18.299329"], ["type", "OutputNode"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 415], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 415], ["auditable_type", "Node"], ["associated_id", 269], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 269\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "efbbcb7e-13d2-4b37-9c89-4fcdd4677a5b"], ["created_at", "2019-08-22 07:32:18.314476"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 414], ["to_node_id", 415], ["created_at", "2019-08-22 07:32:18.334657"], ["updated_at", "2019-08-22 07:32:18.334657"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 113], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 113], ["auditable_type", "Edge"], ["associated_id", 414], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 414\nto_node_id: 415\n"], ["version", 1], ["request_uuid", "b7e611ed-7758-48a0-925e-5947407ca2c1"], ["created_at", "2019-08-22 07:32:18.343854"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (4.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 415]]
  [1m[36mEdge Load (5.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 415]]
  [1m[36mNode Load (4.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 414], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 113], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (2.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 113], ["auditable_type", "Edge"], ["associated_id", 414], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 414\nto_node_id: 415\n"], ["version", 2], ["request_uuid", "373fb284-fba2-44dc-8a70-6dc319c836f8"], ["created_at", "2019-08-22 07:32:18.387094"]]
  [1m[36mEdge Destroy (3.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 113]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 415], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 415], ["auditable_type", "Node"], ["associated_id", 269], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 269\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "41aee4ab-7b9e-49c3-b932-47fe16c2ca27"], ["created_at", "2019-08-22 07:32:18.405294"]]
  [1m[36mOutputNode Destroy (4.2ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 415]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (2.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 07:32:18.467878"], ["updated_at", "2019-08-22 07:32:18.467878"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 270], ["created_at", "2019-08-22 07:32:18.473020"], ["updated_at", "2019-08-22 07:32:18.473020"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 416], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 416], ["auditable_type", "Node"], ["associated_id", 270], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 270\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "fc74b132-7c16-432b-8899-c3c2493a3255"], ["created_at", "2019-08-22 07:32:18.479513"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:18.504646"], ["updated_at", "2019-08-22 07:32:18.504646"]]
  [1m[36mInputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 271], ["created_at", "2019-08-22 07:32:18.507820"], ["updated_at", "2019-08-22 07:32:18.507820"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 417], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 417], ["auditable_type", "Node"], ["associated_id", 271], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 271\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c2cdde49-1f2c-4431-b509-c19e47b0832c"], ["created_at", "2019-08-22 07:32:18.516521"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 271], ["created_at", "2019-08-22 07:32:18.525475"], ["updated_at", "2019-08-22 07:32:18.525475"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 418], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 418], ["auditable_type", "Node"], ["associated_id", 271], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 271\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "debeb969-d0df-4e20-850d-8c848166867d"], ["created_at", "2019-08-22 07:32:18.529764"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 271], ["created_at", "2019-08-22 07:32:18.539125"], ["updated_at", "2019-08-22 07:32:18.539125"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 419], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 419], ["auditable_type", "Node"], ["associated_id", 271], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 271\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4c14877d-0a81-47ae-aa15-f61fed8909a4"], ["created_at", "2019-08-22 07:32:18.544023"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 271], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 417], ["to_node_id", 418], ["created_at", "2019-08-22 07:32:18.559805"], ["updated_at", "2019-08-22 07:32:18.559805"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 114], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 114], ["auditable_type", "Edge"], ["associated_id", 417], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 417\nto_node_id: 418\n"], ["version", 1], ["request_uuid", "2261150e-e559-4793-a07e-3f1f0de55b4f"], ["created_at", "2019-08-22 07:32:18.564083"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 114], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 114], ["auditable_type", "Edge"], ["associated_id", 417], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 418\n- 419\n"], ["version", 2], ["request_uuid", "d6cc0ba9-af7b-47d4-8991-82a6fb927820"], ["created_at", "2019-08-22 07:32:18.574265"]]
  [1m[36mEdge Update (2.4ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 419], ["updated_at", "2019-08-22 07:32:18.572810"], ["id", 114]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (5.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 271]]
  [1m[36mEdge Load (4.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 271]]
  [1m[36mAudited::Audit Load (2.9ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 271], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.0ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 114], ["auditable_type", "Edge"]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 417], ["LIMIT", 1]]
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 418], ["LIMIT", 1]]
  [1m[36mEdge Update (2.3ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 418], ["updated_at", "2019-08-22 07:32:18.621124"], ["id", 114]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (2.7ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 643]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 271], ["LIMIT", 1]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 114], ["LIMIT", 1]]
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 418], ["LIMIT", 1]]
  [1m[36mEdge Load (6.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 271]]
  [1m[36mEdge Load (5.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 271]]
  [1m[36mAudited::Audit Load (3.0ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 271], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.0ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 114], ["auditable_type", "Edge"]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 417], ["LIMIT", 1]]
  [1m[36mEdge Destroy (2.4ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 114]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.0ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 642]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 271], ["LIMIT", 1]]
  [1m[36mEdge Load (5.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 271]]
  [1m[36mEdge Load (5.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 271]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:18.710580"], ["updated_at", "2019-08-22 07:32:18.710580"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 272]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 272], ["created_at", "2019-08-22 07:32:18.719326"], ["updated_at", "2019-08-22 07:32:18.719326"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 420], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 420], ["auditable_type", "Node"], ["associated_id", 272], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 272\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f8284b54-f767-43e8-bd08-2f89eeee1358"], ["created_at", "2019-08-22 07:32:18.724862"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (2.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:18.764703"], ["updated_at", "2019-08-22 07:32:18.764703"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 273], ["created_at", "2019-08-22 07:32:18.773190"], ["updated_at", "2019-08-22 07:32:18.773190"], ["type", "InputNode"]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 421], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 421], ["auditable_type", "Node"], ["associated_id", 273], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 273\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "fa1800eb-f294-47f3-b3fe-85fac3a7386b"], ["created_at", "2019-08-22 07:32:18.778555"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 07:32:18.790105"], ["updated_at", "2019-08-22 07:32:18.790105"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 274]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 274], ["created_at", "2019-08-22 07:32:18.798677"], ["updated_at", "2019-08-22 07:32:18.798677"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 422], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 422], ["auditable_type", "Node"], ["associated_id", 274], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 274\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9e1c81ac-630d-4df2-b475-6a640a7ddc9e"], ["created_at", "2019-08-22 07:32:18.802725"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:18.819257"], ["updated_at", "2019-08-22 07:32:18.819257"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 275], ["created_at", "2019-08-22 07:32:18.825192"], ["updated_at", "2019-08-22 07:32:18.825192"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 423], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 423], ["auditable_type", "Node"], ["associated_id", 275], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 275\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c95d2949-7283-466f-b50c-a3634da7a74d"], ["created_at", "2019-08-22 07:32:18.829193"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 275]]
  [1m[36mOutputNode Create (1.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 275], ["created_at", "2019-08-22 07:32:18.844463"], ["updated_at", "2019-08-22 07:32:18.844463"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 424], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 424], ["auditable_type", "Node"], ["associated_id", 275], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 275\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1ef8b2f7-2595-453a-a51e-073a36e3498c"], ["created_at", "2019-08-22 07:32:18.852135"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 423], ["to_node_id", 424], ["created_at", "2019-08-22 07:32:18.860968"], ["updated_at", "2019-08-22 07:32:18.860968"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 115], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 115], ["auditable_type", "Edge"], ["associated_id", 423], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 423\nto_node_id: 424\n"], ["version", 1], ["request_uuid", "3923edd0-07a8-4927-8e2c-7e52b002d7bd"], ["created_at", "2019-08-22 07:32:18.864776"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:18.878622"], ["updated_at", "2019-08-22 07:32:18.878622"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 276], ["created_at", "2019-08-22 07:32:18.885465"], ["updated_at", "2019-08-22 07:32:18.885465"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 425], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 425], ["auditable_type", "Node"], ["associated_id", 276], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 276\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0a587bb3-a34e-44b2-adbf-0174a6114784"], ["created_at", "2019-08-22 07:32:18.889754"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:18.913894"], ["updated_at", "2019-08-22 07:32:18.913894"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 277], ["created_at", "2019-08-22 07:32:18.920158"], ["updated_at", "2019-08-22 07:32:18.920158"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 426], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 426], ["auditable_type", "Node"], ["associated_id", 277], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 277\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b30eba5a-4d27-4743-ac9c-8f4721f1e02e"], ["created_at", "2019-08-22 07:32:18.924435"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 277]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 277], ["created_at", "2019-08-22 07:32:18.939559"], ["updated_at", "2019-08-22 07:32:18.939559"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 427], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 427], ["auditable_type", "Node"], ["associated_id", 277], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 277\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6748bbc4-9a42-4b3e-9370-f41028310e71"], ["created_at", "2019-08-22 07:32:18.945941"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 426], ["to_node_id", 427], ["created_at", "2019-08-22 07:32:18.953874"], ["updated_at", "2019-08-22 07:32:18.953874"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 116], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 116], ["auditable_type", "Edge"], ["associated_id", 426], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 426\nto_node_id: 427\n"], ["version", 1], ["request_uuid", "4c17c921-a615-408f-a638-2fd5e0affad4"], ["created_at", "2019-08-22 07:32:18.958065"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 116], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 116], ["auditable_type", "Edge"], ["associated_id", 426], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 426\nto_node_id: 427\n"], ["version", 2], ["request_uuid", "3200b253-9d06-46b7-bfbc-8e1ac1ce1f60"], ["created_at", "2019-08-22 07:32:18.968534"]]
  [1m[36mEdge Destroy (2.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 116]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:18.995254"], ["updated_at", "2019-08-22 07:32:18.995254"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 278], ["LIMIT", 1]]
  [1m[36mEdge Load (6.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 278]]
  [1m[36mEdge Load (4.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 278]]
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:19.034621"], ["updated_at", "2019-08-22 07:32:19.034621"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 279], ["created_at", "2019-08-22 07:32:19.039944"], ["updated_at", "2019-08-22 07:32:19.039944"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 428], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 428], ["auditable_type", "Node"], ["associated_id", 279], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 279\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "234186ac-ad21-4db1-b8de-c538a231099f"], ["created_at", "2019-08-22 07:32:19.044098"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 279]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 279], ["created_at", "2019-08-22 07:32:19.056471"], ["updated_at", "2019-08-22 07:32:19.056471"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 429], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 429], ["auditable_type", "Node"], ["associated_id", 279], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 279\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "644bd789-29d8-447e-a910-ab799782507d"], ["created_at", "2019-08-22 07:32:19.065624"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 279], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 279]]
  [1m[36mEdge Load (4.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 279]]
  [1m[36mEdge Load (5.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 279]]
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:19.102488"], ["updated_at", "2019-08-22 07:32:19.102488"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 280], ["created_at", "2019-08-22 07:32:19.109889"], ["updated_at", "2019-08-22 07:32:19.109889"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 430], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 430], ["auditable_type", "Node"], ["associated_id", 280], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 280\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9fd6639b-b799-47af-adde-f748e69b515a"], ["created_at", "2019-08-22 07:32:19.114931"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 280]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 280], ["created_at", "2019-08-22 07:32:19.133019"], ["updated_at", "2019-08-22 07:32:19.133019"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 431], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 431], ["auditable_type", "Node"], ["associated_id", 280], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 280\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "21435344-b66a-4c41-83a2-4cd7637875ad"], ["created_at", "2019-08-22 07:32:19.137809"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 280], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 280]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 430], ["to_node_id", 431], ["created_at", "2019-08-22 07:32:19.154324"], ["updated_at", "2019-08-22 07:32:19.154324"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 117], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 117], ["auditable_type", "Edge"], ["associated_id", 430], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 430\nto_node_id: 431\n"], ["version", 1], ["request_uuid", "8468d4e5-8459-4a73-9e17-caff71be4162"], ["created_at", "2019-08-22 07:32:19.158924"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 280]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 280]]
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:19.187686"], ["updated_at", "2019-08-22 07:32:19.187686"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 281], ["created_at", "2019-08-22 07:32:19.193541"], ["updated_at", "2019-08-22 07:32:19.193541"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 432], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 432], ["auditable_type", "Node"], ["associated_id", 281], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 281\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "daa7f1f9-e597-48ea-8262-8331d73c3ecd"], ["created_at", "2019-08-22 07:32:19.199071"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 281], ["created_at", "2019-08-22 07:32:19.215021"], ["updated_at", "2019-08-22 07:32:19.215021"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 433], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 433], ["auditable_type", "Node"], ["associated_id", 281], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 281\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d8a65d10-8caf-4faf-8831-d15692f3442a"], ["created_at", "2019-08-22 07:32:19.219060"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 281], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 281], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 432], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 281], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 432], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 432], ["auditable_type", "Node"], ["associated_id", 281], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "d0eabd4d-0eda-411c-bc2a-95fdcb7d9f55"], ["created_at", "2019-08-22 07:32:19.252027"]]
  [1m[36mInputNode Update (2.4ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:32:19.250065"], ["id", 432]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 433], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 281], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 281], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 281], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 432], ["to_node_id", 433], ["created_at", "2019-08-22 07:32:19.292113"], ["updated_at", "2019-08-22 07:32:19.292113"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 118], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 118], ["auditable_type", "Edge"], ["associated_id", 432], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 432\nto_node_id: 433\n"], ["version", 1], ["request_uuid", "66021222-06af-41f1-87e9-39879e881cfc"], ["created_at", "2019-08-22 07:32:19.295985"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 281], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 432], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 281], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 433], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 281], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 281], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 281], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 281]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 432], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 118], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 118], ["auditable_type", "Edge"], ["associated_id", 432], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 432\nto_node_id: 433\n"], ["version", 2], ["request_uuid", "32651da8-9f2a-4418-8b59-451730518853"], ["created_at", "2019-08-22 07:32:19.366609"]]
  [1m[36mEdge Destroy (2.4ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 118]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:19.388494"], ["updated_at", "2019-08-22 07:32:19.388494"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 282], ["created_at", "2019-08-22 07:32:19.395166"], ["updated_at", "2019-08-22 07:32:19.395166"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 434], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 434], ["auditable_type", "Node"], ["associated_id", 282], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 282\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8f12937e-9014-4248-b002-2fc4445cb245"], ["created_at", "2019-08-22 07:32:19.401583"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 282]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 282], ["created_at", "2019-08-22 07:32:19.417663"], ["updated_at", "2019-08-22 07:32:19.417663"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 435], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 435], ["auditable_type", "Node"], ["associated_id", 282], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 282\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8cf60aa7-e60c-49f0-8795-71ebca2f4f0a"], ["created_at", "2019-08-22 07:32:19.421788"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 282], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 282]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 282]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 282]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 282], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 434], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 282], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 434], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 434], ["auditable_type", "Node"], ["associated_id", 282], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "1ee94a24-9193-4aa7-b9d1-d94e1128f918"], ["created_at", "2019-08-22 07:32:19.455781"]]
  [1m[36mInputNode Update (2.8ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:32:19.453945"], ["id", 434]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 435], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 282], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 282]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 282]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 282], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 282]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 282], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 282]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 434], ["to_node_id", 435], ["created_at", "2019-08-22 07:32:19.497265"], ["updated_at", "2019-08-22 07:32:19.497265"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 119], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 119], ["auditable_type", "Edge"], ["associated_id", 434], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 434\nto_node_id: 435\n"], ["version", 1], ["request_uuid", "693731f2-1cb7-42bc-bfab-a5bb0394c7e5"], ["created_at", "2019-08-22 07:32:19.501487"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 434], ["to_node_id", 435], ["created_at", "2019-08-22 07:32:19.509668"], ["updated_at", "2019-08-22 07:32:19.509668"]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:19.525167"], ["updated_at", "2019-08-22 07:32:19.525167"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 283], ["created_at", "2019-08-22 07:32:19.531131"], ["updated_at", "2019-08-22 07:32:19.531131"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 436], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 436], ["auditable_type", "Node"], ["associated_id", 283], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 283\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "efb75491-90bc-4093-b691-7c103ba5e199"], ["created_at", "2019-08-22 07:32:19.536722"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 283], ["created_at", "2019-08-22 07:32:19.552680"], ["updated_at", "2019-08-22 07:32:19.552680"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 437], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 437], ["auditable_type", "Node"], ["associated_id", 283], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 283\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "013f6cf1-a5bd-4251-b4da-3f038ae4da7f"], ["created_at", "2019-08-22 07:32:19.557644"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 283], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 283], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 436], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 283], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 436], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 436], ["auditable_type", "Node"], ["associated_id", 283], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "173c9bac-6ab3-457d-ba67-05f24fde8c47"], ["created_at", "2019-08-22 07:32:19.594880"]]
  [1m[36mInputNode Update (2.5ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:32:19.587829"], ["id", 436]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 437], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 283], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 283], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 283], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 283], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 436], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 283], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 437], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 283], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 283], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 283], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 436], ["to_node_id", 437], ["created_at", "2019-08-22 07:32:19.683710"], ["updated_at", "2019-08-22 07:32:19.683710"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 121], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 121], ["auditable_type", "Edge"], ["associated_id", 436], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 436\nto_node_id: 437\n"], ["version", 1], ["request_uuid", "56849b08-4786-4878-bc1b-3cf8b46b35cb"], ["created_at", "2019-08-22 07:32:19.687479"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 283]]
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 436], ["LIMIT", 1]]
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 437], ["LIMIT", 1]]
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:19.732491"], ["updated_at", "2019-08-22 07:32:19.732491"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 284], ["created_at", "2019-08-22 07:32:19.739999"], ["updated_at", "2019-08-22 07:32:19.739999"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 438], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 438], ["auditable_type", "Node"], ["associated_id", 284], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 284\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "056771e3-3917-4cd0-b15f-b8893c3b3556"], ["created_at", "2019-08-22 07:32:19.745136"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 284]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 284], ["created_at", "2019-08-22 07:32:19.760597"], ["updated_at", "2019-08-22 07:32:19.760597"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 439], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 439], ["auditable_type", "Node"], ["associated_id", 284], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 284\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f6231df5-e951-46d7-a2ca-df09d2c20e01"], ["created_at", "2019-08-22 07:32:19.764716"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 284], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 284]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 284]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 284]]
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 284], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 439], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 284], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 284]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 284]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 284], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 284]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 284], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 284]]
  [1m[36mNode Destroy (2.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 438]]
  [1m[36mEdge Load (1.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 284]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 284]]
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 284]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:32:19.839770"], ["updated_at", "2019-08-22 07:32:19.839770"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 285], ["created_at", "2019-08-22 07:32:19.846584"], ["updated_at", "2019-08-22 07:32:19.846584"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 440], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 440], ["auditable_type", "Node"], ["associated_id", 285], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 285\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "63c42fac-e187-4b41-9db2-c520e5950579"], ["created_at", "2019-08-22 07:32:19.851284"]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 285]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 285], ["created_at", "2019-08-22 07:32:19.866558"], ["updated_at", "2019-08-22 07:32:19.866558"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 441], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 441], ["auditable_type", "Node"], ["associated_id", 285], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 285\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "68e2d0c8-e0d6-42c0-a2e9-569bb7326037"], ["created_at", "2019-08-22 07:32:19.870742"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 285], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 285]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 285]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 285]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 285], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 440], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 285], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 440], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 440], ["auditable_type", "Node"], ["associated_id", 285], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "2300d99f-5411-4b6b-a4b2-679be08df737"], ["created_at", "2019-08-22 07:32:19.901685"]]
  [1m[36mInputNode Update (1.9ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:32:19.899842"], ["id", 440]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 441], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 285], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 285]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 285]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 285], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 285]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 285], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 285]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 285]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 285]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (6.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:25.066290"], ["updated_at", "2019-08-22 07:33:25.066290"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (7.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 286], ["created_at", "2019-08-22 07:33:25.184959"], ["updated_at", "2019-08-22 07:33:25.184959"], ["type", "InputNode"]]
  [1m[35m (17.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 442], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 442], ["auditable_type", "Node"], ["associated_id", 286], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 286\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "21bb8834-4c5c-434f-9199-0929b5465680"], ["created_at", "2019-08-22 07:33:25.257803"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[36mOutputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 286], ["created_at", "2019-08-22 07:33:25.349028"], ["updated_at", "2019-08-22 07:33:25.349028"], ["type", "OutputNode"]]
  [1m[35m (8.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 443], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 443], ["auditable_type", "Node"], ["associated_id", 286], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 286\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0aeab19a-fa8a-47cc-9489-4f1972a22a94"], ["created_at", "2019-08-22 07:33:25.357379"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[36mNode Load (4.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[36mEdge Load (15.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[36mEdge Load (9.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 442], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[35m (13.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 442], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 442], ["auditable_type", "Node"], ["associated_id", 286], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "0d135fb7-e898-449b-a365-28e3df71d497"], ["created_at", "2019-08-22 07:33:25.481768"]]
  [1m[36mInputNode Update (4.8ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:33:25.476301"], ["id", 442]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 443], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 442], ["to_node_id", 443], ["created_at", "2019-08-22 07:33:25.591221"], ["updated_at", "2019-08-22 07:33:25.591221"]]
  [1m[35m (8.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 122], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 122], ["auditable_type", "Edge"], ["associated_id", 442], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 442\nto_node_id: 443\n"], ["version", 1], ["request_uuid", "e447062b-2478-4d0f-b535-e5e256ba45a0"], ["created_at", "2019-08-22 07:33:25.603984"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (8.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[36mEdge Load (12.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 442], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 443], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[36mEdge Load (8.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[36mEdge Load (7.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 286]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 442], ["LIMIT", 1]]
  [1m[35m (10.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 122], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 122], ["auditable_type", "Edge"], ["associated_id", 442], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 442\nto_node_id: 443\n"], ["version", 2], ["request_uuid", "4590bb55-be87-4793-9c02-856fbdb5a34a"], ["created_at", "2019-08-22 07:33:25.772401"]]
  [1m[36mEdge Destroy (4.0ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 122]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:25.826236"], ["updated_at", "2019-08-22 07:33:25.826236"]]
  [1m[35m (2.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 287], ["LIMIT", 1]]
  [1m[36mEdge Load (9.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 287]]
  [1m[36mEdge Load (6.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 287]]
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:25.883331"], ["updated_at", "2019-08-22 07:33:25.883331"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 288], ["created_at", "2019-08-22 07:33:25.896287"], ["updated_at", "2019-08-22 07:33:25.896287"], ["type", "InputNode"]]
  [1m[35m (10.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 444], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 444], ["auditable_type", "Node"], ["associated_id", 288], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 288\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e7325d33-b41f-45fd-9fc7-cdca563a945d"], ["created_at", "2019-08-22 07:33:25.914029"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 288]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 288], ["created_at", "2019-08-22 07:33:25.937806"], ["updated_at", "2019-08-22 07:33:25.937806"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 445], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 445], ["auditable_type", "Node"], ["associated_id", 288], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 288\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a126dabf-017a-4a46-8fc1-a9aa2480ca6b"], ["created_at", "2019-08-22 07:33:25.945023"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 288], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 288]]
  [1m[36mEdge Load (6.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 288]]
  [1m[36mEdge Load (7.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 288]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 288], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 444], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 288], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 444], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 444], ["auditable_type", "Node"], ["associated_id", 288], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "c632bb2b-4be1-4182-a8ec-e7cae2b6a470"], ["created_at", "2019-08-22 07:33:25.995929"]]
  [1m[36mInputNode Update (4.4ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:33:25.992593"], ["id", 444]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 445], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 288], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 288]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 288]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 288], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 288]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 288], ["LIMIT", 1]]
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 288]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 444], ["to_node_id", 445], ["created_at", "2019-08-22 07:33:26.047427"], ["updated_at", "2019-08-22 07:33:26.047427"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 123], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 123], ["auditable_type", "Edge"], ["associated_id", 444], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 444\nto_node_id: 445\n"], ["version", 1], ["request_uuid", "d0be71db-72c6-457b-bc1d-0e3419d2727b"], ["created_at", "2019-08-22 07:33:26.052579"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 444], ["to_node_id", 445], ["created_at", "2019-08-22 07:33:26.062236"], ["updated_at", "2019-08-22 07:33:26.062236"]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:26.086066"], ["updated_at", "2019-08-22 07:33:26.086066"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 289], ["created_at", "2019-08-22 07:33:26.094022"], ["updated_at", "2019-08-22 07:33:26.094022"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 446], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 446], ["auditable_type", "Node"], ["associated_id", 289], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 289\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cf2a3706-2063-4ea1-b1b2-cb2dbcb5f53a"], ["created_at", "2019-08-22 07:33:26.112686"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 289]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 289], ["created_at", "2019-08-22 07:33:26.123725"], ["updated_at", "2019-08-22 07:33:26.123725"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 447], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 447], ["auditable_type", "Node"], ["associated_id", 289], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 289\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "30cdac3e-4fe6-4b11-88a9-66b14d2467ed"], ["created_at", "2019-08-22 07:33:26.127774"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 289], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 289]]
  [1m[36mEdge Load (22.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 289]]
  [1m[36mEdge Load (14.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 289]]
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:26.205237"], ["updated_at", "2019-08-22 07:33:26.205237"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 290], ["created_at", "2019-08-22 07:33:26.213784"], ["updated_at", "2019-08-22 07:33:26.213784"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 448], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 448], ["auditable_type", "Node"], ["associated_id", 290], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 290\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "607171c7-cec1-459f-b5d1-c88534635bd4"], ["created_at", "2019-08-22 07:33:26.226153"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 290]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 290], ["created_at", "2019-08-22 07:33:26.243562"], ["updated_at", "2019-08-22 07:33:26.243562"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 449], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 449], ["auditable_type", "Node"], ["associated_id", 290], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 290\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "88861f01-dac6-4400-8c2c-fd122762cb9a"], ["created_at", "2019-08-22 07:33:26.249429"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 290], ["LIMIT", 1]]
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 290]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 448], ["to_node_id", 449], ["created_at", "2019-08-22 07:33:26.266604"], ["updated_at", "2019-08-22 07:33:26.266604"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 125], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 125], ["auditable_type", "Edge"], ["associated_id", 448], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 448\nto_node_id: 449\n"], ["version", 1], ["request_uuid", "fb4986ac-25bd-42b1-9e4a-ffe8f93f2819"], ["created_at", "2019-08-22 07:33:26.270705"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 290]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 290]]
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:26.305758"], ["updated_at", "2019-08-22 07:33:26.305758"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 291], ["created_at", "2019-08-22 07:33:26.310875"], ["updated_at", "2019-08-22 07:33:26.310875"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 450], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 450], ["auditable_type", "Node"], ["associated_id", 291], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 291\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "14db6b24-71de-44c9-8519-d01d5ac1b0a8"], ["created_at", "2019-08-22 07:33:26.318208"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 291]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 291], ["created_at", "2019-08-22 07:33:26.339011"], ["updated_at", "2019-08-22 07:33:26.339011"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 451], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 451], ["auditable_type", "Node"], ["associated_id", 291], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 291\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5b36fa04-09fd-4ca6-9051-d2bce9691af8"], ["created_at", "2019-08-22 07:33:26.351708"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 291], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 291]]
  [1m[36mEdge Load (4.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 291]]
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 291]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 291], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 450], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 291], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 450], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 450], ["auditable_type", "Node"], ["associated_id", 291], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "e655f9ed-b17a-494f-bd8b-d27b8f93405c"], ["created_at", "2019-08-22 07:33:26.399651"]]
  [1m[36mInputNode Update (4.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:33:26.397459"], ["id", 450]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 451], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 291], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 291]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 291]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 291], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 291]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 291], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 291]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 291]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 291]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:26.459801"], ["updated_at", "2019-08-22 07:33:26.459801"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 292], ["created_at", "2019-08-22 07:33:26.465859"], ["updated_at", "2019-08-22 07:33:26.465859"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 452], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 452], ["auditable_type", "Node"], ["associated_id", 292], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 292\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5cdca23c-e0bc-4c87-af4d-1d18de9614a9"], ["created_at", "2019-08-22 07:33:26.470264"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 292], ["created_at", "2019-08-22 07:33:26.485645"], ["updated_at", "2019-08-22 07:33:26.485645"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 453], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 453], ["auditable_type", "Node"], ["associated_id", 292], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 292\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7aa2b9e6-c0be-4249-94e8-6bae13e45774"], ["created_at", "2019-08-22 07:33:26.490252"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 292], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 292], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 452], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 292], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 452], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 452], ["auditable_type", "Node"], ["associated_id", 292], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "c73c30a6-ad59-4f62-8620-0af23b33de3b"], ["created_at", "2019-08-22 07:33:26.528935"]]
  [1m[36mInputNode Update (2.9ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:33:26.527126"], ["id", 452]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 453], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 292], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 292], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 292], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 292], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 452], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 292], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 453], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 292], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 292], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 292], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 452], ["to_node_id", 453], ["created_at", "2019-08-22 07:33:26.625446"], ["updated_at", "2019-08-22 07:33:26.625446"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 126], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 126], ["auditable_type", "Edge"], ["associated_id", 452], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 452\nto_node_id: 453\n"], ["version", 1], ["request_uuid", "94d4a7d7-5aed-40a3-955d-4777b299cc54"], ["created_at", "2019-08-22 07:33:26.632893"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (14.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[36mEdge Load (8.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 292]]
  [1m[35m (8.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (3.9ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 452], ["LIMIT", 1]]
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (4.1ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 453], ["LIMIT", 1]]
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:26.743707"], ["updated_at", "2019-08-22 07:33:26.743707"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 293], ["created_at", "2019-08-22 07:33:26.749530"], ["updated_at", "2019-08-22 07:33:26.749530"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 454], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 454], ["auditable_type", "Node"], ["associated_id", 293], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 293\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6b3dcf1c-9552-4f7d-b253-f019e78b7252"], ["created_at", "2019-08-22 07:33:26.753640"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 293]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 293], ["created_at", "2019-08-22 07:33:26.766656"], ["updated_at", "2019-08-22 07:33:26.766656"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 455], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 455], ["auditable_type", "Node"], ["associated_id", 293], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 293\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a6774f00-f6d2-4af0-9615-04c75136646e"], ["created_at", "2019-08-22 07:33:26.773374"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 293], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 293]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 293]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 293]]
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 293], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 455], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 293], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 293]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 293]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 293], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 293]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 293], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 293]]
  [1m[36mNode Destroy (2.7ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 454]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 293]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 293]]
  [1m[35m (5.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 293]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 07:33:26.893452"], ["updated_at", "2019-08-22 07:33:26.893452"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 294], ["created_at", "2019-08-22 07:33:26.895991"], ["updated_at", "2019-08-22 07:33:26.895991"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 456], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 456], ["auditable_type", "Node"], ["associated_id", 294], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 294\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "dcd09c59-ab57-4ab6-8bed-d1b1b4d796c9"], ["created_at", "2019-08-22 07:33:26.900127"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:26.984762"], ["updated_at", "2019-08-22 07:33:26.984762"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 295], ["created_at", "2019-08-22 07:33:26.989556"], ["updated_at", "2019-08-22 07:33:26.989556"], ["type", "InputNode"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 457], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 457], ["auditable_type", "Node"], ["associated_id", 295], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 295\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e6695ff6-5c8a-45c9-988b-54013e92bc59"], ["created_at", "2019-08-22 07:33:26.994333"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 295]]
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 295], ["created_at", "2019-08-22 07:33:27.007775"], ["updated_at", "2019-08-22 07:33:27.007775"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 458], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 458], ["auditable_type", "Node"], ["associated_id", 295], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 295\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3b384ab5-0669-437f-b23d-9b552a902624"], ["created_at", "2019-08-22 07:33:27.015695"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 457], ["to_node_id", 458], ["created_at", "2019-08-22 07:33:27.023272"], ["updated_at", "2019-08-22 07:33:27.023272"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 127], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 127], ["auditable_type", "Edge"], ["associated_id", 457], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 457\nto_node_id: 458\n"], ["version", 1], ["request_uuid", "bd3b6214-c734-47c6-99d6-aeeabc84ff58"], ["created_at", "2019-08-22 07:33:27.027469"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (4.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 457]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 127], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 127], ["auditable_type", "Edge"], ["associated_id", 457], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 457\nto_node_id: 458\n"], ["version", 2], ["request_uuid", "a0b12d38-1a34-4ed8-b038-921a479f4fd2"], ["created_at", "2019-08-22 07:33:27.049025"]]
  [1m[36mEdge Destroy (3.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 127]]
  [1m[36mEdge Load (3.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 457]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 457], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 457], ["auditable_type", "Node"], ["associated_id", 295], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 295\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "58193b87-b4b1-4498-ac71-fe783e6153fc"], ["created_at", "2019-08-22 07:33:27.066787"]]
  [1m[36mInputNode Destroy (3.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 457]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:27.092066"], ["updated_at", "2019-08-22 07:33:27.092066"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 296], ["created_at", "2019-08-22 07:33:27.097933"], ["updated_at", "2019-08-22 07:33:27.097933"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 459], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 459], ["auditable_type", "Node"], ["associated_id", 296], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 296\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "791e90bb-457a-4979-b7d4-8fbad586168e"], ["created_at", "2019-08-22 07:33:27.102366"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:27.126101"], ["updated_at", "2019-08-22 07:33:27.126101"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 297], ["created_at", "2019-08-22 07:33:27.132445"], ["updated_at", "2019-08-22 07:33:27.132445"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 460], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 460], ["auditable_type", "Node"], ["associated_id", 297], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 297\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6a22eaad-50ad-4255-9e34-cd828e95ca26"], ["created_at", "2019-08-22 07:33:27.137791"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 297]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 297], ["created_at", "2019-08-22 07:33:27.153973"], ["updated_at", "2019-08-22 07:33:27.153973"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 461], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 461], ["auditable_type", "Node"], ["associated_id", 297], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 297\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "fb967d27-1af7-4e97-a3cd-3c4e596717cb"], ["created_at", "2019-08-22 07:33:27.157966"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 460], ["to_node_id", 461], ["created_at", "2019-08-22 07:33:27.165854"], ["updated_at", "2019-08-22 07:33:27.165854"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 128], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 128], ["auditable_type", "Edge"], ["associated_id", 460], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 460\nto_node_id: 461\n"], ["version", 1], ["request_uuid", "3f771539-7427-4e5b-87ab-e4f35236a467"], ["created_at", "2019-08-22 07:33:27.170056"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (4.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 461]]
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 461]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 460], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 128], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 128], ["auditable_type", "Edge"], ["associated_id", 460], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 460\nto_node_id: 461\n"], ["version", 2], ["request_uuid", "6b0b8df5-ec1e-4da5-be38-384c8c54b95d"], ["created_at", "2019-08-22 07:33:27.205969"]]
  [1m[36mEdge Destroy (3.1ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 128]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 461], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 461], ["auditable_type", "Node"], ["associated_id", 297], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 297\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "213c7f1b-21de-4782-ae10-1e2a8cc54e71"], ["created_at", "2019-08-22 07:33:27.216746"]]
  [1m[36mOutputNode Destroy (2.8ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 461]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:27.300432"], ["updated_at", "2019-08-22 07:33:27.300432"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/298/save_all" for 127.0.0.1 at 2019-08-22 07:33:27 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"298", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"00fe45c6-d058-4b24-b445-01f2a8c81041"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"6a1858f0-daba-4e45-9b05-cfc46d9b0c28"}], "id"=>"298"}
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 298], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.0ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:33:27.359870"], ["id", 298]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 298], ["created_at", "2019-08-22 07:33:27.366258"], ["updated_at", "2019-08-22 07:33:27.366258"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 462], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 462], ["auditable_type", "Node"], ["associated_id", 298], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 298\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "d9b9269f-67ab-4e97-a506-252eb0df99c1"], ["created_at", "2019-08-22 07:33:27.370231"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 298]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 298], ["created_at", "2019-08-22 07:33:27.380606"], ["updated_at", "2019-08-22 07:33:27.380606"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 463], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 463], ["auditable_type", "Node"], ["associated_id", 298], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 298\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "d9b9269f-67ab-4e97-a506-252eb0df99c1"], ["created_at", "2019-08-22 07:33:27.384876"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (5.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 298], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 298]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 298], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 298]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 298]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 298]]
Completed 200 OK in 63ms (Views: 0.8ms | ActiveRecord: 19.8ms)
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:27.431218"], ["updated_at", "2019-08-22 07:33:27.431218"]]
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 299], ["created_at", "2019-08-22 07:33:27.433569"], ["updated_at", "2019-08-22 07:33:27.433569"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 464], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 464], ["auditable_type", "Node"], ["associated_id", 299], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 299\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "14dc2bc3-49ab-4c75-ba92-3b4bac85d8ed"], ["created_at", "2019-08-22 07:33:27.437406"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 299], ["created_at", "2019-08-22 07:33:27.446011"], ["updated_at", "2019-08-22 07:33:27.446011"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 465], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 465], ["auditable_type", "Node"], ["associated_id", 299], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 299\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "44703154-18b3-4958-9cb4-287a8504f376"], ["created_at", "2019-08-22 07:33:27.451459"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 299], ["created_at", "2019-08-22 07:33:27.463568"], ["updated_at", "2019-08-22 07:33:27.463568"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 466], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 466], ["auditable_type", "Node"], ["associated_id", 299], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 299\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "91ae99cd-e7a2-4588-88b5-d135d74f68aa"], ["created_at", "2019-08-22 07:33:27.468437"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 299], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 464], ["to_node_id", 465], ["created_at", "2019-08-22 07:33:27.479880"], ["updated_at", "2019-08-22 07:33:27.479880"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 129], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 129], ["auditable_type", "Edge"], ["associated_id", 464], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 464\nto_node_id: 465\n"], ["version", 1], ["request_uuid", "9589df28-3e82-491c-8480-42210f8c99c6"], ["created_at", "2019-08-22 07:33:27.483866"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 129], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 129], ["auditable_type", "Edge"], ["associated_id", 464], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 465\n- 466\n"], ["version", 2], ["request_uuid", "b6773c78-ad1e-4a20-8f02-579c63ceae37"], ["created_at", "2019-08-22 07:33:27.492994"]]
  [1m[36mEdge Update (3.3ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 466], ["updated_at", "2019-08-22 07:33:27.491271"], ["id", 129]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 299]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 299]]
  [1m[36mAudited::Audit Load (4.0ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 299], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.5ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 129], ["auditable_type", "Edge"]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 464], ["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 465], ["LIMIT", 1]]
  [1m[36mEdge Update (2.6ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 465], ["updated_at", "2019-08-22 07:33:27.531231"], ["id", 129]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.0ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 719]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 299], ["LIMIT", 1]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 129], ["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 465], ["LIMIT", 1]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 299]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 299]]
  [1m[36mAudited::Audit Load (3.7ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 299], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.5ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 129], ["auditable_type", "Edge"]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 464], ["LIMIT", 1]]
  [1m[36mEdge Destroy (4.3ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 129]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.2ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 718]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 299], ["LIMIT", 1]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 299]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 299]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:27.604111"], ["updated_at", "2019-08-22 07:33:27.604111"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 300], ["created_at", "2019-08-22 07:33:27.610640"], ["updated_at", "2019-08-22 07:33:27.610640"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 467], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 467], ["auditable_type", "Node"], ["associated_id", 300], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 300\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "55b7fb69-efde-4dee-8ed4-0ef15317adef"], ["created_at", "2019-08-22 07:33:27.614969"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 300]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 300], ["created_at", "2019-08-22 07:33:27.628431"], ["updated_at", "2019-08-22 07:33:27.628431"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 468], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (6.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 468], ["auditable_type", "Node"], ["associated_id", 300], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 300\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d9aaedcb-9b29-471f-abcd-66e57e1be2dc"], ["created_at", "2019-08-22 07:33:27.632948"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 467], ["to_node_id", 468], ["created_at", "2019-08-22 07:33:27.650700"], ["updated_at", "2019-08-22 07:33:27.650700"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 130], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 130], ["auditable_type", "Edge"], ["associated_id", 467], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 467\nto_node_id: 468\n"], ["version", 1], ["request_uuid", "9f1016f9-0991-47e5-9426-ee9f180904f9"], ["created_at", "2019-08-22 07:33:27.654418"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:27.688305"], ["updated_at", "2019-08-22 07:33:27.688305"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 301], ["created_at", "2019-08-22 07:33:27.695965"], ["updated_at", "2019-08-22 07:33:27.695965"], ["type", "InputNode"]]
  [1m[35m (2.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 469], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 469], ["auditable_type", "Node"], ["associated_id", 301], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 301\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e2d76a4c-bc68-442f-9075-41d9b47fc3f6"], ["created_at", "2019-08-22 07:33:27.700258"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:27.724684"], ["updated_at", "2019-08-22 07:33:27.724684"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 302], ["created_at", "2019-08-22 07:33:27.731923"], ["updated_at", "2019-08-22 07:33:27.731923"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 470], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 470], ["auditable_type", "Node"], ["associated_id", 302], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 302\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cc2d1575-46cf-460b-ad7c-be30cbda23f6"], ["created_at", "2019-08-22 07:33:27.737438"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 302]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 302], ["created_at", "2019-08-22 07:33:27.752752"], ["updated_at", "2019-08-22 07:33:27.752752"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 471], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 471], ["auditable_type", "Node"], ["associated_id", 302], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 302\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "34b56d29-a539-40de-98e2-f4d272e2aa3a"], ["created_at", "2019-08-22 07:33:27.756660"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 470], ["to_node_id", 471], ["created_at", "2019-08-22 07:33:27.765065"], ["updated_at", "2019-08-22 07:33:27.765065"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 131], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 131], ["auditable_type", "Edge"], ["associated_id", 470], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 470\nto_node_id: 471\n"], ["version", 1], ["request_uuid", "fd08286e-4f80-4143-b179-3527e081ff5f"], ["created_at", "2019-08-22 07:33:27.768783"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 131], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 131], ["auditable_type", "Edge"], ["associated_id", 470], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 470\nto_node_id: 471\n"], ["version", 2], ["request_uuid", "2f24cb7e-c748-4efa-a9fe-7958930b40a3"], ["created_at", "2019-08-22 07:33:27.776935"]]
  [1m[36mEdge Destroy (3.4ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 131]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:27.801210"], ["updated_at", "2019-08-22 07:33:27.801210"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 303]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 303], ["created_at", "2019-08-22 07:33:27.809842"], ["updated_at", "2019-08-22 07:33:27.809842"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 472], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 472], ["auditable_type", "Node"], ["associated_id", 303], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 303\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c3c02c7e-a305-44d1-8e11-f23033e3f2ba"], ["created_at", "2019-08-22 07:33:27.814650"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:33:27.841324"], ["updated_at", "2019-08-22 07:33:27.841324"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 304], ["created_at", "2019-08-22 07:33:27.847650"], ["updated_at", "2019-08-22 07:33:27.847650"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 473], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 473], ["auditable_type", "Node"], ["associated_id", 304], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 304\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f4c98ed2-dada-4128-8606-c9e4499f1f00"], ["created_at", "2019-08-22 07:33:27.854077"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 07:33:27.863153"], ["updated_at", "2019-08-22 07:33:27.863153"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 305]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 305], ["created_at", "2019-08-22 07:33:27.872102"], ["updated_at", "2019-08-22 07:33:27.872102"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 474], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 474], ["auditable_type", "Node"], ["associated_id", 305], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 305\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e4d11707-101f-4cfa-90d9-6c87590441ff"], ["created_at", "2019-08-22 07:33:27.876686"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:34:31.097442"], ["updated_at", "2019-08-22 07:34:31.097442"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/306/save_all" for 127.0.0.1 at 2019-08-22 07:34:31 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"306", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"b9468239-57e7-458c-b183-2c5c6e726186"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"d203a429-3084-4cd7-9313-9e30402a4063"}], "id"=>"306"}
  [1m[36mGraph Load (3.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 306], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.9ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:34:31.218632"], ["id", 306]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (5.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 306], ["created_at", "2019-08-22 07:34:31.312980"], ["updated_at", "2019-08-22 07:34:31.312980"], ["type", "InputNode"]]
  [1m[35m (12.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 475], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 475], ["auditable_type", "Node"], ["associated_id", 306], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 306\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "16a6582c-9a5f-4113-9439-6998263f671f"], ["created_at", "2019-08-22 07:34:31.397789"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (9.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 306]]
  [1m[36mOutputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 306], ["created_at", "2019-08-22 07:34:31.459422"], ["updated_at", "2019-08-22 07:34:31.459422"], ["type", "OutputNode"]]
  [1m[35m (8.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 476], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 476], ["auditable_type", "Node"], ["associated_id", 306], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 306\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "16a6582c-9a5f-4113-9439-6998263f671f"], ["created_at", "2019-08-22 07:34:31.469860"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 306], ["LIMIT", 1]]
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 306]]
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 306], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 306]]
  [1m[36mEdge Load (11.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 306]]
  [1m[36mEdge Load (5.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 306]]
Completed 200 OK in 371ms (Views: 1.2ms | ActiveRecord: 109.5ms)
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:35:15.641489"], ["updated_at", "2019-08-22 07:35:15.641489"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/307/save_all" for 127.0.0.1 at 2019-08-22 07:35:15 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"307", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"0f3cb353-c77e-48f0-8354-685d400c09b2"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"018d615f-32c0-4687-8da2-c86411e6d9bf"}], "id"=>"307"}
  [1m[36mGraph Load (10.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 307], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.1ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:35:15.844308"], ["id", 307]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (12.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 307], ["created_at", "2019-08-22 07:35:16.021403"], ["updated_at", "2019-08-22 07:35:16.021403"], ["type", "InputNode"]]
  [1m[35m (19.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 477], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 477], ["auditable_type", "Node"], ["associated_id", 307], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 307\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "6e14b822-1e8a-45e2-a5af-0a0cf62c3007"], ["created_at", "2019-08-22 07:35:16.161279"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (16.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 307]]
  [1m[36mOutputNode Create (9.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 307], ["created_at", "2019-08-22 07:35:16.311815"], ["updated_at", "2019-08-22 07:35:16.311815"], ["type", "OutputNode"]]
  [1m[35m (10.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 478], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 478], ["auditable_type", "Node"], ["associated_id", 307], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 307\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "6e14b822-1e8a-45e2-a5af-0a0cf62c3007"], ["created_at", "2019-08-22 07:35:16.329838"]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 307], ["LIMIT", 1]]
  [1m[36mNode Load (4.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 307]]
  [1m[36mGraph Load (7.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 307], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 307]]
  [1m[36mEdge Load (21.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 307]]
  [1m[36mEdge Load (10.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 307]]
Completed 200 OK in 755ms (Views: 4.2ms | ActiveRecord: 222.9ms)
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (5.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:35:53.096516"], ["updated_at", "2019-08-22 07:35:53.096516"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/308/save_all" for 127.0.0.1 at 2019-08-22 07:35:53 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"308", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"7aca6978-7157-48bf-90d8-3652d51c48ec"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"d9b42f4e-0937-476f-9b44-87cd8757cd1d"}], "id"=>"308"}
  [1m[36mGraph Load (2.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 308], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.0ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:35:53.224334"], ["id", 308]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (4.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 308], ["created_at", "2019-08-22 07:35:53.342206"], ["updated_at", "2019-08-22 07:35:53.342206"], ["type", "InputNode"]]
  [1m[35m (14.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 479], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 479], ["auditable_type", "Node"], ["associated_id", 308], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 308\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "ddc574b9-88e3-487d-b3a3-8a7dbe93b894"], ["created_at", "2019-08-22 07:35:53.415766"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 308]]
  [1m[36mOutputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 308], ["created_at", "2019-08-22 07:35:53.472957"], ["updated_at", "2019-08-22 07:35:53.472957"], ["type", "OutputNode"]]
  [1m[35m (6.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 480], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 480], ["auditable_type", "Node"], ["associated_id", 308], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 308\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "ddc574b9-88e3-487d-b3a3-8a7dbe93b894"], ["created_at", "2019-08-22 07:35:53.479369"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 308], ["LIMIT", 1]]
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 308]]
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 308], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 308]]
  [1m[36mEdge Load (10.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 308]]
  [1m[36mEdge Load (4.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 308]]
Completed 200 OK in 367ms (Views: 1.2ms | ActiveRecord: 104.5ms)
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:36:13.503301"], ["updated_at", "2019-08-22 07:36:13.503301"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/309/save_all" for 127.0.0.1 at 2019-08-22 07:36:13 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"309", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"6acac32b-1b90-41b1-b6b2-015fbc913df2"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"067c7829-dad4-4b44-a4fd-b78601474cf9"}], "id"=>"309"}
  [1m[36mGraph Load (3.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 309], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.9ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:36:13.652102"], ["id", 309]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 309], ["created_at", "2019-08-22 07:36:13.804473"], ["updated_at", "2019-08-22 07:36:13.804473"], ["type", "InputNode"]]
  [1m[35m (20.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 481], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 481], ["auditable_type", "Node"], ["associated_id", 309], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 309\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "70e3ebeb-6bfa-4c87-8088-5e9e8ab2cf46"], ["created_at", "2019-08-22 07:36:13.899008"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 309]]
  [1m[36mOutputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 309], ["created_at", "2019-08-22 07:36:13.987261"], ["updated_at", "2019-08-22 07:36:13.987261"], ["type", "OutputNode"]]
  [1m[35m (10.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 482], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 482], ["auditable_type", "Node"], ["associated_id", 309], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 309\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "70e3ebeb-6bfa-4c87-8088-5e9e8ab2cf46"], ["created_at", "2019-08-22 07:36:13.996983"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 309], ["LIMIT", 1]]
  [1m[36mNode Load (4.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 309]]
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 309], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 309]]
  [1m[36mEdge Load (19.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 309]]
  [1m[36mEdge Load (8.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 309]]
Completed 200 OK in 494ms (Views: 1.8ms | ActiveRecord: 149.9ms)
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:36:36.138379"], ["updated_at", "2019-08-22 07:36:36.138379"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/310/save_all" for 127.0.0.1 at 2019-08-22 07:36:36 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"310", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"9e27b083-2ed0-4f59-9a3f-64c626a91949"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"446801e7-5cf5-46a9-a8dc-170d8d5ce91e"}], "id"=>"310"}
  [1m[36mGraph Load (3.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 310], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.8ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:36:36.260447"], ["id", 310]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 310], ["created_at", "2019-08-22 07:36:36.388132"], ["updated_at", "2019-08-22 07:36:36.388132"], ["type", "InputNode"]]
  [1m[35m (26.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 483], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 483], ["auditable_type", "Node"], ["associated_id", 310], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 310\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "b023eaad-3b82-4895-9c6b-a378e2a183d6"], ["created_at", "2019-08-22 07:36:36.514116"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 310]]
  [1m[36mOutputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 310], ["created_at", "2019-08-22 07:36:36.586346"], ["updated_at", "2019-08-22 07:36:36.586346"], ["type", "OutputNode"]]
  [1m[35m (7.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 484], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 484], ["auditable_type", "Node"], ["associated_id", 310], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 310\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "b023eaad-3b82-4895-9c6b-a378e2a183d6"], ["created_at", "2019-08-22 07:36:36.594406"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 310], ["LIMIT", 1]]
  [1m[36mNode Load (4.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 310]]
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 310], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 310]]
  [1m[36mEdge Load (14.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 310]]
  [1m[36mEdge Load (7.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 310]]
Completed 200 OK in 446ms (Views: 0.8ms | ActiveRecord: 132.7ms)
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (6.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:36:58.355468"], ["updated_at", "2019-08-22 07:36:58.355468"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/311/save_all" for 127.0.0.1 at 2019-08-22 07:36:58 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"311", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"0fae193e-3d1d-424d-a276-6cbfb52cb0b7"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"9fab8804-5374-466a-89b5-c15454556130"}], "id"=>"311"}
  [1m[36mGraph Load (4.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 311], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.4ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:36:58.608442"], ["id", 311]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (13.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 311], ["created_at", "2019-08-22 07:36:58.819083"], ["updated_at", "2019-08-22 07:36:58.819083"], ["type", "InputNode"]]
  [1m[35m (23.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 485], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 485], ["auditable_type", "Node"], ["associated_id", 311], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 311\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "d9d7cd1e-5528-473b-b7e4-1169d8b88285"], ["created_at", "2019-08-22 07:36:58.948586"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (14.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 311]]
  [1m[36mOutputNode Create (3.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 311], ["created_at", "2019-08-22 07:36:59.059526"], ["updated_at", "2019-08-22 07:36:59.059526"], ["type", "OutputNode"]]
  [1m[35m (9.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 486], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 486], ["auditable_type", "Node"], ["associated_id", 311], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 311\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "d9d7cd1e-5528-473b-b7e4-1169d8b88285"], ["created_at", "2019-08-22 07:36:59.069856"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 311], ["LIMIT", 1]]
  [1m[36mNode Load (4.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 311]]
  [1m[36mGraph Load (2.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 311], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 311]]
  [1m[36mEdge Load (16.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 311]]
  [1m[36mEdge Load (7.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 311]]
Completed 200 OK in 637ms (Views: 2.0ms | ActiveRecord: 163.8ms)
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:37:38.079262"], ["updated_at", "2019-08-22 07:37:38.079262"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/312/save_all" for 127.0.0.1 at 2019-08-22 07:37:38 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"312", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"8a7c075a-4cf3-42ce-8428-6d91f1a65d92"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"af5357d3-ef4d-44ce-8bb5-2dac682b011f"}], "id"=>"312"}
  [1m[36mGraph Load (2.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.9ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:37:38.308449"], ["id", 312]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 312], ["created_at", "2019-08-22 07:37:38.441264"], ["updated_at", "2019-08-22 07:37:38.441264"], ["type", "InputNode"]]
  [1m[35m (17.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 487], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 487], ["auditable_type", "Node"], ["associated_id", 312], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 312\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "3fe9810e-aa64-443b-9ec7-8f23763742f1"], ["created_at", "2019-08-22 07:37:38.496768"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 312]]
  [1m[36mOutputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 312], ["created_at", "2019-08-22 07:37:38.562511"], ["updated_at", "2019-08-22 07:37:38.562511"], ["type", "OutputNode"]]
  [1m[35m (8.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 488], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 488], ["auditable_type", "Node"], ["associated_id", 312], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 312\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "3fe9810e-aa64-443b-9ec7-8f23763742f1"], ["created_at", "2019-08-22 07:37:38.570595"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (3.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 312]]
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 312]]
  [1m[36mEdge Load (11.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 312]]
  [1m[36mEdge Load (6.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 312]]
Completed 200 OK in 404ms (Views: 1.7ms | ActiveRecord: 126.1ms)
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
GraphsControllerTest: test_save_all
-----------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (6.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:38:09.250480"], ["updated_at", "2019-08-22 07:38:09.250480"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/313/save_all" for 127.0.0.1 at 2019-08-22 07:38:09 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"313", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"6c3bc314-e097-4aeb-9cde-9c8ab5659dc4"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"75c90075-fd15-461f-9e02-5989de5496a9"}], "id"=>"313"}
  [1m[36mGraph Load (4.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 313], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.4ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:38:09.433608"], ["id", 313]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (9.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 313], ["created_at", "2019-08-22 07:38:09.560630"], ["updated_at", "2019-08-22 07:38:09.560630"], ["type", "InputNode"]]
  [1m[35m (18.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 489], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 489], ["auditable_type", "Node"], ["associated_id", 313], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 313\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "b844354f-0fbc-4dce-8aa0-914f4dfb6005"], ["created_at", "2019-08-22 07:38:09.632619"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 313]]
  [1m[36mOutputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 313], ["created_at", "2019-08-22 07:38:09.709575"], ["updated_at", "2019-08-22 07:38:09.709575"], ["type", "OutputNode"]]
  [1m[35m (9.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 490], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 490], ["auditable_type", "Node"], ["associated_id", 313], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 313\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "b844354f-0fbc-4dce-8aa0-914f4dfb6005"], ["created_at", "2019-08-22 07:38:09.719088"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 313], ["LIMIT", 1]]
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 313]]
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 313], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 313]]
  [1m[36mEdge Load (16.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 313]]
  [1m[36mEdge Load (8.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 313]]
Completed 200 OK in 429ms (Views: 1.4ms | ActiveRecord: 147.6ms)
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (5.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_graph_if_save_all_is_successful
------------------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (7.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:43:22.881510"], ["updated_at", "2019-08-22 07:43:22.881510"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/314/save_all" for 127.0.0.1 at 2019-08-22 07:43:22 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"314", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"de0b3462-1f0f-4ca1-a435-32045f29bb1a"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"62430493-45cb-43e8-9522-e71c74c690b3"}], "id"=>"314"}
  [1m[36mGraph Load (4.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 314], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.9ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:43:23.077046"], ["id", 314]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (7.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 314], ["created_at", "2019-08-22 07:43:23.242623"], ["updated_at", "2019-08-22 07:43:23.242623"], ["type", "InputNode"]]
  [1m[35m (16.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 491], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 491], ["auditable_type", "Node"], ["associated_id", 314], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 314\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "da2aab0c-b983-4fc9-b541-51ab0b4b0f97"], ["created_at", "2019-08-22 07:43:23.294375"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 314]]
  [1m[36mOutputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 314], ["created_at", "2019-08-22 07:43:23.346250"], ["updated_at", "2019-08-22 07:43:23.346250"], ["type", "OutputNode"]]
  [1m[35m (6.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 492], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 492], ["auditable_type", "Node"], ["associated_id", 314], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 314\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "da2aab0c-b983-4fc9-b541-51ab0b4b0f97"], ["created_at", "2019-08-22 07:43:23.351958"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 314], ["LIMIT", 1]]
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 314]]
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 314], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 314]]
  [1m[36mEdge Load (18.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 314]]
  [1m[36mEdge Load (8.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 314]]
Completed 200 OK in 412ms (Views: 0.9ms | ActiveRecord: 133.7ms)
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_errors_if_save_all_is_unsuccessful
---------------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:43:23.457450"], ["updated_at", "2019-08-22 07:43:23.457450"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/315/save_all" for 127.0.0.1 at 2019-08-22 07:43:23 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"315", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"OutputNode", "client_id"=>"565f56f3-97e2-462a-8554-e193c942cb6f"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"561be292-7208-44bc-8daf-6f0a9bad58d3"}], "id"=>"315"}
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 315], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.5ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:43:23.476073"], ["id", 315]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 315]]
  [1m[36mOutputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 315], ["created_at", "2019-08-22 07:43:23.487848"], ["updated_at", "2019-08-22 07:43:23.487848"], ["type", "OutputNode"]]
  [1m[35m (9.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 493], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 493], ["auditable_type", "Node"], ["associated_id", 315], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 315\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "b86a42f2-9a0b-40b3-8c20-be7305a93693"], ["created_at", "2019-08-22 07:43:23.493884"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 315], ["created_at", "2019-08-22 07:43:23.511362"], ["updated_at", "2019-08-22 07:43:23.511362"], ["type", "OutputNode"]]
  [1m[35m (9.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 494], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 494], ["auditable_type", "Node"], ["associated_id", 315], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 315\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "b86a42f2-9a0b-40b3-8c20-be7305a93693"], ["created_at", "2019-08-22 07:43:23.517802"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 315], ["LIMIT", 1]]
  [1m[36mNode Load (4.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 315]]
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 315], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 315]]
  [1m[36mEdge Load (7.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 315]]
  [1m[36mEdge Load (7.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 315]]
Completed 200 OK in 135ms (Views: 5.6ms | ActiveRecord: 60.8ms)
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_errors_if_save_all_is_unsuccessful
---------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:44:04.028147"], ["updated_at", "2019-08-22 07:44:04.028147"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/316/save_all" for 127.0.0.1 at 2019-08-22 07:44:04 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"316", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"OutputNode", "client_id"=>"8734e528-7cb1-4694-9369-2406f1ec5e7a"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"1a50a719-1b29-43cb-90ea-14d46770c212"}], "id"=>"316"}
  [1m[36mGraph Load (3.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 316], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.2ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:44:04.150057"], ["id", 316]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (9.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 316]]
  [1m[36mOutputNode Create (4.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 316], ["created_at", "2019-08-22 07:44:04.318661"], ["updated_at", "2019-08-22 07:44:04.318661"], ["type", "OutputNode"]]
  [1m[35m (18.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 495], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 495], ["auditable_type", "Node"], ["associated_id", 316], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 316\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "1e8d28ed-07af-48c9-bb4e-5e353337d7c0"], ["created_at", "2019-08-22 07:44:04.423022"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 316], ["created_at", "2019-08-22 07:44:04.457903"], ["updated_at", "2019-08-22 07:44:04.457903"], ["type", "OutputNode"]]
  [1m[35m (8.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 496], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 496], ["auditable_type", "Node"], ["associated_id", 316], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 316\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "1e8d28ed-07af-48c9-bb4e-5e353337d7c0"], ["created_at", "2019-08-22 07:44:04.466744"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 316], ["LIMIT", 1]]
  [1m[36mNode Load (4.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 316]]
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 316], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 316]]
  [1m[36mEdge Load (15.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 316]]
  [1m[36mEdge Load (8.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 316]]
Completed 200 OK in 458ms (Views: 2.6ms | ActiveRecord: 136.4ms)
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_graph_if_save_all_is_successful
------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:44:04.593526"], ["updated_at", "2019-08-22 07:44:04.593526"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/317/save_all" for 127.0.0.1 at 2019-08-22 07:44:04 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"317", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"4baf1f94-ec13-49c5-af55-36c12470ed8b"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"19c7616f-0f81-447e-ab1a-b2841c485081"}], "id"=>"317"}
  [1m[36mGraph Load (3.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 317], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.4ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:44:04.613145"], ["id", 317]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 317], ["created_at", "2019-08-22 07:44:04.653415"], ["updated_at", "2019-08-22 07:44:04.653415"], ["type", "InputNode"]]
  [1m[35m (8.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 497], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 497], ["auditable_type", "Node"], ["associated_id", 317], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 317\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "7dbda83b-ea97-4919-820e-7269a3d9e099"], ["created_at", "2019-08-22 07:44:04.661680"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 317]]
  [1m[36mOutputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 317], ["created_at", "2019-08-22 07:44:04.686931"], ["updated_at", "2019-08-22 07:44:04.686931"], ["type", "OutputNode"]]
  [1m[35m (9.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 498], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 498], ["auditable_type", "Node"], ["associated_id", 317], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 317\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "7dbda83b-ea97-4919-820e-7269a3d9e099"], ["created_at", "2019-08-22 07:44:04.695464"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 317], ["LIMIT", 1]]
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 317]]
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 317], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 317]]
  [1m[36mEdge Load (10.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 317]]
  [1m[36mEdge Load (9.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 317]]
Completed 200 OK in 152ms (Views: 0.8ms | ActiveRecord: 63.4ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_errors_if_save_all_is_unsuccessful
---------------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:44:39.062812"], ["updated_at", "2019-08-22 07:44:39.062812"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/318/save_all" for 127.0.0.1 at 2019-08-22 07:44:39 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"318", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"OutputNode", "client_id"=>"0f0b9e1d-fd82-4775-9f36-348a190faf59"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"a3aafeae-d103-48ca-9fd2-b28d00e957c3"}], "id"=>"318"}
  [1m[36mGraph Load (3.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.1ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:44:39.186893"], ["id", 318]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 318]]
  [1m[36mOutputNode Create (4.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 318], ["created_at", "2019-08-22 07:44:39.317727"], ["updated_at", "2019-08-22 07:44:39.317727"], ["type", "OutputNode"]]
  [1m[35m (23.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 499], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 499], ["auditable_type", "Node"], ["associated_id", 318], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 318\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "c037e6be-1614-480d-80db-9b107b2faee0"], ["created_at", "2019-08-22 07:44:39.422109"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 318], ["created_at", "2019-08-22 07:44:39.457026"], ["updated_at", "2019-08-22 07:44:39.457026"], ["type", "OutputNode"]]
  [1m[35m (7.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 500], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 500], ["auditable_type", "Node"], ["associated_id", 318], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 318\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "c037e6be-1614-480d-80db-9b107b2faee0"], ["created_at", "2019-08-22 07:44:39.465984"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 318]]
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 318]]
  [1m[36mEdge Load (13.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 318]]
  [1m[36mEdge Load (6.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 318]]
Completed 200 OK in 414ms (Views: 1.9ms | ActiveRecord: 128.4ms)
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_graph_if_save_all_is_successful
------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:44:39.598990"], ["updated_at", "2019-08-22 07:44:39.598990"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/319/save_all" for 127.0.0.1 at 2019-08-22 07:44:39 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"319", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"0cc4bf35-4c99-423a-8017-1790ac4e80fc"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"683de5d6-26e1-49e2-a09b-15b4b8b6a693"}], "id"=>"319"}
  [1m[36mGraph Load (4.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 319], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.3ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:44:39.625658"], ["id", 319]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 319], ["created_at", "2019-08-22 07:44:39.662847"], ["updated_at", "2019-08-22 07:44:39.662847"], ["type", "InputNode"]]
  [1m[35m (8.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 501], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 501], ["auditable_type", "Node"], ["associated_id", 319], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 319\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "766f89cb-a858-4078-9a94-2c5e39f7784d"], ["created_at", "2019-08-22 07:44:39.671653"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 319]]
  [1m[36mOutputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 319], ["created_at", "2019-08-22 07:44:39.699578"], ["updated_at", "2019-08-22 07:44:39.699578"], ["type", "OutputNode"]]
  [1m[35m (9.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 502], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 502], ["auditable_type", "Node"], ["associated_id", 319], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 319\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "766f89cb-a858-4078-9a94-2c5e39f7784d"], ["created_at", "2019-08-22 07:44:39.709326"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 319], ["LIMIT", 1]]
  [1m[36mNode Load (4.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 319]]
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 319], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 319]]
  [1m[36mEdge Load (8.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 319]]
  [1m[36mEdge Load (9.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 319]]
Completed 200 OK in 159ms (Views: 0.9ms | ActiveRecord: 64.3ms)
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (5.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_errors_if_save_all_is_unsuccessful
---------------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:45:11.820584"], ["updated_at", "2019-08-22 07:45:11.820584"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/320/save_all" for 127.0.0.1 at 2019-08-22 07:45:11 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"320", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"OutputNode", "client_id"=>"c4301f40-199b-4334-bedc-2c8a56acb235"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"a15523d2-a3a0-4987-8220-4b3e975851b0"}], "id"=>"320"}
  [1m[36mGraph Load (4.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 320], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.8ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:45:11.990065"], ["id", 320]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (16.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 320]]
  [1m[36mOutputNode Create (6.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 320], ["created_at", "2019-08-22 07:45:12.176742"], ["updated_at", "2019-08-22 07:45:12.176742"], ["type", "OutputNode"]]
  [1m[35m (25.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 503], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (9.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 503], ["auditable_type", "Node"], ["associated_id", 320], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 320\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "966bd65e-d3bf-4318-b457-506a5e038a3d"], ["created_at", "2019-08-22 07:45:12.311147"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (3.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 320], ["created_at", "2019-08-22 07:45:12.358824"], ["updated_at", "2019-08-22 07:45:12.358824"], ["type", "OutputNode"]]
  [1m[35m (20.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 504], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 504], ["auditable_type", "Node"], ["associated_id", 320], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 320\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "966bd65e-d3bf-4318-b457-506a5e038a3d"], ["created_at", "2019-08-22 07:45:12.369043"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 320], ["LIMIT", 1]]
  [1m[36mNode Load (4.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 320]]
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 320], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 320]]
  [1m[36mEdge Load (18.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 320]]
  [1m[36mEdge Load (9.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 320]]
Completed 200 OK in 545ms (Views: 1.8ms | ActiveRecord: 209.9ms)
  [1m[35m (5.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (5.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_graph_if_save_all_is_successful
------------------------------------------------------------------------
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:45:12.532519"], ["updated_at", "2019-08-22 07:45:12.532519"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/321/save_all" for 127.0.0.1 at 2019-08-22 07:45:12 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"321", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"85f9c60d-2a55-49b7-b0ce-434556915048"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"89d27f6a-6777-4a46-a1b6-61d5cb2fcd61"}], "id"=>"321"}
  [1m[36mGraph Load (2.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 321], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.6ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:45:12.559500"], ["id", 321]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (4.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 321], ["created_at", "2019-08-22 07:45:12.634612"], ["updated_at", "2019-08-22 07:45:12.634612"], ["type", "InputNode"]]
  [1m[35m (16.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 505], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 505], ["auditable_type", "Node"], ["associated_id", 321], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 321\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "3b284324-c64a-409b-8453-a7358633865c"], ["created_at", "2019-08-22 07:45:12.656261"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 321]]
  [1m[36mOutputNode Create (4.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 321], ["created_at", "2019-08-22 07:45:12.702767"], ["updated_at", "2019-08-22 07:45:12.702767"], ["type", "OutputNode"]]
  [1m[35m (40.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 506], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 506], ["auditable_type", "Node"], ["associated_id", 321], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 321\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "3b284324-c64a-409b-8453-a7358633865c"], ["created_at", "2019-08-22 07:45:12.713226"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 321], ["LIMIT", 1]]
  [1m[36mNode Load (4.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 321]]
  [1m[36mGraph Load (2.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 321], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 321]]
  [1m[36mEdge Load (9.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 321]]
  [1m[36mEdge Load (10.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 321]]
Completed 200 OK in 267ms (Views: 1.7ms | ActiveRecord: 120.1ms)
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_errors_if_save_all_is_unsuccessful
---------------------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:45:31.121382"], ["updated_at", "2019-08-22 07:45:31.121382"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/322/save_all" for 127.0.0.1 at 2019-08-22 07:45:31 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"322", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"OutputNode", "client_id"=>"f5cdee24-24c0-45f1-9ad0-621cdc59507e"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"dd12b62d-e2ce-4e43-9048-c7d567e4a04a"}], "id"=>"322"}
  [1m[36mGraph Load (10.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 322], ["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.3ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:45:31.286183"], ["id", 322]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 322]]
  [1m[36mOutputNode Create (3.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 322], ["created_at", "2019-08-22 07:45:31.447653"], ["updated_at", "2019-08-22 07:45:31.447653"], ["type", "OutputNode"]]
  [1m[35m (16.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 507], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 507], ["auditable_type", "Node"], ["associated_id", 322], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 322\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "9134abd5-28ad-4b32-9b02-4b79e79f6a22"], ["created_at", "2019-08-22 07:45:31.546829"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 322], ["created_at", "2019-08-22 07:45:31.577184"], ["updated_at", "2019-08-22 07:45:31.577184"], ["type", "OutputNode"]]
  [1m[35m (9.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 508], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 508], ["auditable_type", "Node"], ["associated_id", 322], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 322\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "9134abd5-28ad-4b32-9b02-4b79e79f6a22"], ["created_at", "2019-08-22 07:45:31.583558"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 322], ["LIMIT", 1]]
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 322]]
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 322], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 322]]
  [1m[36mEdge Load (15.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 322]]
  [1m[36mEdge Load (8.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 322]]
Completed 200 OK in 475ms (Views: 0.9ms | ActiveRecord: 145.8ms)
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (4.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_errors_if_save_all_is_unsuccessful
---------------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (8.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:47:14.604161"], ["updated_at", "2019-08-22 07:47:14.604161"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/323/save_all" for 127.0.0.1 at 2019-08-22 07:47:14 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"323", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"OutputNode", "client_id"=>"c20e48d7-44e4-4d0a-bda5-00d01b532eef"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"b9135dbb-5165-445a-acf5-e4a52c3c923d"}], "id"=>"323"}
  [1m[36mGraph Load (4.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 323], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.4ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:47:14.717945"], ["id", 323]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (17.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 323]]
  [1m[36mOutputNode Create (11.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 323], ["created_at", "2019-08-22 07:47:14.885845"], ["updated_at", "2019-08-22 07:47:14.885845"], ["type", "OutputNode"]]
  [1m[35m (62.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 509], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 509], ["auditable_type", "Node"], ["associated_id", 323], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 323\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "5e4b985f-c9fa-4998-9256-15f251880a41"], ["created_at", "2019-08-22 07:47:15.045407"]]
  [1m[35m (4.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 323], ["created_at", "2019-08-22 07:47:15.147255"], ["updated_at", "2019-08-22 07:47:15.147255"], ["type", "OutputNode"]]
  [1m[35m (7.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 510], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 510], ["auditable_type", "Node"], ["associated_id", 323], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 323\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "5e4b985f-c9fa-4998-9256-15f251880a41"], ["created_at", "2019-08-22 07:47:15.157116"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 323], ["LIMIT", 1]]
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 323]]
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 323], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 323]]
  [1m[36mEdge Load (12.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 323]]
  [1m[36mEdge Load (6.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 323]]
Completed 200 OK in 549ms (Views: 0.9ms | ActiveRecord: 223.4ms)
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_errors_if_save_all_is_unsuccessful
---------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:47:34.745058"], ["updated_at", "2019-08-22 07:47:34.745058"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/324/save_all" for 127.0.0.1 at 2019-08-22 07:47:34 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"324", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"OutputNode", "client_id"=>"65275a73-45b6-4292-afba-d3951e7c8b00"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"7f68893f-c3eb-465c-92f6-c0f0c85c1d6b"}], "id"=>"324"}
  [1m[36mGraph Load (3.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 324], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.7ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:47:34.888298"], ["id", 324]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 324]]
  [1m[36mOutputNode Create (4.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 324], ["created_at", "2019-08-22 07:47:35.017304"], ["updated_at", "2019-08-22 07:47:35.017304"], ["type", "OutputNode"]]
  [1m[35m (14.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 511], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 511], ["auditable_type", "Node"], ["associated_id", 324], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 324\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "4bac38bd-92aa-4b5e-bfe6-ea55365c3b25"], ["created_at", "2019-08-22 07:47:35.072244"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 324], ["created_at", "2019-08-22 07:47:35.100336"], ["updated_at", "2019-08-22 07:47:35.100336"], ["type", "OutputNode"]]
  [1m[35m (7.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 512], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 512], ["auditable_type", "Node"], ["associated_id", 324], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 324\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "4bac38bd-92aa-4b5e-bfe6-ea55365c3b25"], ["created_at", "2019-08-22 07:47:35.107516"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 324], ["LIMIT", 1]]
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 324]]
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 324], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 324]]
  [1m[36mEdge Load (15.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 324]]
  [1m[36mEdge Load (8.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 324]]
Completed 200 OK in 348ms (Views: 1.2ms | ActiveRecord: 119.0ms)
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes"[0m
  [1m[35m (5.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (5.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_errors_if_save_all_is_unsuccessful
---------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (11.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:50:59.807856"], ["updated_at", "2019-08-22 07:50:59.807856"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/325/save_all" for 127.0.0.1 at 2019-08-22 07:50:59 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"325", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"OutputNode", "client_id"=>"719683bc-1499-49a9-bf91-95bc37e3119b"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"3186dc21-356b-4f4f-9a9b-01147586d6a9"}], "id"=>"325"}
  [1m[36mGraph Load (3.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 325], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.6ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:50:59.960120"], ["id", 325]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 325]]
  [1m[36mOutputNode Create (4.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 325], ["created_at", "2019-08-22 07:51:00.081863"], ["updated_at", "2019-08-22 07:51:00.081863"], ["type", "OutputNode"]]
  [1m[35m (14.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 513], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 513], ["auditable_type", "Node"], ["associated_id", 325], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 325\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "3ed14f41-55df-4b92-bf78-025424974778"], ["created_at", "2019-08-22 07:51:00.135681"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 325], ["created_at", "2019-08-22 07:51:00.163350"], ["updated_at", "2019-08-22 07:51:00.163350"], ["type", "OutputNode"]]
  [1m[35m (7.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 514], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 514], ["auditable_type", "Node"], ["associated_id", 325], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 325\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "3ed14f41-55df-4b92-bf78-025424974778"], ["created_at", "2019-08-22 07:51:00.169716"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 325], ["LIMIT", 1]]
  [1m[36mNode Load (5.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 325]]
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 325], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 325]]
  [1m[36mEdge Load (19.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 325]]
  [1m[36mEdge Load (7.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 325]]
Completed 200 OK in 354ms (Views: 1.0ms | ActiveRecord: 136.7ms)
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes"[0m
  [1m[35m (5.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (9.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_errors_if_save_all_is_unsuccessful
---------------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:51:30.706058"], ["updated_at", "2019-08-22 07:51:30.706058"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/326/save_all" for 127.0.0.1 at 2019-08-22 07:51:30 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"326", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"OutputNode", "client_id"=>"7016b90a-d15a-446c-bdca-d33875c5d7b3"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"f8abd0f2-6dc8-44c9-90e2-c8d91ac6fa92"}], "id"=>"326"}
  [1m[36mGraph Load (3.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 326], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.8ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:51:30.861080"], ["id", 326]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (11.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 326]]
  [1m[36mOutputNode Create (7.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 326], ["created_at", "2019-08-22 07:51:31.076302"], ["updated_at", "2019-08-22 07:51:31.076302"], ["type", "OutputNode"]]
  [1m[35m (18.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 515], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (9.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 515], ["auditable_type", "Node"], ["associated_id", 326], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 326\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "3c3c243c-95da-482b-9b97-0ea4f2ff1e1d"], ["created_at", "2019-08-22 07:51:31.141359"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 326], ["created_at", "2019-08-22 07:51:31.177795"], ["updated_at", "2019-08-22 07:51:31.177795"], ["type", "OutputNode"]]
  [1m[35m (12.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 516], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 516], ["auditable_type", "Node"], ["associated_id", 326], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 326\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "3c3c243c-95da-482b-9b97-0ea4f2ff1e1d"], ["created_at", "2019-08-22 07:51:31.185781"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 326], ["LIMIT", 1]]
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 326]]
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 326], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 326]]
  [1m[36mEdge Load (16.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 326]]
  [1m[36mEdge Load (8.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 326]]
Completed 200 OK in 484ms (Views: 0.9ms | ActiveRecord: 155.2ms)
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:01.079266"], ["updated_at", "2019-08-22 07:53:01.079266"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 327], ["created_at", "2019-08-22 07:53:01.090264"], ["updated_at", "2019-08-22 07:53:01.090264"], ["type", "InputNode"]]
  [1m[35m (16.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 517], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 517], ["auditable_type", "Node"], ["associated_id", 327], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 327\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c1e75eff-b094-4dda-b367-130675fcce89"], ["created_at", "2019-08-22 07:53:01.144045"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 327]]
  [1m[36mOutputNode Create (3.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 327], ["created_at", "2019-08-22 07:53:01.276944"], ["updated_at", "2019-08-22 07:53:01.276944"], ["type", "OutputNode"]]
  [1m[35m (14.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 518], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 518], ["auditable_type", "Node"], ["associated_id", 327], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 327\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f0133036-902a-41e5-8b88-7f4639c170d6"], ["created_at", "2019-08-22 07:53:01.294057"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (6.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 517], ["to_node_id", 518], ["created_at", "2019-08-22 07:53:01.364863"], ["updated_at", "2019-08-22 07:53:01.364863"]]
  [1m[35m (9.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 132], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 132], ["auditable_type", "Edge"], ["associated_id", 517], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 517\nto_node_id: 518\n"], ["version", 1], ["request_uuid", "dabb884f-7d3c-4bcf-ae36-e22aac6d9db3"], ["created_at", "2019-08-22 07:53:01.377311"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (10.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (5.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 517]]
  [1m[35m (10.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 132], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 132], ["auditable_type", "Edge"], ["associated_id", 517], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 517\nto_node_id: 518\n"], ["version", 2], ["request_uuid", "5819619c-480c-4e0a-9bac-109c63345ff5"], ["created_at", "2019-08-22 07:53:01.420125"]]
  [1m[36mEdge Destroy (4.1ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 132]]
  [1m[36mEdge Load (7.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 517]]
  [1m[35m (12.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 517], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 517], ["auditable_type", "Node"], ["associated_id", 327], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 327\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "4af1bedb-b3a0-43f9-a36f-7e112fbf05eb"], ["created_at", "2019-08-22 07:53:01.475100"]]
  [1m[36mInputNode Destroy (4.0ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 517]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:01.525917"], ["updated_at", "2019-08-22 07:53:01.525917"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (20.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 328], ["created_at", "2019-08-22 07:53:01.552389"], ["updated_at", "2019-08-22 07:53:01.552389"], ["type", "InputNode"]]
  [1m[35m (9.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 519], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (6.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 519], ["auditable_type", "Node"], ["associated_id", 328], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 328\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e42f2fe0-65f8-4487-a120-d8c822e6fe7b"], ["created_at", "2019-08-22 07:53:01.581240"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:01.622378"], ["updated_at", "2019-08-22 07:53:01.622378"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 329], ["created_at", "2019-08-22 07:53:01.630023"], ["updated_at", "2019-08-22 07:53:01.630023"], ["type", "InputNode"]]
  [1m[35m (2.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 520], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 520], ["auditable_type", "Node"], ["associated_id", 329], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 329\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "62b6b956-cf17-4b44-a320-566e18e8a413"], ["created_at", "2019-08-22 07:53:01.640801"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 329]]
  [1m[36mOutputNode Create (5.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 329], ["created_at", "2019-08-22 07:53:01.686553"], ["updated_at", "2019-08-22 07:53:01.686553"], ["type", "OutputNode"]]
  [1m[35m (4.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 521], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 521], ["auditable_type", "Node"], ["associated_id", 329], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 329\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "74855a16-7af8-4142-b816-5e0ea1fae105"], ["created_at", "2019-08-22 07:53:01.701844"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 520], ["to_node_id", 521], ["created_at", "2019-08-22 07:53:01.727046"], ["updated_at", "2019-08-22 07:53:01.727046"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 133], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 133], ["auditable_type", "Edge"], ["associated_id", 520], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 520\nto_node_id: 521\n"], ["version", 1], ["request_uuid", "e8cb5266-2d11-42b0-96d8-9bab58837992"], ["created_at", "2019-08-22 07:53:01.741495"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 521]]
  [1m[36mEdge Load (4.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 521]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 520], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 133], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 133], ["auditable_type", "Edge"], ["associated_id", 520], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 520\nto_node_id: 521\n"], ["version", 2], ["request_uuid", "51eae5d5-0471-4b47-9296-e18ca78813ef"], ["created_at", "2019-08-22 07:53:01.788554"]]
  [1m[36mEdge Destroy (3.3ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 133]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 521], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 521], ["auditable_type", "Node"], ["associated_id", 329], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 329\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "d25f8aef-d59d-4902-bd23-cb9ab06e93da"], ["created_at", "2019-08-22 07:53:01.805668"]]
  [1m[36mOutputNode Destroy (3.9ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 521]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:01.850047"], ["updated_at", "2019-08-22 07:53:01.850047"]]
  [1m[36mInputNode Create (2.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 330], ["created_at", "2019-08-22 07:53:01.855133"], ["updated_at", "2019-08-22 07:53:01.855133"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 522], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 522], ["auditable_type", "Node"], ["associated_id", 330], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 330\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4ad2ef60-b9e2-4821-bdb1-e73a00359f24"], ["created_at", "2019-08-22 07:53:01.874277"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 330], ["created_at", "2019-08-22 07:53:01.898268"], ["updated_at", "2019-08-22 07:53:01.898268"], ["type", "OutputNode"]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 523], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 523], ["auditable_type", "Node"], ["associated_id", 330], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 330\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ed21cdbf-7199-4345-8a3e-f7e123a0e53c"], ["created_at", "2019-08-22 07:53:01.911025"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 330], ["created_at", "2019-08-22 07:53:01.939805"], ["updated_at", "2019-08-22 07:53:01.939805"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 524], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 524], ["auditable_type", "Node"], ["associated_id", 330], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 330\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "85c86eff-eb94-4714-b0d7-da20e8ea2fcc"], ["created_at", "2019-08-22 07:53:01.949512"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 330], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 522], ["to_node_id", 523], ["created_at", "2019-08-22 07:53:01.976228"], ["updated_at", "2019-08-22 07:53:01.976228"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 134], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 134], ["auditable_type", "Edge"], ["associated_id", 522], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 522\nto_node_id: 523\n"], ["version", 1], ["request_uuid", "f5299a77-edfa-4531-9333-f4fee8f6acac"], ["created_at", "2019-08-22 07:53:01.984731"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 134], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 134], ["auditable_type", "Edge"], ["associated_id", 522], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 523\n- 524\n"], ["version", 2], ["request_uuid", "1cd36095-358e-46fe-b99f-5049571d5ae7"], ["created_at", "2019-08-22 07:53:02.005939"]]
  [1m[36mEdge Update (3.6ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 524], ["updated_at", "2019-08-22 07:53:02.000389"], ["id", 134]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 330]]
  [1m[36mEdge Load (7.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 330]]
  [1m[36mAudited::Audit Load (5.2ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 330], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (5.7ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 134], ["auditable_type", "Edge"]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 522], ["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 523], ["LIMIT", 1]]
  [1m[36mEdge Update (3.4ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 523], ["updated_at", "2019-08-22 07:53:02.083808"], ["id", 134]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (4.5ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 788]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 330], ["LIMIT", 1]]
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 134], ["LIMIT", 1]]
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 523], ["LIMIT", 1]]
  [1m[36mEdge Load (9.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 330]]
  [1m[36mEdge Load (8.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 330]]
  [1m[36mAudited::Audit Load (4.8ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 330], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (5.0ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 134], ["auditable_type", "Edge"]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 522], ["LIMIT", 1]]
  [1m[36mEdge Destroy (3.5ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 134]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (5.0ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 787]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 330], ["LIMIT", 1]]
  [1m[36mEdge Load (8.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 330]]
  [1m[36mEdge Load (7.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 330]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_graph_if_save_all_is_successful
------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:02.271930"], ["updated_at", "2019-08-22 07:53:02.271930"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/331/save_all" for 127.0.0.1 at 2019-08-22 07:53:02 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"331", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"3cb5cfc1-6a1f-4897-9646-ba4c7a89e7b7"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"d8e9cb41-bcc0-4141-a9c2-3873e9c2695c"}], "id"=>"331"}
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 331], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.6ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:53:02.344967"], ["id", 331]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 331], ["created_at", "2019-08-22 07:53:02.351079"], ["updated_at", "2019-08-22 07:53:02.351079"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 525], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 525], ["auditable_type", "Node"], ["associated_id", 331], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 331\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "b5b1f742-5225-49e5-9b8c-5f25050aba24"], ["created_at", "2019-08-22 07:53:02.355016"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 331]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 331], ["created_at", "2019-08-22 07:53:02.379289"], ["updated_at", "2019-08-22 07:53:02.379289"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 526], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 526], ["auditable_type", "Node"], ["associated_id", 331], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 331\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "b5b1f742-5225-49e5-9b8c-5f25050aba24"], ["created_at", "2019-08-22 07:53:02.384237"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 331], ["LIMIT", 1]]
  [1m[36mNode Load (6.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 331]]
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 331], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 331]]
  [1m[36mEdge Load (7.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 331]]
  [1m[36mEdge Load (7.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 331]]
Completed 200 OK in 104ms (Views: 0.8ms | ActiveRecord: 37.4ms)
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:02.448752"], ["updated_at", "2019-08-22 07:53:02.448752"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 332], ["created_at", "2019-08-22 07:53:02.456119"], ["updated_at", "2019-08-22 07:53:02.456119"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 527], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 527], ["auditable_type", "Node"], ["associated_id", 332], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 332\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "584d8bdd-5c20-4c26-bede-501bff1d148d"], ["created_at", "2019-08-22 07:53:02.462257"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 332]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 332], ["created_at", "2019-08-22 07:53:02.492911"], ["updated_at", "2019-08-22 07:53:02.492911"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 528], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 528], ["auditable_type", "Node"], ["associated_id", 332], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 332\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "29f8e9d7-5526-4f98-a713-9644fada80dd"], ["created_at", "2019-08-22 07:53:02.498444"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 332], ["LIMIT", 1]]
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 332]]
  [1m[36mEdge Load (7.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 332]]
  [1m[36mEdge Load (6.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 332]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 332], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 527], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 332], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 527], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 527], ["auditable_type", "Node"], ["associated_id", 332], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "097f413c-6460-462e-927c-3a17595cce6c"], ["created_at", "2019-08-22 07:53:02.553051"]]
  [1m[36mInputNode Update (2.7ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:53:02.550713"], ["id", 527]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 528], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 332], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 332]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 332]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 332], ["LIMIT", 1]]
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 332]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 332], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 332]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 527], ["to_node_id", 528], ["created_at", "2019-08-22 07:53:02.628525"], ["updated_at", "2019-08-22 07:53:02.628525"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 135], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 135], ["auditable_type", "Edge"], ["associated_id", 527], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 527\nto_node_id: 528\n"], ["version", 1], ["request_uuid", "be7f4578-7712-4905-8c27-025e21b48a05"], ["created_at", "2019-08-22 07:53:02.634556"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 527], ["to_node_id", 528], ["created_at", "2019-08-22 07:53:02.645493"], ["updated_at", "2019-08-22 07:53:02.645493"]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:02.667386"], ["updated_at", "2019-08-22 07:53:02.667386"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 333], ["created_at", "2019-08-22 07:53:02.673882"], ["updated_at", "2019-08-22 07:53:02.673882"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 529], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 529], ["auditable_type", "Node"], ["associated_id", 333], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 333\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cab8f852-e288-445a-b6ea-22d21f402556"], ["created_at", "2019-08-22 07:53:02.679363"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 333]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 333], ["created_at", "2019-08-22 07:53:02.704230"], ["updated_at", "2019-08-22 07:53:02.704230"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 530], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 530], ["auditable_type", "Node"], ["associated_id", 333], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 333\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "668c99a8-bbe1-48cd-a7f6-37cf7a1b5c75"], ["created_at", "2019-08-22 07:53:02.710211"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 333], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 333]]
  [1m[36mEdge Load (10.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 333]]
  [1m[36mEdge Load (8.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 333]]
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:02.768337"], ["updated_at", "2019-08-22 07:53:02.768337"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 334], ["created_at", "2019-08-22 07:53:02.776548"], ["updated_at", "2019-08-22 07:53:02.776548"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 531], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 531], ["auditable_type", "Node"], ["associated_id", 334], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 334\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ea2ef794-9dec-4254-a3b2-92863b59b61d"], ["created_at", "2019-08-22 07:53:02.780394"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[36mOutputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 334], ["created_at", "2019-08-22 07:53:02.801777"], ["updated_at", "2019-08-22 07:53:02.801777"], ["type", "OutputNode"]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 532], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 532], ["auditable_type", "Node"], ["associated_id", 334], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 334\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "26e79e1c-6fde-4f12-8783-7ec74126f3db"], ["created_at", "2019-08-22 07:53:02.810285"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[36mEdge Load (4.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[36mEdge Load (4.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 531], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 531], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 531], ["auditable_type", "Node"], ["associated_id", 334], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "e40a7e40-eda9-4531-a554-e1b9261be1df"], ["created_at", "2019-08-22 07:53:02.874860"]]
  [1m[36mInputNode Update (2.6ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:53:02.871039"], ["id", 531]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 532], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[36mNode Load (6.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 531], ["to_node_id", 532], ["created_at", "2019-08-22 07:53:02.964271"], ["updated_at", "2019-08-22 07:53:02.964271"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 137], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 137], ["auditable_type", "Edge"], ["associated_id", 531], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 531\nto_node_id: 532\n"], ["version", 1], ["request_uuid", "e8f6d63b-b01c-4121-bafe-1085405b0cff"], ["created_at", "2019-08-22 07:53:02.969445"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[36mEdge Load (3.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 531], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 532], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[36mEdge Load (5.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 334]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 531], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 137], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 137], ["auditable_type", "Edge"], ["associated_id", 531], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 531\nto_node_id: 532\n"], ["version", 2], ["request_uuid", "4c21ab79-a0a1-4c71-8063-9e4c54d98730"], ["created_at", "2019-08-22 07:53:03.059948"]]
  [1m[36mEdge Destroy (4.4ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 137]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:03.083287"], ["updated_at", "2019-08-22 07:53:03.083287"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 335], ["created_at", "2019-08-22 07:53:03.088681"], ["updated_at", "2019-08-22 07:53:03.088681"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 533], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 533], ["auditable_type", "Node"], ["associated_id", 335], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 335\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "929def94-3326-4089-a996-5fd4fd9300d5"], ["created_at", "2019-08-22 07:53:03.092987"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 335]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 335], ["created_at", "2019-08-22 07:53:03.115934"], ["updated_at", "2019-08-22 07:53:03.115934"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 534], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 534], ["auditable_type", "Node"], ["associated_id", 335], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 335\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b4d5aeb0-a14e-4856-a590-15e1ae7c0868"], ["created_at", "2019-08-22 07:53:03.122771"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 335], ["LIMIT", 1]]
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 335]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 335]]
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 335]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 335], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 533], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 335], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 533], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 533], ["auditable_type", "Node"], ["associated_id", 335], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "c771fabd-12bc-457f-926e-8b1f19ad9613"], ["created_at", "2019-08-22 07:53:03.163856"]]
  [1m[36mInputNode Update (3.1ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:53:03.161594"], ["id", 533]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 534], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 335], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 335]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 335]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 335], ["LIMIT", 1]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 335]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 335], ["LIMIT", 1]]
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 335]]
  [1m[36mEdge Load (5.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 335]]
  [1m[36mEdge Load (4.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 335]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:03.306030"], ["updated_at", "2019-08-22 07:53:03.306030"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 336], ["created_at", "2019-08-22 07:53:03.313724"], ["updated_at", "2019-08-22 07:53:03.313724"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 535], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 535], ["auditable_type", "Node"], ["associated_id", 336], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 336\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1de95b8f-12df-4bbd-b84e-1278dc3c458f"], ["created_at", "2019-08-22 07:53:03.318522"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 336]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 336], ["created_at", "2019-08-22 07:53:03.339922"], ["updated_at", "2019-08-22 07:53:03.339922"], ["type", "OutputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 536], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 536], ["auditable_type", "Node"], ["associated_id", 336], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 336\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d1974b9b-b959-47e1-8c4e-58e553177e88"], ["created_at", "2019-08-22 07:53:03.346934"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 336], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 336]]
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 336]]
  [1m[36mEdge Load (7.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 336]]
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 336], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 536], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 336], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 336]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 336]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 336], ["LIMIT", 1]]
  [1m[36mNode Load (5.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 336]]
  [1m[36mGraph Load (1.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 336], ["LIMIT", 1]]
  [1m[36mNode Load (5.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 336]]
  [1m[36mNode Destroy (4.8ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 535]]
  [1m[36mEdge Load (4.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 336]]
  [1m[36mEdge Load (3.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 336]]
  [1m[35m (10.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 336]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:03.563792"], ["updated_at", "2019-08-22 07:53:03.563792"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 337], ["created_at", "2019-08-22 07:53:03.581661"], ["updated_at", "2019-08-22 07:53:03.581661"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 537], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 537], ["auditable_type", "Node"], ["associated_id", 337], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 337\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1ee4c973-117c-4c00-ab32-f40a2cc8162b"], ["created_at", "2019-08-22 07:53:03.585952"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 337]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 337], ["created_at", "2019-08-22 07:53:03.596898"], ["updated_at", "2019-08-22 07:53:03.596898"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 538], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 538], ["auditable_type", "Node"], ["associated_id", 337], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 337\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a7ef400a-48c0-435d-80cf-4b42fae0f609"], ["created_at", "2019-08-22 07:53:03.604552"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 337], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 337]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.3ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 537], ["to_node_id", 538], ["created_at", "2019-08-22 07:53:03.619826"], ["updated_at", "2019-08-22 07:53:03.619826"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 138], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (2.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 138], ["auditable_type", "Edge"], ["associated_id", 537], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 537\nto_node_id: 538\n"], ["version", 1], ["request_uuid", "dd625f4f-c486-493c-93be-8777e1383e4f"], ["created_at", "2019-08-22 07:53:03.625114"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 337]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 337]]
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:03.662136"], ["updated_at", "2019-08-22 07:53:03.662136"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 338], ["created_at", "2019-08-22 07:53:03.669484"], ["updated_at", "2019-08-22 07:53:03.669484"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 539], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 539], ["auditable_type", "Node"], ["associated_id", 338], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 338\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3de2c760-7160-4559-8180-9674cf59d580"], ["created_at", "2019-08-22 07:53:03.678508"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 338], ["created_at", "2019-08-22 07:53:03.698515"], ["updated_at", "2019-08-22 07:53:03.698515"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 540], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 540], ["auditable_type", "Node"], ["associated_id", 338], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 338\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "54530a20-e821-4bb0-9ba2-8e203b9cda97"], ["created_at", "2019-08-22 07:53:03.705282"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 338], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 338], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 540], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 338], ["LIMIT", 1]]
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 540], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 540], ["auditable_type", "Node"], ["associated_id", 338], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 2\n- New Node 1\n"], ["version", 2], ["request_uuid", "25d249a5-5288-4b48-916d-dbe8199a75e5"], ["created_at", "2019-08-22 07:53:03.810757"]]
  [1m[36mOutputNode Update (6.1ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "type" = $2, "updated_at" = $3 WHERE "nodes"."id" = $4[0m  [["name", "New Node 1"], ["type", "InputNode"], ["updated_at", "2019-08-22 07:53:03.796815"], ["id", 540]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 539], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 338], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 539], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 539], ["auditable_type", "Node"], ["associated_id", 338], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- Node 2\n"], ["version", 2], ["request_uuid", "1a54a097-c911-473b-b3ba-de866262be26"], ["created_at", "2019-08-22 07:53:03.884988"]]
  [1m[36mInputNode Update (4.9ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "type" = $2, "updated_at" = $3 WHERE "nodes"."id" = $4[0m  [["name", "Node 2"], ["type", "OutputNode"], ["updated_at", "2019-08-22 07:53:03.877660"], ["id", 539]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 338], ["LIMIT", 1]]
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 338], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 338], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 540], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 338], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 539], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 338], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 338], ["LIMIT", 1]]
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 338], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.4ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 540], ["to_node_id", 539], ["created_at", "2019-08-22 07:53:04.034028"], ["updated_at", "2019-08-22 07:53:04.034028"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 139], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 139], ["auditable_type", "Edge"], ["associated_id", 540], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 540\nto_node_id: 539\n"], ["version", 1], ["request_uuid", "8f0565c7-4c50-4951-bab2-c04475ce35cd"], ["created_at", "2019-08-22 07:53:04.039649"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[36mEdge Load (3.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 338]]
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 540], ["LIMIT", 1]]
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:04.111348"], ["updated_at", "2019-08-22 07:53:04.111348"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 339], ["LIMIT", 1]]
  [1m[36mEdge Load (5.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 339]]
  [1m[36mEdge Load (6.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 339]]
  [1m[35m (5.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:04.173848"], ["updated_at", "2019-08-22 07:53:04.173848"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 340], ["created_at", "2019-08-22 07:53:04.193603"], ["updated_at", "2019-08-22 07:53:04.193603"], ["type", "InputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 541], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 541], ["auditable_type", "Node"], ["associated_id", 340], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 340\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cd0762ba-2bdb-4302-add4-fac790d073b3"], ["created_at", "2019-08-22 07:53:04.203621"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 340]]
  [1m[36mOutputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 340], ["created_at", "2019-08-22 07:53:04.256713"], ["updated_at", "2019-08-22 07:53:04.256713"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 542], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 542], ["auditable_type", "Node"], ["associated_id", 340], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 340\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "27fce694-57d7-4ea6-9fb8-9e66a2d32acc"], ["created_at", "2019-08-22 07:53:04.266229"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 541], ["to_node_id", 542], ["created_at", "2019-08-22 07:53:04.285403"], ["updated_at", "2019-08-22 07:53:04.285403"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 140], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 140], ["auditable_type", "Edge"], ["associated_id", 541], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 541\nto_node_id: 542\n"], ["version", 1], ["request_uuid", "34e05f7d-9e80-416f-9f1b-3b700d73adc3"], ["created_at", "2019-08-22 07:53:04.290608"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:04.319306"], ["updated_at", "2019-08-22 07:53:04.319306"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 341]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 341], ["created_at", "2019-08-22 07:53:04.330558"], ["updated_at", "2019-08-22 07:53:04.330558"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 543], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 543], ["auditable_type", "Node"], ["associated_id", 341], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 341\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ce59abcf-d082-4ce7-9b92-6a7545ce4c3e"], ["created_at", "2019-08-22 07:53:04.340014"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:04.368114"], ["updated_at", "2019-08-22 07:53:04.368114"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 342], ["created_at", "2019-08-22 07:53:04.380027"], ["updated_at", "2019-08-22 07:53:04.380027"], ["type", "InputNode"]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 544], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 544], ["auditable_type", "Node"], ["associated_id", 342], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 342\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4a4063a4-b8ea-4538-8593-1b3f94b13f7d"], ["created_at", "2019-08-22 07:53:04.386022"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:04.409170"], ["updated_at", "2019-08-22 07:53:04.409170"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 343], ["created_at", "2019-08-22 07:53:04.415296"], ["updated_at", "2019-08-22 07:53:04.415296"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 545], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 545], ["auditable_type", "Node"], ["associated_id", 343], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 343\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0714f21f-665a-471b-a979-664b06e38595"], ["created_at", "2019-08-22 07:53:04.420602"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 07:53:04.434055"], ["updated_at", "2019-08-22 07:53:04.434055"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 344]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 344], ["created_at", "2019-08-22 07:53:04.443196"], ["updated_at", "2019-08-22 07:53:04.443196"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 546], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 546], ["auditable_type", "Node"], ["associated_id", 344], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 344\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "df6f724f-2086-4d61-87cf-e9ac9326bcda"], ["created_at", "2019-08-22 07:53:04.448210"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:04.469497"], ["updated_at", "2019-08-22 07:53:04.469497"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 345], ["created_at", "2019-08-22 07:53:04.477428"], ["updated_at", "2019-08-22 07:53:04.477428"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 547], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 547], ["auditable_type", "Node"], ["associated_id", 345], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 345\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "99caeb3a-720e-44e4-873c-05f2a7f52a4a"], ["created_at", "2019-08-22 07:53:04.482945"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 345]]
  [1m[36mOutputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 345], ["created_at", "2019-08-22 07:53:04.517602"], ["updated_at", "2019-08-22 07:53:04.517602"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 548], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 548], ["auditable_type", "Node"], ["associated_id", 345], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 345\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "dc3236e8-00ea-41f4-b853-1e70c486141a"], ["created_at", "2019-08-22 07:53:04.531867"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 547], ["to_node_id", 548], ["created_at", "2019-08-22 07:53:04.553583"], ["updated_at", "2019-08-22 07:53:04.553583"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 141], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 141], ["auditable_type", "Edge"], ["associated_id", 547], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 547\nto_node_id: 548\n"], ["version", 1], ["request_uuid", "02ab7c12-e342-4c58-97fd-92918e6e99af"], ["created_at", "2019-08-22 07:53:04.560063"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 141], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 141], ["auditable_type", "Edge"], ["associated_id", 547], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 547\nto_node_id: 548\n"], ["version", 2], ["request_uuid", "587abcb5-2358-4df3-8e0b-98bb6d512873"], ["created_at", "2019-08-22 07:53:04.575649"]]
  [1m[36mEdge Destroy (5.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 141]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 07:53:04.670987"], ["updated_at", "2019-08-22 07:53:04.670987"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 346], ["created_at", "2019-08-22 07:53:04.673903"], ["updated_at", "2019-08-22 07:53:04.673903"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 549], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 549], ["auditable_type", "Node"], ["associated_id", 346], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 346\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b767bff8-81d8-48e7-b624-cb9058f7975d"], ["created_at", "2019-08-22 07:53:04.680253"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_graph_if_save_all_is_successful
------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:25.473830"], ["updated_at", "2019-08-22 07:53:25.473830"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/347/save_all" for 127.0.0.1 at 2019-08-22 07:53:25 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"347", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"8532e7e4-1f12-4130-b6d8-ef62762f5e89"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"bde8d114-3dce-40d8-9bef-0ca81da115dd"}], "id"=>"347"}
  [1m[36mGraph Load (3.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 347], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.2ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 07:53:25.686710"], ["id", 347]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 347], ["created_at", "2019-08-22 07:53:25.822236"], ["updated_at", "2019-08-22 07:53:25.822236"], ["type", "InputNode"]]
  [1m[35m (17.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 550], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 550], ["auditable_type", "Node"], ["associated_id", 347], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 347\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "b5b32ebc-27c8-4c6c-a442-33218aa8ed33"], ["created_at", "2019-08-22 07:53:25.888556"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 347]]
  [1m[36mOutputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 347], ["created_at", "2019-08-22 07:53:25.963817"], ["updated_at", "2019-08-22 07:53:25.963817"], ["type", "OutputNode"]]
  [1m[35m (9.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 551], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 551], ["auditable_type", "Node"], ["associated_id", 347], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 347\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "b5b32ebc-27c8-4c6c-a442-33218aa8ed33"], ["created_at", "2019-08-22 07:53:25.973913"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 347], ["LIMIT", 1]]
  [1m[36mNode Load (9.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 347]]
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 347], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 347]]
  [1m[36mEdge Load (14.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 347]]
  [1m[36mEdge Load (6.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 347]]
Completed 200 OK in 435ms (Views: 1.1ms | ActiveRecord: 142.4ms)
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:26.102134"], ["updated_at", "2019-08-22 07:53:26.102134"]]
  [1m[36mInputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 348], ["created_at", "2019-08-22 07:53:26.106109"], ["updated_at", "2019-08-22 07:53:26.106109"], ["type", "InputNode"]]
  [1m[35m (8.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 552], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 552], ["auditable_type", "Node"], ["associated_id", 348], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 348\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "287bf463-3d02-4ea1-bad6-2044233841e0"], ["created_at", "2019-08-22 07:53:26.120294"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 348], ["created_at", "2019-08-22 07:53:26.138101"], ["updated_at", "2019-08-22 07:53:26.138101"], ["type", "OutputNode"]]
  [1m[35m (9.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 553], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 553], ["auditable_type", "Node"], ["associated_id", 348], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 348\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4cf07f87-153a-4f47-8748-5a296ff14b00"], ["created_at", "2019-08-22 07:53:26.145418"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 348], ["created_at", "2019-08-22 07:53:26.164368"], ["updated_at", "2019-08-22 07:53:26.164368"], ["type", "InputNode"]]
  [1m[35m (9.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 554], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 554], ["auditable_type", "Node"], ["associated_id", 348], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 348\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5daae55f-a498-4c22-94e6-66c245bc9b8c"], ["created_at", "2019-08-22 07:53:26.171639"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 348], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 552], ["to_node_id", 553], ["created_at", "2019-08-22 07:53:26.211501"], ["updated_at", "2019-08-22 07:53:26.211501"]]
  [1m[35m (9.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 142], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 142], ["auditable_type", "Edge"], ["associated_id", 552], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 552\nto_node_id: 553\n"], ["version", 1], ["request_uuid", "927a1f63-ee11-4426-99af-b94c7461991a"], ["created_at", "2019-08-22 07:53:26.220380"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 142], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 142], ["auditable_type", "Edge"], ["associated_id", 552], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 553\n- 554\n"], ["version", 2], ["request_uuid", "b1e5df78-18a4-4903-8edf-69680cf5f20e"], ["created_at", "2019-08-22 07:53:26.242340"]]
  [1m[36mEdge Update (3.7ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 554], ["updated_at", "2019-08-22 07:53:26.239715"], ["id", 142]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (8.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 348]]
  [1m[36mEdge Load (8.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 348]]
  [1m[36mAudited::Audit Load (5.1ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 348], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (5.4ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 142], ["auditable_type", "Edge"]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 552], ["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 553], ["LIMIT", 1]]
  [1m[36mEdge Update (4.0ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 553], ["updated_at", "2019-08-22 07:53:26.311780"], ["id", 142]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (4.9ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 833]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 348], ["LIMIT", 1]]
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 142], ["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 553], ["LIMIT", 1]]
  [1m[36mEdge Load (7.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 348]]
  [1m[36mEdge Load (7.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 348]]
  [1m[36mAudited::Audit Load (3.9ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 348], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.8ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 142], ["auditable_type", "Edge"]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 552], ["LIMIT", 1]]
  [1m[36mEdge Destroy (2.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 142]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.8ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 832]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 348], ["LIMIT", 1]]
  [1m[36mEdge Load (8.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 348]]
  [1m[36mEdge Load (9.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 348]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:26.462303"], ["updated_at", "2019-08-22 07:53:26.462303"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 349], ["created_at", "2019-08-22 07:53:26.467581"], ["updated_at", "2019-08-22 07:53:26.467581"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 555], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 555], ["auditable_type", "Node"], ["associated_id", 349], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 349\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c93d0b4f-4dd2-4711-8f75-f99e2d64bb51"], ["created_at", "2019-08-22 07:53:26.474658"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 349]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 349], ["created_at", "2019-08-22 07:53:26.491818"], ["updated_at", "2019-08-22 07:53:26.491818"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 556], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 556], ["auditable_type", "Node"], ["associated_id", 349], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 349\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ea7fcee0-251a-454c-8c3e-0f7e35e4adc5"], ["created_at", "2019-08-22 07:53:26.495642"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 555], ["to_node_id", 556], ["created_at", "2019-08-22 07:53:26.503039"], ["updated_at", "2019-08-22 07:53:26.503039"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 143], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 143], ["auditable_type", "Edge"], ["associated_id", 555], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 555\nto_node_id: 556\n"], ["version", 1], ["request_uuid", "dc1b997b-b6a3-4c3f-b628-329634c2ab48"], ["created_at", "2019-08-22 07:53:26.507156"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 143], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 143], ["auditable_type", "Edge"], ["associated_id", 555], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 555\nto_node_id: 556\n"], ["version", 2], ["request_uuid", "47da56d3-ab40-4ca1-9d24-93ae7d8d48ba"], ["created_at", "2019-08-22 07:53:26.515963"]]
  [1m[36mEdge Destroy (4.2ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 143]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:26.539461"], ["updated_at", "2019-08-22 07:53:26.539461"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 350]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 350], ["created_at", "2019-08-22 07:53:26.549063"], ["updated_at", "2019-08-22 07:53:26.549063"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 557], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 557], ["auditable_type", "Node"], ["associated_id", 350], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 350\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "fd11dd86-caec-49f3-b27f-8635ec0e31c0"], ["created_at", "2019-08-22 07:53:26.553623"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:26.577556"], ["updated_at", "2019-08-22 07:53:26.577556"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 351], ["created_at", "2019-08-22 07:53:26.583893"], ["updated_at", "2019-08-22 07:53:26.583893"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 558], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 558], ["auditable_type", "Node"], ["associated_id", 351], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 351\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e2fcb1c3-eae7-45f9-95a7-b079803f3469"], ["created_at", "2019-08-22 07:53:26.592132"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:26.613542"], ["updated_at", "2019-08-22 07:53:26.613542"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 352], ["created_at", "2019-08-22 07:53:26.618848"], ["updated_at", "2019-08-22 07:53:26.618848"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 559], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 559], ["auditable_type", "Node"], ["associated_id", 352], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 352\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "11f6004a-eaab-4550-bb36-c76791d03e73"], ["created_at", "2019-08-22 07:53:26.623236"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 07:53:26.635082"], ["updated_at", "2019-08-22 07:53:26.635082"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 353]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 353], ["created_at", "2019-08-22 07:53:26.648501"], ["updated_at", "2019-08-22 07:53:26.648501"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 560], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 560], ["auditable_type", "Node"], ["associated_id", 353], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 353\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "90591016-d7bc-4a48-9f9c-70f545e40925"], ["created_at", "2019-08-22 07:53:26.653104"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:26.672372"], ["updated_at", "2019-08-22 07:53:26.672372"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 354], ["created_at", "2019-08-22 07:53:26.680675"], ["updated_at", "2019-08-22 07:53:26.680675"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 561], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 561], ["auditable_type", "Node"], ["associated_id", 354], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 354\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e475c03e-7d17-4719-b9fd-bf0fbf5f1942"], ["created_at", "2019-08-22 07:53:26.686958"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 354]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 354], ["created_at", "2019-08-22 07:53:26.699250"], ["updated_at", "2019-08-22 07:53:26.699250"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 562], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 562], ["auditable_type", "Node"], ["associated_id", 354], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 354\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bc3c48d7-2f54-4931-819d-c1764aed409f"], ["created_at", "2019-08-22 07:53:26.703711"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 561], ["to_node_id", 562], ["created_at", "2019-08-22 07:53:26.712145"], ["updated_at", "2019-08-22 07:53:26.712145"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 144], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 144], ["auditable_type", "Edge"], ["associated_id", 561], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 561\nto_node_id: 562\n"], ["version", 1], ["request_uuid", "3736f285-4223-4150-aa82-5c126f9d4215"], ["created_at", "2019-08-22 07:53:26.716294"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:26.731058"], ["updated_at", "2019-08-22 07:53:26.731058"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 355], ["created_at", "2019-08-22 07:53:26.738410"], ["updated_at", "2019-08-22 07:53:26.738410"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 563], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 563], ["auditable_type", "Node"], ["associated_id", 355], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 355\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1863ab1d-c3e3-484b-8cd4-3c982a1b6fc7"], ["created_at", "2019-08-22 07:53:26.746086"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 355]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 355], ["created_at", "2019-08-22 07:53:26.758931"], ["updated_at", "2019-08-22 07:53:26.758931"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 564], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 564], ["auditable_type", "Node"], ["associated_id", 355], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 355\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7893e231-0fa1-4f61-adb1-fa933b5ff2b1"], ["created_at", "2019-08-22 07:53:26.763420"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 355], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 355]]
  [1m[36mEdge Load (9.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 355]]
  [1m[36mEdge Load (8.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 355]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 355], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 563], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 355], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 563], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 563], ["auditable_type", "Node"], ["associated_id", 355], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "32fb0a36-cc0a-4e2e-a19d-dbbd651926b3"], ["created_at", "2019-08-22 07:53:26.813853"]]
  [1m[36mInputNode Update (2.8ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:53:26.811645"], ["id", 563]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 564], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 355], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 355]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 355]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 355], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 355]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 355], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 355]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 563], ["to_node_id", 564], ["created_at", "2019-08-22 07:53:26.861089"], ["updated_at", "2019-08-22 07:53:26.861089"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 145], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 145], ["auditable_type", "Edge"], ["associated_id", 563], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 563\nto_node_id: 564\n"], ["version", 1], ["request_uuid", "9e90ff9b-bf67-40b1-a795-6f9d1d90752b"], ["created_at", "2019-08-22 07:53:26.865429"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 563], ["to_node_id", 564], ["created_at", "2019-08-22 07:53:26.873911"], ["updated_at", "2019-08-22 07:53:26.873911"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:26.886546"], ["updated_at", "2019-08-22 07:53:26.886546"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 356], ["created_at", "2019-08-22 07:53:26.891894"], ["updated_at", "2019-08-22 07:53:26.891894"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 565], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 565], ["auditable_type", "Node"], ["associated_id", 356], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 356\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1799a0fc-af7f-42fa-86cf-74c851fd05af"], ["created_at", "2019-08-22 07:53:26.896258"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 356], ["created_at", "2019-08-22 07:53:26.912555"], ["updated_at", "2019-08-22 07:53:26.912555"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 566], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 566], ["auditable_type", "Node"], ["associated_id", 356], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 356\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cd50134c-f1f7-4b03-83c5-4b99f9371dcb"], ["created_at", "2019-08-22 07:53:26.921528"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[36mEdge Load (7.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[36mEdge Load (6.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 565], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 565], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 565], ["auditable_type", "Node"], ["associated_id", 356], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "c75fbf27-aa90-4601-bc1f-10afc6684dee"], ["created_at", "2019-08-22 07:53:26.965848"]]
  [1m[36mInputNode Update (5.0ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:53:26.963030"], ["id", 565]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 566], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[36mEdge Load (4.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[36mEdge Load (3.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 565], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 566], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 565], ["to_node_id", 566], ["created_at", "2019-08-22 07:53:27.072626"], ["updated_at", "2019-08-22 07:53:27.072626"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 147], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 147], ["auditable_type", "Edge"], ["associated_id", 565], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 565\nto_node_id: 566\n"], ["version", 1], ["request_uuid", "bb38ed7f-47e7-401d-8e5b-e78f91db215b"], ["created_at", "2019-08-22 07:53:27.077387"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 356]]
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 565], ["LIMIT", 1]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (5.0ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 566], ["LIMIT", 1]]
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (1.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:27.134350"], ["updated_at", "2019-08-22 07:53:27.134350"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 357], ["LIMIT", 1]]
  [1m[36mEdge Load (1.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 357]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 357]]
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:27.163034"], ["updated_at", "2019-08-22 07:53:27.163034"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 358], ["created_at", "2019-08-22 07:53:27.169465"], ["updated_at", "2019-08-22 07:53:27.169465"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 567], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 567], ["auditable_type", "Node"], ["associated_id", 358], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 358\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3eb30b26-a954-422f-8705-5da22d67e603"], ["created_at", "2019-08-22 07:53:27.176114"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 358]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 358], ["created_at", "2019-08-22 07:53:27.189517"], ["updated_at", "2019-08-22 07:53:27.189517"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 568], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 568], ["auditable_type", "Node"], ["associated_id", 358], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 358\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d1fd461f-f594-45be-98d5-f9c06b6976b2"], ["created_at", "2019-08-22 07:53:27.193597"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 358], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 358]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 567], ["to_node_id", 568], ["created_at", "2019-08-22 07:53:27.205548"], ["updated_at", "2019-08-22 07:53:27.205548"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 148], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 148], ["auditable_type", "Edge"], ["associated_id", 567], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 567\nto_node_id: 568\n"], ["version", 1], ["request_uuid", "58a3f32a-7258-4517-a97c-519d26285a6f"], ["created_at", "2019-08-22 07:53:27.209053"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 358]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 358]]
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:27.239568"], ["updated_at", "2019-08-22 07:53:27.239568"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 359], ["created_at", "2019-08-22 07:53:27.244644"], ["updated_at", "2019-08-22 07:53:27.244644"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 569], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 569], ["auditable_type", "Node"], ["associated_id", 359], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 359\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a298cb63-7164-45fd-8288-d3b11e4b7350"], ["created_at", "2019-08-22 07:53:27.248993"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 359]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 359], ["created_at", "2019-08-22 07:53:27.265185"], ["updated_at", "2019-08-22 07:53:27.265185"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 570], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 570], ["auditable_type", "Node"], ["associated_id", 359], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 359\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "fc0ed0c7-93a7-40db-9e8f-6db185daa40d"], ["created_at", "2019-08-22 07:53:27.272238"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 359], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 359]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 359]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 359]]
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 359], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 570], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 359], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 359]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 359]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 359], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 359]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 359], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 359]]
  [1m[36mNode Destroy (2.7ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 569]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 359]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 359]]
  [1m[35m (7.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 359]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:27.354016"], ["updated_at", "2019-08-22 07:53:27.354016"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 360], ["created_at", "2019-08-22 07:53:27.359630"], ["updated_at", "2019-08-22 07:53:27.359630"], ["type", "InputNode"]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 571], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 571], ["auditable_type", "Node"], ["associated_id", 360], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 360\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "84cd844c-7802-40ee-815e-733553ff8298"], ["created_at", "2019-08-22 07:53:27.366242"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 360], ["created_at", "2019-08-22 07:53:27.382509"], ["updated_at", "2019-08-22 07:53:27.382509"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 572], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 572], ["auditable_type", "Node"], ["associated_id", 360], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 360\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4f06cef1-c1a7-48ca-a529-ee40ffb3a053"], ["created_at", "2019-08-22 07:53:27.387012"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 571], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 571], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 571], ["auditable_type", "Node"], ["associated_id", 360], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "57674390-bec3-4699-86d0-f204d8a44a07"], ["created_at", "2019-08-22 07:53:27.421027"]]
  [1m[36mInputNode Update (3.4ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:53:27.418961"], ["id", 571]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 572], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 571], ["to_node_id", 572], ["created_at", "2019-08-22 07:53:27.464491"], ["updated_at", "2019-08-22 07:53:27.464491"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 149], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 149], ["auditable_type", "Edge"], ["associated_id", 571], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 571\nto_node_id: 572\n"], ["version", 1], ["request_uuid", "bc3d0d93-423d-43c4-90f7-266c8549c07e"], ["created_at", "2019-08-22 07:53:27.470427"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 571], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 572], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 360]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 571], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 149], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 149], ["auditable_type", "Edge"], ["associated_id", 571], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 571\nto_node_id: 572\n"], ["version", 2], ["request_uuid", "f794cea2-e501-4b3d-99e4-9b756358217e"], ["created_at", "2019-08-22 07:53:27.544646"]]
  [1m[36mEdge Destroy (3.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 149]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (5.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:27.579990"], ["updated_at", "2019-08-22 07:53:27.579990"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 361], ["created_at", "2019-08-22 07:53:27.587743"], ["updated_at", "2019-08-22 07:53:27.587743"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 573], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 573], ["auditable_type", "Node"], ["associated_id", 361], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 361\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a43a0dfd-a916-41ae-96b2-fb8cdf18f20a"], ["created_at", "2019-08-22 07:53:27.592694"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 361]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 361], ["created_at", "2019-08-22 07:53:27.604172"], ["updated_at", "2019-08-22 07:53:27.604172"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 574], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 574], ["auditable_type", "Node"], ["associated_id", 361], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 361\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5d83ba03-afa4-4082-9b25-d46a1a64160a"], ["created_at", "2019-08-22 07:53:27.608518"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 361], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 361]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 361]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 361]]
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:27.641160"], ["updated_at", "2019-08-22 07:53:27.641160"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 362], ["created_at", "2019-08-22 07:53:27.646474"], ["updated_at", "2019-08-22 07:53:27.646474"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 575], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 575], ["auditable_type", "Node"], ["associated_id", 362], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 362\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4da1cec8-cd62-4b48-bc6e-c0b3ed6180f1"], ["created_at", "2019-08-22 07:53:27.650890"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 362]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 362], ["created_at", "2019-08-22 07:53:27.666237"], ["updated_at", "2019-08-22 07:53:27.666237"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 576], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 576], ["auditable_type", "Node"], ["associated_id", 362], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 362\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bddb3edc-de9e-4d22-910c-a01106815de6"], ["created_at", "2019-08-22 07:53:27.672026"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 362], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 362]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 362]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 362]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 362], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 575], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 362], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 575], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 575], ["auditable_type", "Node"], ["associated_id", 362], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "027dd4a3-4149-40c5-9566-a4283ffc3d08"], ["created_at", "2019-08-22 07:53:27.703563"]]
  [1m[36mInputNode Update (2.8ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 07:53:27.701435"], ["id", 575]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 576], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 362], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 362]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 362]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 362], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 362]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 362], ["LIMIT", 1]]
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 362]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 362]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 362]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 07:53:27.770264"], ["updated_at", "2019-08-22 07:53:27.770264"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 363], ["created_at", "2019-08-22 07:53:27.774320"], ["updated_at", "2019-08-22 07:53:27.774320"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 577], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 577], ["auditable_type", "Node"], ["associated_id", 363], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 363\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "01c8f90f-327f-4dc2-a25d-d9acb6b9af59"], ["created_at", "2019-08-22 07:53:27.782215"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:27.806401"], ["updated_at", "2019-08-22 07:53:27.806401"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 364], ["created_at", "2019-08-22 07:53:27.811530"], ["updated_at", "2019-08-22 07:53:27.811530"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 578], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 578], ["auditable_type", "Node"], ["associated_id", 364], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 364\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d3c7aba5-b4ce-4cc7-84dd-a77503b3f208"], ["created_at", "2019-08-22 07:53:27.816822"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 364]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 364], ["created_at", "2019-08-22 07:53:27.831179"], ["updated_at", "2019-08-22 07:53:27.831179"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 579], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 579], ["auditable_type", "Node"], ["associated_id", 364], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 364\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "251e0262-a9eb-446d-8ea8-51ef4a7d1c18"], ["created_at", "2019-08-22 07:53:27.835871"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 578], ["to_node_id", 579], ["created_at", "2019-08-22 07:53:27.843966"], ["updated_at", "2019-08-22 07:53:27.843966"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 150], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 150], ["auditable_type", "Edge"], ["associated_id", 578], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 578\nto_node_id: 579\n"], ["version", 1], ["request_uuid", "ca6d2672-2cfb-49b9-aafa-743e5da01658"], ["created_at", "2019-08-22 07:53:27.847888"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 578]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 150], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 150], ["auditable_type", "Edge"], ["associated_id", 578], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 578\nto_node_id: 579\n"], ["version", 2], ["request_uuid", "dcc99124-29fb-4a85-896f-be9f3553bb2d"], ["created_at", "2019-08-22 07:53:27.869567"]]
  [1m[36mEdge Destroy (3.4ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 150]]
  [1m[36mEdge Load (3.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 578]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 578], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 578], ["auditable_type", "Node"], ["associated_id", 364], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 364\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "9d16cd91-98b8-4bbd-a49b-9a2138cd0385"], ["created_at", "2019-08-22 07:53:27.886471"]]
  [1m[36mInputNode Destroy (3.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 578]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:27.908576"], ["updated_at", "2019-08-22 07:53:27.908576"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 365], ["created_at", "2019-08-22 07:53:27.915103"], ["updated_at", "2019-08-22 07:53:27.915103"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 580], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 580], ["auditable_type", "Node"], ["associated_id", 365], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 365\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3c465f6a-892e-4e81-9a05-8e21858688ca"], ["created_at", "2019-08-22 07:53:27.919876"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 07:53:27.951915"], ["updated_at", "2019-08-22 07:53:27.951915"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 366], ["created_at", "2019-08-22 07:53:27.961038"], ["updated_at", "2019-08-22 07:53:27.961038"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 581], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 581], ["auditable_type", "Node"], ["associated_id", 366], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 366\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0baa5071-f734-4173-84c9-e40869a18f97"], ["created_at", "2019-08-22 07:53:27.964828"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 366]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 366], ["created_at", "2019-08-22 07:53:27.979135"], ["updated_at", "2019-08-22 07:53:27.979135"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 582], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 582], ["auditable_type", "Node"], ["associated_id", 366], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 366\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d24a8c25-665e-434c-9d4b-279426dd3f71"], ["created_at", "2019-08-22 07:53:27.983513"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 581], ["to_node_id", 582], ["created_at", "2019-08-22 07:53:27.993639"], ["updated_at", "2019-08-22 07:53:27.993639"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 151], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 151], ["auditable_type", "Edge"], ["associated_id", 581], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 581\nto_node_id: 582\n"], ["version", 1], ["request_uuid", "1c7117f0-80dc-40cd-bdbe-34aae3533a42"], ["created_at", "2019-08-22 07:53:27.997391"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 582]]
  [1m[36mEdge Load (4.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 582]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 581], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 151], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 151], ["auditable_type", "Edge"], ["associated_id", 581], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 581\nto_node_id: 582\n"], ["version", 2], ["request_uuid", "38fc8858-b301-44eb-bc17-574bd3b09bde"], ["created_at", "2019-08-22 07:53:28.024376"]]
  [1m[36mEdge Destroy (3.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 151]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 582], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 582], ["auditable_type", "Node"], ["associated_id", 366], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 366\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "790c34b9-94b1-4494-81b0-f9a5d0f3f2b9"], ["created_at", "2019-08-22 07:53:28.035679"]]
  [1m[36mOutputNode Destroy (2.7ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 582]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (645.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "myapp_test"[0m
  [1m[35m (3082.8ms)[0m  [1m[35mCREATE DATABASE "myapp_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "audits" CASCADE[0m
  [1m[35m (123.3ms)[0m  [1m[35mCREATE TABLE "audits" ("id" bigserial primary key, "auditable_id" integer, "auditable_type" character varying, "associated_id" integer, "associated_type" character varying, "user_id" integer, "user_type" character varying, "username" character varying, "action" character varying, "audited_changes" text, "version" integer DEFAULT 0, "comment" character varying, "remote_address" character varying, "request_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (12.7ms)[0m  [1m[35mCREATE  INDEX  "associated_index" ON "audits"  ("associated_type", "associated_id")[0m
  [1m[35m (13.6ms)[0m  [1m[35mCREATE  INDEX  "auditable_index" ON "audits"  ("auditable_type", "auditable_id", "version")[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_created_at" ON "audits"  ("created_at")[0m
  [1m[35m (15.1ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_request_uuid" ON "audits"  ("request_uuid")[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE  INDEX  "user_index" ON "audits"  ("user_id", "user_type")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "edges" CASCADE[0m
  [1m[35m (22.4ms)[0m  [1m[35mCREATE TABLE "edges" ("id" bigserial primary key, "from_node_id" bigint, "to_node_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_edges_on_from_node_id_and_to_node_id" ON "edges"  ("from_node_id", "to_node_id")[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_from_node_id" ON "edges"  ("from_node_id")[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_to_node_id" ON "edges"  ("to_node_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "graphs" CASCADE[0m
  [1m[35m (46.2ms)[0m  [1m[35mCREATE TABLE "graphs" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "type" character varying)[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "node_counts" CASCADE[0m
  [1m[35m (23.1ms)[0m  [1m[35mCREATE TABLE "node_counts" ("id" bigserial primary key, "count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "nodes" CASCADE[0m
  [1m[35m (53.1ms)[0m  [1m[35mCREATE TABLE "nodes" ("id" bigserial primary key, "name" character varying, "graph_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "content" json, "x" float DEFAULT 0.0, "y" float DEFAULT 0.0, "type" character varying NOT NULL, "node_ref_id" bigint)[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_graph_id" ON "nodes"  ("graph_id")[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_node_ref_id" ON "nodes"  ("node_ref_id")[0m
  [1m[35m (28.4ms)[0m  [1m[35mALTER TABLE "nodes" ADD CONSTRAINT "fk_rails_10f83f4418"
FOREIGN KEY ("graph_id")
  REFERENCES "graphs" ("id")
[0m
  [1m[35m (30.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (5.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20190822055108)[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20190430113529),
(20190724110012),
(20190411085042),
(20190523112235),
(20190514095100),
(20190514093514),
(20190801105126),
(20190806132227),
(20190724105907),
(20190429092701),
(20190411113011),
(20190411100036);

[0m
  [1m[35m (36.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (5.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (5.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-08-22 08:48:15.968990"], ["updated_at", "2019-08-22 08:48:15.968990"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (6.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 08:48:16.360010"], ["updated_at", "2019-08-22 08:48:16.360010"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (10.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 1], ["created_at", "2019-08-22 08:48:16.369168"], ["updated_at", "2019-08-22 08:48:16.369168"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (16.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (12.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Node"], ["associated_id", 1], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 1\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3337bc32-55ac-4b20-99da-0dd49adf2688"], ["created_at", "2019-08-22 08:48:16.411278"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:16.471293"], ["updated_at", "2019-08-22 08:48:16.471293"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 2], ["created_at", "2019-08-22 08:48:16.476501"], ["updated_at", "2019-08-22 08:48:16.476501"], ["type", "InputNode"]]
  [1m[35m (7.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Node"], ["associated_id", 2], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 2\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b7adb21d-9eb3-4898-9dd4-213714df4ded"], ["created_at", "2019-08-22 08:48:16.484233"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[36mOutputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 2], ["created_at", "2019-08-22 08:48:16.522686"], ["updated_at", "2019-08-22 08:48:16.522686"], ["type", "OutputNode"]]
  [1m[35m (6.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Node"], ["associated_id", 2], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 2\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ac21c50b-7573-4636-ab51-3d5ce3c4a70c"], ["created_at", "2019-08-22 08:48:16.532702"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (15.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 2], ["to_node_id", 3], ["created_at", "2019-08-22 08:48:16.574283"], ["updated_at", "2019-08-22 08:48:16.574283"]]
  [1m[35m (6.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Edge"], ["associated_id", 2], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 2\nto_node_id: 3\n"], ["version", 1], ["request_uuid", "2af3ba56-6c2b-402e-b45b-ab46897649ec"], ["created_at", "2019-08-22 08:48:16.594041"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:16.612932"], ["updated_at", "2019-08-22 08:48:16.612932"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 3]]
  [1m[36mOutputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 3], ["created_at", "2019-08-22 08:48:16.623818"], ["updated_at", "2019-08-22 08:48:16.623818"], ["type", "OutputNode"]]
  [1m[35m (6.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Node"], ["associated_id", 3], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 3\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "27108814-0ea9-4669-a036-98232c0c5580"], ["created_at", "2019-08-22 08:48:16.631919"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:16.669697"], ["updated_at", "2019-08-22 08:48:16.669697"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 4], ["created_at", "2019-08-22 08:48:16.676107"], ["updated_at", "2019-08-22 08:48:16.676107"], ["type", "InputNode"]]
  [1m[35m (6.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Node"], ["associated_id", 4], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 4\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "36a9660f-d71c-48ec-8a11-39eccfab203e"], ["created_at", "2019-08-22 08:48:16.683511"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:16.705402"], ["updated_at", "2019-08-22 08:48:16.705402"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 5], ["created_at", "2019-08-22 08:48:16.718250"], ["updated_at", "2019-08-22 08:48:16.718250"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 6], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 6], ["auditable_type", "Node"], ["associated_id", 5], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 5\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0d348046-1c4f-4e84-95b6-5af88f394a74"], ["created_at", "2019-08-22 08:48:16.726107"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 5]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 5], ["created_at", "2019-08-22 08:48:16.738409"], ["updated_at", "2019-08-22 08:48:16.738409"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Node"], ["associated_id", 5], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 5\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "205a4ef3-017e-44ea-82c4-10195a774a2c"], ["created_at", "2019-08-22 08:48:16.742769"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 6], ["to_node_id", 7], ["created_at", "2019-08-22 08:48:16.750380"], ["updated_at", "2019-08-22 08:48:16.750380"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Edge"], ["associated_id", 6], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 6\nto_node_id: 7\n"], ["version", 1], ["request_uuid", "53a0d46a-6da6-4291-8205-497112540bb2"], ["created_at", "2019-08-22 08:48:16.754203"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Edge"], ["associated_id", 6], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 6\nto_node_id: 7\n"], ["version", 2], ["request_uuid", "457e1671-ac12-4413-9fb6-cd2a0f0d67fe"], ["created_at", "2019-08-22 08:48:16.762586"]]
  [1m[36mEdge Destroy (3.2ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:16.798678"], ["updated_at", "2019-08-22 08:48:16.798678"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 6], ["created_at", "2019-08-22 08:48:16.804181"], ["updated_at", "2019-08-22 08:48:16.804181"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Node"], ["associated_id", 6], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 6\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b987d9ba-e61a-4d99-92d3-4d13034db546"], ["created_at", "2019-08-22 08:48:16.811259"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 08:48:16.822354"], ["updated_at", "2019-08-22 08:48:16.822354"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 7]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 7], ["created_at", "2019-08-22 08:48:16.832552"], ["updated_at", "2019-08-22 08:48:16.832552"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Node"], ["associated_id", 7], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 7\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e941058b-29aa-4d03-bf86-d68744928586"], ["created_at", "2019-08-22 08:48:16.837794"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:16.858363"], ["updated_at", "2019-08-22 08:48:16.858363"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 8], ["created_at", "2019-08-22 08:48:16.866148"], ["updated_at", "2019-08-22 08:48:16.866148"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 8\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "491d76f3-0948-441a-9dd1-29bcf929ba0d"], ["created_at", "2019-08-22 08:48:16.872695"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 8], ["created_at", "2019-08-22 08:48:16.887375"], ["updated_at", "2019-08-22 08:48:16.887375"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 8\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "15fe7696-48cf-4fa6-934f-38a7eec975d2"], ["created_at", "2019-08-22 08:48:16.892956"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 10], ["to_node_id", 11], ["created_at", "2019-08-22 08:48:16.901753"], ["updated_at", "2019-08-22 08:48:16.901753"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Edge"], ["associated_id", 10], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 10\nto_node_id: 11\n"], ["version", 1], ["request_uuid", "2502f608-b2fb-492a-b874-94ff0ab0e612"], ["created_at", "2019-08-22 08:48:16.907277"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 10]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Edge"], ["associated_id", 10], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 10\nto_node_id: 11\n"], ["version", 2], ["request_uuid", "261bf6da-ad3e-45e1-8a74-0adca0e4b0cb"], ["created_at", "2019-08-22 08:48:16.930123"]]
  [1m[36mEdge Destroy (3.1ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 3]]
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 10]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 8\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "0f1eae5d-0eaf-4005-91a7-08629fe5b3c3"], ["created_at", "2019-08-22 08:48:16.947711"]]
  [1m[36mInputNode Destroy (2.7ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 10]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:16.973956"], ["updated_at", "2019-08-22 08:48:16.973956"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 9], ["created_at", "2019-08-22 08:48:16.982632"], ["updated_at", "2019-08-22 08:48:16.982632"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Node"], ["associated_id", 9], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 9\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "90043643-5652-4b15-8d27-48453f1a1c4e"], ["created_at", "2019-08-22 08:48:16.987679"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 9]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 9], ["created_at", "2019-08-22 08:48:17.002124"], ["updated_at", "2019-08-22 08:48:17.002124"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Node"], ["associated_id", 9], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 9\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3932286c-ad49-4bf5-bcbe-72cafeb6b07a"], ["created_at", "2019-08-22 08:48:17.007610"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 12], ["to_node_id", 13], ["created_at", "2019-08-22 08:48:17.017072"], ["updated_at", "2019-08-22 08:48:17.017072"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Edge"], ["associated_id", 12], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 12\nto_node_id: 13\n"], ["version", 1], ["request_uuid", "76730554-45b1-46e1-873b-123caa14b49c"], ["created_at", "2019-08-22 08:48:17.022153"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 13]]
  [1m[36mEdge Load (4.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 13]]
  [1m[36mNode Load (7.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Edge"], ["associated_id", 12], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 12\nto_node_id: 13\n"], ["version", 2], ["request_uuid", "a98f5746-bcfc-4ea0-8c6b-431ebc66c368"], ["created_at", "2019-08-22 08:48:17.069094"]]
  [1m[36mEdge Destroy (3.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Node"], ["associated_id", 9], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 9\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "098ddaff-7855-4eb1-a714-2246b3771834"], ["created_at", "2019-08-22 08:48:17.084615"]]
  [1m[36mOutputNode Destroy (3.0ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 13]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:17.116195"], ["updated_at", "2019-08-22 08:48:17.116195"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 10], ["created_at", "2019-08-22 08:48:17.121374"], ["updated_at", "2019-08-22 08:48:17.121374"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Node"], ["associated_id", 10], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 10\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4641f177-aae4-4320-98f1-4a157e7abddd"], ["created_at", "2019-08-22 08:48:17.126632"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_graph_if_save_all_is_successful
------------------------------------------------------------------------
  [1m[35m (3.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:17.221299"], ["updated_at", "2019-08-22 08:48:17.221299"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/11/save_all" for 127.0.0.1 at 2019-08-22 08:48:17 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"11", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "client_id"=>"069fdf66-c7a8-4533-be53-37fd88b17fad"}, {"name"=>"Node 2", "type"=>"OutputNode", "client_id"=>"7aef02e8-e322-4a86-9701-7725e38eac49"}], "id"=>"11"}
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (2.3ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 08:48:17.300856"], ["id", 11]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 35ms (ActiveRecord: 5.6ms)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:17.334506"], ["updated_at", "2019-08-22 08:48:17.334506"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 12], ["created_at", "2019-08-22 08:48:17.339992"], ["updated_at", "2019-08-22 08:48:17.339992"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Node"], ["associated_id", 12], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 12\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "849cc0b5-b010-42f9-8524-b12f176f432b"], ["created_at", "2019-08-22 08:48:17.343986"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 12], ["created_at", "2019-08-22 08:48:17.358059"], ["updated_at", "2019-08-22 08:48:17.358059"], ["type", "OutputNode"]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Node"], ["associated_id", 12], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 12\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2ba72be1-7458-46fd-96eb-72ff53ce1a77"], ["created_at", "2019-08-22 08:48:17.362168"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[36mEdge Load (7.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[36mEdge Load (6.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Node"], ["associated_id", 12], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "4b4a5aac-c197-4d0a-bb71-e49002280da0"], ["created_at", "2019-08-22 08:48:17.421737"]]
  [1m[36mInputNode Update (2.5ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 08:48:17.419573"], ["id", 15]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[36mEdge Load (7.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[36mEdge Load (6.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 15], ["to_node_id", 16], ["created_at", "2019-08-22 08:48:17.525853"], ["updated_at", "2019-08-22 08:48:17.525853"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Edge"], ["associated_id", 15], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 15\nto_node_id: 16\n"], ["version", 1], ["request_uuid", "d372a324-091a-4eef-9ddc-173b6d7beaee"], ["created_at", "2019-08-22 08:48:17.529492"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (6.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[36mEdge Load (5.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:17.588453"], ["updated_at", "2019-08-22 08:48:17.588453"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mEdge Load (7.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 13]]
  [1m[36mEdge Load (5.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 13]]
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:17.623573"], ["updated_at", "2019-08-22 08:48:17.623573"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 14], ["created_at", "2019-08-22 08:48:17.628465"], ["updated_at", "2019-08-22 08:48:17.628465"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Node"], ["associated_id", 14], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 14\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2dee0251-29dc-4252-9124-75d95da2af56"], ["created_at", "2019-08-22 08:48:17.634155"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 14]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 14], ["created_at", "2019-08-22 08:48:17.644841"], ["updated_at", "2019-08-22 08:48:17.644841"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 18], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 18], ["auditable_type", "Node"], ["associated_id", 14], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 14\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5bceb8b0-8859-4c00-8aa5-621d1dba6034"], ["created_at", "2019-08-22 08:48:17.650817"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 14]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 17], ["to_node_id", 18], ["created_at", "2019-08-22 08:48:17.663592"], ["updated_at", "2019-08-22 08:48:17.663592"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 6], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 6], ["auditable_type", "Edge"], ["associated_id", 17], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 17\nto_node_id: 18\n"], ["version", 1], ["request_uuid", "d2af93c8-db60-492e-882f-e699f3d9f33f"], ["created_at", "2019-08-22 08:48:17.667551"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 14]]
  [1m[36mEdge Load (6.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 14]]
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:17.706362"], ["updated_at", "2019-08-22 08:48:17.706362"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 15], ["created_at", "2019-08-22 08:48:17.711289"], ["updated_at", "2019-08-22 08:48:17.711289"], ["type", "InputNode"]]
  [1m[35m (2.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "977a2e3e-3da8-405c-a143-232df285c2cf"], ["created_at", "2019-08-22 08:48:17.718217"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 15], ["created_at", "2019-08-22 08:48:17.736391"], ["updated_at", "2019-08-22 08:48:17.736391"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 20], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 20], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "93ef8b62-71ea-4400-ba71-266641f272b5"], ["created_at", "2019-08-22 08:48:17.740852"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mEdge Load (6.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mEdge Load (6.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "76baa10c-18fa-42aa-b0d0-cb0b7ca9e82d"], ["created_at", "2019-08-22 08:48:17.780865"]]
  [1m[36mInputNode Update (3.0ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 08:48:17.778663"], ["id", 19]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 19], ["to_node_id", 20], ["created_at", "2019-08-22 08:48:17.822498"], ["updated_at", "2019-08-22 08:48:17.822498"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Edge"], ["associated_id", 19], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 19\nto_node_id: 20\n"], ["version", 1], ["request_uuid", "e7f7e6c6-a3cd-4778-8e1d-c1a8845d0f86"], ["created_at", "2019-08-22 08:48:17.826226"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 19], ["to_node_id", 20], ["created_at", "2019-08-22 08:48:17.834487"], ["updated_at", "2019-08-22 08:48:17.834487"]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:17.856247"], ["updated_at", "2019-08-22 08:48:17.856247"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 16], ["created_at", "2019-08-22 08:48:17.862190"], ["updated_at", "2019-08-22 08:48:17.862190"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9d07bb10-9b88-4791-a5ee-be283accc47b"], ["created_at", "2019-08-22 08:48:17.869136"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mOutputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 16], ["created_at", "2019-08-22 08:48:17.880492"], ["updated_at", "2019-08-22 08:48:17.880492"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 22], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 22], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3a06eb8f-6126-4d18-9a20-1cee55811c69"], ["created_at", "2019-08-22 08:48:17.886569"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "be01ede8-1982-4268-95f4-7579a6c4a357"], ["created_at", "2019-08-22 08:48:17.921687"]]
  [1m[36mInputNode Update (3.7ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 08:48:17.919517"], ["id", 21]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 21], ["to_node_id", 22], ["created_at", "2019-08-22 08:48:17.964746"], ["updated_at", "2019-08-22 08:48:17.964746"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Edge"], ["associated_id", 21], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 21\nto_node_id: 22\n"], ["version", 1], ["request_uuid", "0291f69f-e1ae-4341-849d-fef9e1b6d6c1"], ["created_at", "2019-08-22 08:48:17.968582"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Edge"], ["associated_id", 21], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 21\nto_node_id: 22\n"], ["version", 2], ["request_uuid", "51e2997c-955c-4cb4-9a26-a633825c8c4b"], ["created_at", "2019-08-22 08:48:18.038597"]]
  [1m[36mEdge Destroy (3.1ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 9]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:18.062202"], ["updated_at", "2019-08-22 08:48:18.062202"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 17], ["created_at", "2019-08-22 08:48:18.068130"], ["updated_at", "2019-08-22 08:48:18.068130"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Node"], ["associated_id", 17], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 17\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ae98b695-2a43-4677-8857-3c5de15b1f7b"], ["created_at", "2019-08-22 08:48:18.072431"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 17], ["created_at", "2019-08-22 08:48:18.086531"], ["updated_at", "2019-08-22 08:48:18.086531"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Node"], ["associated_id", 17], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 17\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b44d2ea3-4df8-4abd-aa61-04f877e5d2b5"], ["created_at", "2019-08-22 08:48:18.091663"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Node"], ["associated_id", 17], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "d013cfd0-908c-44c2-986e-d241d3949407"], ["created_at", "2019-08-22 08:48:18.124919"]]
  [1m[36mInputNode Update (2.8ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 08:48:18.123093"], ["id", 23]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:18.182989"], ["updated_at", "2019-08-22 08:48:18.182989"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 18], ["created_at", "2019-08-22 08:48:18.188952"], ["updated_at", "2019-08-22 08:48:18.188952"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 25], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 25], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 18\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "59b2020c-7afb-4da5-a1e0-872546aff83d"], ["created_at", "2019-08-22 08:48:18.194862"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 18], ["created_at", "2019-08-22 08:48:18.207918"], ["updated_at", "2019-08-22 08:48:18.207918"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 26], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (11.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 26], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 18\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "88ed3d0f-48cb-43e2-a01d-c3bac812553d"], ["created_at", "2019-08-22 08:48:18.212110"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mNode Destroy (2.3ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 25]]
  [1m[36mEdge Load (1.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:18.311174"], ["updated_at", "2019-08-22 08:48:18.311174"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 19], ["created_at", "2019-08-22 08:48:18.318186"], ["updated_at", "2019-08-22 08:48:18.318186"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 27], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 27], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 19\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "08365860-714e-48a7-8cdf-7c47641133a6"], ["created_at", "2019-08-22 08:48:18.322717"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 19], ["created_at", "2019-08-22 08:48:18.334453"], ["updated_at", "2019-08-22 08:48:18.334453"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 28], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 28], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 19\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "961d9ce4-24fc-4691-b469-ee70b33056c7"], ["created_at", "2019-08-22 08:48:18.338473"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:18.375280"], ["updated_at", "2019-08-22 08:48:18.375280"]]
  [1m[36mInputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 20], ["created_at", "2019-08-22 08:48:18.378550"], ["updated_at", "2019-08-22 08:48:18.378550"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 29], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 29], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 20\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7cdea32a-c8dc-495a-a4e2-0c460b3eaa24"], ["created_at", "2019-08-22 08:48:18.385077"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 20], ["created_at", "2019-08-22 08:48:18.393494"], ["updated_at", "2019-08-22 08:48:18.393494"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 30], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 30], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 20\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c3b162b7-a1c4-4c6b-bbb0-91b40fe902b2"], ["created_at", "2019-08-22 08:48:18.397533"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 20], ["created_at", "2019-08-22 08:48:18.405796"], ["updated_at", "2019-08-22 08:48:18.405796"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 31], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 31], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 20\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a7602089-277e-4d65-a0bd-7c5e71b3ff32"], ["created_at", "2019-08-22 08:48:18.409835"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 29], ["to_node_id", 30], ["created_at", "2019-08-22 08:48:18.422194"], ["updated_at", "2019-08-22 08:48:18.422194"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Edge"], ["associated_id", 29], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 29\nto_node_id: 30\n"], ["version", 1], ["request_uuid", "ef383b1f-8758-4efc-97d5-e5a11a61220b"], ["created_at", "2019-08-22 08:48:18.426060"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Edge"], ["associated_id", 29], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 30\n- 31\n"], ["version", 2], ["request_uuid", "1c1a5377-fb00-4ac7-a647-c3807aff199a"], ["created_at", "2019-08-22 08:48:18.435082"]]
  [1m[36mEdge Update (3.0ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 31], ["updated_at", "2019-08-22 08:48:18.433749"], ["id", 10]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mAudited::Audit Load (3.7ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 20], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (4.6ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 10], ["auditable_type", "Edge"]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mEdge Update (3.5ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 30], ["updated_at", "2019-08-22 08:48:18.473948"], ["id", 10]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (4.4ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 51]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mAudited::Audit Load (3.4ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 20], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.1ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 10], ["auditable_type", "Edge"]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mEdge Destroy (2.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 10]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.4ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 50]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:51.884387"], ["updated_at", "2019-08-22 08:48:51.884387"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 21], ["created_at", "2019-08-22 08:48:51.972200"], ["updated_at", "2019-08-22 08:48:51.972200"], ["type", "InputNode"]]
  [1m[35m (16.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 32], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 32], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 21\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4236017a-ef89-48c6-9d74-d7c4021de34c"], ["created_at", "2019-08-22 08:48:52.032010"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:52.121163"], ["updated_at", "2019-08-22 08:48:52.121163"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 22], ["created_at", "2019-08-22 08:48:52.131016"], ["updated_at", "2019-08-22 08:48:52.131016"], ["type", "InputNode"]]
  [1m[35m (8.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 33], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 33], ["auditable_type", "Node"], ["associated_id", 22], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 22\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ef404952-3fcf-4072-bb1b-ab16af4cb1d3"], ["created_at", "2019-08-22 08:48:52.138849"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mOutputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 22], ["created_at", "2019-08-22 08:48:52.189873"], ["updated_at", "2019-08-22 08:48:52.189873"], ["type", "OutputNode"]]
  [1m[35m (8.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 34], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 34], ["auditable_type", "Node"], ["associated_id", 22], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 22\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "00ec55c2-d20a-49df-a351-860bc8099db6"], ["created_at", "2019-08-22 08:48:52.196861"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 33], ["to_node_id", 34], ["created_at", "2019-08-22 08:48:52.261912"], ["updated_at", "2019-08-22 08:48:52.261912"]]
  [1m[35m (8.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Edge"], ["associated_id", 33], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 33\nto_node_id: 34\n"], ["version", 1], ["request_uuid", "160a4d6e-b03e-48c6-8d41-34787e4bacc7"], ["created_at", "2019-08-22 08:48:52.270958"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (8.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 34]]
  [1m[36mEdge Load (4.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 34]]
  [1m[36mNode Load (4.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[35m (11.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Edge"], ["associated_id", 33], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 33\nto_node_id: 34\n"], ["version", 2], ["request_uuid", "ffbb72d7-182a-48b0-8a16-553daf825bb6"], ["created_at", "2019-08-22 08:48:52.321978"]]
  [1m[36mEdge Destroy (3.2ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 11]]
  [1m[35m (8.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 34], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 34], ["auditable_type", "Node"], ["associated_id", 22], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 22\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "3b176bff-6eb9-4ff9-84d6-da20b8b2b155"], ["created_at", "2019-08-22 08:48:52.347639"]]
  [1m[36mOutputNode Destroy (3.2ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 34]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:52.386317"], ["updated_at", "2019-08-22 08:48:52.386317"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (4.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 23], ["created_at", "2019-08-22 08:48:52.396873"], ["updated_at", "2019-08-22 08:48:52.396873"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 35], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 35], ["auditable_type", "Node"], ["associated_id", 23], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 23\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cc9bc0b4-fede-465c-a650-1402b7eb3e3a"], ["created_at", "2019-08-22 08:48:52.411018"]]
  [1m[35m (6.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[36mOutputNode Create (3.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 23], ["created_at", "2019-08-22 08:48:52.447931"], ["updated_at", "2019-08-22 08:48:52.447931"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 36], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 36], ["auditable_type", "Node"], ["associated_id", 23], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 23\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7f5d7139-691c-4351-86d6-8104ab487eba"], ["created_at", "2019-08-22 08:48:52.456086"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.2ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 35], ["to_node_id", 36], ["created_at", "2019-08-22 08:48:52.470229"], ["updated_at", "2019-08-22 08:48:52.470229"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Edge"], ["associated_id", 35], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 35\nto_node_id: 36\n"], ["version", 1], ["request_uuid", "c9bdfd56-75a0-42fc-9d48-cba11808e5cd"], ["created_at", "2019-08-22 08:48:52.478502"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 35]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Edge"], ["associated_id", 35], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 35\nto_node_id: 36\n"], ["version", 2], ["request_uuid", "70fe1a55-eda3-44e1-9035-7004ace3e701"], ["created_at", "2019-08-22 08:48:52.504905"]]
  [1m[36mEdge Destroy (7.9ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 12]]
  [1m[36mEdge Load (4.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 35]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 35], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 35], ["auditable_type", "Node"], ["associated_id", 23], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 23\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "e19c09d3-7c1b-4d1b-8cf1-849bfcd05ddb"], ["created_at", "2019-08-22 08:48:52.529489"]]
  [1m[36mInputNode Destroy (3.2ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 35]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-22 08:48:52.607232"], ["updated_at", "2019-08-22 08:48:52.607232"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 24], ["created_at", "2019-08-22 08:48:52.610319"], ["updated_at", "2019-08-22 08:48:52.610319"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 37], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 37], ["auditable_type", "Node"], ["associated_id", 24], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 24\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5653bbac-3f45-42bb-b1ac-809fa1ec9fb8"], ["created_at", "2019-08-22 08:48:52.621065"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_graph_if_save_all_is_successful
------------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:52.799983"], ["updated_at", "2019-08-22 08:48:52.799983"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/25/save_all" for 127.0.0.1 at 2019-08-22 08:48:52 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"25", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "clientId"=>"da3cee4f-4269-4067-abbc-cefe42fb4126"}, {"name"=>"Node 2", "type"=>"OutputNode", "clientId"=>"7bfa64d4-ed9c-48d0-aab0-e8996375c289"}], "id"=>"25"}
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.9ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-22 08:48:52.960834"], ["id", 25]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 25], ["created_at", "2019-08-22 08:48:52.972674"], ["updated_at", "2019-08-22 08:48:52.972674"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 38], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 38], ["auditable_type", "Node"], ["associated_id", 25], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 25\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "82cc2a52-95f9-4b77-a978-8db813ad38f4"], ["created_at", "2019-08-22 08:48:52.983499"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
  [1m[36mOutputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 25], ["created_at", "2019-08-22 08:48:53.006389"], ["updated_at", "2019-08-22 08:48:53.006389"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 39], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 39], ["auditable_type", "Node"], ["associated_id", 25], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 25\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "82cc2a52-95f9-4b77-a978-8db813ad38f4"], ["created_at", "2019-08-22 08:48:53.038085"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mNode Load (4.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
  [1m[36mEdge Load (9.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
  [1m[36mEdge Load (10.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
Completed 200 OK in 182ms (Views: 0.6ms | ActiveRecord: 44.9ms)
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:53.129767"], ["updated_at", "2019-08-22 08:48:53.129767"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 26], ["created_at", "2019-08-22 08:48:53.135666"], ["updated_at", "2019-08-22 08:48:53.135666"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 40], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 40], ["auditable_type", "Node"], ["associated_id", 26], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 26\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4a6265da-e52a-40d7-9a36-f43cb5219540"], ["created_at", "2019-08-22 08:48:53.141431"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 26]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 26], ["created_at", "2019-08-22 08:48:53.159677"], ["updated_at", "2019-08-22 08:48:53.159677"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 41], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 41], ["auditable_type", "Node"], ["associated_id", 26], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 26\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0a17f7d7-db3e-4433-b5c8-8da0f55cfe57"], ["created_at", "2019-08-22 08:48:53.164808"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 26]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 40], ["to_node_id", 41], ["created_at", "2019-08-22 08:48:53.206574"], ["updated_at", "2019-08-22 08:48:53.206574"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Edge"], ["associated_id", 40], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 40\nto_node_id: 41\n"], ["version", 1], ["request_uuid", "7c568f3f-770c-44b7-91f7-5e5f41f31915"], ["created_at", "2019-08-22 08:48:53.210947"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 26]]
  [1m[36mEdge Load (6.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 26]]
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (2.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:53.269783"], ["updated_at", "2019-08-22 08:48:53.269783"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 27], ["created_at", "2019-08-22 08:48:53.280861"], ["updated_at", "2019-08-22 08:48:53.280861"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 42], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 42], ["auditable_type", "Node"], ["associated_id", 27], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 27\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "69abbacc-52c7-4f26-b5c7-7d0bb6db6d0b"], ["created_at", "2019-08-22 08:48:53.288363"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mOutputNode Create (0.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 27], ["created_at", "2019-08-22 08:48:53.299362"], ["updated_at", "2019-08-22 08:48:53.299362"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 43], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 43], ["auditable_type", "Node"], ["associated_id", 27], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 27\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c50a2bf8-350c-410d-896a-c65414e58300"], ["created_at", "2019-08-22 08:48:53.303617"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mEdge Load (7.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mEdge Load (6.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 42], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 42], ["auditable_type", "Node"], ["associated_id", 27], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "ee3498e2-cc08-44db-9279-ebe5d0c482bb"], ["created_at", "2019-08-22 08:48:53.378196"]]
  [1m[36mInputNode Update (3.0ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 08:48:53.371283"], ["id", 42]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mEdge Load (7.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mEdge Load (8.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 42], ["to_node_id", 43], ["created_at", "2019-08-22 08:48:53.523862"], ["updated_at", "2019-08-22 08:48:53.523862"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Edge"], ["associated_id", 42], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 42\nto_node_id: 43\n"], ["version", 1], ["request_uuid", "ee9ba1dd-f59e-4af3-b329-1f4973488873"], ["created_at", "2019-08-22 08:48:53.527834"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (6.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mEdge Load (6.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:53.591075"], ["updated_at", "2019-08-22 08:48:53.591075"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 28], ["created_at", "2019-08-22 08:48:53.596362"], ["updated_at", "2019-08-22 08:48:53.596362"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 44], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 44], ["auditable_type", "Node"], ["associated_id", 28], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 28\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9ea4384e-4fa4-4909-8d34-08eefacdedd1"], ["created_at", "2019-08-22 08:48:53.601359"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 28], ["created_at", "2019-08-22 08:48:53.614864"], ["updated_at", "2019-08-22 08:48:53.614864"], ["type", "OutputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 45], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 45], ["auditable_type", "Node"], ["associated_id", 28], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 28\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b728b61c-493e-4ace-8c14-86bc1f2c1121"], ["created_at", "2019-08-22 08:48:53.619130"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mEdge Load (7.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mEdge Load (6.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mNode Destroy (2.7ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 44]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:53.707397"], ["updated_at", "2019-08-22 08:48:53.707397"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 29], ["created_at", "2019-08-22 08:48:53.712896"], ["updated_at", "2019-08-22 08:48:53.712896"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 46], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 46], ["auditable_type", "Node"], ["associated_id", 29], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 29\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2f78ee9e-6c9a-4353-9828-01ee4b28c0ad"], ["created_at", "2019-08-22 08:48:53.717880"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[36mOutputNode Create (0.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 29], ["created_at", "2019-08-22 08:48:53.728780"], ["updated_at", "2019-08-22 08:48:53.728780"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 47], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 47], ["auditable_type", "Node"], ["associated_id", 29], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 29\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "141328ce-63ab-477f-932e-22b6a3814a16"], ["created_at", "2019-08-22 08:48:53.732483"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 46], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 46], ["auditable_type", "Node"], ["associated_id", 29], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "c89eeffa-f3b5-4d22-91fd-1b08bbda925d"], ["created_at", "2019-08-22 08:48:53.769408"]]
  [1m[36mInputNode Update (2.3ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 08:48:53.767587"], ["id", 46]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:53.826705"], ["updated_at", "2019-08-22 08:48:53.826705"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:53.848923"], ["updated_at", "2019-08-22 08:48:53.848923"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 31], ["created_at", "2019-08-22 08:48:53.858043"], ["updated_at", "2019-08-22 08:48:53.858043"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 48], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 48], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 31\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ebf09427-11c8-49d2-85a2-b08f3341132f"], ["created_at", "2019-08-22 08:48:53.861722"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 31], ["created_at", "2019-08-22 08:48:53.873098"], ["updated_at", "2019-08-22 08:48:53.873098"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 49], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 49], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 31\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e453443d-6141-4d58-8242-d1cd42cacd94"], ["created_at", "2019-08-22 08:48:53.876839"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 48], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 48], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "f1ad8774-b53d-4901-a6f5-1e1825b75d41"], ["created_at", "2019-08-22 08:48:53.905912"]]
  [1m[36mInputNode Update (2.8ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 08:48:53.904092"], ["id", 48]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 48], ["to_node_id", 49], ["created_at", "2019-08-22 08:48:53.943127"], ["updated_at", "2019-08-22 08:48:53.943127"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Edge"], ["associated_id", 48], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 48\nto_node_id: 49\n"], ["version", 1], ["request_uuid", "db45441e-d84d-4407-a4a2-21a9982ce377"], ["created_at", "2019-08-22 08:48:53.946696"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 48], ["to_node_id", 49], ["created_at", "2019-08-22 08:48:53.953714"], ["updated_at", "2019-08-22 08:48:53.953714"]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:53.971549"], ["updated_at", "2019-08-22 08:48:53.971549"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 32], ["created_at", "2019-08-22 08:48:53.976998"], ["updated_at", "2019-08-22 08:48:53.976998"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 50], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 50], ["auditable_type", "Node"], ["associated_id", 32], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 32\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8fb8332d-d61b-4458-9a27-b1dc447f2dcc"], ["created_at", "2019-08-22 08:48:53.980741"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 32], ["created_at", "2019-08-22 08:48:53.992034"], ["updated_at", "2019-08-22 08:48:53.992034"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 51], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 51], ["auditable_type", "Node"], ["associated_id", 32], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 32\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "58b11c9c-3c5a-4d50-94fa-aaf865818851"], ["created_at", "2019-08-22 08:48:53.995845"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 50], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 50], ["auditable_type", "Node"], ["associated_id", 32], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "19c8dac1-e6a8-4fe2-bdf4-b86530ac4858"], ["created_at", "2019-08-22 08:48:54.026321"]]
  [1m[36mInputNode Update (2.6ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 08:48:54.023782"], ["id", 50]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 50], ["to_node_id", 51], ["created_at", "2019-08-22 08:48:54.065777"], ["updated_at", "2019-08-22 08:48:54.065777"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Edge"], ["associated_id", 50], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 50\nto_node_id: 51\n"], ["version", 1], ["request_uuid", "277df60b-c5b3-4d55-80e6-cd9051d717b5"], ["created_at", "2019-08-22 08:48:54.069516"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Edge"], ["associated_id", 50], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 50\nto_node_id: 51\n"], ["version", 2], ["request_uuid", "5421bf92-9866-45e1-971c-81be46bf4ff1"], ["created_at", "2019-08-22 08:48:54.132966"]]
  [1m[36mEdge Destroy (3.4ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 17]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (5.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:54.161889"], ["updated_at", "2019-08-22 08:48:54.161889"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 33], ["created_at", "2019-08-22 08:48:54.166606"], ["updated_at", "2019-08-22 08:48:54.166606"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 52], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 52], ["auditable_type", "Node"], ["associated_id", 33], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 33\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "45d024a0-2919-4b63-979d-928e72830936"], ["created_at", "2019-08-22 08:48:54.172349"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 33], ["created_at", "2019-08-22 08:48:54.181698"], ["updated_at", "2019-08-22 08:48:54.181698"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 53], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 53], ["auditable_type", "Node"], ["associated_id", 33], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 33\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1c61fec5-3b76-4502-a32e-6af78e9ca1e6"], ["created_at", "2019-08-22 08:48:54.185715"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:54.214694"], ["updated_at", "2019-08-22 08:48:54.214694"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 34], ["created_at", "2019-08-22 08:48:54.220531"], ["updated_at", "2019-08-22 08:48:54.220531"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 54], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 54], ["auditable_type", "Node"], ["associated_id", 34], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 34\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c17b0d2f-3bf2-404a-a1d1-4c908dddb731"], ["created_at", "2019-08-22 08:48:54.225993"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:54.246078"], ["updated_at", "2019-08-22 08:48:54.246078"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 35], ["created_at", "2019-08-22 08:48:54.251300"], ["updated_at", "2019-08-22 08:48:54.251300"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 55], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 55], ["auditable_type", "Node"], ["associated_id", 35], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 35\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "30bd1c20-75e0-4a6c-80ab-cab679fc3ca9"], ["created_at", "2019-08-22 08:48:54.257042"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[36mOutputNode Create (0.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 35], ["created_at", "2019-08-22 08:48:54.274764"], ["updated_at", "2019-08-22 08:48:54.274764"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 56], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 56], ["auditable_type", "Node"], ["associated_id", 35], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 35\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c971af9c-e50a-43eb-ac4a-ab37cde55206"], ["created_at", "2019-08-22 08:48:54.278629"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 55], ["to_node_id", 56], ["created_at", "2019-08-22 08:48:54.286281"], ["updated_at", "2019-08-22 08:48:54.286281"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 18], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 18], ["auditable_type", "Edge"], ["associated_id", 55], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 55\nto_node_id: 56\n"], ["version", 1], ["request_uuid", "546f35fe-cfaf-413b-bce4-9a961caee8bc"], ["created_at", "2019-08-22 08:48:54.289953"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 18], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 18], ["auditable_type", "Edge"], ["associated_id", 55], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 55\nto_node_id: 56\n"], ["version", 2], ["request_uuid", "85f8849a-d64e-4e69-8a3a-82a4a94d5cfc"], ["created_at", "2019-08-22 08:48:54.297917"]]
  [1m[36mEdge Destroy (2.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 18]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:54.326806"], ["updated_at", "2019-08-22 08:48:54.326806"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 36], ["created_at", "2019-08-22 08:48:54.332848"], ["updated_at", "2019-08-22 08:48:54.332848"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 57], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 57], ["auditable_type", "Node"], ["associated_id", 36], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 36\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "12bac8cb-b73e-4f62-b0fb-de3f4bfbd659"], ["created_at", "2019-08-22 08:48:54.338906"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[36mOutputNode Create (0.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 36], ["created_at", "2019-08-22 08:48:54.349387"], ["updated_at", "2019-08-22 08:48:54.349387"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 58], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 58], ["auditable_type", "Node"], ["associated_id", 36], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 36\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3463d5dc-add6-45ef-863e-54b0f0d78e95"], ["created_at", "2019-08-22 08:48:54.353469"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 57], ["to_node_id", 58], ["created_at", "2019-08-22 08:48:54.366891"], ["updated_at", "2019-08-22 08:48:54.366891"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Edge"], ["associated_id", 57], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 57\nto_node_id: 58\n"], ["version", 1], ["request_uuid", "4151c162-c8cf-4931-9425-c2921ab9c70d"], ["created_at", "2019-08-22 08:48:54.370805"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:54.385283"], ["updated_at", "2019-08-22 08:48:54.385283"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 37]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 37], ["created_at", "2019-08-22 08:48:54.394635"], ["updated_at", "2019-08-22 08:48:54.394635"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 59], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 59], ["auditable_type", "Node"], ["associated_id", 37], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 37\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0cf404e6-5243-4133-b7ba-6e9ffa3fcb83"], ["created_at", "2019-08-22 08:48:54.398235"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:54.416901"], ["updated_at", "2019-08-22 08:48:54.416901"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 38], ["created_at", "2019-08-22 08:48:54.428770"], ["updated_at", "2019-08-22 08:48:54.428770"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 60], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 60], ["auditable_type", "Node"], ["associated_id", 38], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 38\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4d1ecbc9-26f5-4abc-a1a8-ead05d7dc38b"], ["created_at", "2019-08-22 08:48:54.433080"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-22 08:48:54.441202"], ["updated_at", "2019-08-22 08:48:54.441202"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 39], ["created_at", "2019-08-22 08:48:54.447899"], ["updated_at", "2019-08-22 08:48:54.447899"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 61], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 61], ["auditable_type", "Node"], ["associated_id", 39], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 39\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a6947dfb-0059-4a54-854c-13f02c18ad47"], ["created_at", "2019-08-22 08:48:54.451788"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 08:48:54.484796"], ["updated_at", "2019-08-22 08:48:54.484796"]]
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 40], ["created_at", "2019-08-22 08:48:54.489747"], ["updated_at", "2019-08-22 08:48:54.489747"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 62], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 62], ["auditable_type", "Node"], ["associated_id", 40], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 40\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7f6fe3ed-c045-44f5-b287-f27c36db9eb7"], ["created_at", "2019-08-22 08:48:54.494522"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 40], ["created_at", "2019-08-22 08:48:54.501990"], ["updated_at", "2019-08-22 08:48:54.501990"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 63], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 63], ["auditable_type", "Node"], ["associated_id", 40], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 40\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2ee73001-b3e3-4551-ac82-09d58e6a030e"], ["created_at", "2019-08-22 08:48:54.507680"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 40], ["created_at", "2019-08-22 08:48:54.514832"], ["updated_at", "2019-08-22 08:48:54.514832"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 64], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 64], ["auditable_type", "Node"], ["associated_id", 40], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 40\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a49e5d95-e6a5-4fe7-a2e4-9200bb34b8e7"], ["created_at", "2019-08-22 08:48:54.518613"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 62], ["to_node_id", 63], ["created_at", "2019-08-22 08:48:54.530846"], ["updated_at", "2019-08-22 08:48:54.530846"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 20], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 20], ["auditable_type", "Edge"], ["associated_id", 62], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 62\nto_node_id: 63\n"], ["version", 1], ["request_uuid", "28e81095-aa5e-4e9f-9d47-d727ef588312"], ["created_at", "2019-08-22 08:48:54.534690"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 20], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 20], ["auditable_type", "Edge"], ["associated_id", 62], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 63\n- 64\n"], ["version", 2], ["request_uuid", "38f9b1e1-8c46-4b39-87d8-a523e57c63e3"], ["created_at", "2019-08-22 08:48:54.542493"]]
  [1m[36mEdge Update (3.0ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 64], ["updated_at", "2019-08-22 08:48:54.541182"], ["id", 20]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[36mAudited::Audit Load (3.4ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 40], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.8ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 20], ["auditable_type", "Edge"]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  [1m[36mEdge Update (2.9ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 63], ["updated_at", "2019-08-22 08:48:54.592918"], ["id", 20]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.9ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 104]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[36mAudited::Audit Load (3.6ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 40], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.5ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 20], ["auditable_type", "Edge"]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  [1m[36mEdge Destroy (2.7ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 20]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.4ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 103]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (852.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "myapp_test"[0m
  [1m[35m (3630.3ms)[0m  [1m[35mCREATE DATABASE "myapp_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (10.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "audits" CASCADE[0m
  [1m[35m (238.9ms)[0m  [1m[35mCREATE TABLE "audits" ("id" bigserial primary key, "auditable_id" integer, "auditable_type" character varying, "associated_id" integer, "associated_type" character varying, "user_id" integer, "user_type" character varying, "username" character varying, "action" character varying, "audited_changes" text, "version" integer DEFAULT 0, "comment" character varying, "remote_address" character varying, "request_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (41.0ms)[0m  [1m[35mCREATE  INDEX  "associated_index" ON "audits"  ("associated_type", "associated_id")[0m
  [1m[35m (15.2ms)[0m  [1m[35mCREATE  INDEX  "auditable_index" ON "audits"  ("auditable_type", "auditable_id", "version")[0m
  [1m[35m (12.2ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_created_at" ON "audits"  ("created_at")[0m
  [1m[35m (14.3ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_request_uuid" ON "audits"  ("request_uuid")[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE  INDEX  "user_index" ON "audits"  ("user_id", "user_type")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "edges" CASCADE[0m
  [1m[35m (33.1ms)[0m  [1m[35mCREATE TABLE "edges" ("id" bigserial primary key, "from_node_id" bigint, "to_node_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_edges_on_from_node_id_and_to_node_id" ON "edges"  ("from_node_id", "to_node_id")[0m
  [1m[35m (16.2ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_from_node_id" ON "edges"  ("from_node_id")[0m
  [1m[35m (16.9ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_to_node_id" ON "edges"  ("to_node_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "graphs" CASCADE[0m
  [1m[35m (44.7ms)[0m  [1m[35mCREATE TABLE "graphs" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "type" character varying)[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "node_counts" CASCADE[0m
  [1m[35m (26.8ms)[0m  [1m[35mCREATE TABLE "node_counts" ("id" bigserial primary key, "count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "nodes" CASCADE[0m
  [1m[35m (52.8ms)[0m  [1m[35mCREATE TABLE "nodes" ("id" bigserial primary key, "name" character varying, "graph_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "content" json, "x" float DEFAULT 0.0, "y" float DEFAULT 0.0, "type" character varying NOT NULL, "node_ref_id" bigint)[0m
  [1m[35m (14.6ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_graph_id" ON "nodes"  ("graph_id")[0m
  [1m[35m (13.7ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_node_ref_id" ON "nodes"  ("node_ref_id")[0m
  [1m[35m (40.8ms)[0m  [1m[35mALTER TABLE "nodes" ADD CONSTRAINT "fk_rails_10f83f4418"
FOREIGN KEY ("graph_id")
  REFERENCES "graphs" ("id")
[0m
  [1m[35m (40.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (4.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (6.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20190822055108)[0m
  [1m[35m (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20190430113529),
(20190724110012),
(20190411085042),
(20190523112235),
(20190514095100),
(20190514093514),
(20190801105126),
(20190806132227),
(20190724105907),
(20190429092701),
(20190411113011),
(20190411100036);

[0m
  [1m[35m (42.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (6.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (5.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-08-22 10:48:29.561667"], ["updated_at", "2019-08-22 10:48:29.561667"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_without_node_ref
-------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (9.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:48:29.883683"], ["updated_at", "2019-08-22 10:48:29.883683"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
NodeRefNodeTest: test_can_create_node_ref_node_with_node_ref
------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:49:53.841766"], ["updated_at", "2019-08-22 10:49:53.841766"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[36mOutputNode Create (12.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 2], ["created_at", "2019-08-22 10:49:53.985914"], ["updated_at", "2019-08-22 10:49:53.985914"], ["type", "OutputNode"]]
  [1m[35m (32.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (18.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Node"], ["associated_id", 2], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 2\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "007a3ef5-afea-4d6d-825e-9594b78b26a4"], ["created_at", "2019-08-22 10:49:54.068521"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNodeRefNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type", "node_ref_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 2], ["created_at", "2019-08-22 10:49:54.169820"], ["updated_at", "2019-08-22 10:49:54.169820"], ["type", "NodeRefNode"], ["node_ref_id", 1]]
  [1m[35m (9.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Node"], ["associated_id", 2], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 2\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: 1\n"], ["version", 1], ["request_uuid", "4d98ce78-c3bc-4286-8941-b387cc990cff"], ["created_at", "2019-08-22 10:49:54.179272"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_without_node_ref
-------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:49:54.209641"], ["updated_at", "2019-08-22 10:49:54.209641"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
NodeRefNodeTest: test_can_create_node_ref_node_with_node_ref
------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:50:12.852093"], ["updated_at", "2019-08-22 10:50:12.852093"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 4]]
  [1m[36mOutputNode Create (3.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 4], ["created_at", "2019-08-22 10:50:12.958313"], ["updated_at", "2019-08-22 10:50:12.958313"], ["type", "OutputNode"]]
  [1m[35m (19.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Node"], ["associated_id", 4], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 4\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "68288918-cfaf-4741-a861-5483371ed8bf"], ["created_at", "2019-08-22 10:50:13.001609"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNodeRefNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type", "node_ref_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 4], ["created_at", "2019-08-22 10:50:13.057442"], ["updated_at", "2019-08-22 10:50:13.057442"], ["type", "NodeRefNode"], ["node_ref_id", 3]]
  [1m[35m (9.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Node"], ["associated_id", 4], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 4\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: 3\n"], ["version", 1], ["request_uuid", "561142cd-f76c-4686-afef-89e14917cfac"], ["created_at", "2019-08-22 10:50:13.064597"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_without_node_ref
-------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:50:13.092422"], ["updated_at", "2019-08-22 10:50:13.092422"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (9.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_to_input_node
----------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:53:13.135410"], ["updated_at", "2019-08-22 10:53:13.135410"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (7.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 6], ["created_at", "2019-08-22 10:53:13.230407"], ["updated_at", "2019-08-22 10:53:13.230407"], ["type", "InputNode"]]
  [1m[35m (19.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Node"], ["associated_id", 6], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 6\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f0e6b3fb-313f-4b23-956d-fd3e34432241"], ["created_at", "2019-08-22 10:53:13.290601"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_without_node_ref
-------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:53:13.384704"], ["updated_at", "2019-08-22 10:53:13.384704"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
NodeRefNodeTest: test_can_create_node_ref_node_with_node_ref
------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:53:13.442921"], ["updated_at", "2019-08-22 10:53:13.442921"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (10.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[36mOutputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 8], ["created_at", "2019-08-22 10:53:13.500671"], ["updated_at", "2019-08-22 10:53:13.500671"], ["type", "OutputNode"]]
  [1m[35m (10.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 6], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 6], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 8\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c7583f08-4833-495f-85cb-33aed35abfbd"], ["created_at", "2019-08-22 10:53:13.510719"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNodeRefNode Create (2.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type", "node_ref_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 8], ["created_at", "2019-08-22 10:53:13.534070"], ["updated_at", "2019-08-22 10:53:13.534070"], ["type", "NodeRefNode"], ["node_ref_id", 6]]
  [1m[35m (9.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 8\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: 6\n"], ["version", 1], ["request_uuid", "cd510ffc-de49-4851-b0c6-1a0e637705b7"], ["created_at", "2019-08-22 10:53:13.543910"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
NodeRefNodeTest: test_can_create_node_ref_node_with_node_ref
------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:53:22.939277"], ["updated_at", "2019-08-22 10:53:22.939277"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (9.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 9]]
  [1m[36mOutputNode Create (5.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 9], ["created_at", "2019-08-22 10:53:23.048935"], ["updated_at", "2019-08-22 10:53:23.048935"], ["type", "OutputNode"]]
  [1m[35m (17.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Node"], ["associated_id", 9], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 9\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "96906613-aceb-497d-9d83-27ecc0d2771f"], ["created_at", "2019-08-22 10:53:23.094231"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNodeRefNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type", "node_ref_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 9], ["created_at", "2019-08-22 10:53:23.149809"], ["updated_at", "2019-08-22 10:53:23.149809"], ["type", "NodeRefNode"], ["node_ref_id", 8]]
  [1m[35m (8.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Node"], ["associated_id", 9], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 9\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: 8\n"], ["version", 1], ["request_uuid", "fc8b3fe3-bf15-4858-822e-2f00f5dd74b5"], ["created_at", "2019-08-22 10:53:23.162628"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_to_input_node
----------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:53:23.199284"], ["updated_at", "2019-08-22 10:53:23.199284"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 10], ["created_at", "2019-08-22 10:53:23.252097"], ["updated_at", "2019-08-22 10:53:23.252097"], ["type", "InputNode"]]
  [1m[35m (9.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Node"], ["associated_id", 10], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 10\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "81a0bfd6-da3d-47f9-932c-6f6b3fb9b56b"], ["created_at", "2019-08-22 10:53:23.258814"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_without_node_ref
-------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:53:23.303747"], ["updated_at", "2019-08-22 10:53:23.303747"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_without_node_ref
-------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:54:06.792439"], ["updated_at", "2019-08-22 10:54:06.792439"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
NodeRefNodeTest: test_can_create_node_ref_node_with_node_ref
------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:54:06.941393"], ["updated_at", "2019-08-22 10:54:06.941393"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 13]]
  [1m[36mOutputNode Create (4.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 13], ["created_at", "2019-08-22 10:54:07.011564"], ["updated_at", "2019-08-22 10:54:07.011564"], ["type", "OutputNode"]]
  [1m[35m (11.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Node"], ["associated_id", 13], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 13\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "af986ea2-1026-4df6-b416-62e1f69bd4bc"], ["created_at", "2019-08-22 10:54:07.076020"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNodeRefNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type", "node_ref_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 13], ["created_at", "2019-08-22 10:54:07.099393"], ["updated_at", "2019-08-22 10:54:07.099393"], ["type", "NodeRefNode"], ["node_ref_id", 11]]
  [1m[35m (6.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Node"], ["associated_id", 13], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 13\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: 11\n"], ["version", 1], ["request_uuid", "56e6572a-53c2-42db-b5de-8f0793bbe566"], ["created_at", "2019-08-22 10:54:07.107394"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_to_input_node
----------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:54:07.136741"], ["updated_at", "2019-08-22 10:54:07.136741"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 14], ["created_at", "2019-08-22 10:54:07.181944"], ["updated_at", "2019-08-22 10:54:07.181944"], ["type", "InputNode"]]
  [1m[35m (8.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Node"], ["associated_id", 14], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 14\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "fdd4083b-897b-4010-ab31-51082c636038"], ["created_at", "2019-08-22 10:54:07.191706"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
NodeRefNodeTest: test_can_create_node_ref_node_with_node_ref
------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:55:26.884515"], ["updated_at", "2019-08-22 10:55:26.884515"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (11.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mOutputNode Create (4.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 15], ["created_at", "2019-08-22 10:55:27.025981"], ["updated_at", "2019-08-22 10:55:27.025981"], ["type", "OutputNode"]]
  [1m[35m (17.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "060fee8d-a96d-42db-89ba-1cdcaec6033a"], ["created_at", "2019-08-22 10:55:27.073505"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNodeRefNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type", "node_ref_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 15], ["created_at", "2019-08-22 10:55:27.161823"], ["updated_at", "2019-08-22 10:55:27.161823"], ["type", "NodeRefNode"], ["node_ref_id", 14]]
  [1m[35m (9.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: 14\n"], ["version", 1], ["request_uuid", "e14cea37-447f-4b00-9c64-447ceb56b2e2"], ["created_at", "2019-08-22 10:55:27.176818"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_to_input_node
----------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:55:27.218487"], ["updated_at", "2019-08-22 10:55:27.218487"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 16], ["created_at", "2019-08-22 10:55:27.279896"], ["updated_at", "2019-08-22 10:55:27.279896"], ["type", "InputNode"]]
  [1m[35m (11.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "294211d4-35b4-442c-8b88-1a29767138c2"], ["created_at", "2019-08-22 10:55:27.290728"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_without_node_ref
-------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 10:55:27.322221"], ["updated_at", "2019-08-22 10:55:27.322221"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:32.858262"], ["updated_at", "2019-08-22 11:10:32.858262"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 18], ["created_at", "2019-08-22 11:10:32.928107"], ["updated_at", "2019-08-22 11:10:32.928107"], ["type", "InputNode"]]
  [1m[35m (16.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 18\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "75515805-9e6d-4718-bdc8-2c6faa65c182"], ["created_at", "2019-08-22 11:10:33.003407"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mOutputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 18], ["created_at", "2019-08-22 11:10:33.091666"], ["updated_at", "2019-08-22 11:10:33.091666"], ["type", "OutputNode"]]
  [1m[35m (9.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 18], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 18], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 18\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b00b56ed-9548-4345-8fcc-7382878bdb4d"], ["created_at", "2019-08-22 11:10:33.100348"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (22.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 17], ["to_node_id", 18], ["created_at", "2019-08-22 11:10:33.178476"], ["updated_at", "2019-08-22 11:10:33.178476"]]
  [1m[35m (8.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Edge"], ["associated_id", 17], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 17\nto_node_id: 18\n"], ["version", 1], ["request_uuid", "f90cb5b7-f920-4608-9f68-74942de3772d"], ["created_at", "2019-08-22 11:10:33.205880"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (11.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mEdge Load (9.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (6.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:33.297458"], ["updated_at", "2019-08-22 11:10:33.297458"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 19], ["created_at", "2019-08-22 11:10:33.307040"], ["updated_at", "2019-08-22 11:10:33.307040"], ["type", "InputNode"]]
  [1m[35m (13.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 19\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2ebbc6a8-aa13-41f5-9d9c-06de25c9ba9b"], ["created_at", "2019-08-22 11:10:33.315126"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mOutputNode Create (2.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 19], ["created_at", "2019-08-22 11:10:33.345270"], ["updated_at", "2019-08-22 11:10:33.345270"], ["type", "OutputNode"]]
  [1m[35m (10.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 20], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 20], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 19\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "388b0536-bcfe-49be-800c-11380a1ff617"], ["created_at", "2019-08-22 11:10:33.352773"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mEdge Load (8.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mEdge Load (9.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (9.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "d848b80c-d7d9-46b2-a9d3-d63ded2fec4f"], ["created_at", "2019-08-22 11:10:33.450406"]]
  [1m[36mInputNode Update (5.6ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 11:10:33.443539"], ["id", 19]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mEdge Load (8.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mEdge Load (12.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 19], ["to_node_id", 20], ["created_at", "2019-08-22 11:10:33.685137"], ["updated_at", "2019-08-22 11:10:33.685137"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Edge"], ["associated_id", 19], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 19\nto_node_id: 20\n"], ["version", 1], ["request_uuid", "9f7119d9-21bd-4072-8f11-e201df92f520"], ["created_at", "2019-08-22 11:10:33.703054"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mEdge Load (7.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (4.0ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:33.795162"], ["updated_at", "2019-08-22 11:10:33.795162"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 20], ["created_at", "2019-08-22 11:10:33.811258"], ["updated_at", "2019-08-22 11:10:33.811258"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 20\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e7a6b251-f8de-4047-a636-5e2cab8878c8"], ["created_at", "2019-08-22 11:10:33.824668"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 20], ["created_at", "2019-08-22 11:10:33.839915"], ["updated_at", "2019-08-22 11:10:33.839915"], ["type", "OutputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 22], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 22], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 20\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b1112526-0be1-4b13-b9ba-98ba84e98003"], ["created_at", "2019-08-22 11:10:33.846850"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (8.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (7.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "b06b15e4-7636-4b8e-b5f0-4a149d1c7ff7"], ["created_at", "2019-08-22 11:10:33.944856"]]
  [1m[36mInputNode Update (3.1ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 11:10:33.934230"], ["id", 21]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 21], ["to_node_id", 22], ["created_at", "2019-08-22 11:10:34.012307"], ["updated_at", "2019-08-22 11:10:34.012307"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Edge"], ["associated_id", 21], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 21\nto_node_id: 22\n"], ["version", 1], ["request_uuid", "bfef434d-10b1-4f70-ae59-de21f9f13395"], ["created_at", "2019-08-22 11:10:34.018731"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (8.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (9.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Edge"], ["associated_id", 21], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 21\nto_node_id: 22\n"], ["version", 2], ["request_uuid", "f58276e2-05ae-4402-b5e3-0c57ecef9885"], ["created_at", "2019-08-22 11:10:34.185168"]]
  [1m[36mEdge Destroy (2.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:34.214083"], ["updated_at", "2019-08-22 11:10:34.214083"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 21], ["created_at", "2019-08-22 11:10:34.224231"], ["updated_at", "2019-08-22 11:10:34.224231"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 21\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1f052c6a-c33b-498a-8a5f-805d060bc557"], ["created_at", "2019-08-22 11:10:34.235086"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 21], ["created_at", "2019-08-22 11:10:34.256786"], ["updated_at", "2019-08-22 11:10:34.256786"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 21\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "79f924be-47d2-4585-bfe7-af30aa848800"], ["created_at", "2019-08-22 11:10:34.264547"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mEdge Load (3.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mEdge Load (4.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mGraph Load (1.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "cb63e811-8bd8-4f61-92ce-f292f077018d"], ["created_at", "2019-08-22 11:10:34.337259"]]
  [1m[36mInputNode Update (3.3ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 11:10:34.329661"], ["id", 23]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:34.425146"], ["updated_at", "2019-08-22 11:10:34.425146"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 22], ["created_at", "2019-08-22 11:10:34.435560"], ["updated_at", "2019-08-22 11:10:34.435560"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 25], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 25], ["auditable_type", "Node"], ["associated_id", 22], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 22\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1944d7f9-01ba-4043-8a7a-303fbec81b90"], ["created_at", "2019-08-22 11:10:34.449540"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mOutputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 22], ["created_at", "2019-08-22 11:10:34.475776"], ["updated_at", "2019-08-22 11:10:34.475776"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 26], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 26], ["auditable_type", "Node"], ["associated_id", 22], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 22\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "eab0dbbd-9a1d-4534-9275-6932a9391304"], ["created_at", "2019-08-22 11:10:34.496719"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mNode Destroy (2.8ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 25]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:34.608367"], ["updated_at", "2019-08-22 11:10:34.608367"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 23], ["created_at", "2019-08-22 11:10:34.614499"], ["updated_at", "2019-08-22 11:10:34.614499"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 27], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 27], ["auditable_type", "Node"], ["associated_id", 23], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 23\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c349700d-8b67-4947-9abd-51e63c532d5c"], ["created_at", "2019-08-22 11:10:34.620477"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 23], ["created_at", "2019-08-22 11:10:34.634739"], ["updated_at", "2019-08-22 11:10:34.634739"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 28], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 28], ["auditable_type", "Node"], ["associated_id", 23], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 23\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "079cabb8-a33c-4e6f-a4e8-e1b0290912d1"], ["created_at", "2019-08-22 11:10:34.640056"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 27], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 27], ["auditable_type", "Node"], ["associated_id", 23], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "6f91948b-4e58-4b3c-9d47-59df2bd5742f"], ["created_at", "2019-08-22 11:10:34.683875"]]
  [1m[36mInputNode Update (3.8ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 11:10:34.681503"], ["id", 27]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 27], ["to_node_id", 28], ["created_at", "2019-08-22 11:10:34.733087"], ["updated_at", "2019-08-22 11:10:34.733087"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Edge"], ["associated_id", 27], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 27\nto_node_id: 28\n"], ["version", 1], ["request_uuid", "386f3b7e-6b01-4b37-a4bf-29f0d0b5893e"], ["created_at", "2019-08-22 11:10:34.737594"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 27], ["to_node_id", 28], ["created_at", "2019-08-22 11:10:34.747175"], ["updated_at", "2019-08-22 11:10:34.747175"]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:34.763122"], ["updated_at", "2019-08-22 11:10:34.763122"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 24]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 24]]
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (5.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:34.799033"], ["updated_at", "2019-08-22 11:10:34.799033"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 25], ["created_at", "2019-08-22 11:10:34.805418"], ["updated_at", "2019-08-22 11:10:34.805418"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 29], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 29], ["auditable_type", "Node"], ["associated_id", 25], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 25\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5bc6fd17-911e-42ad-982e-48f2595ff98f"], ["created_at", "2019-08-22 11:10:34.811325"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 25], ["created_at", "2019-08-22 11:10:34.831464"], ["updated_at", "2019-08-22 11:10:34.831464"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 30], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 30], ["auditable_type", "Node"], ["associated_id", 25], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 25\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e6992e10-b826-42ae-9204-c52f311b5643"], ["created_at", "2019-08-22 11:10:34.837215"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
  [1m[36mEdge Load (5.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
  [1m[36mEdge Load (8.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
  [1m[35m (5.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:54.453433"], ["updated_at", "2019-08-22 11:10:54.453433"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (7.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 26], ["created_at", "2019-08-22 11:10:54.540421"], ["updated_at", "2019-08-22 11:10:54.540421"], ["type", "InputNode"]]
  [1m[35m (27.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 31], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 31], ["auditable_type", "Node"], ["associated_id", 26], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 26\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "01076973-e596-42ac-b525-f104b1d4cd49"], ["created_at", "2019-08-22 11:10:54.599586"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (9.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 26]]
  [1m[36mOutputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 26], ["created_at", "2019-08-22 11:10:54.680196"], ["updated_at", "2019-08-22 11:10:54.680196"], ["type", "OutputNode"]]
  [1m[35m (8.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 32], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 32], ["auditable_type", "Node"], ["associated_id", 26], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 26\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4e3d6daf-5e6f-4126-863f-619640a4748b"], ["created_at", "2019-08-22 11:10:54.687140"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 26]]
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (8.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 31], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 31], ["auditable_type", "Node"], ["associated_id", 26], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "b7536060-e313-40d6-a8f5-a3c50ebba450"], ["created_at", "2019-08-22 11:10:54.735285"]]
  [1m[36mInputNode Update (4.3ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 11:10:54.731916"], ["id", 31]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 26]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 26]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 26]]
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mNode Load (4.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 26]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 31], ["to_node_id", 32], ["created_at", "2019-08-22 11:10:54.861090"], ["updated_at", "2019-08-22 11:10:54.861090"]]
  [1m[35m (8.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 6], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 6], ["auditable_type", "Edge"], ["associated_id", 31], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 31\nto_node_id: 32\n"], ["version", 1], ["request_uuid", "838049b7-0307-44bb-bbec-41b208ce7fed"], ["created_at", "2019-08-22 11:10:54.872947"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 31], ["to_node_id", 32], ["created_at", "2019-08-22 11:10:54.896876"], ["updated_at", "2019-08-22 11:10:54.896876"]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (5.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:54.918153"], ["updated_at", "2019-08-22 11:10:54.918153"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 27], ["created_at", "2019-08-22 11:10:54.925644"], ["updated_at", "2019-08-22 11:10:54.925644"], ["type", "InputNode"]]
  [1m[35m (9.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 33], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (6.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 33], ["auditable_type", "Node"], ["associated_id", 27], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 27\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9603f94c-7aaf-4320-bc1f-8126cebabd29"], ["created_at", "2019-08-22 11:10:54.936578"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mOutputNode Create (2.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 27], ["created_at", "2019-08-22 11:10:54.964269"], ["updated_at", "2019-08-22 11:10:54.964269"], ["type", "OutputNode"]]
  [1m[35m (8.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 34], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 34], ["auditable_type", "Node"], ["associated_id", 27], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 27\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "350f7864-5f9c-4b3d-a481-2da2fdc58170"], ["created_at", "2019-08-22 11:10:54.972329"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:55.014954"], ["updated_at", "2019-08-22 11:10:55.014954"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:55.042268"], ["updated_at", "2019-08-22 11:10:55.042268"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 29], ["created_at", "2019-08-22 11:10:55.054031"], ["updated_at", "2019-08-22 11:10:55.054031"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 35], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 35], ["auditable_type", "Node"], ["associated_id", 29], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 29\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6847c422-46be-4cc2-82b7-d0189049fb41"], ["created_at", "2019-08-22 11:10:55.063035"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 29], ["created_at", "2019-08-22 11:10:55.080716"], ["updated_at", "2019-08-22 11:10:55.080716"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 36], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 36], ["auditable_type", "Node"], ["associated_id", 29], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 29\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9d323386-e873-4b88-a715-16dca2624949"], ["created_at", "2019-08-22 11:10:55.086397"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 35], ["to_node_id", 36], ["created_at", "2019-08-22 11:10:55.101573"], ["updated_at", "2019-08-22 11:10:55.101573"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Edge"], ["associated_id", 35], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 35\nto_node_id: 36\n"], ["version", 1], ["request_uuid", "2134002c-072c-4e25-94dc-cb45a9db9ff0"], ["created_at", "2019-08-22 11:10:55.107319"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (8.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:55.137596"], ["updated_at", "2019-08-22 11:10:55.137596"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 30], ["created_at", "2019-08-22 11:10:55.144899"], ["updated_at", "2019-08-22 11:10:55.144899"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 37], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 37], ["auditable_type", "Node"], ["associated_id", 30], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 30\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "68bcb28c-7bdb-4e50-9b80-8903376d4353"], ["created_at", "2019-08-22 11:10:55.153205"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mOutputNode Create (1.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 30], ["created_at", "2019-08-22 11:10:55.170048"], ["updated_at", "2019-08-22 11:10:55.170048"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 38], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 38], ["auditable_type", "Node"], ["associated_id", 30], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 30\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e0c42c2d-6b4d-4ea2-adaa-2ec4718143b4"], ["created_at", "2019-08-22 11:10:55.183852"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 37], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 37], ["auditable_type", "Node"], ["associated_id", 30], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "b7b07ec5-b3c5-4561-8c49-e8c27dd4b965"], ["created_at", "2019-08-22 11:10:55.222998"]]
  [1m[36mInputNode Update (3.5ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 11:10:55.217854"], ["id", 37]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 37], ["to_node_id", 38], ["created_at", "2019-08-22 11:10:55.283705"], ["updated_at", "2019-08-22 11:10:55.283705"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Edge"], ["associated_id", 37], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 37\nto_node_id: 38\n"], ["version", 1], ["request_uuid", "3778b932-6e2e-43a0-bfba-64beecc8682d"], ["created_at", "2019-08-22 11:10:55.290935"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:55.385422"], ["updated_at", "2019-08-22 11:10:55.385422"]]
  [1m[35m (2.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 31], ["created_at", "2019-08-22 11:10:55.402144"], ["updated_at", "2019-08-22 11:10:55.402144"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 39], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 39], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 31\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5f86f78f-add7-4cc0-b131-0be5593e7a11"], ["created_at", "2019-08-22 11:10:55.416771"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 31], ["created_at", "2019-08-22 11:10:55.435057"], ["updated_at", "2019-08-22 11:10:55.435057"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 40], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 40], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 31\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f3cb9675-aa03-4ae6-b1da-4a9495075257"], ["created_at", "2019-08-22 11:10:55.444079"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 39], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 39], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "b1ebce9e-8de5-4ed8-845b-34ad7c738540"], ["created_at", "2019-08-22 11:10:55.483042"]]
  [1m[36mInputNode Update (3.3ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 11:10:55.480095"], ["id", 39]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:55.534029"], ["updated_at", "2019-08-22 11:10:55.534029"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 32], ["created_at", "2019-08-22 11:10:55.540289"], ["updated_at", "2019-08-22 11:10:55.540289"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 41], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 41], ["auditable_type", "Node"], ["associated_id", 32], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 32\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f82a10bc-2d34-4342-bc46-523824a1dad5"], ["created_at", "2019-08-22 11:10:55.553942"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 32], ["created_at", "2019-08-22 11:10:55.570125"], ["updated_at", "2019-08-22 11:10:55.570125"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 42], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 42], ["auditable_type", "Node"], ["associated_id", 32], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 32\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "fbb4f5a1-9757-4df0-a1fb-986dc0cea86f"], ["created_at", "2019-08-22 11:10:55.574447"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mNode Destroy (3.0ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 41]]
  [1m[35m (5.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:10:55.639229"], ["updated_at", "2019-08-22 11:10:55.639229"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 33], ["created_at", "2019-08-22 11:10:55.644309"], ["updated_at", "2019-08-22 11:10:55.644309"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 43], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 43], ["auditable_type", "Node"], ["associated_id", 33], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 33\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "da993cc5-1846-47bc-9e6d-da87ea92abb8"], ["created_at", "2019-08-22 11:10:55.648760"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 33], ["created_at", "2019-08-22 11:10:55.661179"], ["updated_at", "2019-08-22 11:10:55.661179"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 44], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 44], ["auditable_type", "Node"], ["associated_id", 33], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 33\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e8528388-4ea4-4aff-97cd-5d4fc6668a61"], ["created_at", "2019-08-22 11:10:55.666110"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 43], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 43], ["auditable_type", "Node"], ["associated_id", 33], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "6d09ba0c-0220-41b4-bbba-92debc6e1ea2"], ["created_at", "2019-08-22 11:10:55.698980"]]
  [1m[36mInputNode Update (3.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 11:10:55.697163"], ["id", 43]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 43], ["to_node_id", 44], ["created_at", "2019-08-22 11:10:55.777062"], ["updated_at", "2019-08-22 11:10:55.777062"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Edge"], ["associated_id", 43], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 43\nto_node_id: 44\n"], ["version", 1], ["request_uuid", "0deecb31-b2cc-4a3d-aa50-ca5123254240"], ["created_at", "2019-08-22 11:10:55.780874"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (4.4ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (3.5ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:12:21.858700"], ["updated_at", "2019-08-22 11:12:21.858700"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (10.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 34], ["created_at", "2019-08-22 11:12:21.951971"], ["updated_at", "2019-08-22 11:12:21.951971"], ["type", "InputNode"]]
  [1m[35m (20.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 45], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 45], ["auditable_type", "Node"], ["associated_id", 34], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 34\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "324858e0-e25d-4f54-8b2f-0520bce36993"], ["created_at", "2019-08-22 11:12:22.011721"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (9.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[36mOutputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 34], ["created_at", "2019-08-22 11:12:22.085416"], ["updated_at", "2019-08-22 11:12:22.085416"], ["type", "OutputNode"]]
  [1m[35m (10.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 46], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 46], ["auditable_type", "Node"], ["associated_id", 34], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 34\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "88d1c0a4-18a8-4da4-9507-1569d969fb09"], ["created_at", "2019-08-22 11:12:22.092078"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mNode Load (4.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (13.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 45], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 45], ["auditable_type", "Node"], ["associated_id", 34], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "efdb7797-66e5-4a99-9cfa-39460392b47a"], ["created_at", "2019-08-22 11:12:22.142638"]]
  [1m[36mInputNode Update (4.8ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 11:12:22.139980"], ["id", 45]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mNode Load (3.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mNode Load (4.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 45], ["to_node_id", 46], ["created_at", "2019-08-22 11:12:22.276711"], ["updated_at", "2019-08-22 11:12:22.276711"]]
  [1m[35m (9.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Edge"], ["associated_id", 45], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 45\nto_node_id: 46\n"], ["version", 1], ["request_uuid", "9e541c25-699a-455e-9a0f-830cb8568779"], ["created_at", "2019-08-22 11:12:22.286296"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[35m (10.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (6.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:14:25.040153"], ["updated_at", "2019-08-22 11:14:25.040153"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (11.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 35], ["created_at", "2019-08-22 11:14:25.139709"], ["updated_at", "2019-08-22 11:14:25.139709"], ["type", "InputNode"]]
  [1m[35m (19.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 47], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 47], ["auditable_type", "Node"], ["associated_id", 35], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 35\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2e0a6fe0-e8d4-43d8-9ea7-6fdd577f393c"], ["created_at", "2019-08-22 11:14:25.219749"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (9.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[36mOutputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 35], ["created_at", "2019-08-22 11:14:25.299788"], ["updated_at", "2019-08-22 11:14:25.299788"], ["type", "OutputNode"]]
  [1m[35m (8.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 48], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 48], ["auditable_type", "Node"], ["associated_id", 35], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 35\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "97ffc147-ce01-431e-ac4b-34a5d50d52f9"], ["created_at", "2019-08-22 11:14:25.307915"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[35m (13.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 47], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 47], ["auditable_type", "Node"], ["associated_id", 35], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "608c904a-57a8-4fe3-a12e-e854686a5ac8"], ["created_at", "2019-08-22 11:14:25.364779"]]
  [1m[36mInputNode Update (5.9ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 11:14:25.362170"], ["id", 47]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mNode Load (4.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mNode Load (4.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 47], ["to_node_id", 48], ["created_at", "2019-08-22 11:14:25.504921"], ["updated_at", "2019-08-22 11:14:25.504921"]]
  [1m[35m (10.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Edge"], ["associated_id", 47], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 47\nto_node_id: 48\n"], ["version", 1], ["request_uuid", "9cf1725c-0df5-4755-9922-77e96e02f94f"], ["created_at", "2019-08-22 11:14:25.513462"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[35m (11.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
GraphServiceTest: test_deletes_edge_if_node_is_deleted
------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-22 11:16:28.636756"], ["updated_at", "2019-08-22 11:16:28.636756"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 36], ["created_at", "2019-08-22 11:16:28.734008"], ["updated_at", "2019-08-22 11:16:28.734008"], ["type", "InputNode"]]
  [1m[35m (11.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 49], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 49], ["auditable_type", "Node"], ["associated_id", 36], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 36\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "113472bf-a3da-478a-a350-e1d10f0addff"], ["created_at", "2019-08-22 11:16:28.799067"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[36mOutputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 36], ["created_at", "2019-08-22 11:16:28.872409"], ["updated_at", "2019-08-22 11:16:28.872409"], ["type", "OutputNode"]]
  [1m[35m (6.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 50], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 50], ["auditable_type", "Node"], ["associated_id", 36], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 36\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6e64d8bf-9803-4ffb-b29f-9e6aa7185489"], ["created_at", "2019-08-22 11:16:28.881359"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[36mEdge Load (10.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[36mEdge Load (8.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[35m (12.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 49], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 49], ["auditable_type", "Node"], ["associated_id", 36], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "454ba5f8-66ff-45fa-aa5c-272fffa10468"], ["created_at", "2019-08-22 11:16:29.002688"]]
  [1m[36mInputNode Update (3.5ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-22 11:16:28.997594"], ["id", 49]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (3.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 49], ["to_node_id", 50], ["created_at", "2019-08-22 11:16:29.119386"], ["updated_at", "2019-08-22 11:16:29.119386"]]
  [1m[35m (11.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Edge"], ["associated_id", 49], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 49\nto_node_id: 50\n"], ["version", 1], ["request_uuid", "2ff428c9-4ecc-4380-9081-336679fd8cde"], ["created_at", "2019-08-22 11:16:29.128131"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[36mEdge Load (10.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[36mNode Destroy (4.5ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 49]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 49], ["to_node_id", 50], ["created_at", "2019-08-22 11:16:29.251844"], ["updated_at", "2019-08-22 11:16:29.251844"]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (848.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "myapp_test"[0m
  [1m[35m (3600.2ms)[0m  [1m[35mCREATE DATABASE "myapp_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (8.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "audits" CASCADE[0m
  [1m[35m (159.3ms)[0m  [1m[35mCREATE TABLE "audits" ("id" bigserial primary key, "auditable_id" integer, "auditable_type" character varying, "associated_id" integer, "associated_type" character varying, "user_id" integer, "user_type" character varying, "username" character varying, "action" character varying, "audited_changes" text, "version" integer DEFAULT 0, "comment" character varying, "remote_address" character varying, "request_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (14.4ms)[0m  [1m[35mCREATE  INDEX  "associated_index" ON "audits"  ("associated_type", "associated_id")[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE  INDEX  "auditable_index" ON "audits"  ("auditable_type", "auditable_id", "version")[0m
  [1m[35m (27.0ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_created_at" ON "audits"  ("created_at")[0m
  [1m[35m (14.3ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_request_uuid" ON "audits"  ("request_uuid")[0m
  [1m[35m (12.7ms)[0m  [1m[35mCREATE  INDEX  "user_index" ON "audits"  ("user_id", "user_type")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "edges" CASCADE[0m
  [1m[35m (21.8ms)[0m  [1m[35mCREATE TABLE "edges" ("id" bigserial primary key, "from_node_id" bigint, "to_node_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_edges_on_from_node_id_and_to_node_id" ON "edges"  ("from_node_id", "to_node_id")[0m
  [1m[35m (13.0ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_from_node_id" ON "edges"  ("from_node_id")[0m
  [1m[35m (14.5ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_to_node_id" ON "edges"  ("to_node_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "graphs" CASCADE[0m
  [1m[35m (45.5ms)[0m  [1m[35mCREATE TABLE "graphs" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "type" character varying)[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "node_counts" CASCADE[0m
  [1m[35m (24.2ms)[0m  [1m[35mCREATE TABLE "node_counts" ("id" bigserial primary key, "count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "nodes" CASCADE[0m
  [1m[35m (56.3ms)[0m  [1m[35mCREATE TABLE "nodes" ("id" bigserial primary key, "name" character varying, "graph_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "content" json, "x" float DEFAULT 0.0, "y" float DEFAULT 0.0, "type" character varying NOT NULL, "node_ref_id" bigint)[0m
  [1m[35m (19.7ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_graph_id" ON "nodes"  ("graph_id")[0m
  [1m[35m (16.1ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_node_ref_id" ON "nodes"  ("node_ref_id")[0m
  [1m[35m (34.7ms)[0m  [1m[35mALTER TABLE "nodes" ADD CONSTRAINT "fk_rails_10f83f4418"
FOREIGN KEY ("graph_id")
  REFERENCES "graphs" ("id")
[0m
  [1m[35m (33.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (5.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20190822055108)[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20190430113529),
(20190724110012),
(20190411085042),
(20190523112235),
(20190514095100),
(20190514093514),
(20190801105126),
(20190806132227),
(20190724105907),
(20190429092701),
(20190411113011),
(20190411100036);

[0m
  [1m[35m (38.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (5.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (5.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-08-23 07:06:03.225929"], ["updated_at", "2019-08-23 07:06:03.225929"]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (26.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (7.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:03.904186"], ["updated_at", "2019-08-23 07:06:03.904186"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (10.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 1], ["created_at", "2019-08-23 07:06:03.953730"], ["updated_at", "2019-08-23 07:06:03.953730"], ["type", "InputNode"]]
  [1m[35m (22.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (10.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Node"], ["associated_id", 1], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 1\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "583c01f8-5ddc-46d0-ae2b-1d4d7a67aa7e"], ["created_at", "2019-08-23 07:06:04.006229"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:04.056982"], ["updated_at", "2019-08-23 07:06:04.056982"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 2], ["created_at", "2019-08-23 07:06:04.061787"], ["updated_at", "2019-08-23 07:06:04.061787"], ["type", "InputNode"]]
  [1m[35m (9.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Node"], ["associated_id", 2], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 2\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "25ecebc9-7347-419e-a244-da1dda581a29"], ["created_at", "2019-08-23 07:06:04.067469"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[36mOutputNode Create (2.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 2], ["created_at", "2019-08-23 07:06:04.122371"], ["updated_at", "2019-08-23 07:06:04.122371"], ["type", "OutputNode"]]
  [1m[35m (6.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Node"], ["associated_id", 2], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 2\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "56e25628-1f7e-4834-a5cd-bac6d998b690"], ["created_at", "2019-08-23 07:06:04.129041"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (16.3ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 2], ["to_node_id", 3], ["created_at", "2019-08-23 07:06:04.176327"], ["updated_at", "2019-08-23 07:06:04.176327"]]
  [1m[35m (6.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Edge"], ["associated_id", 2], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 2\nto_node_id: 3\n"], ["version", 1], ["request_uuid", "32abc7dc-0329-4bc7-ae52-0288f639192c"], ["created_at", "2019-08-23 07:06:04.196754"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 2]]
  [1m[35m (8.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Edge"], ["associated_id", 2], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 2\nto_node_id: 3\n"], ["version", 2], ["request_uuid", "8420e852-742a-4364-9b48-5c568c344680"], ["created_at", "2019-08-23 07:06:04.222294"]]
  [1m[36mEdge Destroy (2.5ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 1]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 2]]
  [1m[35m (6.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Node"], ["associated_id", 2], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 2\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "f5e1e800-cdc1-4a17-9e4b-d51e9b812649"], ["created_at", "2019-08-23 07:06:04.245368"]]
  [1m[36mInputNode Destroy (2.2ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:04.304639"], ["updated_at", "2019-08-23 07:06:04.304639"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 3], ["created_at", "2019-08-23 07:06:04.312319"], ["updated_at", "2019-08-23 07:06:04.312319"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Node"], ["associated_id", 3], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 3\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "58693fad-1b5a-4e70-83bf-e5213b55966f"], ["created_at", "2019-08-23 07:06:04.317833"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 3]]
  [1m[36mOutputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 3], ["created_at", "2019-08-23 07:06:04.330872"], ["updated_at", "2019-08-23 07:06:04.330872"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Node"], ["associated_id", 3], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 3\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "34800c82-a255-4ab9-aca8-af2ee6ebf353"], ["created_at", "2019-08-23 07:06:04.337509"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 4], ["to_node_id", 5], ["created_at", "2019-08-23 07:06:04.346677"], ["updated_at", "2019-08-23 07:06:04.346677"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Edge"], ["associated_id", 4], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 4\nto_node_id: 5\n"], ["version", 1], ["request_uuid", "aef43a4a-7104-496a-ba60-fc1d94a37526"], ["created_at", "2019-08-23 07:06:04.351785"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 5]]
  [1m[36mEdge Load (5.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 5]]
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Edge"], ["associated_id", 4], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 4\nto_node_id: 5\n"], ["version", 2], ["request_uuid", "bd97c420-8bf7-4176-8569-bfdab5c04f33"], ["created_at", "2019-08-23 07:06:04.389122"]]
  [1m[36mEdge Destroy (2.4ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Node"], ["associated_id", 3], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 3\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "e45d3b7a-cb15-430b-af58-b35eacff0c55"], ["created_at", "2019-08-23 07:06:04.400353"]]
  [1m[36mOutputNode Destroy (3.3ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
NodeRefNodeTest: test_can_create_node_ref_node_with_node_ref
------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:04.434532"], ["updated_at", "2019-08-23 07:06:04.434532"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 4]]
  [1m[36mOutputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 4], ["created_at", "2019-08-23 07:06:04.448405"], ["updated_at", "2019-08-23 07:06:04.448405"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 6], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 6], ["auditable_type", "Node"], ["associated_id", 4], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 4\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3b0f9929-7db2-452c-aa02-104073a788fb"], ["created_at", "2019-08-23 07:06:04.455679"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNodeRefNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type", "node_ref_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 4], ["created_at", "2019-08-23 07:06:04.494450"], ["updated_at", "2019-08-23 07:06:04.494450"], ["type", "NodeRefNode"], ["node_ref_id", 6]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Node"], ["associated_id", 4], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 4\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: 6\n"], ["version", 1], ["request_uuid", "dca22813-5cab-4bba-9602-8a771cc7ec79"], ["created_at", "2019-08-23 07:06:04.500622"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_to_input_node
----------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:04.519311"], ["updated_at", "2019-08-23 07:06:04.519311"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 5], ["created_at", "2019-08-23 07:06:04.531351"], ["updated_at", "2019-08-23 07:06:04.531351"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Node"], ["associated_id", 5], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 5\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "af5e963e-3925-4db4-9061-e49b50a413f7"], ["created_at", "2019-08-23 07:06:04.537143"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_without_node_ref
-------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:04.551283"], ["updated_at", "2019-08-23 07:06:04.551283"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:04.572814"], ["updated_at", "2019-08-23 07:06:04.572814"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 7], ["created_at", "2019-08-23 07:06:04.581105"], ["updated_at", "2019-08-23 07:06:04.581105"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Node"], ["associated_id", 7], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 7\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8c3ea594-7fc4-4474-b560-7d37615d952a"], ["created_at", "2019-08-23 07:06:04.586945"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 7]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 7], ["created_at", "2019-08-23 07:06:04.601241"], ["updated_at", "2019-08-23 07:06:04.601241"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Node"], ["associated_id", 7], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 7\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5834add3-a973-4e9d-8b35-0d3f1dffdf53"], ["created_at", "2019-08-23 07:06:04.607309"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 9], ["to_node_id", 10], ["created_at", "2019-08-23 07:06:04.624029"], ["updated_at", "2019-08-23 07:06:04.624029"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Edge"], ["associated_id", 9], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 9\nto_node_id: 10\n"], ["version", 1], ["request_uuid", "3f01a448-e066-42d2-b0ea-903c8bd3bdbb"], ["created_at", "2019-08-23 07:06:04.637679"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:04.675915"], ["updated_at", "2019-08-23 07:06:04.675915"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 8], ["created_at", "2019-08-23 07:06:04.688357"], ["updated_at", "2019-08-23 07:06:04.688357"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 8\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "58a055db-825f-4d56-a695-2350f2b0e822"], ["created_at", "2019-08-23 07:06:04.693168"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:04.715808"], ["updated_at", "2019-08-23 07:06:04.715808"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 9], ["created_at", "2019-08-23 07:06:04.724624"], ["updated_at", "2019-08-23 07:06:04.724624"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Node"], ["associated_id", 9], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 9\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c49072f3-b4bb-450c-97f3-5b1772b71e83"], ["created_at", "2019-08-23 07:06:04.731747"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:04.754065"], ["updated_at", "2019-08-23 07:06:04.754065"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 10], ["created_at", "2019-08-23 07:06:04.762343"], ["updated_at", "2019-08-23 07:06:04.762343"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Node"], ["associated_id", 10], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 10\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "eda413cc-7dda-49d2-8867-024cb73e3fcf"], ["created_at", "2019-08-23 07:06:04.767178"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-23 07:06:04.776911"], ["updated_at", "2019-08-23 07:06:04.776911"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 11]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 11], ["created_at", "2019-08-23 07:06:04.786937"], ["updated_at", "2019-08-23 07:06:04.786937"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Node"], ["associated_id", 11], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 11\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0e4b4bfd-dbf9-4877-b906-33c746514200"], ["created_at", "2019-08-23 07:06:04.791323"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:04.809766"], ["updated_at", "2019-08-23 07:06:04.809766"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 12], ["created_at", "2019-08-23 07:06:04.814923"], ["updated_at", "2019-08-23 07:06:04.814923"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Node"], ["associated_id", 12], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 12\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "98914957-cae5-45a6-ae4a-44f3c7474e22"], ["created_at", "2019-08-23 07:06:04.820313"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 12], ["created_at", "2019-08-23 07:06:04.834216"], ["updated_at", "2019-08-23 07:06:04.834216"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Node"], ["associated_id", 12], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 12\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "75053375-2578-42c6-ac5d-e0586b3acb74"], ["created_at", "2019-08-23 07:06:04.838553"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 15], ["to_node_id", 16], ["created_at", "2019-08-23 07:06:04.847127"], ["updated_at", "2019-08-23 07:06:04.847127"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Edge"], ["associated_id", 15], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 15\nto_node_id: 16\n"], ["version", 1], ["request_uuid", "f981c1f3-2f1a-4ce6-9aee-6baeb116501a"], ["created_at", "2019-08-23 07:06:04.851533"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Edge"], ["associated_id", 15], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 15\nto_node_id: 16\n"], ["version", 2], ["request_uuid", "55292281-4f31-44bb-93fc-eccf4e957e44"], ["created_at", "2019-08-23 07:06:04.859774"]]
  [1m[36mEdge Destroy (4.0ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_graph_if_save_all_is_successful
------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:04.964413"], ["updated_at", "2019-08-23 07:06:04.964413"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/13/save_all" for 127.0.0.1 at 2019-08-23 07:06:04 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"13", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "clientId"=>"b85b6e9e-8fcc-48d0-a58f-f43f79f0de33"}, {"name"=>"Node 2", "type"=>"OutputNode", "clientId"=>"8ed429c6-6ab8-4e63-acfd-0004d5248b08"}], "id"=>"13"}
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-23 07:06:05.110229"], ["updated_at", "2019-08-23 07:06:05.110229"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 14], ["created_at", "2019-08-23 07:06:05.113097"], ["updated_at", "2019-08-23 07:06:05.113097"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Node"], ["associated_id", 14], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 14\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "63102ea1-c35f-40b2-9c14-f8e7bb22cb6a"], ["created_at", "2019-08-23 07:06:05.117801"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:05.137192"], ["updated_at", "2019-08-23 07:06:05.137192"]]
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 15], ["created_at", "2019-08-23 07:06:05.140568"], ["updated_at", "2019-08-23 07:06:05.140568"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 18], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 18], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b5f870c6-1112-4ca5-b826-72fcea3dc6f9"], ["created_at", "2019-08-23 07:06:05.147443"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 15], ["created_at", "2019-08-23 07:06:05.155943"], ["updated_at", "2019-08-23 07:06:05.155943"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0411417d-e75c-4a81-a1cd-7d3038acd10a"], ["created_at", "2019-08-23 07:06:05.160130"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 15], ["created_at", "2019-08-23 07:06:05.168130"], ["updated_at", "2019-08-23 07:06:05.168130"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 20], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 20], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "30fcbfe8-2756-4317-b95f-d858ad041b81"], ["created_at", "2019-08-23 07:06:05.172415"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 18], ["to_node_id", 19], ["created_at", "2019-08-23 07:06:05.188783"], ["updated_at", "2019-08-23 07:06:05.188783"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Edge"], ["associated_id", 18], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 18\nto_node_id: 19\n"], ["version", 1], ["request_uuid", "e30aa40e-6da3-4499-93fc-e2f3a6b7a3c4"], ["created_at", "2019-08-23 07:06:05.192987"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Edge"], ["associated_id", 18], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 19\n- 20\n"], ["version", 2], ["request_uuid", "547d5476-bcba-468d-b279-135ee567ef76"], ["created_at", "2019-08-23 07:06:05.202700"]]
  [1m[36mEdge Update (3.8ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 20], ["updated_at", "2019-08-23 07:06:05.200916"], ["id", 5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (9.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mEdge Load (8.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mAudited::Audit Load (9.6ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 15], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (5.0ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 5], ["auditable_type", "Edge"]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mEdge Update (3.6ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 19], ["updated_at", "2019-08-23 07:06:05.276997"], ["id", 5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (4.6ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 31]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mEdge Load (9.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mEdge Load (10.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mAudited::Audit Load (5.3ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 15], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (5.3ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 5], ["auditable_type", "Edge"]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mEdge Destroy (3.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (4.4ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 30]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mEdge Load (9.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mEdge Load (10.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:27.070825"], ["updated_at", "2019-08-23 07:06:27.070825"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (7.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 16], ["created_at", "2019-08-23 07:06:27.166550"], ["updated_at", "2019-08-23 07:06:27.166550"], ["type", "InputNode"]]
  [1m[35m (20.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "687659bc-7e07-4fa4-835a-b6268ae9c3c5"], ["created_at", "2019-08-23 07:06:27.231622"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (10.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mOutputNode Create (4.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 16], ["created_at", "2019-08-23 07:06:27.313909"], ["updated_at", "2019-08-23 07:06:27.313909"], ["type", "OutputNode"]]
  [1m[35m (10.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 22], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 22], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a9c3731e-c959-46e8-88ed-7bb984019f10"], ["created_at", "2019-08-23 07:06:27.334085"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mEdge Load (12.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mEdge Load (7.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (5.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (4.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (4.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mNode Destroy (2.8ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 21]]
  [1m[36mEdge Load (5.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mEdge Load (5.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:27.560323"], ["updated_at", "2019-08-23 07:06:27.560323"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 17], ["created_at", "2019-08-23 07:06:27.567229"], ["updated_at", "2019-08-23 07:06:27.567229"], ["type", "InputNode"]]
  [1m[35m (6.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Node"], ["associated_id", 17], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 17\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d79e72f7-1fde-4094-b3b0-73e8f37d5dfe"], ["created_at", "2019-08-23 07:06:27.575911"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mOutputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 17], ["created_at", "2019-08-23 07:06:27.597258"], ["updated_at", "2019-08-23 07:06:27.597258"], ["type", "OutputNode"]]
  [1m[35m (8.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Node"], ["associated_id", 17], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 17\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8758887a-a991-4b52-a4d6-580f93bbb3ea"], ["created_at", "2019-08-23 07:06:27.604640"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 23], ["to_node_id", 24], ["created_at", "2019-08-23 07:06:27.645680"], ["updated_at", "2019-08-23 07:06:27.645680"]]
  [1m[35m (6.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 6], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 6], ["auditable_type", "Edge"], ["associated_id", 23], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 23\nto_node_id: 24\n"], ["version", 1], ["request_uuid", "7982f8fe-ab47-42f0-82ab-c2548c389f3b"], ["created_at", "2019-08-23 07:06:27.655320"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (6.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mEdge Load (9.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:27.716429"], ["updated_at", "2019-08-23 07:06:27.716429"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 18], ["created_at", "2019-08-23 07:06:27.723118"], ["updated_at", "2019-08-23 07:06:27.723118"], ["type", "InputNode"]]
  [1m[35m (6.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 25], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 25], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 18\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cafec5d7-ec97-4591-83a6-9b9c25dccd50"], ["created_at", "2019-08-23 07:06:27.732341"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mOutputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 18], ["created_at", "2019-08-23 07:06:27.754939"], ["updated_at", "2019-08-23 07:06:27.754939"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 26], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 26], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 18\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8e322fdf-e4ab-4ece-9f20-4ea74f5b7052"], ["created_at", "2019-08-23 07:06:27.766603"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mEdge Load (8.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mEdge Load (8.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 25], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 25], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "3df28f67-c653-4a33-822f-1a1bea8c9b45"], ["created_at", "2019-08-23 07:06:27.844294"]]
  [1m[36mInputNode Update (3.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 07:06:27.835591"], ["id", 25]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mEdge Load (9.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[36mEdge Load (7.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 18]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:27.956399"], ["updated_at", "2019-08-23 07:06:27.956399"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 19], ["created_at", "2019-08-23 07:06:27.966199"], ["updated_at", "2019-08-23 07:06:27.966199"], ["type", "InputNode"]]
  [1m[35m (2.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 27], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 27], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 19\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9763c3b0-e434-44b5-a688-1ec546f66c12"], ["created_at", "2019-08-23 07:06:27.977209"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mOutputNode Create (3.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 19], ["created_at", "2019-08-23 07:06:27.998266"], ["updated_at", "2019-08-23 07:06:27.998266"], ["type", "OutputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 28], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 28], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 19\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "837e70c7-2034-417f-bb05-d6d914a52faf"], ["created_at", "2019-08-23 07:06:28.010660"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mEdge Load (9.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mEdge Load (9.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 27], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 27], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "2c6a2d93-7d76-45f3-b2a5-3d06147ec8de"], ["created_at", "2019-08-23 07:06:28.092967"]]
  [1m[36mInputNode Update (2.6ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 07:06:28.085437"], ["id", 27]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 27], ["to_node_id", 28], ["created_at", "2019-08-23 07:06:28.163422"], ["updated_at", "2019-08-23 07:06:28.163422"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Edge"], ["associated_id", 27], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 27\nto_node_id: 28\n"], ["version", 1], ["request_uuid", "6d2ab28b-2bbc-4300-9355-2058ab67cdb2"], ["created_at", "2019-08-23 07:06:28.169892"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Edge"], ["associated_id", 27], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 27\nto_node_id: 28\n"], ["version", 2], ["request_uuid", "6453f32f-ec47-4abd-a437-b2129245907a"], ["created_at", "2019-08-23 07:06:28.262273"]]
  [1m[36mEdge Destroy (2.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:28.287863"], ["updated_at", "2019-08-23 07:06:28.287863"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 20], ["created_at", "2019-08-23 07:06:28.293913"], ["updated_at", "2019-08-23 07:06:28.293913"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 29], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 29], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 20\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "73690546-eb0e-4a0f-8b96-cb544fb57861"], ["created_at", "2019-08-23 07:06:28.301196"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mOutputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 20], ["created_at", "2019-08-23 07:06:28.312892"], ["updated_at", "2019-08-23 07:06:28.312892"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 30], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 30], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 20\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "48c1968e-01f4-47db-bc76-e80b6ca138d2"], ["created_at", "2019-08-23 07:06:28.318032"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 29], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 29], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "722f6ba3-b49c-4c19-b2bc-93a77b3bcf1a"], ["created_at", "2019-08-23 07:06:28.352153"]]
  [1m[36mInputNode Update (3.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 07:06:28.349541"], ["id", 29]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 29], ["to_node_id", 30], ["created_at", "2019-08-23 07:06:28.402074"], ["updated_at", "2019-08-23 07:06:28.402074"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Edge"], ["associated_id", 29], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 29\nto_node_id: 30\n"], ["version", 1], ["request_uuid", "530fd05f-a2c8-4f73-8b5b-9b7b7f5fc45c"], ["created_at", "2019-08-23 07:06:28.407832"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 29], ["to_node_id", 30], ["created_at", "2019-08-23 07:06:28.416730"], ["updated_at", "2019-08-23 07:06:28.416730"]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:28.436265"], ["updated_at", "2019-08-23 07:06:28.436265"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 21], ["created_at", "2019-08-23 07:06:28.441719"], ["updated_at", "2019-08-23 07:06:28.441719"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 31], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 31], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 21\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c2783483-13e8-400a-8162-f5a064f5b2c9"], ["created_at", "2019-08-23 07:06:28.446361"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 21], ["created_at", "2019-08-23 07:06:28.458583"], ["updated_at", "2019-08-23 07:06:28.458583"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 32], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 32], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 21\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "989e9a97-d5ac-4cce-bbdb-2ee6e5482b97"], ["created_at", "2019-08-23 07:06:28.463257"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:28.501941"], ["updated_at", "2019-08-23 07:06:28.501941"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 22], ["created_at", "2019-08-23 07:06:28.508514"], ["updated_at", "2019-08-23 07:06:28.508514"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 33], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 33], ["auditable_type", "Node"], ["associated_id", 22], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 22\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e79e7468-28cb-4007-9381-634af7718f8a"], ["created_at", "2019-08-23 07:06:28.512884"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 22], ["created_at", "2019-08-23 07:06:28.524373"], ["updated_at", "2019-08-23 07:06:28.524373"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 34], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 34], ["auditable_type", "Node"], ["associated_id", 22], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 22\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "616f3111-28f5-4146-b201-123836528616"], ["created_at", "2019-08-23 07:06:28.528966"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mEdge Load (3.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 33], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 33], ["auditable_type", "Node"], ["associated_id", 22], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "c490d5ed-4785-4e82-880b-b4f8fba397b8"], ["created_at", "2019-08-23 07:06:28.565136"]]
  [1m[36mInputNode Update (3.1ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 07:06:28.562005"], ["id", 33]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 33], ["to_node_id", 34], ["created_at", "2019-08-23 07:06:28.671019"], ["updated_at", "2019-08-23 07:06:28.671019"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Edge"], ["associated_id", 33], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 33\nto_node_id: 34\n"], ["version", 1], ["request_uuid", "7a4400b0-1785-4dc0-aaa5-1c0c95c865d2"], ["created_at", "2019-08-23 07:06:28.675669"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:28.734914"], ["updated_at", "2019-08-23 07:06:28.734914"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:28.759572"], ["updated_at", "2019-08-23 07:06:28.759572"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 24], ["created_at", "2019-08-23 07:06:28.766354"], ["updated_at", "2019-08-23 07:06:28.766354"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 35], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 35], ["auditable_type", "Node"], ["associated_id", 24], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 24\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b72967fc-b672-496c-8160-c5a1c5d97695"], ["created_at", "2019-08-23 07:06:28.770963"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 24]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 24], ["created_at", "2019-08-23 07:06:28.783317"], ["updated_at", "2019-08-23 07:06:28.783317"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 36], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 36], ["auditable_type", "Node"], ["associated_id", 24], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 24\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0052351c-28e1-4fe4-af61-59008370144d"], ["created_at", "2019-08-23 07:06:28.788111"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.2ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 35], ["to_node_id", 36], ["created_at", "2019-08-23 07:06:28.797344"], ["updated_at", "2019-08-23 07:06:28.797344"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Edge"], ["associated_id", 35], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 35\nto_node_id: 36\n"], ["version", 1], ["request_uuid", "66b324e7-e243-43bf-a294-bf48acba401f"], ["created_at", "2019-08-23 07:06:28.802807"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 35]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Edge"], ["associated_id", 35], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 35\nto_node_id: 36\n"], ["version", 2], ["request_uuid", "5cb308b6-0bc0-447b-b5a6-d5d118ad3370"], ["created_at", "2019-08-23 07:06:28.826799"]]
  [1m[36mEdge Destroy (2.5ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 11]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 35]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 35], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 35], ["auditable_type", "Node"], ["associated_id", 24], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 24\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "72e3d943-39d3-4a05-9bb8-ea29ae829966"], ["created_at", "2019-08-23 07:06:28.842682"]]
  [1m[36mInputNode Destroy (2.3ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 35]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:28.866424"], ["updated_at", "2019-08-23 07:06:28.866424"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 25], ["created_at", "2019-08-23 07:06:28.872023"], ["updated_at", "2019-08-23 07:06:28.872023"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 37], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 37], ["auditable_type", "Node"], ["associated_id", 25], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 25\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "842c2cf9-ed5f-480a-ba20-d791d12d9d08"], ["created_at", "2019-08-23 07:06:28.877964"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
  [1m[36mOutputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 25], ["created_at", "2019-08-23 07:06:28.890129"], ["updated_at", "2019-08-23 07:06:28.890129"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 38], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 38], ["auditable_type", "Node"], ["associated_id", 25], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 25\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "367687d5-9d78-4d8c-a511-a4eba21428b0"], ["created_at", "2019-08-23 07:06:28.895163"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 37], ["to_node_id", 38], ["created_at", "2019-08-23 07:06:28.904807"], ["updated_at", "2019-08-23 07:06:28.904807"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Edge"], ["associated_id", 37], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 37\nto_node_id: 38\n"], ["version", 1], ["request_uuid", "f530be17-2e86-414c-9634-60d64e439778"], ["created_at", "2019-08-23 07:06:28.910337"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 38]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 38]]
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Edge"], ["associated_id", 37], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 37\nto_node_id: 38\n"], ["version", 2], ["request_uuid", "4873a86d-0d2f-4c08-8f6a-6719e2de2788"], ["created_at", "2019-08-23 07:06:28.938143"]]
  [1m[36mEdge Destroy (2.3ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 12]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 38], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (8.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 38], ["auditable_type", "Node"], ["associated_id", 25], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 25\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "e61e156a-bda6-49eb-a891-561eb2c9e0a6"], ["created_at", "2019-08-23 07:06:28.949398"]]
  [1m[36mOutputNode Destroy (2.7ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 38]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:28.995183"], ["updated_at", "2019-08-23 07:06:28.995183"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 26], ["created_at", "2019-08-23 07:06:29.000888"], ["updated_at", "2019-08-23 07:06:29.000888"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 39], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 39], ["auditable_type", "Node"], ["associated_id", 26], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 26\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5a3cd9a4-28c4-4521-b116-e31146f4417a"], ["created_at", "2019-08-23 07:06:29.006174"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:29.059787"], ["updated_at", "2019-08-23 07:06:29.059787"]]
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 27], ["created_at", "2019-08-23 07:06:29.062563"], ["updated_at", "2019-08-23 07:06:29.062563"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 40], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 40], ["auditable_type", "Node"], ["associated_id", 27], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 27\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9f4ea3fd-9b6f-47d3-991b-8713bc17a167"], ["created_at", "2019-08-23 07:06:29.067511"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 27], ["created_at", "2019-08-23 07:06:29.077068"], ["updated_at", "2019-08-23 07:06:29.077068"], ["type", "OutputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 41], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 41], ["auditable_type", "Node"], ["associated_id", 27], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 27\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9da33485-c399-4a2f-9e90-604b8ec2566e"], ["created_at", "2019-08-23 07:06:29.082115"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 27], ["created_at", "2019-08-23 07:06:29.091288"], ["updated_at", "2019-08-23 07:06:29.091288"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 42], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 42], ["auditable_type", "Node"], ["associated_id", 27], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 27\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3be411ad-bfdf-4d51-8cd1-f8bfd794329f"], ["created_at", "2019-08-23 07:06:29.096873"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 40], ["to_node_id", 41], ["created_at", "2019-08-23 07:06:29.113377"], ["updated_at", "2019-08-23 07:06:29.113377"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Edge"], ["associated_id", 40], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 40\nto_node_id: 41\n"], ["version", 1], ["request_uuid", "d5ec6f0c-ac4b-4b41-bf76-cb7504775e0d"], ["created_at", "2019-08-23 07:06:29.117998"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Edge"], ["associated_id", 40], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 41\n- 42\n"], ["version", 2], ["request_uuid", "2c7db9f1-5d44-47e2-9394-ab2ca66858d7"], ["created_at", "2019-08-23 07:06:29.129089"]]
  [1m[36mEdge Update (2.5ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 42], ["updated_at", "2019-08-23 07:06:29.127285"], ["id", 13]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mAudited::Audit Load (3.3ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 27], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (4.3ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 13], ["auditable_type", "Edge"]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mEdge Update (2.7ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 41], ["updated_at", "2019-08-23 07:06:29.169394"], ["id", 13]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (2.7ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 70]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mAudited::Audit Load (2.7ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 27], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.1ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 13], ["auditable_type", "Edge"]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[36mEdge Destroy (2.5ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 13]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (2.9ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 69]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 27]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
NodeRefNodeTest: test_can_create_node_ref_node_with_node_ref
------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:29.250479"], ["updated_at", "2019-08-23 07:06:29.250479"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mOutputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 28], ["created_at", "2019-08-23 07:06:29.258999"], ["updated_at", "2019-08-23 07:06:29.258999"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 43], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 43], ["auditable_type", "Node"], ["associated_id", 28], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 28\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2492dad9-4984-441d-bba0-d17de3fef443"], ["created_at", "2019-08-23 07:06:29.264663"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNodeRefNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type", "node_ref_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 28], ["created_at", "2019-08-23 07:06:29.290592"], ["updated_at", "2019-08-23 07:06:29.290592"], ["type", "NodeRefNode"], ["node_ref_id", 43]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 44], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 44], ["auditable_type", "Node"], ["associated_id", 28], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 28\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: 43\n"], ["version", 1], ["request_uuid", "ead82c7b-ad1b-4341-82cf-3f63eb5a193a"], ["created_at", "2019-08-23 07:06:29.295198"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_to_input_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:29.313833"], ["updated_at", "2019-08-23 07:06:29.313833"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 29], ["created_at", "2019-08-23 07:06:29.320039"], ["updated_at", "2019-08-23 07:06:29.320039"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 45], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 45], ["auditable_type", "Node"], ["associated_id", 29], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 29\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9c671264-1f09-4453-bd20-31235a78cd15"], ["created_at", "2019-08-23 07:06:29.325079"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_without_node_ref
-------------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:29.344967"], ["updated_at", "2019-08-23 07:06:29.344967"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_graph_if_save_all_is_successful
------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:29.424867"], ["updated_at", "2019-08-23 07:06:29.424867"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/31/save_all" for 127.0.0.1 at 2019-08-23 07:06:29 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"31", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "clientId"=>"76fc8e4a-0ca9-4605-9fd7-dac6553432b4"}, {"name"=>"Node 2", "type"=>"OutputNode", "clientId"=>"e0e8c0ab-31bb-41b5-8193-ef0c5df088cd"}], "id"=>"31"}
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Update (1.9ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-23 07:06:29.500768"], ["id", 31]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 31], ["created_at", "2019-08-23 07:06:29.509589"], ["updated_at", "2019-08-23 07:06:29.509589"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 46], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 46], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 31\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "cb0e88fe-360d-4094-929c-414242da18b5"], ["created_at", "2019-08-23 07:06:29.514999"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 31], ["created_at", "2019-08-23 07:06:29.527986"], ["updated_at", "2019-08-23 07:06:29.527986"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 47], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 47], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 31\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "cb0e88fe-360d-4094-929c-414242da18b5"], ["created_at", "2019-08-23 07:06:29.532781"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mCACHE Node Load (0.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 31]]
Completed 200 OK in 73ms (Views: 0.5ms | ActiveRecord: 19.8ms)
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-23 07:06:29.609307"], ["updated_at", "2019-08-23 07:06:29.609307"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 32], ["created_at", "2019-08-23 07:06:29.612110"], ["updated_at", "2019-08-23 07:06:29.612110"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 48], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 48], ["auditable_type", "Node"], ["associated_id", 32], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 32\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ed8caede-8291-4c23-ad42-9f6456b4160e"], ["created_at", "2019-08-23 07:06:29.616697"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:29.650774"], ["updated_at", "2019-08-23 07:06:29.650774"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 33]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 33], ["created_at", "2019-08-23 07:06:29.662770"], ["updated_at", "2019-08-23 07:06:29.662770"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 49], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 49], ["auditable_type", "Node"], ["associated_id", 33], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 33\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "26351484-bd6a-4dc8-9076-b52987e14871"], ["created_at", "2019-08-23 07:06:29.667938"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:29.692075"], ["updated_at", "2019-08-23 07:06:29.692075"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 34], ["created_at", "2019-08-23 07:06:29.699898"], ["updated_at", "2019-08-23 07:06:29.699898"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 50], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 50], ["auditable_type", "Node"], ["associated_id", 34], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 34\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "69faf0a3-0ab6-4382-85be-e98382287b2f"], ["created_at", "2019-08-23 07:06:29.705752"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-23 07:06:29.683865"], ["updated_at", "2019-08-23 07:06:29.683865"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 35], ["created_at", "2019-08-23 07:06:29.693554"], ["updated_at", "2019-08-23 07:06:29.693554"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 51], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 51], ["auditable_type", "Node"], ["associated_id", 35], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 35\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4e98d4a6-1655-4ef9-88be-38262688efda"], ["created_at", "2019-08-23 07:06:29.698698"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:29.720083"], ["updated_at", "2019-08-23 07:06:29.720083"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 36], ["created_at", "2019-08-23 07:06:29.725956"], ["updated_at", "2019-08-23 07:06:29.725956"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 52], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 52], ["auditable_type", "Node"], ["associated_id", 36], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 36\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "81573ac0-da3f-4d00-9618-40f180d63ca4"], ["created_at", "2019-08-23 07:06:29.731123"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 36]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 36], ["created_at", "2019-08-23 07:06:29.743989"], ["updated_at", "2019-08-23 07:06:29.743989"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 53], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 53], ["auditable_type", "Node"], ["associated_id", 36], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 36\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cbb3028a-2210-4119-a644-cef2ae001682"], ["created_at", "2019-08-23 07:06:29.748820"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 52], ["to_node_id", 53], ["created_at", "2019-08-23 07:06:29.758436"], ["updated_at", "2019-08-23 07:06:29.758436"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (6.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Edge"], ["associated_id", 52], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 52\nto_node_id: 53\n"], ["version", 1], ["request_uuid", "66d976dc-9384-42ba-b3b4-c77e3559a3ad"], ["created_at", "2019-08-23 07:06:29.763263"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:29.785946"], ["updated_at", "2019-08-23 07:06:29.785946"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 37], ["created_at", "2019-08-23 07:06:29.800107"], ["updated_at", "2019-08-23 07:06:29.800107"], ["type", "InputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 54], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 54], ["auditable_type", "Node"], ["associated_id", 37], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 37\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "01859cc0-ae13-482b-8b73-ec9377ff7d1e"], ["created_at", "2019-08-23 07:06:29.807038"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 37]]
  [1m[36mOutputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 37], ["created_at", "2019-08-23 07:06:29.821478"], ["updated_at", "2019-08-23 07:06:29.821478"], ["type", "OutputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 55], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 55], ["auditable_type", "Node"], ["associated_id", 37], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 37\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a4bce441-4b98-4632-99a7-90f8695e1a74"], ["created_at", "2019-08-23 07:06:29.828048"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 54], ["to_node_id", 55], ["created_at", "2019-08-23 07:06:29.838391"], ["updated_at", "2019-08-23 07:06:29.838391"]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Edge"], ["associated_id", 54], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 54\nto_node_id: 55\n"], ["version", 1], ["request_uuid", "e7bdff07-067f-4aa6-b610-05c4a502dfe3"], ["created_at", "2019-08-23 07:06:29.842834"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Edge"], ["associated_id", 54], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 54\nto_node_id: 55\n"], ["version", 2], ["request_uuid", "3a425d58-af41-4681-98c5-f0ab858db272"], ["created_at", "2019-08-23 07:06:29.854210"]]
  [1m[36mEdge Destroy (3.1ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 15]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:06:29.882481"], ["updated_at", "2019-08-23 07:06:29.882481"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 38], ["created_at", "2019-08-23 07:06:29.887940"], ["updated_at", "2019-08-23 07:06:29.887940"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 56], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 56], ["auditable_type", "Node"], ["associated_id", 38], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 38\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "da46c442-546d-4b70-915e-69e205616edf"], ["created_at", "2019-08-23 07:06:29.893911"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (4.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (7.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:08:03.056343"], ["updated_at", "2019-08-23 07:08:03.056343"]]
  [1m[35m (2.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (9.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mOutputNode Create (8.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 39], ["created_at", "2019-08-23 07:08:03.226851"], ["updated_at", "2019-08-23 07:08:03.226851"], ["type", "OutputNode"]]
  [1m[35m (19.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 57], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 57], ["auditable_type", "Node"], ["associated_id", 39], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 39\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d4b7701f-9ce5-4444-b3ac-7a622e97394c"], ["created_at", "2019-08-23 07:08:03.304545"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 39], ["created_at", "2019-08-23 07:08:03.343640"], ["updated_at", "2019-08-23 07:08:03.343640"], ["type", "OutputNode"]]
  [1m[35m (6.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 58], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 58], ["auditable_type", "Node"], ["associated_id", 39], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 39\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c5919544-009f-4b9f-b720-f8774d21c4f5"], ["created_at", "2019-08-23 07:08:03.352782"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 57], ["to_node_id", 58], ["created_at", "2019-08-23 07:08:03.425861"], ["updated_at", "2019-08-23 07:08:03.425861"]]
  [1m[35m (6.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (2.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Edge"], ["associated_id", 57], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 57\nto_node_id: 58\n"], ["version", 1], ["request_uuid", "422be914-55ce-4ecc-a8da-84c007640f46"], ["created_at", "2019-08-23 07:08:03.434675"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (9.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mEdge Load (5.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (11.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:12:50.318837"], ["updated_at", "2019-08-23 07:12:50.318837"]]
  [1m[36mNode Load (49.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[36mOutputNode Create (8.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 40], ["created_at", "2019-08-23 07:12:50.579737"], ["updated_at", "2019-08-23 07:12:50.579737"], ["type", "OutputNode"]]
  [1m[35m (19.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 59], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 59], ["auditable_type", "Node"], ["associated_id", 40], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 40\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8dece0e2-9bc1-446b-870b-e53269a3db31"], ["created_at", "2019-08-23 07:12:50.672361"]]
  [1m[36mOutputNode Create (2.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 40], ["created_at", "2019-08-23 07:12:50.704754"], ["updated_at", "2019-08-23 07:12:50.704754"], ["type", "OutputNode"]]
  [1m[35m (8.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 60], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 60], ["auditable_type", "Node"], ["associated_id", 40], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 40\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3e2aa9da-ab11-4862-863e-b38bcd4a790d"], ["created_at", "2019-08-23 07:12:50.712649"]]
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[36mEdge Create (22.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 59], ["to_node_id", 60], ["created_at", "2019-08-23 07:12:50.890152"], ["updated_at", "2019-08-23 07:12:50.890152"]]
  [1m[35m (12.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Edge"], ["associated_id", 59], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 59\nto_node_id: 60\n"], ["version", 1], ["request_uuid", "fa0ae6ff-eb26-47d0-8f28-7477f9a62767"], ["created_at", "2019-08-23 07:12:50.937200"]]
  [1m[36mEdge Load (22.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[36mEdge Load (10.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (25.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:14:08.623846"], ["updated_at", "2019-08-23 07:14:08.623846"]]
  [1m[36mNode Load (12.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 41]]
  [1m[36mOutputNode Create (8.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 41], ["created_at", "2019-08-23 07:14:08.780608"], ["updated_at", "2019-08-23 07:14:08.780608"], ["type", "OutputNode"]]
  [1m[35m (28.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 61], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (7.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 61], ["auditable_type", "Node"], ["associated_id", 41], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 41\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bb75a470-b95a-4f0e-a717-8327aa9c8ff4"], ["created_at", "2019-08-23 07:14:08.861127"]]
  [1m[36mOutputNode Create (6.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 41], ["created_at", "2019-08-23 07:14:08.918297"], ["updated_at", "2019-08-23 07:14:08.918297"], ["type", "OutputNode"]]
  [1m[35m (10.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 62], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 62], ["auditable_type", "Node"], ["associated_id", 41], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 41\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4140418a-b308-4372-8c50-3d01b03e2902"], ["created_at", "2019-08-23 07:14:08.939298"]]
  [1m[36mGraph Load (2.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mNode Load (4.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 41]]
  [1m[36mEdge Create (4.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 61], ["to_node_id", 62], ["created_at", "2019-08-23 07:14:09.042462"], ["updated_at", "2019-08-23 07:14:09.042462"]]
  [1m[35m (11.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 18], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 18], ["auditable_type", "Edge"], ["associated_id", 61], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 61\nto_node_id: 62\n"], ["version", 1], ["request_uuid", "5f85a0f3-bf09-428e-b1e3-dafdcf627c67"], ["created_at", "2019-08-23 07:14:09.056217"]]
  [1m[36mEdge Load (20.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 41]]
  [1m[36mEdge Load (20.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 41]]
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:14:45.422919"], ["updated_at", "2019-08-23 07:14:45.422919"]]
  [1m[36mNode Load (11.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 42]]
  [1m[36mOutputNode Create (7.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 42], ["created_at", "2019-08-23 07:14:45.589096"], ["updated_at", "2019-08-23 07:14:45.589096"], ["type", "OutputNode"]]
  [1m[35m (20.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 63], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 63], ["auditable_type", "Node"], ["associated_id", 42], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 42\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4a60d616-3af8-4694-b38b-7d9099276838"], ["created_at", "2019-08-23 07:14:45.643293"]]
  [1m[36mOutputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 42], ["created_at", "2019-08-23 07:14:45.674734"], ["updated_at", "2019-08-23 07:14:45.674734"], ["type", "OutputNode"]]
  [1m[35m (10.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 64], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 64], ["auditable_type", "Node"], ["associated_id", 42], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 42\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a2fb0187-beeb-4bfd-b33c-c2c9b93c4460"], ["created_at", "2019-08-23 07:14:45.680796"]]
  [1m[36mGraph Load (2.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  [1m[36mNode Load (4.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 42]]
  [1m[36mEdge Create (5.2ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 63], ["to_node_id", 64], ["created_at", "2019-08-23 07:14:45.760195"], ["updated_at", "2019-08-23 07:14:45.760195"]]
  [1m[35m (12.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Edge"], ["associated_id", 63], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 63\nto_node_id: 64\n"], ["version", 1], ["request_uuid", "3aa8c97c-5d5f-4122-83e5-c9c6e7238049"], ["created_at", "2019-08-23 07:14:45.769894"]]
  [1m[36mEdge Load (15.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 42]]
  [1m[36mEdge Load (9.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 42]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:17:42.043484"], ["updated_at", "2019-08-23 07:17:42.043484"]]
  [1m[36mNode Load (10.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 43]]
  [1m[36mOutputNode Create (12.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 43], ["created_at", "2019-08-23 07:17:42.183074"], ["updated_at", "2019-08-23 07:17:42.183074"], ["type", "OutputNode"]]
  [1m[35m (38.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 65], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 65], ["auditable_type", "Node"], ["associated_id", 43], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 43\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e77ade64-7445-4e20-80f7-df9a597447a8"], ["created_at", "2019-08-23 07:17:42.294663"]]
  [1m[36mOutputNode Create (4.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 43], ["created_at", "2019-08-23 07:17:42.351916"], ["updated_at", "2019-08-23 07:17:42.351916"], ["type", "OutputNode"]]
  [1m[35m (11.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 66], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 66], ["auditable_type", "Node"], ["associated_id", 43], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 43\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "32fa0d90-a2ec-4c8d-a5fd-22ea0c94f984"], ["created_at", "2019-08-23 07:17:42.362714"]]
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  [1m[36mNode Load (4.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 43]]
  [1m[36mEdge Create (3.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 65], ["to_node_id", 66], ["created_at", "2019-08-23 07:17:42.431081"], ["updated_at", "2019-08-23 07:17:42.431081"]]
  [1m[35m (8.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 20], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 20], ["auditable_type", "Edge"], ["associated_id", 65], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 65\nto_node_id: 66\n"], ["version", 1], ["request_uuid", "c15484df-cfad-4fd7-8e69-7e3e0e44e263"], ["created_at", "2019-08-23 07:17:42.438658"]]
  [1m[36mEdge Load (14.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 43]]
  [1m[36mEdge Load (7.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 43]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:32:56.810273"], ["updated_at", "2019-08-23 07:32:56.810273"]]
  [1m[36mOutputNode Create (9.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 44], ["created_at", "2019-08-23 07:32:56.865287"], ["updated_at", "2019-08-23 07:32:56.865287"], ["type", "OutputNode"]]
  [1m[35m (18.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 67], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 67], ["auditable_type", "Node"], ["associated_id", 44], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 44\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1063074c-6e26-4fe7-a5ed-684624a247d4"], ["created_at", "2019-08-23 07:32:56.951852"]]
  [1m[36mOutputNode Create (3.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 44], ["created_at", "2019-08-23 07:32:56.985723"], ["updated_at", "2019-08-23 07:32:56.985723"], ["type", "OutputNode"]]
  [1m[35m (12.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 68], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 68], ["auditable_type", "Node"], ["associated_id", 44], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 44\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d8dd5ab5-aac0-421b-bd55-7f3873d5b67a"], ["created_at", "2019-08-23 07:32:56.993329"]]
  [1m[36mGraph Load (7.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mNode Load (9.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 44]]
  [1m[36mEdge Create (5.2ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 67], ["to_node_id", 68], ["created_at", "2019-08-23 07:32:57.080198"], ["updated_at", "2019-08-23 07:32:57.080198"]]
  [1m[35m (10.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Edge"], ["associated_id", 67], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 67\nto_node_id: 68\n"], ["version", 1], ["request_uuid", "760779af-5193-4049-bfce-dfbbdf55e4a4"], ["created_at", "2019-08-23 07:32:57.089812"]]
  [1m[36mEdge Load (15.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 44]]
  [1m[36mEdge Load (10.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 44]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 07:34:47.065211"], ["updated_at", "2019-08-23 07:34:47.065211"]]
  [1m[36mOutputNode Create (8.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 45], ["created_at", "2019-08-23 07:34:47.074357"], ["updated_at", "2019-08-23 07:34:47.074357"], ["type", "OutputNode"]]
  [1m[35m (16.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 69], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 69], ["auditable_type", "Node"], ["associated_id", 45], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 45\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9443d596-c4ea-439f-a55d-447be6b30efa"], ["created_at", "2019-08-23 07:34:47.135547"]]
  [1m[36mOutputNode Create (3.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 45], ["created_at", "2019-08-23 07:34:47.164277"], ["updated_at", "2019-08-23 07:34:47.164277"], ["type", "OutputNode"]]
  [1m[35m (11.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 70], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 70], ["auditable_type", "Node"], ["associated_id", 45], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 45\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "466b723c-40eb-4820-bc10-a7b5236786e5"], ["created_at", "2019-08-23 07:34:47.179935"]]
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  [1m[36mNode Load (6.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 45]]
  [1m[36mEdge Create (4.3ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 69], ["to_node_id", 70], ["created_at", "2019-08-23 07:34:47.255456"], ["updated_at", "2019-08-23 07:34:47.255456"]]
  [1m[35m (8.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 22], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 22], ["auditable_type", "Edge"], ["associated_id", 69], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 69\nto_node_id: 70\n"], ["version", 1], ["request_uuid", "2d93a58e-46e5-47ac-aff2-8e1da327c763"], ["created_at", "2019-08-23 07:34:47.266533"]]
  [1m[36mEdge Load (11.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 45]]
  [1m[36mEdge Load (6.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 45]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 08:08:51.779504"], ["updated_at", "2019-08-23 08:08:51.779504"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (8.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 08:09:23.682619"], ["updated_at", "2019-08-23 08:09:23.682619"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (10.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 08:10:21.499383"], ["updated_at", "2019-08-23 08:10:21.499383"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (11.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 08:12:13.259646"], ["updated_at", "2019-08-23 08:12:13.259646"]]
  [1m[36mInputNode Create (10.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 49], ["created_at", "2019-08-23 08:12:13.270526"], ["updated_at", "2019-08-23 08:12:13.270526"], ["type", "InputNode"]]
  [1m[35m (21.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 71], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 71], ["auditable_type", "Node"], ["associated_id", 49], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 49\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bb7de2c5-14d0-4d01-a2c6-65ad8772db00"], ["created_at", "2019-08-23 08:12:13.569219"]]
  [1m[36mOutputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 49], ["created_at", "2019-08-23 08:12:13.608835"], ["updated_at", "2019-08-23 08:12:13.608835"], ["type", "OutputNode"]]
  [1m[35m (11.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 72], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 72], ["auditable_type", "Node"], ["associated_id", 49], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 49\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4b33e36a-0304-4554-b3fb-f86f2ccf0c95"], ["created_at", "2019-08-23 08:12:13.618707"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (8.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (14.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 08:13:16.773486"], ["updated_at", "2019-08-23 08:13:16.773486"]]
  [1m[36mInputNode Create (6.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 50], ["created_at", "2019-08-23 08:13:16.780287"], ["updated_at", "2019-08-23 08:13:16.780287"], ["type", "InputNode"]]
  [1m[35m (17.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 73], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 73], ["auditable_type", "Node"], ["associated_id", 50], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 50\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "fca6ba58-7ec1-423d-8574-b07eee4c874c"], ["created_at", "2019-08-23 08:13:16.848621"]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 50], ["created_at", "2019-08-23 08:13:16.879845"], ["updated_at", "2019-08-23 08:13:16.879845"], ["type", "OutputNode"]]
  [1m[35m (9.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 74], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 74], ["auditable_type", "Node"], ["associated_id", 50], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 50\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1572e329-114f-4280-9b27-3949e03e6bd1"], ["created_at", "2019-08-23 08:13:16.888669"]]
  [1m[36mEdge Create (3.4ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 73], ["to_node_id", 74], ["created_at", "2019-08-23 08:13:16.907900"], ["updated_at", "2019-08-23 08:13:16.907900"]]
  [1m[35m (9.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Edge"], ["associated_id", 73], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 73\nto_node_id: 74\n"], ["version", 1], ["request_uuid", "b5f62a43-db20-4bec-9f6f-6d89a622d26c"], ["created_at", "2019-08-23 08:13:16.916909"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (7.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (10.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (6.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 09:31:56.581999"], ["updated_at", "2019-08-23 09:31:56.581999"]]
  [1m[36mOutputNode Create (8.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 51], ["created_at", "2019-08-23 09:31:56.594450"], ["updated_at", "2019-08-23 09:31:56.594450"], ["type", "OutputNode"]]
  [1m[35m (15.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 75], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 75], ["auditable_type", "Node"], ["associated_id", 51], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 51\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c9b3e6a4-fd03-4f11-a0ca-8b9794842bc6"], ["created_at", "2019-08-23 09:31:56.652985"]]
  [1m[36mEdge Create (4.4ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["from_node_id", 75], ["created_at", "2019-08-23 09:31:56.713448"], ["updated_at", "2019-08-23 09:31:56.713448"]]
  [1m[35m (7.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Edge"], ["associated_id", 75], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 75\nto_node_id: \n"], ["version", 1], ["request_uuid", "399c2224-e5d3-498f-a151-e26d60662ac7"], ["created_at", "2019-08-23 09:31:56.728691"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 09:32:40.313776"], ["updated_at", "2019-08-23 09:32:40.313776"]]
  [1m[36mOutputNode Create (8.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 52], ["created_at", "2019-08-23 09:32:40.322463"], ["updated_at", "2019-08-23 09:32:40.322463"], ["type", "OutputNode"]]
  [1m[35m (14.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 76], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 76], ["auditable_type", "Node"], ["associated_id", 52], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 52\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "44a671f0-217f-48c8-b2a6-b77b32063f6a"], ["created_at", "2019-08-23 09:32:40.377400"]]
  [1m[36mEdge Create (3.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["from_node_id", 76], ["created_at", "2019-08-23 09:32:40.444284"], ["updated_at", "2019-08-23 09:32:40.444284"]]
  [1m[35m (7.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 25], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 25], ["auditable_type", "Edge"], ["associated_id", 76], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 76\nto_node_id: \n"], ["version", 1], ["request_uuid", "6c4996fe-3b89-491d-9b32-5abeaa1ef06d"], ["created_at", "2019-08-23 09:32:40.452243"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (8.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 09:33:38.149800"], ["updated_at", "2019-08-23 09:33:38.149800"]]
  [1m[36mOutputNode Create (10.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 53], ["created_at", "2019-08-23 09:33:38.162002"], ["updated_at", "2019-08-23 09:33:38.162002"], ["type", "OutputNode"]]
  [1m[35m (20.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 77], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 77], ["auditable_type", "Node"], ["associated_id", 53], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 53\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2139825a-65c5-4dbc-b573-7c989257ec4e"], ["created_at", "2019-08-23 09:33:38.232627"]]
  [1m[36mEdge Create (5.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["from_node_id", 77], ["created_at", "2019-08-23 09:33:38.288434"], ["updated_at", "2019-08-23 09:33:38.288434"]]
  [1m[35m (10.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 26], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 26], ["auditable_type", "Edge"], ["associated_id", 77], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 77\nto_node_id: \n"], ["version", 1], ["request_uuid", "a1956c44-dba5-4847-b084-b2dfa068e6b4"], ["created_at", "2019-08-23 09:33:38.297756"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (17.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 09:34:49.139973"], ["updated_at", "2019-08-23 09:34:49.139973"]]
  [1m[36mOutputNode Create (31.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 54], ["created_at", "2019-08-23 09:34:49.180378"], ["updated_at", "2019-08-23 09:34:49.180378"], ["type", "OutputNode"]]
  [1m[35m (17.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 78], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 78], ["auditable_type", "Node"], ["associated_id", 54], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 54\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5f0c6a19-1907-4eec-b2b4-09918869a117"], ["created_at", "2019-08-23 09:34:49.273766"]]
  [1m[36mEdge Create (7.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["from_node_id", 78], ["created_at", "2019-08-23 09:34:49.423219"], ["updated_at", "2019-08-23 09:34:49.423219"]]
  [1m[35m (17.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 27], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 27], ["auditable_type", "Edge"], ["associated_id", 78], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 78\nto_node_id: \n"], ["version", 1], ["request_uuid", "2f2ae548-a6b4-4fe3-8308-280a8f97b949"], ["created_at", "2019-08-23 09:34:49.459100"]]
  [1m[35m (2.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (17.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (18.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (10.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 09:36:01.534347"], ["updated_at", "2019-08-23 09:36:01.534347"]]
  [1m[36mOutputNode Create (19.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 55], ["created_at", "2019-08-23 09:36:01.561336"], ["updated_at", "2019-08-23 09:36:01.561336"], ["type", "OutputNode"]]
  [1m[35m (29.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 79], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (7.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 79], ["auditable_type", "Node"], ["associated_id", 55], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 55\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bf225e15-73c7-4a22-88e2-8740906d816e"], ["created_at", "2019-08-23 09:36:01.683836"]]
  [1m[36mEdge Create (11.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["from_node_id", 79], ["created_at", "2019-08-23 09:36:01.787351"], ["updated_at", "2019-08-23 09:36:01.787351"]]
  [1m[35m (9.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 28], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (3.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 28], ["auditable_type", "Edge"], ["associated_id", 79], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 79\nto_node_id: \n"], ["version", 1], ["request_uuid", "48d586cc-c2fe-4b2f-b456-0a69fcba91d0"], ["created_at", "2019-08-23 09:36:01.807920"]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (18.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 09:37:27.784172"], ["updated_at", "2019-08-23 09:37:27.784172"]]
  [1m[36mOutputNode Create (55.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 56], ["created_at", "2019-08-23 09:37:27.827306"], ["updated_at", "2019-08-23 09:37:27.827306"], ["type", "OutputNode"]]
  [1m[35m (16.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 80], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 80], ["auditable_type", "Node"], ["associated_id", 56], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 56\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "75818ba8-1940-4e24-8f62-ffe057651814"], ["created_at", "2019-08-23 09:37:27.959455"]]
  [1m[36mEdge Create (14.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["from_node_id", 80], ["created_at", "2019-08-23 09:37:28.034894"], ["updated_at", "2019-08-23 09:37:28.034894"]]
  [1m[35m (16.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 29], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 29], ["auditable_type", "Edge"], ["associated_id", 80], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 80\nto_node_id: \n"], ["version", 1], ["request_uuid", "546d35dc-508d-4169-b591-cd83fabffd95"], ["created_at", "2019-08-23 09:37:28.067619"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (5.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (4.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.3ms)[0m  [1m[32mINSERT INTO "edges" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-08-23 09:38:37.242534"], ["updated_at", "2019-08-23 09:38:37.242534"]]
  [1m[35m (14.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 30], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (3.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["auditable_id", 30], ["auditable_type", "Edge"], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: \nto_node_id: \n"], ["version", 1], ["request_uuid", "aeeccce6-cac7-418c-a3bd-de6f6e89c4bb"], ["created_at", "2019-08-23 09:38:37.324903"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (6.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (12.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (15.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.1ms)[0m  [1m[32mINSERT INTO "edges" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-08-23 09:40:30.007407"], ["updated_at", "2019-08-23 09:40:30.007407"]]
  [1m[35m (17.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 31], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (3.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["auditable_id", 31], ["auditable_type", "Edge"], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: \nto_node_id: \n"], ["version", 1], ["request_uuid", "db67a388-2c4f-42fd-8a6e-a216e5ecb815"], ["created_at", "2019-08-23 09:40:30.079751"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (8.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (13.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (14.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.4ms)[0m  [1m[32mINSERT INTO "edges" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-08-23 09:41:48.210395"], ["updated_at", "2019-08-23 09:41:48.210395"]]
  [1m[35m (19.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 32], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (4.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["auditable_id", 32], ["auditable_type", "Edge"], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: \nto_node_id: \n"], ["version", 1], ["request_uuid", "ef19fcde-6245-4d2a-978c-f429c866fb34"], ["created_at", "2019-08-23 09:41:48.271235"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (10.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (13.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (16.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.7ms)[0m  [1m[32mINSERT INTO "edges" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-08-23 09:42:10.724104"], ["updated_at", "2019-08-23 09:42:10.724104"]]
  [1m[35m (17.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 33], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (4.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["auditable_id", 33], ["auditable_type", "Edge"], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: \nto_node_id: \n"], ["version", 1], ["request_uuid", "99b7f014-9fde-4079-872a-45b036e3c763"], ["created_at", "2019-08-23 09:42:10.815942"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (6.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (17.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (15.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (7.3ms)[0m  [1m[32mINSERT INTO "edges" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-08-23 09:42:31.565664"], ["updated_at", "2019-08-23 09:42:31.565664"]]
  [1m[35m (17.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 34], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (3.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["auditable_id", 34], ["auditable_type", "Edge"], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: \nto_node_id: \n"], ["version", 1], ["request_uuid", "7c4674ac-945e-45e5-8596-21c818dd735d"], ["created_at", "2019-08-23 09:42:31.645340"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (6.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (8.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (12.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.4ms)[0m  [1m[32mINSERT INTO "edges" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-08-23 09:43:21.925645"], ["updated_at", "2019-08-23 09:43:21.925645"]]
  [1m[35m (15.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 35], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (2.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["auditable_id", 35], ["auditable_type", "Edge"], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: \nto_node_id: \n"], ["version", 1], ["request_uuid", "2ca9e45b-1cad-437e-a38b-052b4b04c0c1"], ["created_at", "2019-08-23 09:43:21.999227"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (4.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (13.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (14.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.9ms)[0m  [1m[32mINSERT INTO "edges" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-08-23 09:43:53.252637"], ["updated_at", "2019-08-23 09:43:53.252637"]]
  [1m[35m (19.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 36], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (3.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["auditable_id", 36], ["auditable_type", "Edge"], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: \nto_node_id: \n"], ["version", 1], ["request_uuid", "bf3b68e8-5614-408d-b68d-172956cb84c4"], ["created_at", "2019-08-23 09:43:53.337440"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (6.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (12.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (14.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (14.9ms)[0m  [1m[32mINSERT INTO "edges" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-08-23 09:47:36.755643"], ["updated_at", "2019-08-23 09:47:36.755643"]]
  [1m[35m (52.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 37], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (16.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["auditable_id", 37], ["auditable_type", "Edge"], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: \nto_node_id: \n"], ["version", 1], ["request_uuid", "8c9d3b76-44ca-4a40-83b7-f530582d3a9a"], ["created_at", "2019-08-23 09:47:36.858472"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (12.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (7.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (1557.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "myapp_test"[0m
  [1m[35m (3316.6ms)[0m  [1m[35mCREATE DATABASE "myapp_test" ENCODING = 'unicode'[0m
  [1m[35m (112.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (54.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1235955690063948105)[0m
  [1m[35m (4.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateGraphs (20190411085042)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (66.5ms)[0m  [1m[35mCREATE TABLE "graphs" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (6.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190411085042"]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNodes (20190411100036)
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (75.7ms)[0m  [1m[35mCREATE TABLE "nodes" ("id" bigserial primary key, "name" character varying, "graph_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_10f83f4418"
FOREIGN KEY ("graph_id")
  REFERENCES "graphs" ("id")
)[0m
  [1m[35m (15.8ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_graph_id" ON "nodes"  ("graph_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190411100036"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateEdges (20190411113011)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (59.3ms)[0m  [1m[35mCREATE TABLE "edges" ("id" bigserial primary key, "name" character varying, "from_node_id" bigint, "to_node_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (14.8ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_from_node_id" ON "edges"  ("from_node_id")[0m
  [1m[35m (14.1ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_to_node_id" ON "edges"  ("to_node_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190411113011"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to InstallAudited (20190429092701)
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "audits"[0m
  [1m[35m (67.0ms)[0m  [1m[35mCREATE TABLE "audits" ("id" bigserial primary key, "auditable_id" integer, "auditable_type" character varying, "associated_id" integer, "associated_type" character varying, "user_id" integer, "user_type" character varying, "username" character varying, "action" character varying, "audited_changes" text, "version" integer DEFAULT 0, "comment" character varying, "remote_address" character varying, "request_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (24.3ms)[0m  [1m[35mCREATE  INDEX  "auditable_index" ON "audits"  ("auditable_type", "auditable_id", "version")[0m
  [1m[35m (15.2ms)[0m  [1m[35mCREATE  INDEX  "associated_index" ON "audits"  ("associated_type", "associated_id")[0m
  [1m[35m (14.9ms)[0m  [1m[35mCREATE  INDEX  "user_index" ON "audits"  ("user_id", "user_type")[0m
  [1m[35m (19.6ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_request_uuid" ON "audits"  ("request_uuid")[0m
  [1m[35m (13.4ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_created_at" ON "audits"  ("created_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190429092701"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNodeCounts (20190430113529)
  [1m[35m (4.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (50.5ms)[0m  [1m[35mCREATE TABLE "node_counts" ("id" bigserial primary key, "count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190430113529"]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddContentToNodes (20190514093514)
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "nodes" ADD "content" json[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190514093514"]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTypeToGraphs (20190514095100)
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.8ms)[0m  [1m[35mALTER TABLE "graphs" ADD "type" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190514095100"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUniqueConstraintToEdges (20190523112235)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_edges_on_from_node_id_and_to_node_id" ON "edges"  ("from_node_id", "to_node_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190523112235"]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddXToNodes (20190724105907)
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.2ms)[0m  [1m[35mALTER TABLE "nodes" ADD "x" float DEFAULT 0.0[0m
  [1m[36mActiveRecord::SchemaMigration Create (10.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190724105907"]]
  [1m[35m (18.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddYToNodes (20190724110012)
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "nodes" ADD "y" float DEFAULT 0.0[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190724110012"]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTypeToNodes (20190801105126)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.4ms)[0m  [1m[35mALTER TABLE "nodes" ADD "type" character varying NOT NULL[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190801105126"]]
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddNodeRefToNodes (20190806132227)
  [1m[35m (3.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "nodes" ADD "node_ref_id" bigint[0m
  [1m[35m (18.2ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_node_ref_id" ON "nodes"  ("node_ref_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190806132227"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveNameFromEdge (20190822055108)
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.7ms)[0m  [1m[35mALTER TABLE "edges" DROP COLUMN "name"[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190822055108"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (5.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (6.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-08-23 09:51:17.217581"], ["updated_at", "2019-08-23 09:51:17.217581"]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(1235955690063948105)[0m
  [1m[35m (3.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (5.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (28.7ms)[0m  [1m[32mINSERT INTO "edges" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-08-23 09:51:33.194460"], ["updated_at", "2019-08-23 09:51:33.194460"]]
  [1m[35m (28.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (22.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Edge"], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: \nto_node_id: \n"], ["version", 1], ["request_uuid", "7d9dfbcd-dad9-4425-8785-6b634af3e21f"], ["created_at", "2019-08-23 09:51:33.288263"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (7.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (15.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (7.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (6.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (425.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "myapp_test"[0m
  [1m[35m (2686.3ms)[0m  [1m[35mCREATE DATABASE "myapp_test" ENCODING = 'unicode'[0m
  [1m[35m (102.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (31.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1235955690063948105)[0m
  [1m[35m (6.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateGraphs (20190411085042)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (64.0ms)[0m  [1m[35mCREATE TABLE "graphs" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (6.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190411085042"]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNodes (20190411100036)
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (77.1ms)[0m  [1m[35mCREATE TABLE "nodes" ("id" bigserial primary key, "name" character varying, "graph_id" bigint NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_10f83f4418"
FOREIGN KEY ("graph_id")
  REFERENCES "graphs" ("id")
)[0m
  [1m[35m (16.9ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_graph_id" ON "nodes"  ("graph_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190411100036"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateEdges (20190411113011)
  [1m[35m (12.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (352.3ms)[0m  [1m[35mCREATE TABLE "edges" ("id" bigserial primary key, "name" character varying, "from_node_id" bigint NOT NULL, "to_node_id" bigint NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (104.3ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_from_node_id" ON "edges"  ("from_node_id")[0m
  [1m[35m (19.2ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_to_node_id" ON "edges"  ("to_node_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190411113011"]]
  [1m[35m (15.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to InstallAudited (20190429092701)
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "audits"[0m
  [1m[35m (152.3ms)[0m  [1m[35mCREATE TABLE "audits" ("id" bigserial primary key, "auditable_id" integer, "auditable_type" character varying, "associated_id" integer, "associated_type" character varying, "user_id" integer, "user_type" character varying, "username" character varying, "action" character varying, "audited_changes" text, "version" integer DEFAULT 0, "comment" character varying, "remote_address" character varying, "request_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (77.3ms)[0m  [1m[35mCREATE  INDEX  "auditable_index" ON "audits"  ("auditable_type", "auditable_id", "version")[0m
  [1m[35m (17.0ms)[0m  [1m[35mCREATE  INDEX  "associated_index" ON "audits"  ("associated_type", "associated_id")[0m
  [1m[35m (27.3ms)[0m  [1m[35mCREATE  INDEX  "user_index" ON "audits"  ("user_id", "user_type")[0m
  [1m[35m (18.7ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_request_uuid" ON "audits"  ("request_uuid")[0m
  [1m[35m (50.2ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_created_at" ON "audits"  ("created_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (7.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190429092701"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateNodeCounts (20190430113529)
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (158.4ms)[0m  [1m[35mCREATE TABLE "node_counts" ("id" bigserial primary key, "count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (3.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190430113529"]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddContentToNodes (20190514093514)
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "nodes" ADD "content" json[0m
  [1m[36mActiveRecord::SchemaMigration Create (2.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190514093514"]]
  [1m[35m (10.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTypeToGraphs (20190514095100)
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "graphs" ADD "type" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190514095100"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUniqueConstraintToEdges (20190523112235)
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_edges_on_from_node_id_and_to_node_id" ON "edges"  ("from_node_id", "to_node_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190523112235"]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddXToNodes (20190724105907)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[35mALTER TABLE "nodes" ADD "x" float DEFAULT 0.0[0m
  [1m[36mActiveRecord::SchemaMigration Create (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190724105907"]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddYToNodes (20190724110012)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "nodes" ADD "y" float DEFAULT 0.0[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190724110012"]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTypeToNodes (20190801105126)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mALTER TABLE "nodes" ADD "type" character varying NOT NULL[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190801105126"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddNodeRefToNodes (20190806132227)
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.3ms)[0m  [1m[35mALTER TABLE "nodes" ADD "node_ref_id" bigint[0m
  [1m[35m (34.9ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_node_ref_id" ON "nodes"  ("node_ref_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (2.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190806132227"]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveNameFromEdge (20190822055108)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.5ms)[0m  [1m[35mALTER TABLE "edges" DROP COLUMN "name"[0m
  [1m[36mActiveRecord::SchemaMigration Create (4.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190822055108"]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (7.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (8.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-08-23 09:56:33.618140"], ["updated_at", "2019-08-23 09:56:33.618140"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(1235955690063948105)[0m
  [1m[35m (7.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (5.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (10.2ms)[0m  [1m[32mINSERT INTO "edges" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-08-23 09:57:20.630657"], ["updated_at", "2019-08-23 09:57:20.630657"]]
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.8ms)[0m  [1m[32mINSERT INTO "edges" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-08-23 10:00:36.848793"], ["updated_at", "2019-08-23 10:00:36.848793"]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.4ms)[0m  [1m[32mINSERT INTO "edges" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-08-23 10:02:07.128511"], ["updated_at", "2019-08-23 10:02:07.128511"]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (5.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (8.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (12.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (10.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:13:55.209037"], ["updated_at", "2019-08-23 10:13:55.209037"]]
  [1m[36mInputNode Create (27.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 1], ["created_at", "2019-08-23 10:13:55.231992"], ["updated_at", "2019-08-23 10:13:55.231992"], ["type", "InputNode"]]
  [1m[35m (26.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (19.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Node"], ["associated_id", 1], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 1\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ff94e880-d5b7-4edf-9ac7-d39535a1c8ef"], ["created_at", "2019-08-23 10:13:55.326753"]]
  [1m[36mOutputNode Create (3.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 1], ["created_at", "2019-08-23 10:13:55.384879"], ["updated_at", "2019-08-23 10:13:55.384879"], ["type", "OutputNode"]]
  [1m[35m (13.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Node"], ["associated_id", 1], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 1\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b175e79b-9483-4806-9a59-be7e7113c5a0"], ["created_at", "2019-08-23 10:13:55.393315"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (3.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 1]]
  [1m[36mEdge Load (18.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 1]]
  [1m[36mEdge Load (4.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 1]]
  [1m[36mEdge Load (4.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 2]]
  [1m[36mEdge Load (5.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 2]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mEdge Load (10.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 1]]
  [1m[36mEdge Load (7.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 1]]
  [1m[35m (15.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Node"], ["associated_id", 1], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "52f4c6cb-d716-41e7-ba5d-24ca94fbc781"], ["created_at", "2019-08-23 10:13:55.546371"]]
  [1m[36mInputNode Update (12.7ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:13:55.543393"], ["id", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (5.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mEdge Load (4.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 2]]
  [1m[36mEdge Load (6.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 2]]
  [1m[36mNode Load (4.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mNode Load (4.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 1]]
  [1m[36mEdge Load (11.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 1]]
  [1m[36mEdge Load (13.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 1]]
  [1m[35m (5.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (9.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:13:55.763054"], ["updated_at", "2019-08-23 10:13:55.763054"]]
  [1m[36mInputNode Create (5.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 2], ["created_at", "2019-08-23 10:13:55.770942"], ["updated_at", "2019-08-23 10:13:55.770942"], ["type", "InputNode"]]
  [1m[35m (18.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Node"], ["associated_id", 2], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 2\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "46b6af76-7604-435c-aae5-38b1aba5a0a9"], ["created_at", "2019-08-23 10:13:55.781543"]]
  [1m[36mOutputNode Create (2.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 2], ["created_at", "2019-08-23 10:13:55.820257"], ["updated_at", "2019-08-23 10:13:55.820257"], ["type", "OutputNode"]]
  [1m[35m (11.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Node"], ["associated_id", 2], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 2\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ffbbd76d-d00a-451c-8750-6b225539fc2c"], ["created_at", "2019-08-23 10:13:55.846048"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[36mEdge Load (6.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 3]]
  [1m[36mEdge Load (5.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 3]]
  [1m[36mEdge Load (5.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 4]]
  [1m[36mEdge Load (7.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 4]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (5.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mEdge Load (1.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 3]]
  [1m[36mEdge Load (1.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 3]]
  [1m[35m (12.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Node"], ["associated_id", 2], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "dae3b42e-dc3f-4e7b-9e33-4cba8eb2654a"], ["created_at", "2019-08-23 10:13:56.043909"]]
  [1m[36mInputNode Update (6.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:13:56.023572"], ["id", 3]]
  [1m[35m (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mEdge Load (1.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 4]]
  [1m[36mEdge Load (1.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 4]]
  [1m[36mNode Load (4.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mNode Load (4.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[36mEdge Load (10.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[36mEdge Load (11.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:13:56.220617"], ["updated_at", "2019-08-23 10:13:56.220617"]]
  [1m[36mInputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 3], ["created_at", "2019-08-23 10:13:56.232475"], ["updated_at", "2019-08-23 10:13:56.232475"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Node"], ["associated_id", 3], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 3\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e12aee38-b248-474a-8199-fb5d79d3ab39"], ["created_at", "2019-08-23 10:13:56.244154"]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 3], ["created_at", "2019-08-23 10:13:56.260659"], ["updated_at", "2019-08-23 10:13:56.260659"], ["type", "OutputNode"]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 6], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 6], ["auditable_type", "Node"], ["associated_id", 3], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 3\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "87a24747-8111-4594-b666-43efc40c24c2"], ["created_at", "2019-08-23 10:13:56.271129"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 3]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 5]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 5]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 6]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 6]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 5]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 5]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Node"], ["associated_id", 3], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "7096081a-65ee-406a-aca4-3a95e5526dc3"], ["created_at", "2019-08-23 10:13:56.360399"]]
  [1m[36mInputNode Update (4.1ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:13:56.356868"], ["id", 5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 6]]
  [1m[36mEdge Load (1.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 6]]
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 3]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 3]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (16.3ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 5], ["to_node_id", 6], ["created_at", "2019-08-23 10:13:56.437682"], ["updated_at", "2019-08-23 10:13:56.437682"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Edge"], ["associated_id", 5], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 5\nto_node_id: 6\n"], ["version", 1], ["request_uuid", "e085a309-a2ab-43c6-b011-8a17298b7f85"], ["created_at", "2019-08-23 10:13:56.477744"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (10.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 3]]
  [1m[36mEdge Load (10.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 3]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 3]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 5]]
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 5]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 6]]
  [1m[36mEdge Load (1.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 6]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mEdge Load (6.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 5]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mEdge Load (10.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 5]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 6]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 6]]
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 3]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 3]]
  [1m[36mEdge Load (12.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 3]]
  [1m[36mEdge Load (15.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 3]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Edge"], ["associated_id", 5], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 5\nto_node_id: 6\n"], ["version", 2], ["request_uuid", "c2aee503-d099-45b0-9ee7-023a4a11ba64"], ["created_at", "2019-08-23 10:13:56.725839"]]
  [1m[36mEdge Destroy (4.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:13:56.762834"], ["updated_at", "2019-08-23 10:13:56.762834"]]
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 4], ["created_at", "2019-08-23 10:13:56.765986"], ["updated_at", "2019-08-23 10:13:56.765986"], ["type", "InputNode"]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Node"], ["associated_id", 4], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 4\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a21aa857-4af4-43bd-ba4d-e0a391eb9941"], ["created_at", "2019-08-23 10:13:56.779286"]]
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 4], ["created_at", "2019-08-23 10:13:56.794878"], ["updated_at", "2019-08-23 10:13:56.794878"], ["type", "OutputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Node"], ["associated_id", 4], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 4\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cfe0e10d-8472-4295-a303-154846d5b866"], ["created_at", "2019-08-23 10:13:56.804292"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 4]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 7]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 7]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 8]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 8]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 8]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 8]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 4]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 4]]
  [1m[36mNode Destroy (5.7ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 7]]
  [1m[36mEdge Load (13.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 4]]
  [1m[36mEdge Load (13.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 4]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (8.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:13:56.981032"], ["updated_at", "2019-08-23 10:13:56.981032"]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:13:57.038938"], ["updated_at", "2019-08-23 10:13:57.038938"]]
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 6], ["created_at", "2019-08-23 10:13:57.043523"], ["updated_at", "2019-08-23 10:13:57.043523"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Node"], ["associated_id", 6], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 6\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a7e3605b-fd67-45a5-9c2c-abb6e9b71833"], ["created_at", "2019-08-23 10:13:57.048909"]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 6], ["created_at", "2019-08-23 10:13:57.063754"], ["updated_at", "2019-08-23 10:13:57.063754"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Node"], ["associated_id", 6], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 6\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b22ff71b-bacf-4e8b-adfa-1d306b5c1d8e"], ["created_at", "2019-08-23 10:13:57.069223"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 6]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 9]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 9]]
  [1m[36mEdge Load (1.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 10]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 10]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 9]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 9]]
  [1m[35m (1.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Node"], ["associated_id", 6], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "8fd72e6c-5d65-4a50-8314-12602204dad2"], ["created_at", "2019-08-23 10:13:57.142095"]]
  [1m[36mInputNode Update (4.1ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:13:57.139046"], ["id", 9]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 10]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 10]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 6]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 6]]
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 9], ["to_node_id", 10], ["created_at", "2019-08-23 10:13:57.206141"], ["updated_at", "2019-08-23 10:13:57.206141"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Edge"], ["associated_id", 9], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 9\nto_node_id: 10\n"], ["version", 1], ["request_uuid", "3ecb8816-2124-4c31-bdce-517cbb5cd65e"], ["created_at", "2019-08-23 10:13:57.214582"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (12.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 9], ["to_node_id", 10], ["created_at", "2019-08-23 10:13:57.230970"], ["updated_at", "2019-08-23 10:13:57.230970"]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:13:57.270367"], ["updated_at", "2019-08-23 10:13:57.270367"]]
  [1m[36mInputNode Create (1.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 7], ["created_at", "2019-08-23 10:13:57.278793"], ["updated_at", "2019-08-23 10:13:57.278793"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Node"], ["associated_id", 7], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 7\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e0dea4ff-f06d-41f6-83ed-59b86def8283"], ["created_at", "2019-08-23 10:13:57.291053"]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 7], ["created_at", "2019-08-23 10:13:57.310245"], ["updated_at", "2019-08-23 10:13:57.310245"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Node"], ["associated_id", 7], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 7\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "94caa188-4fbc-489d-a6a8-9b3c552c4618"], ["created_at", "2019-08-23 10:13:57.316375"]]
  [1m[36mEdge Create (2.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 11], ["to_node_id", 12], ["created_at", "2019-08-23 10:13:57.332294"], ["updated_at", "2019-08-23 10:13:57.332294"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Edge"], ["associated_id", 11], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 11\nto_node_id: 12\n"], ["version", 1], ["request_uuid", "f2963267-5e49-4f5d-b555-bdde9371783c"], ["created_at", "2019-08-23 10:13:57.343740"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (27.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (6.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (6.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:13:57.500327"], ["updated_at", "2019-08-23 10:13:57.500327"]]
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 8], ["created_at", "2019-08-23 10:13:57.509193"], ["updated_at", "2019-08-23 10:13:57.509193"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 8\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "efe07bcb-0ad1-42b6-8e91-773037347a0c"], ["created_at", "2019-08-23 10:13:57.516189"]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 8], ["created_at", "2019-08-23 10:13:57.526154"], ["updated_at", "2019-08-23 10:13:57.526154"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 8\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4a26cc99-03ab-4743-86ea-a9d4cf546856"], ["created_at", "2019-08-23 10:13:57.542828"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:14:33.166855"], ["updated_at", "2019-08-23 10:14:33.166855"]]
  [1m[36mInputNode Create (6.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 9], ["created_at", "2019-08-23 10:14:33.177039"], ["updated_at", "2019-08-23 10:14:33.177039"], ["type", "InputNode"]]
  [1m[35m (23.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Node"], ["associated_id", 9], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 9\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f2955c63-e880-4170-a344-459d13536d80"], ["created_at", "2019-08-23 10:14:33.249293"]]
  [1m[36mOutputNode Create (3.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 9], ["created_at", "2019-08-23 10:14:33.286708"], ["updated_at", "2019-08-23 10:14:33.286708"], ["type", "OutputNode"]]
  [1m[35m (9.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Node"], ["associated_id", 9], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 9\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c26503fe-389f-4293-a96d-c702b30df13c"], ["created_at", "2019-08-23 10:14:33.295717"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (9.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 9]]
  [1m[36mEdge Load (19.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 15]]
  [1m[36mEdge Load (4.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 15]]
  [1m[36mEdge Load (4.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 16]]
  [1m[36mEdge Load (5.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 16]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mEdge Load (3.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 15]]
  [1m[36mEdge Load (6.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 15]]
  [1m[35m (11.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Node"], ["associated_id", 9], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "62ebec7a-408e-477a-9179-3adaf738e2a9"], ["created_at", "2019-08-23 10:14:33.497605"]]
  [1m[36mInputNode Update (6.1ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:14:33.485350"], ["id", 15]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mEdge Load (4.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 16]]
  [1m[36mEdge Load (5.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 16]]
  [1m[36mNode Load (6.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 9]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 9]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 15], ["to_node_id", 16], ["created_at", "2019-08-23 10:14:33.630436"], ["updated_at", "2019-08-23 10:14:33.630436"]]
  [1m[35m (9.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Edge"], ["associated_id", 15], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 15\nto_node_id: 16\n"], ["version", 1], ["request_uuid", "8606d669-3460-4220-bba3-b7009aa40d89"], ["created_at", "2019-08-23 10:14:33.643435"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 9]]
  [1m[36mEdge Load (11.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 9]]
  [1m[36mGraph Load (3.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 9]]
  [1m[36mEdge Load (4.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 15]]
  [1m[36mNode Load (4.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEdge Load (7.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 15]]
  [1m[36mEdge Load (4.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 16]]
  [1m[36mEdge Load (4.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 16]]
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 15]]
  [1m[36mNode Load (4.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 15]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mEdge Load (1.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 16]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 16]]
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mNode Load (3.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 9]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 9]]
  [1m[36mEdge Load (10.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 9]]
  [1m[36mEdge Load (11.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 9]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (16.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Edge"], ["associated_id", 15], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 15\nto_node_id: 16\n"], ["version", 2], ["request_uuid", "5937a694-005b-4458-80b6-95b45bac688f"], ["created_at", "2019-08-23 10:14:33.909731"]]
  [1m[36mEdge Destroy (4.3ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 8]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (5.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:14:34.004878"], ["updated_at", "2019-08-23 10:14:34.004878"]]
  [1m[36mInputNode Create (6.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 10], ["created_at", "2019-08-23 10:14:34.019818"], ["updated_at", "2019-08-23 10:14:34.019818"], ["type", "InputNode"]]
  [1m[35m (10.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Node"], ["associated_id", 10], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 10\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2a6d86ed-cf5c-49a8-b970-0f8b8f05b8e0"], ["created_at", "2019-08-23 10:14:34.049627"]]
  [1m[36mOutputNode Create (3.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 10], ["created_at", "2019-08-23 10:14:34.083353"], ["updated_at", "2019-08-23 10:14:34.083353"], ["type", "OutputNode"]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 18], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 18], ["auditable_type", "Node"], ["associated_id", 10], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 10\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "400fdc59-c7db-4d99-a947-2da489b0fac8"], ["created_at", "2019-08-23 10:14:34.105049"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (1.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 10]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 17]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 17]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 18]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 18]]
  [1m[35m (2.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 18]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 18]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 10]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 10]]
  [1m[36mNode Destroy (17.6ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 17]]
  [1m[36mEdge Load (10.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 10]]
  [1m[36mEdge Load (9.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 10]]
  [1m[36mGraph Load (1.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (5.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 10]]
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (23.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:14:34.335609"], ["updated_at", "2019-08-23 10:14:34.335609"]]
  [1m[36mInputNode Create (4.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 11], ["created_at", "2019-08-23 10:14:34.455224"], ["updated_at", "2019-08-23 10:14:34.455224"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Node"], ["associated_id", 11], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 11\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7ec27ff4-6442-49a7-ae20-0929820deb5d"], ["created_at", "2019-08-23 10:14:34.468124"]]
  [1m[36mOutputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 11], ["created_at", "2019-08-23 10:14:34.486981"], ["updated_at", "2019-08-23 10:14:34.486981"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 20], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 20], ["auditable_type", "Node"], ["associated_id", 11], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 11\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6f2f1bce-ce4e-488a-95bc-af4a1c732dda"], ["created_at", "2019-08-23 10:14:34.546307"]]
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 19], ["to_node_id", 20], ["created_at", "2019-08-23 10:14:34.562688"], ["updated_at", "2019-08-23 10:14:34.562688"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Edge"], ["associated_id", 19], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 19\nto_node_id: 20\n"], ["version", 1], ["request_uuid", "a503142d-f2c0-4b26-8042-9cd128e29257"], ["created_at", "2019-08-23 10:14:34.571753"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (9.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (8.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (10.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:14:34.707636"], ["updated_at", "2019-08-23 10:14:34.707636"]]
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 12], ["created_at", "2019-08-23 10:14:34.717005"], ["updated_at", "2019-08-23 10:14:34.717005"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Node"], ["associated_id", 12], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 12\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "791ae5f4-8ae7-40b4-a0b3-9d8931b7006b"], ["created_at", "2019-08-23 10:14:34.738278"]]
  [1m[36mOutputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 12], ["created_at", "2019-08-23 10:14:34.755688"], ["updated_at", "2019-08-23 10:14:34.755688"], ["type", "OutputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 22], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 22], ["auditable_type", "Node"], ["associated_id", 12], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 12\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bc96cb58-ada4-4412-934b-e74152017d89"], ["created_at", "2019-08-23 10:14:34.767696"]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (3.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 21]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 21]]
  [1m[36mEdge Load (4.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 22]]
  [1m[36mEdge Load (3.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 22]]
  [1m[35m (3.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 21]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 21]]
  [1m[35m (7.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Node"], ["associated_id", 12], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "38e1bb6d-a66a-4968-964b-aace3e80e425"], ["created_at", "2019-08-23 10:14:34.906353"]]
  [1m[36mInputNode Update (5.7ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:14:34.897439"], ["id", 21]]
  [1m[35m (2.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 22]]
  [1m[36mEdge Load (4.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 22]]
  [1m[36mNode Load (7.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mNode Load (30.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 12]]
  [1m[35m (8.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.3ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 21], ["to_node_id", 22], ["created_at", "2019-08-23 10:14:35.053922"], ["updated_at", "2019-08-23 10:14:35.053922"]]
  [1m[35m (3.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Edge"], ["associated_id", 21], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 21\nto_node_id: 22\n"], ["version", 1], ["request_uuid", "fdf2ecf6-6eeb-438b-9b6a-a286d9377ebe"], ["created_at", "2019-08-23 10:14:35.062507"]]
  [1m[35m (3.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (4.1ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 21], ["to_node_id", 22], ["created_at", "2019-08-23 10:14:35.087324"], ["updated_at", "2019-08-23 10:14:35.087324"]]
  [1m[35m (2.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (11.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (13.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (18.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (6.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (7.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:14:35.290989"], ["updated_at", "2019-08-23 10:14:35.290989"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (8.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (7.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:14:35.381386"], ["updated_at", "2019-08-23 10:14:35.381386"]]
  [1m[36mInputNode Create (4.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 14], ["created_at", "2019-08-23 10:14:35.387352"], ["updated_at", "2019-08-23 10:14:35.387352"], ["type", "InputNode"]]
  [1m[35m (2.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Node"], ["associated_id", 14], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 14\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "eee1d978-37f0-4b47-b0b1-c88e6570e1c1"], ["created_at", "2019-08-23 10:14:35.402590"]]
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 14], ["created_at", "2019-08-23 10:14:35.421365"], ["updated_at", "2019-08-23 10:14:35.421365"], ["type", "OutputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Node"], ["associated_id", 14], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 14\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "6df25164-1013-4a3b-887e-e645618b10e3"], ["created_at", "2019-08-23 10:14:35.442584"]]
  [1m[35m (3.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (2.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (8.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:14:35.508502"], ["updated_at", "2019-08-23 10:14:35.508502"]]
  [1m[36mInputNode Create (3.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 15], ["created_at", "2019-08-23 10:14:35.522174"], ["updated_at", "2019-08-23 10:14:35.522174"], ["type", "InputNode"]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 25], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 25], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c2ea11e3-e135-46b3-812d-8dce136ed4cf"], ["created_at", "2019-08-23 10:14:35.533501"]]
  [1m[36mOutputNode Create (3.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 15], ["created_at", "2019-08-23 10:14:35.547737"], ["updated_at", "2019-08-23 10:14:35.547737"], ["type", "OutputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 26], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 26], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "77fd8d6b-b215-411d-805b-8901231c5493"], ["created_at", "2019-08-23 10:14:35.556910"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 25]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 25]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 26]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 26]]
  [1m[35m (2.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[35m (2.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mEdge Load (4.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 25]]
  [1m[36mEdge Load (14.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 25]]
  [1m[35m (10.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 25], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 25], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "689bd524-cf89-470b-a272-074169234d24"], ["created_at", "2019-08-23 10:14:35.656324"]]
  [1m[36mInputNode Update (4.4ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:14:35.652535"], ["id", 25]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 26]]
  [1m[36mEdge Load (1.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 26]]
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mEdge Load (13.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mEdge Load (11.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mNode Load (7.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 15], ["LIMIT", 1]]
  [1m[36mNode Load (5.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 15], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mNode Load (6.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 15], ["LIMIT", 1]]
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 15], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (18.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 25]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 25]]
  [1m[36mEdge Load (1.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 26]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 26]]
  [1m[35m (4.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 25]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 25]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mEdge Load (1.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 26]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 26]]
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 25], ["to_node_id", 26], ["created_at", "2019-08-23 10:14:35.912782"], ["updated_at", "2019-08-23 10:14:35.912782"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Edge"], ["associated_id", 25], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 25\nto_node_id: 26\n"], ["version", 1], ["request_uuid", "bb769ff3-d110-4397-8cea-a1c39895b435"], ["created_at", "2019-08-23 10:14:35.919036"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (12.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mEdge Load (12.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 15]]
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mNode Load (6.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 15], ["LIMIT", 1]]
  [1m[36mNode Load (5.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 15], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (8.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (5.8ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (6.8ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mNode Load (5.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:14:36.085783"], ["updated_at", "2019-08-23 10:14:36.085783"]]
  [1m[36mInputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 16], ["created_at", "2019-08-23 10:14:36.091159"], ["updated_at", "2019-08-23 10:14:36.091159"], ["type", "InputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 27], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 27], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3cf4b8bf-0fb5-487a-a447-a10bbbcfde9e"], ["created_at", "2019-08-23 10:14:36.100501"]]
  [1m[36mOutputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 16], ["created_at", "2019-08-23 10:14:36.107676"], ["updated_at", "2019-08-23 10:14:36.107676"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 28], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 28], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "916f1584-692d-4a29-9f28-5c77e3ff6408"], ["created_at", "2019-08-23 10:14:36.121381"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mEdge Load (1.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 27]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 27]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 28]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 28]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEdge Load (1.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 27]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 27]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 27], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (10.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 27], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "8f105521-eb21-4913-a6ca-fecdcf09e79e"], ["created_at", "2019-08-23 10:14:36.201072"]]
  [1m[36mInputNode Update (3.1ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:14:36.194067"], ["id", 27]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 28]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 28]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mEdge Load (12.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mEdge Load (10.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 16]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (5.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 16], ["LIMIT", 1]]
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 16], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (6.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (23.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (14.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (9.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (9.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (11.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (4.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (9.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (8.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (9.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (5.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (4.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (18.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:21.722852"], ["updated_at", "2019-08-23 10:35:21.722852"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:21.921137"], ["updated_at", "2019-08-23 10:35:21.921137"]]
  [1m[36mInputNode Create (5.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 18], ["created_at", "2019-08-23 10:35:21.926469"], ["updated_at", "2019-08-23 10:35:21.926469"], ["type", "InputNode"]]
  [1m[35m (13.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 29], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 29], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 18\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "62067fe8-0699-41e4-bf5b-541991fdf91c"], ["created_at", "2019-08-23 10:35:21.993378"]]
  [1m[36mOutputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 18], ["created_at", "2019-08-23 10:35:22.020210"], ["updated_at", "2019-08-23 10:35:22.020210"], ["type", "OutputNode"]]
  [1m[35m (10.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 30], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 30], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 18\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ba973f1b-601f-46c2-b726-30c1a26072ec"], ["created_at", "2019-08-23 10:35:22.031138"]]
  [1m[36mEdge Create (4.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 29], ["to_node_id", 30], ["created_at", "2019-08-23 10:35:22.052506"], ["updated_at", "2019-08-23 10:35:22.052506"]]
  [1m[35m (8.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Edge"], ["associated_id", 29], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 29\nto_node_id: 30\n"], ["version", 1], ["request_uuid", "f32fdf0d-2bca-48bf-bb2f-4ed94f546dc4"], ["created_at", "2019-08-23 10:35:22.065059"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (7.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (9.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:22.135486"], ["updated_at", "2019-08-23 10:35:22.135486"]]
  [1m[36mInputNode Create (3.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 19], ["created_at", "2019-08-23 10:35:22.141014"], ["updated_at", "2019-08-23 10:35:22.141014"], ["type", "InputNode"]]
  [1m[35m (12.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 31], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 31], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 19\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "aa332f4f-57d1-47e1-85be-500771769d36"], ["created_at", "2019-08-23 10:35:22.155345"]]
  [1m[36mOutputNode Create (6.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 19], ["created_at", "2019-08-23 10:35:22.178815"], ["updated_at", "2019-08-23 10:35:22.178815"], ["type", "OutputNode"]]
  [1m[35m (10.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 32], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 32], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 19\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "17fb2f5b-197f-4053-b83c-c1fcc88c6a2b"], ["created_at", "2019-08-23 10:35:22.193423"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[36mEdge Load (5.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 31]]
  [1m[36mEdge Load (4.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 31]]
  [1m[36mEdge Load (7.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 32]]
  [1m[36mEdge Load (6.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 32]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mEdge Load (4.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 31]]
  [1m[36mEdge Load (7.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 31]]
  [1m[35m (10.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 31], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 31], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "5763e471-5050-42b8-b9ee-bb4e619312e5"], ["created_at", "2019-08-23 10:35:22.315396"]]
  [1m[36mInputNode Update (4.9ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:35:22.311362"], ["id", 31]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mEdge Load (5.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 32]]
  [1m[36mEdge Load (5.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 32]]
  [1m[36mNode Load (6.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (4.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 19]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 31], ["to_node_id", 32], ["created_at", "2019-08-23 10:35:22.399806"], ["updated_at", "2019-08-23 10:35:22.399806"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Edge"], ["associated_id", 31], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 31\nto_node_id: 32\n"], ["version", 1], ["request_uuid", "68829b17-df31-46a3-9337-9d252f58bb66"], ["created_at", "2019-08-23 10:35:22.412774"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 31], ["to_node_id", 32], ["created_at", "2019-08-23 10:35:22.429250"], ["updated_at", "2019-08-23 10:35:22.429250"]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:22.461079"], ["updated_at", "2019-08-23 10:35:22.461079"]]
  [1m[36mInputNode Create (3.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 20], ["created_at", "2019-08-23 10:35:22.467235"], ["updated_at", "2019-08-23 10:35:22.467235"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 33], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 33], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 20\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f3306e28-aa81-4451-a836-26306750b771"], ["created_at", "2019-08-23 10:35:22.483009"]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 20], ["created_at", "2019-08-23 10:35:22.499313"], ["updated_at", "2019-08-23 10:35:22.499313"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 34], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 34], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 20\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bf66bba4-3ed3-4890-a240-10b03824063f"], ["created_at", "2019-08-23 10:35:22.511743"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (4.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 33]]
  [1m[36mEdge Load (7.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 33]]
  [1m[36mEdge Load (4.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 34]]
  [1m[36mEdge Load (6.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 34]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 33]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 33]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 33], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 33], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "6d740261-03f4-42da-b29d-683a1f43c845"], ["created_at", "2019-08-23 10:35:22.625448"]]
  [1m[36mInputNode Update (4.5ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:35:22.619067"], ["id", 33]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mEdge Load (1.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 34]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 34]]
  [1m[36mNode Load (5.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (3.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (7.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (7.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (12.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mGraph Load (5.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 33]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 33]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 34]]
  [1m[36mEdge Load (1.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 34]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 33]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 33]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 34]]
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 34]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 33], ["to_node_id", 34], ["created_at", "2019-08-23 10:35:22.871448"], ["updated_at", "2019-08-23 10:35:22.871448"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Edge"], ["associated_id", 33], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 33\nto_node_id: 34\n"], ["version", 1], ["request_uuid", "1a511217-f5d8-416c-864d-4120825b01c7"], ["created_at", "2019-08-23 10:35:22.880292"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (9.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[36mEdge Load (6.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 20]]
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:22.992154"], ["updated_at", "2019-08-23 10:35:22.992154"]]
  [1m[36mInputNode Create (2.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 21], ["created_at", "2019-08-23 10:35:22.998268"], ["updated_at", "2019-08-23 10:35:22.998268"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 35], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 35], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 21\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0baabb89-15a5-4e8f-858e-28edd56cb19d"], ["created_at", "2019-08-23 10:35:23.012500"]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 21], ["created_at", "2019-08-23 10:35:23.018108"], ["updated_at", "2019-08-23 10:35:23.018108"], ["type", "OutputNode"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 36], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 36], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 21\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2f77aaf6-cd1e-46b1-b2cb-8ec0a6794a08"], ["created_at", "2019-08-23 10:35:23.033995"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 35]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 35]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 36]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 36]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 35]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 35]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 35], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 35], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "4976daea-4e89-4376-8c8e-2cdd840f9d3b"], ["created_at", "2019-08-23 10:35:23.086101"]]
  [1m[36mInputNode Update (3.8ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:35:23.083879"], ["id", 35]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 36]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 36]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.2ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 35], ["to_node_id", 36], ["created_at", "2019-08-23 10:35:23.129175"], ["updated_at", "2019-08-23 10:35:23.129175"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Edge"], ["associated_id", 35], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 35\nto_node_id: 36\n"], ["version", 1], ["request_uuid", "90b000ed-3541-4d8c-8a32-65c98ac9f21e"], ["created_at", "2019-08-23 10:35:23.135035"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (4.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mEdge Load (4.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 35]]
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 35]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 36]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 36]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 35]]
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 35]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 36]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 36]]
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mEdge Load (5.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[36mEdge Load (5.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 21]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Edge"], ["associated_id", 35], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 35\nto_node_id: 36\n"], ["version", 2], ["request_uuid", "8200cba6-4b9e-452b-852d-79473b2cc4bd"], ["created_at", "2019-08-23 10:35:23.267617"]]
  [1m[36mEdge Destroy (4.7ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 17]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:23.305307"], ["updated_at", "2019-08-23 10:35:23.305307"]]
  [1m[36mInputNode Create (2.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 22], ["created_at", "2019-08-23 10:35:23.309690"], ["updated_at", "2019-08-23 10:35:23.309690"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 37], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 37], ["auditable_type", "Node"], ["associated_id", 22], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 22\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "242a2404-e9af-4e21-a049-16afe191b40e"], ["created_at", "2019-08-23 10:35:23.321729"]]
  [1m[36mOutputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 22], ["created_at", "2019-08-23 10:35:23.328491"], ["updated_at", "2019-08-23 10:35:23.328491"], ["type", "OutputNode"]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 38], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 38], ["auditable_type", "Node"], ["associated_id", 22], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 22\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "545c3674-2831-4f41-8087-4d15b8fd679e"], ["created_at", "2019-08-23 10:35:23.334460"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 37]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 37]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 38]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 38]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 38]]
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 38]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mNode Destroy (2.5ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 37]]
  [1m[36mEdge Load (4.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[36mEdge Load (4.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[35m (5.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 22]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (6.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:23.531372"], ["updated_at", "2019-08-23 10:35:23.531372"]]
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 23], ["created_at", "2019-08-23 10:35:23.534386"], ["updated_at", "2019-08-23 10:35:23.534386"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 39], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 39], ["auditable_type", "Node"], ["associated_id", 23], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 23\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "23c59450-b265-470c-a778-005185cbe81a"], ["created_at", "2019-08-23 10:35:23.539106"]]
  [1m[36mOutputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 23], ["created_at", "2019-08-23 10:35:23.548233"], ["updated_at", "2019-08-23 10:35:23.548233"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 40], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 40], ["auditable_type", "Node"], ["associated_id", 23], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 23\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1b3be56d-e40f-4af7-86f0-d700b0e8dd3d"], ["created_at", "2019-08-23 10:35:23.554094"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 39]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 39]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 40]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 40]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 39]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 39]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 39], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 39], ["auditable_type", "Node"], ["associated_id", 23], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "9098a495-846f-42e4-a045-f72a13c419e6"], ["created_at", "2019-08-23 10:35:23.619161"]]
  [1m[36mInputNode Update (3.0ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:35:23.616211"], ["id", 39]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 40]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 40]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[36mEdge Load (5.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[36mEdge Load (7.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 23]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:23.699532"], ["updated_at", "2019-08-23 10:35:23.699532"]]
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 24], ["created_at", "2019-08-23 10:35:23.706253"], ["updated_at", "2019-08-23 10:35:23.706253"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 41], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 41], ["auditable_type", "Node"], ["associated_id", 24], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 24\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "88e64385-cd37-4cb5-9102-dc9a56e93942"], ["created_at", "2019-08-23 10:35:23.712239"]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 24], ["created_at", "2019-08-23 10:35:23.722106"], ["updated_at", "2019-08-23 10:35:23.722106"], ["type", "OutputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 42], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 42], ["auditable_type", "Node"], ["associated_id", 24], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 24\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "46aa9df0-6bf6-49dd-9783-69d6cc7c3ea1"], ["created_at", "2019-08-23 10:35:23.729365"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (11.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:44.428868"], ["updated_at", "2019-08-23 10:35:44.428868"]]
  [1m[36mInputNode Create (5.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 25], ["created_at", "2019-08-23 10:35:44.437029"], ["updated_at", "2019-08-23 10:35:44.437029"], ["type", "InputNode"]]
  [1m[35m (16.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 43], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 43], ["auditable_type", "Node"], ["associated_id", 25], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 25\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "73e491ae-7c31-49ea-8e1d-78b8d70a2507"], ["created_at", "2019-08-23 10:35:44.493187"]]
  [1m[36mOutputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 25], ["created_at", "2019-08-23 10:35:44.520712"], ["updated_at", "2019-08-23 10:35:44.520712"], ["type", "OutputNode"]]
  [1m[35m (10.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 44], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 44], ["auditable_type", "Node"], ["associated_id", 25], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 25\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2e0e3ae7-0708-4613-adc8-e12c3a3fecb9"], ["created_at", "2019-08-23 10:35:44.527063"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (7.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
  [1m[36mEdge Load (9.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 43]]
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 43]]
  [1m[36mEdge Load (3.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 44]]
  [1m[36mEdge Load (4.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 44]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mEdge Load (4.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 43]]
  [1m[36mEdge Load (4.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 43]]
  [1m[35m (51.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 43], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 43], ["auditable_type", "Node"], ["associated_id", 25], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "33e97ba6-4a65-4dac-87c0-37d3a80b4251"], ["created_at", "2019-08-23 10:35:44.656122"]]
  [1m[36mInputNode Update (14.0ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:35:44.629066"], ["id", 43]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (8.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (5.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mEdge Load (12.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 44]]
  [1m[36mEdge Load (4.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 44]]
  [1m[36mNode Load (5.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mNode Load (5.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
  [1m[36mEdge Load (9.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
  [1m[36mEdge Load (6.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 25]]
  [1m[36mGraph Load (2.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 25], ["LIMIT", 1]]
  [1m[36mNode Load (3.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 25], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:44.918670"], ["updated_at", "2019-08-23 10:35:44.918670"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:44.982181"], ["updated_at", "2019-08-23 10:35:44.982181"]]
  [1m[36mInputNode Create (6.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 27], ["created_at", "2019-08-23 10:35:44.990515"], ["updated_at", "2019-08-23 10:35:44.990515"], ["type", "InputNode"]]
  [1m[35m (26.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 45], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 45], ["auditable_type", "Node"], ["associated_id", 27], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 27\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a20a05ba-86b0-450d-8ead-7b4d9a032557"], ["created_at", "2019-08-23 10:35:45.016356"]]
  [1m[36mOutputNode Create (5.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 27], ["created_at", "2019-08-23 10:35:45.063710"], ["updated_at", "2019-08-23 10:35:45.063710"], ["type", "OutputNode"]]
  [1m[35m (21.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 46], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 46], ["auditable_type", "Node"], ["associated_id", 27], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 27\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c4b90fa6-5148-4eb7-ac6c-6db209b3a96d"], ["created_at", "2019-08-23 10:35:45.086546"]]
  [1m[36mEdge Create (7.2ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 45], ["to_node_id", 46], ["created_at", "2019-08-23 10:35:45.130244"], ["updated_at", "2019-08-23 10:35:45.130244"]]
  [1m[35m (18.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 18], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 18], ["auditable_type", "Edge"], ["associated_id", 45], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 45\nto_node_id: 46\n"], ["version", 1], ["request_uuid", "a86c02cc-8d19-4600-9072-f2fadeb1509e"], ["created_at", "2019-08-23 10:35:45.155375"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:45.243991"], ["updated_at", "2019-08-23 10:35:45.243991"]]
  [1m[36mInputNode Create (8.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 28], ["created_at", "2019-08-23 10:35:45.248557"], ["updated_at", "2019-08-23 10:35:45.248557"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 47], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 47], ["auditable_type", "Node"], ["associated_id", 28], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 28\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7701775e-c0ef-4927-bafc-21005888b502"], ["created_at", "2019-08-23 10:35:45.263853"]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 28], ["created_at", "2019-08-23 10:35:45.273802"], ["updated_at", "2019-08-23 10:35:45.273802"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 48], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 48], ["auditable_type", "Node"], ["associated_id", 28], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 28\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a7b7d0cc-78a1-499b-9c4a-7591129fe91d"], ["created_at", "2019-08-23 10:35:45.280885"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mEdge Load (4.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 47]]
  [1m[36mEdge Load (4.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 47]]
  [1m[36mEdge Load (4.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 48]]
  [1m[36mEdge Load (4.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 48]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 48]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 48]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mNode Load (4.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mNode Destroy (3.9ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 47]]
  [1m[36mEdge Load (8.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mEdge Load (22.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (5.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 28]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:45.476897"], ["updated_at", "2019-08-23 10:35:45.476897"]]
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 29], ["created_at", "2019-08-23 10:35:45.482830"], ["updated_at", "2019-08-23 10:35:45.482830"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 49], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 49], ["auditable_type", "Node"], ["associated_id", 29], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 29\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e5e9a15a-8923-4f87-abc0-fda4989ce175"], ["created_at", "2019-08-23 10:35:45.492449"]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 29], ["created_at", "2019-08-23 10:35:45.501077"], ["updated_at", "2019-08-23 10:35:45.501077"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 50], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 50], ["auditable_type", "Node"], ["associated_id", 29], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 29\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "eea8fdad-6ece-4db8-abda-74e4d295fe8e"], ["created_at", "2019-08-23 10:35:45.509834"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 49]]
  [1m[36mEdge Load (0.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 49]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 50]]
  [1m[36mEdge Load (0.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 50]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 49]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 49]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 49], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 49], ["auditable_type", "Node"], ["associated_id", 29], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "f27ac1d9-d745-4ce3-b96b-3d9fe423940e"], ["created_at", "2019-08-23 10:35:45.565621"]]
  [1m[36mInputNode Update (2.6ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:35:45.561656"], ["id", 49]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 50]]
  [1m[36mEdge Load (0.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 50]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 29]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 49], ["to_node_id", 50], ["created_at", "2019-08-23 10:35:45.610696"], ["updated_at", "2019-08-23 10:35:45.610696"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Edge"], ["associated_id", 49], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 49\nto_node_id: 50\n"], ["version", 1], ["request_uuid", "1c0abb0d-2bc4-4cf5-bea1-33b1aedb591a"], ["created_at", "2019-08-23 10:35:45.618709"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (3.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 49], ["to_node_id", 50], ["created_at", "2019-08-23 10:35:45.630590"], ["updated_at", "2019-08-23 10:35:45.630590"]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (5.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (7.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:45.736145"], ["updated_at", "2019-08-23 10:35:45.736145"]]
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 30], ["created_at", "2019-08-23 10:35:45.738756"], ["updated_at", "2019-08-23 10:35:45.738756"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 51], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 51], ["auditable_type", "Node"], ["associated_id", 30], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 30\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4fdfc8d1-bd4a-4694-b631-3e7f30338dfe"], ["created_at", "2019-08-23 10:35:45.759965"]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 30], ["created_at", "2019-08-23 10:35:45.765762"], ["updated_at", "2019-08-23 10:35:45.765762"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 52], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 52], ["auditable_type", "Node"], ["associated_id", 30], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 30\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5feb8fb2-03dc-4d7a-ade3-f50654dca27e"], ["created_at", "2019-08-23 10:35:45.770172"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 51]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 51]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 52]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 52]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 51]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 51]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 51], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 51], ["auditable_type", "Node"], ["associated_id", 30], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "42cd0589-0521-4fe9-8a40-8639cfda6fef"], ["created_at", "2019-08-23 10:35:45.811948"]]
  [1m[36mInputNode Update (2.7ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:35:45.809440"], ["id", 51]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 52]]
  [1m[36mEdge Load (2.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 52]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mEdge Load (9.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mEdge Load (6.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (3.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 30], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (6.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 30], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 51]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 51]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 52]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 52]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 51]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 51]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 52]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 52]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 51], ["to_node_id", 52], ["created_at", "2019-08-23 10:35:45.948703"], ["updated_at", "2019-08-23 10:35:45.948703"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Edge"], ["associated_id", 51], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 51\nto_node_id: 52\n"], ["version", 1], ["request_uuid", "90635178-1a5e-44d2-9b0a-483f2fcbbca4"], ["created_at", "2019-08-23 10:35:45.953105"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mEdge Load (7.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 30]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 30], ["LIMIT", 1]]
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 30], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:46.034392"], ["updated_at", "2019-08-23 10:35:46.034392"]]
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 31], ["created_at", "2019-08-23 10:35:46.037082"], ["updated_at", "2019-08-23 10:35:46.037082"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 53], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 53], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 31\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0089ab33-6ab7-4e61-a155-c103cf529388"], ["created_at", "2019-08-23 10:35:46.042364"]]
  [1m[36mOutputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 31], ["created_at", "2019-08-23 10:35:46.049006"], ["updated_at", "2019-08-23 10:35:46.049006"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 54], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 54], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 31\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1eeabfe6-6545-4758-adb8-310fe7064a7b"], ["created_at", "2019-08-23 10:35:46.058194"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:35:46.083898"], ["updated_at", "2019-08-23 10:35:46.083898"]]
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 32], ["created_at", "2019-08-23 10:35:46.087433"], ["updated_at", "2019-08-23 10:35:46.087433"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 55], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 55], ["auditable_type", "Node"], ["associated_id", 32], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 32\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "01009ea6-b3c1-41f1-8ca0-3d206219e42c"], ["created_at", "2019-08-23 10:35:46.092699"]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 32], ["created_at", "2019-08-23 10:35:46.100636"], ["updated_at", "2019-08-23 10:35:46.100636"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 56], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 56], ["auditable_type", "Node"], ["associated_id", 32], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 32\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e8e6df29-6e70-4b08-844a-a8f995412f2c"], ["created_at", "2019-08-23 10:35:46.107623"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 55]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 55]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 56]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 56]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 55]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 55]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 55], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 55], ["auditable_type", "Node"], ["associated_id", 32], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "d182d469-c836-4986-ae29-910a4d59625b"], ["created_at", "2019-08-23 10:35:46.148269"]]
  [1m[36mInputNode Update (3.0ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:35:46.145913"], ["id", 55]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 56]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 56]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 55], ["to_node_id", 56], ["created_at", "2019-08-23 10:35:46.184034"], ["updated_at", "2019-08-23 10:35:46.184034"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 22], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 22], ["auditable_type", "Edge"], ["associated_id", 55], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 55\nto_node_id: 56\n"], ["version", 1], ["request_uuid", "ed915b0c-336e-40f0-97a0-1601e5eeed19"], ["created_at", "2019-08-23 10:35:46.188360"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mEdge Load (7.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 55]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 55]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 56]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 56]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 55]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 55]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 56]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 56]]
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mEdge Load (6.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[36mEdge Load (6.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 32]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 22], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 22], ["auditable_type", "Edge"], ["associated_id", 55], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 55\nto_node_id: 56\n"], ["version", 2], ["request_uuid", "daedcf0b-86f6-4a0c-b191-f478cead5dad"], ["created_at", "2019-08-23 10:35:46.304967"]]
  [1m[36mEdge Destroy (3.4ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 22]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (9.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (8.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (11.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (6.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (9.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (7.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (13.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (11.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:42:56.700642"], ["updated_at", "2019-08-23 10:42:56.700642"]]
  [1m[36mInputNode Create (8.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 33], ["created_at", "2019-08-23 10:42:56.709998"], ["updated_at", "2019-08-23 10:42:56.709998"], ["type", "InputNode"]]
  [1m[35m (18.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 57], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 57], ["auditable_type", "Node"], ["associated_id", 33], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 33\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "629d4380-1d0c-43df-a4a4-19eee87d63ff"], ["created_at", "2019-08-23 10:42:56.772629"]]
  [1m[36mOutputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 33], ["created_at", "2019-08-23 10:42:56.819109"], ["updated_at", "2019-08-23 10:42:56.819109"], ["type", "OutputNode"]]
  [1m[35m (11.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 58], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 58], ["auditable_type", "Node"], ["associated_id", 33], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 33\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bff50674-54dc-4de5-972d-dc82f491a04e"], ["created_at", "2019-08-23 10:42:56.826404"]]
  [1m[36mEdge Create (5.2ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 57], ["to_node_id", 58], ["created_at", "2019-08-23 10:42:56.844660"], ["updated_at", "2019-08-23 10:42:56.844660"]]
  [1m[35m (12.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Edge"], ["associated_id", 57], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 57\nto_node_id: 58\n"], ["version", 1], ["request_uuid", "7d0e6946-9981-4662-ac94-99d14b6b49fa"], ["created_at", "2019-08-23 10:42:56.856291"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (8.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (11.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (4.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:42:57.006526"], ["updated_at", "2019-08-23 10:42:57.006526"]]
  [1m[36mInputNode Create (3.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 34], ["created_at", "2019-08-23 10:42:57.010972"], ["updated_at", "2019-08-23 10:42:57.010972"], ["type", "InputNode"]]
  [1m[35m (9.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 59], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 59], ["auditable_type", "Node"], ["associated_id", 34], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 34\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5e22e628-4413-4bc2-8d40-1acd2ca3f666"], ["created_at", "2019-08-23 10:42:57.021504"]]
  [1m[36mOutputNode Create (2.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 34], ["created_at", "2019-08-23 10:42:57.037929"], ["updated_at", "2019-08-23 10:42:57.037929"], ["type", "OutputNode"]]
  [1m[35m (9.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 60], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 60], ["auditable_type", "Node"], ["associated_id", 34], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 34\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "43db28c5-c1ac-4803-a5f7-e3d9c8202b70"], ["created_at", "2019-08-23 10:42:57.046404"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[36mEdge Load (4.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 59]]
  [1m[36mEdge Load (5.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 59]]
  [1m[36mEdge Load (4.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 60]]
  [1m[36mEdge Load (4.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 60]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mEdge Load (3.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 59]]
  [1m[36mEdge Load (3.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 59]]
  [1m[35m (9.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 59], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 59], ["auditable_type", "Node"], ["associated_id", 34], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "4aa06540-8301-4235-b603-7bff1ea541af"], ["created_at", "2019-08-23 10:42:57.146311"]]
  [1m[36mInputNode Update (4.5ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:42:57.140861"], ["id", 59]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mEdge Load (4.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 60]]
  [1m[36mEdge Load (4.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 60]]
  [1m[36mNode Load (4.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[36mEdge Load (7.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[36mEdge Load (7.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 34]]
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mNode Load (4.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 34], ["LIMIT", 1]]
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 34], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:42:57.301316"], ["updated_at", "2019-08-23 10:42:57.301316"]]
  [1m[36mInputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 35], ["created_at", "2019-08-23 10:42:57.305290"], ["updated_at", "2019-08-23 10:42:57.305290"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 61], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 61], ["auditable_type", "Node"], ["associated_id", 35], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 35\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8332af40-ed04-4f63-81b6-7674673f429e"], ["created_at", "2019-08-23 10:42:57.320757"]]
  [1m[36mOutputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 35], ["created_at", "2019-08-23 10:42:57.332695"], ["updated_at", "2019-08-23 10:42:57.332695"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 62], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 62], ["auditable_type", "Node"], ["associated_id", 35], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 35\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3cae73db-de64-47a2-b14d-5c435d054361"], ["created_at", "2019-08-23 10:42:57.349131"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[36mEdge Load (4.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 61]]
  [1m[36mEdge Load (5.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 61]]
  [1m[36mEdge Load (4.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 62]]
  [1m[36mEdge Load (4.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 62]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 61]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 61]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 61], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 61], ["auditable_type", "Node"], ["associated_id", 35], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "7c3aec7f-a86b-45d6-ac1d-9fb1edbf6464"], ["created_at", "2019-08-23 10:42:57.438494"]]
  [1m[36mInputNode Update (3.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:42:57.432286"], ["id", 61]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 62]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 62]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 61], ["to_node_id", 62], ["created_at", "2019-08-23 10:42:57.494416"], ["updated_at", "2019-08-23 10:42:57.494416"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Edge"], ["associated_id", 61], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 61\nto_node_id: 62\n"], ["version", 1], ["request_uuid", "6529094e-f97f-4f39-8589-52415e59f092"], ["created_at", "2019-08-23 10:42:57.501950"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (8.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[36mEdge Load (9.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 61]]
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 61]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 62]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 62]]
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 61]]
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 61]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 62]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 62]]
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[36mEdge Load (7.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[36mEdge Load (7.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 35]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Edge"], ["associated_id", 61], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 61\nto_node_id: 62\n"], ["version", 2], ["request_uuid", "549a4f1f-0446-4e8d-849a-d599d9ee0d93"], ["created_at", "2019-08-23 10:42:57.682181"]]
  [1m[36mEdge Destroy (3.7ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 24]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:42:57.716770"], ["updated_at", "2019-08-23 10:42:57.716770"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:42:57.741150"], ["updated_at", "2019-08-23 10:42:57.741150"]]
  [1m[36mInputNode Create (0.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 37], ["created_at", "2019-08-23 10:42:57.743534"], ["updated_at", "2019-08-23 10:42:57.743534"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 63], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 63], ["auditable_type", "Node"], ["associated_id", 37], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 37\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2127b349-b062-4f34-a2e4-797479aa815c"], ["created_at", "2019-08-23 10:42:57.750956"]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 37], ["created_at", "2019-08-23 10:42:57.757278"], ["updated_at", "2019-08-23 10:42:57.757278"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 64], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 64], ["auditable_type", "Node"], ["associated_id", 37], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 37\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a3a786dc-2a98-4014-a291-509bf84c0885"], ["created_at", "2019-08-23 10:42:57.764342"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 37]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 63]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 63]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 64]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 64]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 63]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 63]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 63], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 63], ["auditable_type", "Node"], ["associated_id", 37], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "80624911-cadb-41ce-b3d8-7bfb5157377e"], ["created_at", "2019-08-23 10:42:57.807338"]]
  [1m[36mInputNode Update (3.0ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:42:57.805035"], ["id", 63]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 64]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 64]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 37]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 37]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 63], ["to_node_id", 64], ["created_at", "2019-08-23 10:42:57.844138"], ["updated_at", "2019-08-23 10:42:57.844138"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 25], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 25], ["auditable_type", "Edge"], ["associated_id", 63], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 63\nto_node_id: 64\n"], ["version", 1], ["request_uuid", "a761e853-708c-470b-b629-5e3cbbdb0228"], ["created_at", "2019-08-23 10:42:57.848594"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 63], ["to_node_id", 64], ["created_at", "2019-08-23 10:42:57.858172"], ["updated_at", "2019-08-23 10:42:57.858172"]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:42:57.881943"], ["updated_at", "2019-08-23 10:42:57.881943"]]
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 38], ["created_at", "2019-08-23 10:42:57.884429"], ["updated_at", "2019-08-23 10:42:57.884429"], ["type", "InputNode"]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 65], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 65], ["auditable_type", "Node"], ["associated_id", 38], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 38\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "242d705e-e266-40a7-ae6e-aaaf4486c261"], ["created_at", "2019-08-23 10:42:57.889146"]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 38], ["created_at", "2019-08-23 10:42:57.898006"], ["updated_at", "2019-08-23 10:42:57.898006"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 66], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 66], ["auditable_type", "Node"], ["associated_id", 38], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 38\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "16253452-0b5e-4dc9-bb08-b5047f687869"], ["created_at", "2019-08-23 10:42:57.906027"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:42:57.927655"], ["updated_at", "2019-08-23 10:42:57.927655"]]
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 39], ["created_at", "2019-08-23 10:42:57.930624"], ["updated_at", "2019-08-23 10:42:57.930624"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 67], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 67], ["auditable_type", "Node"], ["associated_id", 39], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 39\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bae04089-b1c5-45fd-9e0e-6cb043743cd2"], ["created_at", "2019-08-23 10:42:57.936679"]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 39], ["created_at", "2019-08-23 10:42:57.942905"], ["updated_at", "2019-08-23 10:42:57.942905"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 68], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 68], ["auditable_type", "Node"], ["associated_id", 39], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 39\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "563a3034-b7d4-4ad5-b74b-d13da87bf7a6"], ["created_at", "2019-08-23 10:42:57.952077"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 67]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 67]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 68]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 68]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 67]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 67]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 67], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 67], ["auditable_type", "Node"], ["associated_id", 39], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "a7d9d136-76a4-4cfd-ae09-84445b5299f1"], ["created_at", "2019-08-23 10:42:57.992807"]]
  [1m[36mInputNode Update (3.6ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:42:57.990473"], ["id", 67]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 68]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 68]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mEdge Load (9.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mEdge Load (13.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mNode Load (3.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 39], ["LIMIT", 1]]
  [1m[36mNode Load (5.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 39], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mNode Load (3.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 39], ["LIMIT", 1]]
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 39], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mEdge Load (1.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 67]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 67]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 68]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 68]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 67]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 67]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 68]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 68]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 67], ["to_node_id", 68], ["created_at", "2019-08-23 10:42:58.139473"], ["updated_at", "2019-08-23 10:42:58.139473"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 27], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 27], ["auditable_type", "Edge"], ["associated_id", 67], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 67\nto_node_id: 68\n"], ["version", 1], ["request_uuid", "2466f0fa-09b0-4d93-b56a-e3c5a178b3c9"], ["created_at", "2019-08-23 10:42:58.143815"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (8.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mEdge Load (5.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mGraph Load (0.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 39], ["LIMIT", 1]]
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 39], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  [1m[36mNode Load (3.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:42:58.225247"], ["updated_at", "2019-08-23 10:42:58.225247"]]
  [1m[36mInputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 40], ["created_at", "2019-08-23 10:42:58.228000"], ["updated_at", "2019-08-23 10:42:58.228000"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 69], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 69], ["auditable_type", "Node"], ["associated_id", 40], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 40\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8dd835d9-d6a4-4a81-8170-d974e876be93"], ["created_at", "2019-08-23 10:42:58.237109"]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 40], ["created_at", "2019-08-23 10:42:58.243372"], ["updated_at", "2019-08-23 10:42:58.243372"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 70], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 70], ["auditable_type", "Node"], ["associated_id", 40], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 40\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ad3014ac-716d-4a64-b80b-8e418da58338"], ["created_at", "2019-08-23 10:42:58.247862"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 69]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 69]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 70]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 70]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 70]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 70]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[36mNode Destroy (3.4ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 69]]
  [1m[36mEdge Load (8.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[36mEdge Load (7.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[35m (4.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 40]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:43:15.583487"], ["updated_at", "2019-08-23 10:43:15.583487"]]
  [1m[36mInputNode Create (7.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 41], ["created_at", "2019-08-23 10:43:15.590281"], ["updated_at", "2019-08-23 10:43:15.590281"], ["type", "InputNode"]]
  [1m[35m (15.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 71], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 71], ["auditable_type", "Node"], ["associated_id", 41], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 41\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ce5275d2-5e33-41b7-bde7-70e11a407a07"], ["created_at", "2019-08-23 10:43:15.640557"]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 41], ["created_at", "2019-08-23 10:43:15.667615"], ["updated_at", "2019-08-23 10:43:15.667615"], ["type", "OutputNode"]]
  [1m[35m (7.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 72], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 72], ["auditable_type", "Node"], ["associated_id", 41], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 41\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3037b99f-5c9b-4cc3-a232-f9df2d6ef0b5"], ["created_at", "2019-08-23 10:43:15.675415"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 41]]
  [1m[36mEdge Load (11.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 71]]
  [1m[36mEdge Load (4.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 71]]
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 72]]
  [1m[36mEdge Load (3.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 72]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mEdge Load (4.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 71]]
  [1m[36mEdge Load (4.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 71]]
  [1m[35m (11.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 71], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 71], ["auditable_type", "Node"], ["associated_id", 41], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "0563813a-d2d9-4cbd-8571-34ea2846d75d"], ["created_at", "2019-08-23 10:43:15.787882"]]
  [1m[36mInputNode Update (4.0ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:43:15.784310"], ["id", 71]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mEdge Load (4.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 72]]
  [1m[36mEdge Load (4.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 72]]
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 41]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 41]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.4ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 71], ["to_node_id", 72], ["created_at", "2019-08-23 10:43:15.862600"], ["updated_at", "2019-08-23 10:43:15.862600"]]
  [1m[35m (16.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 28], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 28], ["auditable_type", "Edge"], ["associated_id", 71], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 71\nto_node_id: 72\n"], ["version", 1], ["request_uuid", "83d3b9c8-d96b-4b43-a14b-9bb621a138d7"], ["created_at", "2019-08-23 10:43:15.870997"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (7.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 41]]
  [1m[36mEdge Load (7.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 41]]
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mGraph Load (1.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 41]]
  [1m[36mEdge Load (5.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 71]]
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  [1m[36mEdge Load (4.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 71]]
  [1m[36mEdge Load (4.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 72]]
  [1m[36mEdge Load (4.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 72]]
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 71]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  [1m[36mEdge Load (0.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 71]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 72]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 72]]
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 41]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 41]]
  [1m[36mEdge Load (9.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 41]]
  [1m[36mEdge Load (9.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 41]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[35m (9.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 28], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 28], ["auditable_type", "Edge"], ["associated_id", 71], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 71\nto_node_id: 72\n"], ["version", 2], ["request_uuid", "b861e74e-3342-41df-a4dd-86c51ad1e682"], ["created_at", "2019-08-23 10:43:16.066292"]]
  [1m[36mEdge Destroy (4.1ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 28]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:43:16.119679"], ["updated_at", "2019-08-23 10:43:16.119679"]]
  [1m[36mInputNode Create (4.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 42], ["created_at", "2019-08-23 10:43:16.125160"], ["updated_at", "2019-08-23 10:43:16.125160"], ["type", "InputNode"]]
  [1m[35m (8.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 73], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 73], ["auditable_type", "Node"], ["associated_id", 42], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 42\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f3115b02-07e4-4c81-a5f5-fe11b20ae346"], ["created_at", "2019-08-23 10:43:16.139857"]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 42], ["created_at", "2019-08-23 10:43:16.157439"], ["updated_at", "2019-08-23 10:43:16.157439"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 74], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 74], ["auditable_type", "Node"], ["associated_id", 42], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 42\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "99639cb2-56fd-4868-9b99-ef0ef59b111c"], ["created_at", "2019-08-23 10:43:16.167043"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 42]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 73]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 73]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 74]]
  [1m[36mEdge Load (0.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 74]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 74]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 74]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 42]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 42]]
  [1m[36mNode Destroy (2.9ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 73]]
  [1m[36mEdge Load (7.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 42]]
  [1m[36mEdge Load (7.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 42]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  [1m[35m (5.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 42]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:43:16.355813"], ["updated_at", "2019-08-23 10:43:16.355813"]]
  [1m[36mInputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 43], ["created_at", "2019-08-23 10:43:16.358950"], ["updated_at", "2019-08-23 10:43:16.358950"], ["type", "InputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 75], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 75], ["auditable_type", "Node"], ["associated_id", 43], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 43\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "922b73f6-89db-436d-a7c5-a3bcd837ae58"], ["created_at", "2019-08-23 10:43:16.366230"]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 43], ["created_at", "2019-08-23 10:43:16.375292"], ["updated_at", "2019-08-23 10:43:16.375292"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 76], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 76], ["auditable_type", "Node"], ["associated_id", 43], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 43\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3bdfc086-a2c0-4089-8605-0004e50282cf"], ["created_at", "2019-08-23 10:43:16.380594"]]
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 75], ["to_node_id", 76], ["created_at", "2019-08-23 10:43:16.392396"], ["updated_at", "2019-08-23 10:43:16.392396"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 29], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 29], ["auditable_type", "Edge"], ["associated_id", 75], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 75\nto_node_id: 76\n"], ["version", 1], ["request_uuid", "9c6c854d-4c23-4f5c-b128-c5bdaf81c18a"], ["created_at", "2019-08-23 10:43:16.402268"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:43:16.454863"], ["updated_at", "2019-08-23 10:43:16.454863"]]
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 44], ["created_at", "2019-08-23 10:43:16.459803"], ["updated_at", "2019-08-23 10:43:16.459803"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 77], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 77], ["auditable_type", "Node"], ["associated_id", 44], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 44\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d78e4691-a399-4aca-b97a-6b1f1e6f9ac2"], ["created_at", "2019-08-23 10:43:16.473063"]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 44], ["created_at", "2019-08-23 10:43:16.481216"], ["updated_at", "2019-08-23 10:43:16.481216"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 78], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 78], ["auditable_type", "Node"], ["associated_id", 44], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 44\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "af909806-2b61-480e-8780-49e724101dd0"], ["created_at", "2019-08-23 10:43:16.498051"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 44]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 77]]
  [1m[36mEdge Load (1.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 77]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 78]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 78]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 77]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 77]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 77], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 77], ["auditable_type", "Node"], ["associated_id", 44], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "e1e27185-6926-4b64-bfc2-eae7ec7cc208"], ["created_at", "2019-08-23 10:43:16.544051"]]
  [1m[36mInputNode Update (3.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:43:16.541735"], ["id", 77]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 78]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 78]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 44]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 44]]
  [1m[36mEdge Load (7.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 44]]
  [1m[36mEdge Load (8.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 44]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mNode Load (2.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 44], ["LIMIT", 1]]
  [1m[36mNode Load (3.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 44], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 44], ["LIMIT", 1]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 44], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 44]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 77]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 77]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 78]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 78]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 77]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 77]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 78]]
  [1m[36mEdge Load (1.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 78]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 44]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 44]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 77], ["to_node_id", 78], ["created_at", "2019-08-23 10:43:16.677365"], ["updated_at", "2019-08-23 10:43:16.677365"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 30], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 30], ["auditable_type", "Edge"], ["associated_id", 77], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 77\nto_node_id: 78\n"], ["version", 1], ["request_uuid", "d1d959b8-1bbb-483c-85ba-f7a6f432d8a7"], ["created_at", "2019-08-23 10:43:16.681762"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (6.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 44]]
  [1m[36mEdge Load (5.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 44]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 44], ["LIMIT", 1]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 44], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (3.4ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:43:16.758167"], ["updated_at", "2019-08-23 10:43:16.758167"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:43:16.779075"], ["updated_at", "2019-08-23 10:43:16.779075"]]
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 46], ["created_at", "2019-08-23 10:43:16.781709"], ["updated_at", "2019-08-23 10:43:16.781709"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 79], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 79], ["auditable_type", "Node"], ["associated_id", 46], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 46\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "55e8c7ee-2a7e-4a0d-b4e2-a5da2e74e645"], ["created_at", "2019-08-23 10:43:16.787797"]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 46], ["created_at", "2019-08-23 10:43:16.795213"], ["updated_at", "2019-08-23 10:43:16.795213"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 80], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 80], ["auditable_type", "Node"], ["associated_id", 46], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 46\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f025d67c-2a71-4484-8bc0-e7cb706af30b"], ["created_at", "2019-08-23 10:43:16.803987"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 46]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 79]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 79]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 80]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 80]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 79]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 79]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 79], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 79], ["auditable_type", "Node"], ["associated_id", 46], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "4a9829fe-ad1d-4996-a337-c761178af155"], ["created_at", "2019-08-23 10:43:16.845340"]]
  [1m[36mInputNode Update (2.9ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:43:16.842912"], ["id", 79]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 80]]
  [1m[36mEdge Load (0.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 80]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 46]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 46]]
  [1m[36mEdge Load (9.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 46]]
  [1m[36mEdge Load (7.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 46]]
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[36mNode Load (3.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 46], ["LIMIT", 1]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 46], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (6.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:43:16.940465"], ["updated_at", "2019-08-23 10:43:16.940465"]]
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 47], ["created_at", "2019-08-23 10:43:16.943011"], ["updated_at", "2019-08-23 10:43:16.943011"], ["type", "InputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 81], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 81], ["auditable_type", "Node"], ["associated_id", 47], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 47\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a1a8403b-9b74-4ca1-a40b-3c87b200e7e8"], ["created_at", "2019-08-23 10:43:16.947429"]]
  [1m[36mOutputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 47], ["created_at", "2019-08-23 10:43:16.953948"], ["updated_at", "2019-08-23 10:43:16.953948"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 82], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 82], ["auditable_type", "Node"], ["associated_id", 47], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 47\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1564935a-35a2-42d1-bd52-e53ac5e3bb3c"], ["created_at", "2019-08-23 10:43:16.958628"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:43:16.982769"], ["updated_at", "2019-08-23 10:43:16.982769"]]
  [1m[36mInputNode Create (0.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 48], ["created_at", "2019-08-23 10:43:16.985445"], ["updated_at", "2019-08-23 10:43:16.985445"], ["type", "InputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 83], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 83], ["auditable_type", "Node"], ["associated_id", 48], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 48\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e3d565a0-5a93-4f3d-8169-10713fba1b66"], ["created_at", "2019-08-23 10:43:16.990585"]]
  [1m[36mOutputNode Create (0.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 48], ["created_at", "2019-08-23 10:43:17.000670"], ["updated_at", "2019-08-23 10:43:17.000670"], ["type", "OutputNode"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 84], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 84], ["auditable_type", "Node"], ["associated_id", 48], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 48\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "54c84641-f366-454c-9f67-9caeccff0fce"], ["created_at", "2019-08-23 10:43:17.006717"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 48]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 83]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 83]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 84]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 84]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 83]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 83]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 83], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (6.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 83], ["auditable_type", "Node"], ["associated_id", 48], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "f65a2736-3ade-497f-8c56-eb8a08f59e68"], ["created_at", "2019-08-23 10:43:17.046847"]]
  [1m[36mInputNode Update (3.0ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:43:17.044440"], ["id", 83]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 84]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 84]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 48]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.4ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 48]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.6ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 83], ["to_node_id", 84], ["created_at", "2019-08-23 10:43:17.086987"], ["updated_at", "2019-08-23 10:43:17.086987"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 31], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 31], ["auditable_type", "Edge"], ["associated_id", 83], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 83\nto_node_id: 84\n"], ["version", 1], ["request_uuid", "29176cb9-857b-40cc-bd52-d5226bcbf793"], ["created_at", "2019-08-23 10:43:17.091048"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 83], ["to_node_id", 84], ["created_at", "2019-08-23 10:43:17.099567"], ["updated_at", "2019-08-23 10:43:17.099567"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (835.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "myapp_test"[0m
  [1m[35m (3275.8ms)[0m  [1m[35mCREATE DATABASE "myapp_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "audits" CASCADE[0m
  [1m[35m (76.3ms)[0m  [1m[35mCREATE TABLE "audits" ("id" bigserial primary key, "auditable_id" integer, "auditable_type" character varying, "associated_id" integer, "associated_type" character varying, "user_id" integer, "user_type" character varying, "username" character varying, "action" character varying, "audited_changes" text, "version" integer DEFAULT 0, "comment" character varying, "remote_address" character varying, "request_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE  INDEX  "associated_index" ON "audits"  ("associated_type", "associated_id")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE  INDEX  "auditable_index" ON "audits"  ("auditable_type", "auditable_id", "version")[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_created_at" ON "audits"  ("created_at")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE  INDEX  "index_audits_on_request_uuid" ON "audits"  ("request_uuid")[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE  INDEX  "user_index" ON "audits"  ("user_id", "user_type")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "edges" CASCADE[0m
  [1m[35m (19.3ms)[0m  [1m[35mCREATE TABLE "edges" ("id" bigserial primary key, "from_node_id" bigint NOT NULL, "to_node_id" bigint NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (8.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_edges_on_from_node_id_and_to_node_id" ON "edges"  ("from_node_id", "to_node_id")[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_from_node_id" ON "edges"  ("from_node_id")[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE  INDEX  "index_edges_on_to_node_id" ON "edges"  ("to_node_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "graphs" CASCADE[0m
  [1m[35m (22.5ms)[0m  [1m[35mCREATE TABLE "graphs" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "type" character varying)[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "node_counts" CASCADE[0m
  [1m[35m (15.6ms)[0m  [1m[35mCREATE TABLE "node_counts" ("id" bigserial primary key, "count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "nodes" CASCADE[0m
  [1m[35m (34.7ms)[0m  [1m[35mCREATE TABLE "nodes" ("id" bigserial primary key, "name" character varying, "graph_id" bigint NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "content" json, "x" float DEFAULT 0.0, "y" float DEFAULT 0.0, "type" character varying NOT NULL, "node_ref_id" bigint)[0m
  [1m[35m (18.2ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_graph_id" ON "nodes"  ("graph_id")[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE  INDEX  "index_nodes_on_node_ref_id" ON "nodes"  ("node_ref_id")[0m
  [1m[35m (21.2ms)[0m  [1m[35mALTER TABLE "nodes" ADD CONSTRAINT "fk_rails_10f83f4418"
FOREIGN KEY ("graph_id")
  REFERENCES "graphs" ("id")
[0m
  [1m[35m (20.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (3.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20190822055108)[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20190430113529),
(20190724110012),
(20190411085042),
(20190523112235),
(20190514095100),
(20190514093514),
(20190801105126),
(20190806132227),
(20190724105907),
(20190429092701),
(20190411113011),
(20190411100036);

[0m
  [1m[35m (25.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (4.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (4.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-08-23 10:49:25.464632"], ["updated_at", "2019-08-23 10:49:25.464632"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_graph_if_save_all_is_successful
------------------------------------------------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (8.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:25.904409"], ["updated_at", "2019-08-23 10:49:25.904409"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/1/save_all" for 127.0.0.1 at 2019-08-23 10:49:25 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"1", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "clientId"=>"3d04e35f-95eb-49ae-9fea-b267bbe8c350"}, {"name"=>"Node 2", "type"=>"OutputNode", "clientId"=>"de3b60e9-a069-46bc-8eec-890e0a508730"}], "id"=>"1"}
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (9.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 1]]
  [1m[36mGraph Update (2.2ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-23 10:49:26.079961"], ["id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (8.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 1], ["created_at", "2019-08-23 10:49:26.157085"], ["updated_at", "2019-08-23 10:49:26.157085"], ["type", "InputNode"]]
  [1m[35m (18.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (13.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Node"], ["associated_id", 1], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 1\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "46ad6d46-4ad6-4320-8576-2a2dad0f50e6"], ["created_at", "2019-08-23 10:49:26.223032"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 1], ["created_at", "2019-08-23 10:49:26.287925"], ["updated_at", "2019-08-23 10:49:26.287925"], ["type", "OutputNode"]]
  [1m[35m (5.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Node"], ["associated_id", 1], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 1\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "46ad6d46-4ad6-4320-8576-2a2dad0f50e6"], ["created_at", "2019-08-23 10:49:26.293410"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mNode Load (4.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 1]]
  [1m[36mEdge Load (9.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 1]]
  [1m[36mEdge Load (4.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 1]]
  [1m[36mGraph Load (1.3ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 1]]
  [1m[36mEdge Load (4.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 1]]
  [1m[36mEdge Load (5.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 1]]
Completed 200 OK in 357ms (Views: 0.4ms | ActiveRecord: 140.4ms)
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:26.394666"], ["updated_at", "2019-08-23 10:49:26.394666"]]
  [1m[36mInputNode Create (2.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 2], ["created_at", "2019-08-23 10:49:26.398390"], ["updated_at", "2019-08-23 10:49:26.398390"], ["type", "InputNode"]]
  [1m[35m (11.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 3], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 3], ["auditable_type", "Node"], ["associated_id", 2], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 2\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "1a2a801e-efa5-4849-9459-93fce43265e2"], ["created_at", "2019-08-23 10:49:26.404298"]]
  [1m[36mOutputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 2], ["created_at", "2019-08-23 10:49:26.421052"], ["updated_at", "2019-08-23 10:49:26.421052"], ["type", "OutputNode"]]
  [1m[35m (5.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Node"], ["associated_id", 2], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 2\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c01d30b6-9958-4571-abf1-43b11cd3adb3"], ["created_at", "2019-08-23 10:49:26.426464"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 3]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 3]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 4]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 4]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 4]]
  [1m[36mEdge Load (3.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 4]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[36mNode Destroy (4.0ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 3]]
  [1m[36mEdge Load (5.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[36mEdge Load (4.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:26.551413"], ["updated_at", "2019-08-23 10:49:26.551413"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:26.581540"], ["updated_at", "2019-08-23 10:49:26.581540"]]
  [1m[36mInputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 4], ["created_at", "2019-08-23 10:49:26.586327"], ["updated_at", "2019-08-23 10:49:26.586327"], ["type", "InputNode"]]
  [1m[35m (5.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Node"], ["associated_id", 4], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 4\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f17a4378-98bb-4de1-be27-6421294a2b5c"], ["created_at", "2019-08-23 10:49:26.591971"]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 4], ["created_at", "2019-08-23 10:49:26.604077"], ["updated_at", "2019-08-23 10:49:26.604077"], ["type", "OutputNode"]]
  [1m[35m (5.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 6], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 6], ["auditable_type", "Node"], ["associated_id", 4], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 4\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7246fd6f-1edb-4b9d-9df5-ed499fea7cd5"], ["created_at", "2019-08-23 10:49:26.609871"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:26.638642"], ["updated_at", "2019-08-23 10:49:26.638642"]]
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 5], ["created_at", "2019-08-23 10:49:26.641520"], ["updated_at", "2019-08-23 10:49:26.641520"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Node"], ["associated_id", 5], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 5\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "b860c5d7-c60b-46e3-bf24-23ff33b65749"], ["created_at", "2019-08-23 10:49:26.650410"]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 5], ["created_at", "2019-08-23 10:49:26.656676"], ["updated_at", "2019-08-23 10:49:26.656676"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Node"], ["associated_id", 5], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 5\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a871dce0-0697-4981-9680-2793067a18ac"], ["created_at", "2019-08-23 10:49:26.662118"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 5]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 7]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 7]]
  [1m[36mEdge Load (3.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 8]]
  [1m[36mEdge Load (2.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 8]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 7]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 7]]
  [1m[35m (2.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Node"], ["associated_id", 5], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "3668d748-98b6-4e1f-913b-4ab5077bc9f5"], ["created_at", "2019-08-23 10:49:26.716447"]]
  [1m[36mInputNode Update (2.3ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:49:26.713942"], ["id", 7]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 8]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 8]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 5]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 5]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (7.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 7], ["to_node_id", 8], ["created_at", "2019-08-23 10:49:26.760673"], ["updated_at", "2019-08-23 10:49:26.760673"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Edge"], ["associated_id", 7], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 7\nto_node_id: 8\n"], ["version", 1], ["request_uuid", "1d6a1358-813e-4202-85eb-13698b6bdf11"], ["created_at", "2019-08-23 10:49:26.771990"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (5.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 5]]
  [1m[36mEdge Load (4.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 5]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 5]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 7]]
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 7]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 8]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 8]]
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.3ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 7]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 7]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 8]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 8]]
  [1m[36mNode Load (0.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 5]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 5]]
  [1m[36mEdge Load (6.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 5]]
  [1m[36mEdge Load (6.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 5]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 1], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 1], ["auditable_type", "Edge"], ["associated_id", 7], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 7\nto_node_id: 8\n"], ["version", 2], ["request_uuid", "294fb897-1c6a-4ab9-9f4d-1741409041bd"], ["created_at", "2019-08-23 10:49:26.887967"]]
  [1m[36mEdge Destroy (3.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:26.918874"], ["updated_at", "2019-08-23 10:49:26.918874"]]
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 6], ["created_at", "2019-08-23 10:49:26.922772"], ["updated_at", "2019-08-23 10:49:26.922772"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Node"], ["associated_id", 6], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 6\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "dcf9df7d-5782-4199-928c-82205ed8aa9a"], ["created_at", "2019-08-23 10:49:26.928322"]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 6], ["created_at", "2019-08-23 10:49:26.938741"], ["updated_at", "2019-08-23 10:49:26.938741"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Node"], ["associated_id", 6], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 6\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7149eb07-6b3c-44e8-8b6f-e373734677dd"], ["created_at", "2019-08-23 10:49:26.943933"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 6]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 9]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 9]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 10]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 10]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 9]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 9]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Node"], ["associated_id", 6], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "f6b94851-2b6d-404b-a700-91c25c0bfbe6"], ["created_at", "2019-08-23 10:49:26.984877"]]
  [1m[36mInputNode Update (2.4ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:49:26.982627"], ["id", 9]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 10]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 10]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 6]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mNode Load (1.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 6]]
  [1m[36mEdge Load (5.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 6]]
  [1m[36mEdge Load (5.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 6]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mNode Load (2.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 6], ["LIMIT", 1]]
  [1m[36mNode Load (3.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 6], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:27.057114"], ["updated_at", "2019-08-23 10:49:27.057114"]]
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 7], ["created_at", "2019-08-23 10:49:27.061072"], ["updated_at", "2019-08-23 10:49:27.061072"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Node"], ["associated_id", 7], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 7\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "267315fc-6ede-46d7-8dd8-1dadd83fc98f"], ["created_at", "2019-08-23 10:49:27.066803"]]
  [1m[36mOutputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 7], ["created_at", "2019-08-23 10:49:27.075000"], ["updated_at", "2019-08-23 10:49:27.075000"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Node"], ["associated_id", 7], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 7\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "364c3682-29c7-4554-8e54-322212769a03"], ["created_at", "2019-08-23 10:49:27.085201"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 7]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 11]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 11]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 12]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 12]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 11]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 11]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Node"], ["associated_id", 7], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "02c2702a-acd3-4c54-9bd8-24986e3e6045"], ["created_at", "2019-08-23 10:49:27.129102"]]
  [1m[36mInputNode Update (2.7ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:49:27.126899"], ["id", 11]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 12]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 12]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 7]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 7]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 11], ["to_node_id", 12], ["created_at", "2019-08-23 10:49:27.167124"], ["updated_at", "2019-08-23 10:49:27.167124"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 2], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 2], ["auditable_type", "Edge"], ["associated_id", 11], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 11\nto_node_id: 12\n"], ["version", 1], ["request_uuid", "fe4ced74-4a4c-43d2-9bed-152123d8032b"], ["created_at", "2019-08-23 10:49:27.172330"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.4ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 11], ["to_node_id", 12], ["created_at", "2019-08-23 10:49:27.181708"], ["updated_at", "2019-08-23 10:49:27.181708"]]
  [1m[35m (3.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:27.208899"], ["updated_at", "2019-08-23 10:49:27.208899"]]
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 8], ["created_at", "2019-08-23 10:49:27.212949"], ["updated_at", "2019-08-23 10:49:27.212949"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 8\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a6ce7d01-7bbb-4c60-a66f-e886526f29a4"], ["created_at", "2019-08-23 10:49:27.221231"]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 8], ["created_at", "2019-08-23 10:49:27.234031"], ["updated_at", "2019-08-23 10:49:27.234031"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 8\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ca6c67ff-64f8-43ae-aa07-547efb2141ed"], ["created_at", "2019-08-23 10:49:27.239528"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 13]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 13]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 14]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 14]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mEdge Load (1.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 13]]
  [1m[36mEdge Load (1.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 13]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Node"], ["associated_id", 8], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "7be25cc4-f70b-4d71-8165-4be028997e9a"], ["created_at", "2019-08-23 10:49:27.290933"]]
  [1m[36mInputNode Update (4.2ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:49:27.288249"], ["id", 13]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 14]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 14]]
  [1m[36mNode Load (2.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[36mEdge Load (3.5ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 8], ["LIMIT", 1]]
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 8], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 8], ["LIMIT", 1]]
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 8], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 13]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 13]]
  [1m[36mEdge Load (1.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 14]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 14]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 13]]
  [1m[36mEdge Load (1.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 13]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mEdge Load (1.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 14]]
  [1m[36mEdge Load (1.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 14]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 13], ["to_node_id", 14], ["created_at", "2019-08-23 10:49:27.420279"], ["updated_at", "2019-08-23 10:49:27.420279"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 4], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 4], ["auditable_type", "Edge"], ["associated_id", 13], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 13\nto_node_id: 14\n"], ["version", 1], ["request_uuid", "24fa9328-c078-4ecb-9bd8-803193e6d884"], ["created_at", "2019-08-23 10:49:27.424889"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[36mEdge Load (2.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 8]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mNode Load (4.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 8], ["LIMIT", 1]]
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 8], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:27.495149"], ["updated_at", "2019-08-23 10:49:27.495149"]]
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 9], ["created_at", "2019-08-23 10:49:27.498860"], ["updated_at", "2019-08-23 10:49:27.498860"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Node"], ["associated_id", 9], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 9\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ca129cc2-1ff3-43bb-bbbf-1931bc8886cc"], ["created_at", "2019-08-23 10:49:27.507153"]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 9], ["created_at", "2019-08-23 10:49:27.513493"], ["updated_at", "2019-08-23 10:49:27.513493"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Node"], ["associated_id", 9], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 9\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9ea7b715-a7d6-43e5-a258-330f045024d6"], ["created_at", "2019-08-23 10:49:27.518203"]]
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 15], ["to_node_id", 16], ["created_at", "2019-08-23 10:49:27.524369"], ["updated_at", "2019-08-23 10:49:27.524369"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 5], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 5], ["auditable_type", "Edge"], ["associated_id", 15], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 15\nto_node_id: 16\n"], ["version", 1], ["request_uuid", "7e1e74bc-a91c-410c-b77f-8a4afbbeba29"], ["created_at", "2019-08-23 10:49:27.528468"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_without_node_ref
-------------------------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:27.606704"], ["updated_at", "2019-08-23 10:49:27.606704"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
NodeRefNodeTest: test_can_create_node_ref_node_with_node_ref
------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:27.645928"], ["updated_at", "2019-08-23 10:49:27.645928"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 11], ["created_at", "2019-08-23 10:49:27.653248"], ["updated_at", "2019-08-23 10:49:27.653248"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Node"], ["associated_id", 11], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 11\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "48876e37-9b4d-43c4-8580-935eb3ef9843"], ["created_at", "2019-08-23 10:49:27.658998"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNodeRefNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type", "node_ref_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 11], ["created_at", "2019-08-23 10:49:27.673399"], ["updated_at", "2019-08-23 10:49:27.673399"], ["type", "NodeRefNode"], ["node_ref_id", 17]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 18], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 18], ["auditable_type", "Node"], ["associated_id", 11], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 11\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: 17\n"], ["version", 1], ["request_uuid", "df646a89-ee16-43fe-a33c-ed451978615c"], ["created_at", "2019-08-23 10:49:27.678280"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_to_input_node
----------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:27.693723"], ["updated_at", "2019-08-23 10:49:27.693723"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 12], ["created_at", "2019-08-23 10:49:27.701003"], ["updated_at", "2019-08-23 10:49:27.701003"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Node"], ["associated_id", 12], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 12\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "088dea8a-ae52-4a9f-8deb-bfb08b72be9c"], ["created_at", "2019-08-23 10:49:27.706589"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-23 10:49:27.753025"], ["updated_at", "2019-08-23 10:49:27.753025"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 13], ["created_at", "2019-08-23 10:49:27.756209"], ["updated_at", "2019-08-23 10:49:27.756209"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 20], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 20], ["auditable_type", "Node"], ["associated_id", 13], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 13\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "76313248-c45e-439d-bf44-f765202e45d9"], ["created_at", "2019-08-23 10:49:27.762533"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:27.784252"], ["updated_at", "2019-08-23 10:49:27.784252"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 14], ["created_at", "2019-08-23 10:49:27.791973"], ["updated_at", "2019-08-23 10:49:27.791973"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Node"], ["associated_id", 14], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 14\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d8db62da-3467-417b-9f5c-3b7aa4899336"], ["created_at", "2019-08-23 10:49:27.797931"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:27.834096"], ["updated_at", "2019-08-23 10:49:27.834096"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 15], ["created_at", "2019-08-23 10:49:27.841216"], ["updated_at", "2019-08-23 10:49:27.841216"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 22], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 22], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "384d0373-1bb0-46e5-bc88-8cfacaed4a1d"], ["created_at", "2019-08-23 10:49:27.851061"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 15], ["created_at", "2019-08-23 10:49:27.861025"], ["updated_at", "2019-08-23 10:49:27.861025"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "32081522-4110-47a3-b19a-eba6c1024c48"], ["created_at", "2019-08-23 10:49:27.866754"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 22], ["to_node_id", 23], ["created_at", "2019-08-23 10:49:27.877001"], ["updated_at", "2019-08-23 10:49:27.877001"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 6], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 6], ["auditable_type", "Edge"], ["associated_id", 22], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 22\nto_node_id: 23\n"], ["version", 1], ["request_uuid", "091b1e35-dd42-495f-882a-e354a7b25da8"], ["created_at", "2019-08-23 10:49:27.883734"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Node"], ["associated_id", 15], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 15\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "fe552898-c91b-4b5c-ae61-2f7754a24e82"], ["created_at", "2019-08-23 10:49:27.897979"]]
  [1m[36mOutputNode Destroy (2.7ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 23]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:27.926037"], ["updated_at", "2019-08-23 10:49:27.926037"]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 16], ["created_at", "2019-08-23 10:49:27.937935"], ["updated_at", "2019-08-23 10:49:27.937935"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f1415ae7-df91-41e7-b7b0-cb2b15c27efd"], ["created_at", "2019-08-23 10:49:27.943481"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 16], ["created_at", "2019-08-23 10:49:27.957316"], ["updated_at", "2019-08-23 10:49:27.957316"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 25], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 25], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "833ea7df-8dc5-479d-bd0f-10b943ec5fa5"], ["created_at", "2019-08-23 10:49:27.967269"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 24], ["to_node_id", 25], ["created_at", "2019-08-23 10:49:27.976322"], ["updated_at", "2019-08-23 10:49:27.976322"]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 7], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 7], ["auditable_type", "Edge"], ["associated_id", 24], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 24\nto_node_id: 25\n"], ["version", 1], ["request_uuid", "9cc5b2f0-89ce-4a1d-a8c7-214aa884896a"], ["created_at", "2019-08-23 10:49:27.980500"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Node"], ["associated_id", 16], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 16\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "c5be00c8-62e6-4c1f-9aa4-cb7da479a454"], ["created_at", "2019-08-23 10:49:27.995086"]]
  [1m[36mInputNode Destroy (2.1ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 24]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:28.026283"], ["updated_at", "2019-08-23 10:49:28.026283"]]
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 17], ["created_at", "2019-08-23 10:49:28.031085"], ["updated_at", "2019-08-23 10:49:28.031085"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 26], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 26], ["auditable_type", "Node"], ["associated_id", 17], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 17\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "89d8b188-a4d3-4bca-8ee0-cf17d2780205"], ["created_at", "2019-08-23 10:49:28.037472"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 17], ["created_at", "2019-08-23 10:49:28.046784"], ["updated_at", "2019-08-23 10:49:28.046784"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 27], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 27], ["auditable_type", "Node"], ["associated_id", 17], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 17\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4c10b843-3b58-45f9-90c9-d1c4df5b26e0"], ["created_at", "2019-08-23 10:49:28.051602"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 17], ["created_at", "2019-08-23 10:49:28.061326"], ["updated_at", "2019-08-23 10:49:28.061326"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 28], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 28], ["auditable_type", "Node"], ["associated_id", 17], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 17\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "081a684d-bc6d-4d7d-bd56-d4837cdcad2f"], ["created_at", "2019-08-23 10:49:28.065911"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 26], ["to_node_id", 27], ["created_at", "2019-08-23 10:49:28.081239"], ["updated_at", "2019-08-23 10:49:28.081239"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Edge"], ["associated_id", 26], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 26\nto_node_id: 27\n"], ["version", 1], ["request_uuid", "7f0495ef-587b-42c6-a0ee-6601302baa72"], ["created_at", "2019-08-23 10:49:28.085840"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 8], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 8], ["auditable_type", "Edge"], ["associated_id", 26], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 27\n- 28\n"], ["version", 2], ["request_uuid", "6fc5a8e3-8dec-48ad-8f1a-8a5971c1b1c0"], ["created_at", "2019-08-23 10:49:28.096376"]]
  [1m[36mEdge Update (3.6ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 28], ["updated_at", "2019-08-23 10:49:28.094840"], ["id", 8]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (2.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mAudited::Audit Load (3.4ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 17], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.0ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 8], ["auditable_type", "Edge"]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mEdge Update (3.0ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 27], ["updated_at", "2019-08-23 10:49:28.137467"], ["id", 8]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.0ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 43]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mEdge Load (2.5ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mEdge Load (2.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mAudited::Audit Load (4.2ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 17], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (3.5ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 8], ["auditable_type", "Edge"]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mEdge Destroy (2.7ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (3.6ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 42]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mEdge Load (2.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[36mEdge Load (2.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 17]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:28.222478"], ["updated_at", "2019-08-23 10:49:28.222478"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 18], ["created_at", "2019-08-23 10:49:28.228044"], ["updated_at", "2019-08-23 10:49:28.228044"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 29], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (6.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 29], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 18\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8c50c180-63bc-4d17-98fc-cf3243edb798"], ["created_at", "2019-08-23 10:49:28.234781"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 18], ["created_at", "2019-08-23 10:49:28.248922"], ["updated_at", "2019-08-23 10:49:28.248922"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 30], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 30], ["auditable_type", "Node"], ["associated_id", 18], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 18\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2621d176-60a4-4657-9df6-af096b283356"], ["created_at", "2019-08-23 10:49:28.253877"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 29], ["to_node_id", 30], ["created_at", "2019-08-23 10:49:28.262893"], ["updated_at", "2019-08-23 10:49:28.262893"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 9], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 9], ["auditable_type", "Edge"], ["associated_id", 29], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 29\nto_node_id: 30\n"], ["version", 1], ["request_uuid", "81ea85af-76f0-4a89-9958-bb52ee8f5731"], ["created_at", "2019-08-23 10:49:28.267151"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:28.293165"], ["updated_at", "2019-08-23 10:49:28.293165"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 19], ["created_at", "2019-08-23 10:49:28.299089"], ["updated_at", "2019-08-23 10:49:28.299089"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 31], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 31], ["auditable_type", "Node"], ["associated_id", 19], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 19\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "634ebd04-8cf2-49bf-819f-1b21f62d684d"], ["created_at", "2019-08-23 10:49:28.305140"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-23 10:49:28.318476"], ["updated_at", "2019-08-23 10:49:28.318476"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 20], ["created_at", "2019-08-23 10:49:28.324792"], ["updated_at", "2019-08-23 10:49:28.324792"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 32], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 32], ["auditable_type", "Node"], ["associated_id", 20], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 20\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "096e8d6e-b0a7-4b34-8314-5da48cc5f23c"], ["created_at", "2019-08-23 10:49:28.329693"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.7ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:28.358447"], ["updated_at", "2019-08-23 10:49:28.358447"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 21], ["created_at", "2019-08-23 10:49:28.366033"], ["updated_at", "2019-08-23 10:49:28.366033"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 33], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 33], ["auditable_type", "Node"], ["associated_id", 21], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 21\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2d144586-359b-4dbe-97a0-2b9322b4a032"], ["created_at", "2019-08-23 10:49:28.371506"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:28.393440"], ["updated_at", "2019-08-23 10:49:28.393440"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 22], ["created_at", "2019-08-23 10:49:28.400538"], ["updated_at", "2019-08-23 10:49:28.400538"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 34], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 34], ["auditable_type", "Node"], ["associated_id", 22], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 22\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a418290f-d444-4c13-8160-7e87757174c4"], ["created_at", "2019-08-23 10:49:28.408768"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:49:28.431148"], ["updated_at", "2019-08-23 10:49:28.431148"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 23], ["created_at", "2019-08-23 10:49:28.437131"], ["updated_at", "2019-08-23 10:49:28.437131"], ["type", "InputNode"]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 35], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 35], ["auditable_type", "Node"], ["associated_id", 23], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 23\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "75f5d6fc-d95e-48db-a9d1-8c430dd19007"], ["created_at", "2019-08-23 10:49:28.443025"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 23], ["created_at", "2019-08-23 10:49:28.458516"], ["updated_at", "2019-08-23 10:49:28.458516"], ["type", "OutputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 36], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 36], ["auditable_type", "Node"], ["associated_id", 23], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 23\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e7f24204-c0d0-4016-960d-f1fe8e3c903d"], ["created_at", "2019-08-23 10:49:28.463343"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 35], ["to_node_id", 36], ["created_at", "2019-08-23 10:49:28.473801"], ["updated_at", "2019-08-23 10:49:28.473801"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Edge"], ["associated_id", 35], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 35\nto_node_id: 36\n"], ["version", 1], ["request_uuid", "35534373-065f-4968-9c47-174ed84cb583"], ["created_at", "2019-08-23 10:49:28.478748"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 10], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 10], ["auditable_type", "Edge"], ["associated_id", 35], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 35\nto_node_id: 36\n"], ["version", 2], ["request_uuid", "b634296e-8f6c-45fe-bda3-c51086e25f5d"], ["created_at", "2019-08-23 10:49:28.489210"]]
  [1m[36mEdge Destroy (3.7ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 10]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:50:16.322195"], ["updated_at", "2019-08-23 10:50:16.322195"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (9.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 24], ["created_at", "2019-08-23 10:50:16.421668"], ["updated_at", "2019-08-23 10:50:16.421668"], ["type", "InputNode"]]
  [1m[35m (28.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 37], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (6.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 37], ["auditable_type", "Node"], ["associated_id", 24], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 24\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a0022228-13b0-4225-aa2e-50a43fa0adee"], ["created_at", "2019-08-23 10:50:16.484208"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (6.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 24], ["created_at", "2019-08-23 10:50:16.556740"], ["updated_at", "2019-08-23 10:50:16.556740"], ["type", "OutputNode"]]
  [1m[35m (15.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 38], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 38], ["auditable_type", "Node"], ["associated_id", 24], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 24\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "463daeba-3bd1-49a9-8748-b8f6c8e455ec"], ["created_at", "2019-08-23 10:50:16.568470"]]
  [1m[35m (2.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (6.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 37], ["to_node_id", 38], ["created_at", "2019-08-23 10:50:16.628064"], ["updated_at", "2019-08-23 10:50:16.628064"]]
  [1m[35m (9.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 11], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 11], ["auditable_type", "Edge"], ["associated_id", 37], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 37\nto_node_id: 38\n"], ["version", 1], ["request_uuid", "415997b3-e8be-4b9f-bc7b-5f0480c8ea6b"], ["created_at", "2019-08-23 10:50:16.647354"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (10.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (12.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 38], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 38], ["auditable_type", "Node"], ["associated_id", 24], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 24\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "c887953c-4cab-466a-815f-eec1345ae49a"], ["created_at", "2019-08-23 10:50:16.682490"]]
  [1m[36mOutputNode Destroy (7.0ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 38]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:50:16.729714"], ["updated_at", "2019-08-23 10:50:16.729714"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (6.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 25], ["created_at", "2019-08-23 10:50:16.743493"], ["updated_at", "2019-08-23 10:50:16.743493"], ["type", "InputNode"]]
  [1m[35m (12.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 39], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 39], ["auditable_type", "Node"], ["associated_id", 25], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 25\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2249d14a-d1df-484d-8d40-a9bc1727a668"], ["created_at", "2019-08-23 10:50:16.759653"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:50:16.803020"], ["updated_at", "2019-08-23 10:50:16.803020"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 26], ["created_at", "2019-08-23 10:50:16.818138"], ["updated_at", "2019-08-23 10:50:16.818138"], ["type", "InputNode"]]
  [1m[35m (13.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 40], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 40], ["auditable_type", "Node"], ["associated_id", 26], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 26\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a680eab3-3eb9-4a81-a508-c56c0453afeb"], ["created_at", "2019-08-23 10:50:16.836393"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (4.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 26], ["created_at", "2019-08-23 10:50:16.864464"], ["updated_at", "2019-08-23 10:50:16.864464"], ["type", "OutputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 41], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 41], ["auditable_type", "Node"], ["associated_id", 26], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 26\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7a3ccff5-8360-402e-a101-930743aa69f0"], ["created_at", "2019-08-23 10:50:16.872542"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.4ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 40], ["to_node_id", 41], ["created_at", "2019-08-23 10:50:16.886087"], ["updated_at", "2019-08-23 10:50:16.886087"]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 12], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 12], ["auditable_type", "Edge"], ["associated_id", 40], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 40\nto_node_id: 41\n"], ["version", 1], ["request_uuid", "458dff20-5340-485e-8815-06a77999e32f"], ["created_at", "2019-08-23 10:50:16.891107"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 40], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 40], ["auditable_type", "Node"], ["associated_id", 26], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 26\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "6fbcba56-865b-411c-bf0f-85ce2e37cf93"], ["created_at", "2019-08-23 10:50:16.917076"]]
  [1m[36mInputNode Destroy (5.5ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 40]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:50:45.585372"], ["updated_at", "2019-08-23 10:50:45.585372"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (8.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 27], ["created_at", "2019-08-23 10:50:45.714351"], ["updated_at", "2019-08-23 10:50:45.714351"], ["type", "InputNode"]]
  [1m[35m (16.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 42], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 42], ["auditable_type", "Node"], ["associated_id", 27], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 27\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "01f4f0c1-3fe1-4f65-860c-6c5ee295a69e"], ["created_at", "2019-08-23 10:50:45.798826"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:50:45.922370"], ["updated_at", "2019-08-23 10:50:45.922370"]]
  [1m[35m (6.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (4.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 28], ["created_at", "2019-08-23 10:50:45.944102"], ["updated_at", "2019-08-23 10:50:45.944102"], ["type", "InputNode"]]
  [1m[35m (12.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 43], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 43], ["auditable_type", "Node"], ["associated_id", 28], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 28\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "237df7f7-13ee-43ff-88ce-31a2416ab214"], ["created_at", "2019-08-23 10:50:45.963828"]]
  [1m[35m (2.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (3.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 28], ["created_at", "2019-08-23 10:50:46.077677"], ["updated_at", "2019-08-23 10:50:46.077677"], ["type", "OutputNode"]]
  [1m[35m (14.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 44], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 44], ["auditable_type", "Node"], ["associated_id", 28], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 28\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "753d9922-e392-429b-9914-61672cdb6bc2"], ["created_at", "2019-08-23 10:50:46.095339"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (5.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 43], ["to_node_id", 44], ["created_at", "2019-08-23 10:50:46.148973"], ["updated_at", "2019-08-23 10:50:46.148973"]]
  [1m[35m (10.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 13], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 13], ["auditable_type", "Edge"], ["associated_id", 43], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 43\nto_node_id: 44\n"], ["version", 1], ["request_uuid", "782cda0a-7145-4e61-9c8d-0106b4319110"], ["created_at", "2019-08-23 10:50:46.163805"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (9.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (12.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 43], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 43], ["auditable_type", "Node"], ["associated_id", 28], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 28\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "72bac9e8-46f2-4529-b7dd-220c30ec9db0"], ["created_at", "2019-08-23 10:50:46.203802"]]
  [1m[36mInputNode Destroy (6.6ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 43]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:50:46.262812"], ["updated_at", "2019-08-23 10:50:46.262812"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (3.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 29], ["created_at", "2019-08-23 10:50:46.274923"], ["updated_at", "2019-08-23 10:50:46.274923"], ["type", "InputNode"]]
  [1m[35m (12.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 45], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 45], ["auditable_type", "Node"], ["associated_id", 29], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 29\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a5a5df39-f03d-4649-8cc1-c0d4b3e318fa"], ["created_at", "2019-08-23 10:50:46.287290"]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (3.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 29], ["created_at", "2019-08-23 10:50:46.318074"], ["updated_at", "2019-08-23 10:50:46.318074"], ["type", "OutputNode"]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 46], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 46], ["auditable_type", "Node"], ["associated_id", 29], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 29\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "023671a1-f641-4669-b635-7749915748ad"], ["created_at", "2019-08-23 10:50:46.330432"]]
  [1m[35m (3.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 45], ["to_node_id", 46], ["created_at", "2019-08-23 10:50:46.356286"], ["updated_at", "2019-08-23 10:50:46.356286"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 14], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 14], ["auditable_type", "Edge"], ["associated_id", 45], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 45\nto_node_id: 46\n"], ["version", 1], ["request_uuid", "6293d754-0855-4575-81df-e36fede4371a"], ["created_at", "2019-08-23 10:50:46.360903"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 46], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 46], ["auditable_type", "Node"], ["associated_id", 29], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 29\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "995f1e5e-b989-4ad0-bf53-5eaacd73a619"], ["created_at", "2019-08-23 10:50:46.382369"]]
  [1m[36mOutputNode Destroy (3.2ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 46]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (5.4ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:51:14.930763"], ["updated_at", "2019-08-23 10:51:14.930763"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (8.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 30], ["created_at", "2019-08-23 10:51:15.018913"], ["updated_at", "2019-08-23 10:51:15.018913"], ["type", "InputNode"]]
  [1m[35m (24.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 47], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 47], ["auditable_type", "Node"], ["associated_id", 30], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 30\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d2c4ac85-2a86-423b-8823-a895625b93e2"], ["created_at", "2019-08-23 10:51:15.071661"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 30], ["created_at", "2019-08-23 10:51:15.140498"], ["updated_at", "2019-08-23 10:51:15.140498"], ["type", "OutputNode"]]
  [1m[35m (12.2ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 48], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 48], ["auditable_type", "Node"], ["associated_id", 30], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 30\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "8ba8807f-87ec-4db1-97e6-7fb531e097d5"], ["created_at", "2019-08-23 10:51:15.148482"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (5.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 47], ["to_node_id", 48], ["created_at", "2019-08-23 10:51:15.206668"], ["updated_at", "2019-08-23 10:51:15.206668"]]
  [1m[35m (11.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 15], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 15], ["auditable_type", "Edge"], ["associated_id", 47], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 47\nto_node_id: 48\n"], ["version", 1], ["request_uuid", "679a0a62-f589-489b-b3d7-a5456805a8d5"], ["created_at", "2019-08-23 10:51:15.218166"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (14.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (13.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 47], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.6ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 47], ["auditable_type", "Node"], ["associated_id", 30], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 30\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "ea2f6489-9935-4820-9095-de9aabb44e58"], ["created_at", "2019-08-23 10:51:15.255938"]]
  [1m[36mInputNode Destroy (11.2ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 47]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (3.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:39.711361"], ["updated_at", "2019-08-23 10:52:39.711361"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (8.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 31], ["created_at", "2019-08-23 10:52:39.793248"], ["updated_at", "2019-08-23 10:52:39.793248"], ["type", "InputNode"]]
  [1m[35m (23.3ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 49], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (5.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 49], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 31\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d49a50be-cb5c-4c66-9945-8285369c93ab"], ["created_at", "2019-08-23 10:52:39.904679"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 31], ["created_at", "2019-08-23 10:52:39.985357"], ["updated_at", "2019-08-23 10:52:39.985357"], ["type", "OutputNode"]]
  [1m[35m (5.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 50], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 50], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 31\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4233d251-7191-4e4c-8ad5-feb3c2e12eb4"], ["created_at", "2019-08-23 10:52:39.993302"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.7ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 49], ["to_node_id", 50], ["created_at", "2019-08-23 10:52:40.070768"], ["updated_at", "2019-08-23 10:52:40.070768"]]
  [1m[35m (7.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Edge"], ["associated_id", 49], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 49\nto_node_id: 50\n"], ["version", 1], ["request_uuid", "2012fcd8-48bc-419f-b9f4-fc9c2f2c8b05"], ["created_at", "2019-08-23 10:52:40.078745"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (10.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (5.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 49]]
  [1m[35m (12.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 16], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 16], ["auditable_type", "Edge"], ["associated_id", 49], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 49\nto_node_id: 50\n"], ["version", 2], ["request_uuid", "4d831736-bcbf-49d3-81c5-f49156db1727"], ["created_at", "2019-08-23 10:52:40.137051"]]
  [1m[36mEdge Destroy (4.7ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 16]]
  [1m[36mEdge Load (3.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 49]]
  [1m[35m (8.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 49], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 49], ["auditable_type", "Node"], ["associated_id", 31], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 31\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "ad1deecd-b352-4688-b881-f471810db0d8"], ["created_at", "2019-08-23 10:52:40.173771"]]
  [1m[36mInputNode Destroy (9.7ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 49]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_to_node_and_with_from_node
----------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (4.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:54.023316"], ["updated_at", "2019-08-23 10:52:54.023316"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (8.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 32], ["created_at", "2019-08-23 10:52:54.089470"], ["updated_at", "2019-08-23 10:52:54.089470"], ["type", "InputNode"]]
  [1m[35m (21.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 51], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (4.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 51], ["auditable_type", "Node"], ["associated_id", 32], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 32\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d75a9b26-1bcd-435b-994f-a60d64acbce2"], ["created_at", "2019-08-23 10:52:54.153634"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
EdgeTest: test_can_not_draw_edge_between_2_graphs
-------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:54.308788"], ["updated_at", "2019-08-23 10:52:54.308788"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (4.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 33], ["created_at", "2019-08-23 10:52:54.320478"], ["updated_at", "2019-08-23 10:52:54.320478"], ["type", "InputNode"]]
  [1m[35m (15.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 52], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 52], ["auditable_type", "Node"], ["associated_id", 33], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 33\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "bb98b347-822f-47c0-b89a-18b4f77a3078"], ["created_at", "2019-08-23 10:52:54.333575"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.6ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 2"], ["created_at", "2019-08-23 10:52:54.364702"], ["updated_at", "2019-08-23 10:52:54.364702"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (2.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 34], ["created_at", "2019-08-23 10:52:54.423723"], ["updated_at", "2019-08-23 10:52:54.423723"], ["type", "OutputNode"]]
  [1m[35m (10.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 53], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 53], ["auditable_type", "Node"], ["associated_id", 34], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 34\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "e35fb4e2-7c68-45f9-8d79-a5202fdc4e1b"], ["created_at", "2019-08-23 10:52:54.430592"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_to_node
-----------------------------------------------------------
  [1m[35m (3.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
EdgeTest: test_can_not_create_without_from_node_and_with_to_node
----------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:54.530685"], ["updated_at", "2019-08-23 10:52:54.530685"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (6.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 35], ["created_at", "2019-08-23 10:52:54.541691"], ["updated_at", "2019-08-23 10:52:54.541691"], ["type", "OutputNode"]]
  [1m[35m (11.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 54], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 54], ["auditable_type", "Node"], ["associated_id", 35], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 35\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "03b7e8e0-6a5a-4ed0-86ae-bb5a1be2e5c1"], ["created_at", "2019-08-23 10:52:54.559186"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
EdgeTest: test_can_create_with_from_node_and_to_node
----------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:54.629303"], ["updated_at", "2019-08-23 10:52:54.629303"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 36], ["created_at", "2019-08-23 10:52:54.636838"], ["updated_at", "2019-08-23 10:52:54.636838"], ["type", "InputNode"]]
  [1m[35m (14.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 55], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 55], ["auditable_type", "Node"], ["associated_id", 36], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 36\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "7643fad4-4dce-44c4-92e7-500e9b262511"], ["created_at", "2019-08-23 10:52:54.644444"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (2.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 36], ["created_at", "2019-08-23 10:52:54.668541"], ["updated_at", "2019-08-23 10:52:54.668541"], ["type", "OutputNode"]]
  [1m[35m (13.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 56], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 56], ["auditable_type", "Node"], ["associated_id", 36], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 36\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c4271279-091f-4d40-8b64-e84753a6ab85"], ["created_at", "2019-08-23 10:52:54.679285"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (6.3ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 55], ["to_node_id", 56], ["created_at", "2019-08-23 10:52:54.714024"], ["updated_at", "2019-08-23 10:52:54.714024"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 17], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 17], ["auditable_type", "Edge"], ["associated_id", 55], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 55\nto_node_id: 56\n"], ["version", 1], ["request_uuid", "1d98c3c1-664d-4369-ad26-39c14fe8ba8e"], ["created_at", "2019-08-23 10:52:54.729835"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
EdgeTest: test_deleting_edge_does_not_delete_nodes
--------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:54.763634"], ["updated_at", "2019-08-23 10:52:54.763634"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 37], ["created_at", "2019-08-23 10:52:54.778979"], ["updated_at", "2019-08-23 10:52:54.778979"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 57], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 57], ["auditable_type", "Node"], ["associated_id", 37], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 37\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "83d376ce-492b-4a14-82f2-fdfd14ca57e1"], ["created_at", "2019-08-23 10:52:54.789205"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 37], ["created_at", "2019-08-23 10:52:54.802546"], ["updated_at", "2019-08-23 10:52:54.802546"], ["type", "OutputNode"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 58], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 58], ["auditable_type", "Node"], ["associated_id", 37], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 37\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "02be5b11-0509-4989-82c8-22755b6b9d10"], ["created_at", "2019-08-23 10:52:54.813093"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 57], ["to_node_id", 58], ["created_at", "2019-08-23 10:52:54.827264"], ["updated_at", "2019-08-23 10:52:54.827264"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 18], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 18], ["auditable_type", "Edge"], ["associated_id", 57], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 57\nto_node_id: 58\n"], ["version", 1], ["request_uuid", "6fefdef4-dda5-4d9f-8401-7086899f1622"], ["created_at", "2019-08-23 10:52:54.831713"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (6.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 18], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 18], ["auditable_type", "Edge"], ["associated_id", 57], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 57\nto_node_id: 58\n"], ["version", 2], ["request_uuid", "7d69a13b-d0ba-49bd-bdc6-578212ca0cdc"], ["created_at", "2019-08-23 10:52:54.850670"]]
  [1m[36mEdge Destroy (12.8ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 18]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (12.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
GraphsControllerTest: test_responds_with_graph_if_save_all_is_successful
------------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:55.112532"], ["updated_at", "2019-08-23 10:52:55.112532"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/graphs/38/save_all" for 127.0.0.1 at 2019-08-23 10:52:55 +0000
Processing by GraphsController#save_all as HTML
  Parameters: {"graph"=>{"id"=>"38", "name"=>"Updated Graph 1"}, "nodes"=>[{"name"=>"Node 1", "type"=>"InputNode", "clientId"=>"4f3dc24b-6457-44a7-a164-69f9f773874d"}, {"name"=>"Node 2", "type"=>"OutputNode", "clientId"=>"6f71249b-527c-4120-90fb-0e9d561777c2"}], "id"=>"38"}
  [1m[36mGraph Load (2.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 38]]
  [1m[36mGraph Update (2.7ms)[0m  [1m[33mUPDATE "graphs" SET "name" = $1, "updated_at" = $2 WHERE "graphs"."id" = $3[0m  [["name", "Updated Graph 1"], ["updated_at", "2019-08-23 10:52:55.337768"], ["id", 38]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 38], ["created_at", "2019-08-23 10:52:55.358603"], ["updated_at", "2019-08-23 10:52:55.358603"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 59], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 59], ["auditable_type", "Node"], ["associated_id", 38], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 38\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "5ac3049b-657a-418d-8a2d-e82bd6d89e95"], ["created_at", "2019-08-23 10:52:55.372098"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (1.4ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 38], ["created_at", "2019-08-23 10:52:55.398203"], ["updated_at", "2019-08-23 10:52:55.398203"], ["type", "OutputNode"]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 60], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "remote_address", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["auditable_id", 60], ["auditable_type", "Node"], ["associated_id", 38], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 38\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["remote_address", "127.0.0.1"], ["request_uuid", "5ac3049b-657a-418d-8a2d-e82bd6d89e95"], ["created_at", "2019-08-23 10:52:55.414881"]]
  [1m[35m (2.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[36mNode Load (6.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 38]]
  [1m[36mEdge Load (13.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 38]]
  [1m[36mEdge Load (10.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 38]]
  [1m[36mGraph Load (2.5ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[36mNode Load (5.9ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 38]]
  [1m[36mEdge Load (14.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 38]]
  [1m[36mEdge Load (13.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 38]]
Completed 200 OK in 272ms (Views: 0.4ms | ActiveRecord: 96.0ms)
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (5.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-------------------------
GraphTest: test_auditting
-------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:55.581818"], ["updated_at", "2019-08-23 10:52:55.581818"]]
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 39], ["created_at", "2019-08-23 10:52:55.585020"], ["updated_at", "2019-08-23 10:52:55.585020"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 61], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (3.3ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 61], ["auditable_type", "Node"], ["associated_id", 39], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 39\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "cb77d02d-3c91-41fd-bd3e-31d91f18460a"], ["created_at", "2019-08-23 10:52:55.595797"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 39], ["created_at", "2019-08-23 10:52:55.624069"], ["updated_at", "2019-08-23 10:52:55.624069"], ["type", "OutputNode"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 62], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 62], ["auditable_type", "Node"], ["associated_id", 39], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 39\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "dee5473e-db06-4f52-aa26-06ecc35004cc"], ["created_at", "2019-08-23 10:52:55.643158"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 3"], ["graph_id", 39], ["created_at", "2019-08-23 10:52:55.658922"], ["updated_at", "2019-08-23 10:52:55.658922"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 63], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (7.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 63], ["auditable_type", "Node"], ["associated_id", 39], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 3\ngraph_id: 39\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "2196d154-ee7b-4e5b-b8ca-834d3a579bb5"], ["created_at", "2019-08-23 10:52:55.665556"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (2.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.5ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 61], ["to_node_id", 62], ["created_at", "2019-08-23 10:52:55.689135"], ["updated_at", "2019-08-23 10:52:55.689135"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Edge"], ["associated_id", 61], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 61\nto_node_id: 62\n"], ["version", 1], ["request_uuid", "a2a70f30-b090-4d9a-850d-1fd47d7075c4"], ["created_at", "2019-08-23 10:52:55.698076"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 19], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 19], ["auditable_type", "Edge"], ["associated_id", 61], ["associated_type", "Node"], ["action", "update"], ["audited_changes", "---\nto_node_id:\n- 62\n- 63\n"], ["version", 2], ["request_uuid", "fe32719c-4fa6-4b99-a5bd-008d6a7a8ba1"], ["created_at", "2019-08-23 10:52:55.712037"]]
  [1m[36mEdge Update (3.9ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 63], ["updated_at", "2019-08-23 10:52:55.710319"], ["id", 19]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (10.4ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mEdge Load (10.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mAudited::Audit Load (6.6ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 39], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (6.2ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 19], ["auditable_type", "Edge"]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  [1m[36mEdge Update (5.1ms)[0m  [1m[33mUPDATE "edges" SET "to_node_id" = $1, "updated_at" = $2 WHERE "edges"."id" = $3[0m  [["to_node_id", 62], ["updated_at", "2019-08-23 10:52:55.784479"], ["id", 19]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (6.3ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 99]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (3.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" WHERE "edges"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  [1m[36mEdge Load (10.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mEdge Load (10.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mAudited::Audit Load (5.2ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."associated_id" = $1 AND "audits"."associated_type" = $2[0m  [["associated_id", 39], ["associated_type", "Graph"]]
  [1m[36mAudited::Audit Load (7.0ms)[0m  [1m[34mSELECT "audits".* FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2 ORDER BY "audits"."version" ASC[0m  [["auditable_id", 19], ["auditable_type", "Edge"]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (4.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  [1m[36mEdge Destroy (5.5ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 19]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAudited::Audit Destroy (5.0ms)[0m  [1m[31mDELETE FROM "audits" WHERE "audits"."id" = $1[0m  [["id", 98]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (3.2ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mEdge Load (11.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[36mEdge Load (10.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 39]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_to_input_node
----------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.2ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:55.931153"], ["updated_at", "2019-08-23 10:52:55.931153"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.7ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 40], ["created_at", "2019-08-23 10:52:55.938360"], ["updated_at", "2019-08-23 10:52:55.938360"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 64], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 64], ["auditable_type", "Node"], ["associated_id", 40], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 40\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "01741aa0-2e04-4761-9930-d5caba28ca98"], ["created_at", "2019-08-23 10:52:55.945688"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
NodeRefNodeTest: test_can_create_node_ref_node_with_node_ref
------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:55.993276"], ["updated_at", "2019-08-23 10:52:55.993276"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "OutputNode 1"], ["graph_id", 41], ["created_at", "2019-08-23 10:52:56.000606"], ["updated_at", "2019-08-23 10:52:56.000606"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 65], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 65], ["auditable_type", "Node"], ["associated_id", 41], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: OutputNode 1\ngraph_id: 41\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "f4e1d86c-83ac-4586-ab3a-b9c5d0ddfd5c"], ["created_at", "2019-08-23 10:52:56.005656"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNodeRefNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type", "node_ref_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 41], ["created_at", "2019-08-23 10:52:56.017556"], ["updated_at", "2019-08-23 10:52:56.017556"], ["type", "NodeRefNode"], ["node_ref_id", 65]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 66], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 66], ["auditable_type", "Node"], ["associated_id", 41], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 41\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: 65\n"], ["version", 1], ["request_uuid", "07df8292-fb9e-4bcc-974e-83bd02734b8b"], ["created_at", "2019-08-23 10:52:56.027888"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
NodeRefNodeTest: test_can_not_create_node_ref_node_without_node_ref
-------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:56.049968"], ["updated_at", "2019-08-23 10:52:56.049968"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
NodeTest: test_can_not_create_node_without_graph
------------------------------------------------
  [1m[35m (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_cascade_deletes_from_edges
-----------------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:56.105630"], ["updated_at", "2019-08-23 10:52:56.105630"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 43], ["created_at", "2019-08-23 10:52:56.117633"], ["updated_at", "2019-08-23 10:52:56.117633"], ["type", "InputNode"]]
  [1m[35m (1.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 67], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 67], ["auditable_type", "Node"], ["associated_id", 43], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 43\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "0b77bb86-942b-4fe1-9c46-c01e70e9a7f7"], ["created_at", "2019-08-23 10:52:56.124567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 43], ["created_at", "2019-08-23 10:52:56.152050"], ["updated_at", "2019-08-23 10:52:56.152050"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 68], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.5ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 68], ["auditable_type", "Node"], ["associated_id", 43], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 43\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "911ea4bf-7fe9-415b-98df-981e2e99155c"], ["created_at", "2019-08-23 10:52:56.157748"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 67], ["to_node_id", 68], ["created_at", "2019-08-23 10:52:56.167986"], ["updated_at", "2019-08-23 10:52:56.167986"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 20], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 20], ["auditable_type", "Edge"], ["associated_id", 67], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 67\nto_node_id: 68\n"], ["version", 1], ["request_uuid", "90c577a7-27bb-4e63-8fb6-f9e548f19d34"], ["created_at", "2019-08-23 10:52:56.171807"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (5.9ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 67]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 20], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 20], ["auditable_type", "Edge"], ["associated_id", 67], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 67\nto_node_id: 68\n"], ["version", 2], ["request_uuid", "fbcbf520-e5aa-4f3a-927d-fcda5e8487f7"], ["created_at", "2019-08-23 10:52:56.200788"]]
  [1m[36mEdge Destroy (5.6ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 20]]
  [1m[36mEdge Load (4.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 67]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 67], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 67], ["auditable_type", "Node"], ["associated_id", 43], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 43\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "63c520b2-014e-4e40-8de2-3322f7080694"], ["created_at", "2019-08-23 10:52:56.221124"]]
  [1m[36mInputNode Destroy (4.8ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 67]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
NodeTest: test_can_create_node_with_graph
-----------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:56.251625"], ["updated_at", "2019-08-23 10:52:56.251625"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 44], ["created_at", "2019-08-23 10:52:56.260775"], ["updated_at", "2019-08-23 10:52:56.260775"], ["type", "InputNode"]]
  [1m[35m (1.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 69], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 69], ["auditable_type", "Node"], ["associated_id", 44], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 44\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "65c13343-795d-4862-994a-60b500b8f47a"], ["created_at", "2019-08-23 10:52:56.267364"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
NodeTest: test_cascade_deletes_to_edges
---------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:56.290270"], ["updated_at", "2019-08-23 10:52:56.290270"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 45], ["created_at", "2019-08-23 10:52:56.299577"], ["updated_at", "2019-08-23 10:52:56.299577"], ["type", "InputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 70], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 70], ["auditable_type", "Node"], ["associated_id", 45], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 45\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "3ddcf55f-6fac-41aa-ab47-2633c3dbf302"], ["created_at", "2019-08-23 10:52:56.306916"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOutputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "InputNode 1"], ["graph_id", 45], ["created_at", "2019-08-23 10:52:56.320867"], ["updated_at", "2019-08-23 10:52:56.320867"], ["type", "OutputNode"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 71], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 71], ["auditable_type", "Node"], ["associated_id", 45], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 45\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "02013ff3-2bc0-4e3f-af65-6e5efebd082f"], ["created_at", "2019-08-23 10:52:56.327642"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 70], ["to_node_id", 71], ["created_at", "2019-08-23 10:52:56.337904"], ["updated_at", "2019-08-23 10:52:56.337904"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Edge"], ["associated_id", 70], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 70\nto_node_id: 71\n"], ["version", 1], ["request_uuid", "26eabf77-f23f-4e9e-9a1d-6a4ea477a2c2"], ["created_at", "2019-08-23 10:52:56.346254"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Load (6.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."from_node_id" = $1[0m  [["from_node_id", 71]]
  [1m[36mEdge Load (4.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" WHERE "edges"."to_node_id" = $1[0m  [["to_node_id", 71]]
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 21], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 21], ["auditable_type", "Edge"], ["associated_id", 70], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 70\nto_node_id: 71\n"], ["version", 2], ["request_uuid", "a45b3dd3-d9db-4e1a-bdc7-55ef20c203c7"], ["created_at", "2019-08-23 10:52:56.382141"]]
  [1m[36mEdge Destroy (5.7ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 21]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 71], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 71], ["auditable_type", "Node"], ["associated_id", 45], ["associated_type", "Graph"], ["action", "destroy"], ["audited_changes", "---\nname: InputNode 1\ngraph_id: 45\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 2], ["request_uuid", "5d5d0934-4a50-4d04-b6bb-5bd48219c28c"], ["created_at", "2019-08-23 10:52:56.395652"]]
  [1m[36mOutputNode Destroy (3.2ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 71]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (10.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------
RestGraphTest: test_nodes_content_
----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rest Graph 1"], ["created_at", "2019-08-23 10:52:56.457151"], ["updated_at", "2019-08-23 10:52:56.457151"], ["type", "RestGraph"]]
  [1m[36mInputNode Create (1.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "content", "type") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Input node"], ["graph_id", 46], ["created_at", "2019-08-23 10:52:56.465721"], ["updated_at", "2019-08-23 10:52:56.465721"], ["content", "{\"type\":\"input\",\"sub_type\":\"rest\"}"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 72], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.4ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 72], ["auditable_type", "Node"], ["associated_id", 46], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Input node\ngraph_id: 46\ncontent:\n  type: input\n  sub_type: rest\nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "d5110f73-b956-4ffd-9fc5-683ceafd0149"], ["created_at", "2019-08-23 10:52:56.481923"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestGraphTest: test_node_subtype_can_not_be_file
------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
GraphServiceTest: test_can_create_all_at_once
---------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.1ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:56.551553"], ["updated_at", "2019-08-23 10:52:56.551553"]]
  [1m[36mInputNode Create (1.3ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 47], ["created_at", "2019-08-23 10:52:56.556872"], ["updated_at", "2019-08-23 10:52:56.556872"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 73], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 73], ["auditable_type", "Node"], ["associated_id", 47], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 47\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "ef341971-6b11-4cfa-ab81-4b6919d8fe47"], ["created_at", "2019-08-23 10:52:56.571665"]]
  [1m[36mOutputNode Create (0.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 47], ["created_at", "2019-08-23 10:52:56.584913"], ["updated_at", "2019-08-23 10:52:56.584913"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 74], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 74], ["auditable_type", "Node"], ["associated_id", 47], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 47\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c865638e-d025-4853-aaad-1fd1ac541d81"], ["created_at", "2019-08-23 10:52:56.589656"]]
  [1m[36mEdge Create (0.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 73], ["to_node_id", 74], ["created_at", "2019-08-23 10:52:56.597332"], ["updated_at", "2019-08-23 10:52:56.597332"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 22], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 22], ["auditable_type", "Edge"], ["associated_id", 73], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 73\nto_node_id: 74\n"], ["version", 1], ["request_uuid", "f84ffdf3-26be-416f-ab19-08775ba88dea"], ["created_at", "2019-08-23 10:52:56.601277"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------
GraphServiceTest: test_saves_Graph
----------------------------------
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.9ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:56.645131"], ["updated_at", "2019-08-23 10:52:56.645131"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------
GraphServiceTest: test_deletes_edges
------------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:56.674357"], ["updated_at", "2019-08-23 10:52:56.674357"]]
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 49], ["created_at", "2019-08-23 10:52:56.679856"], ["updated_at", "2019-08-23 10:52:56.679856"], ["type", "InputNode"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 75], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 75], ["auditable_type", "Node"], ["associated_id", 49], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 49\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4fc77a89-41c8-488a-9eaa-5b762dc18307"], ["created_at", "2019-08-23 10:52:56.684958"]]
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 49], ["created_at", "2019-08-23 10:52:56.694858"], ["updated_at", "2019-08-23 10:52:56.694858"], ["type", "OutputNode"]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 76], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 76], ["auditable_type", "Node"], ["associated_id", 49], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 49\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5cbf85c5-2248-4467-9f89-e27c2735d086"], ["created_at", "2019-08-23 10:52:56.707024"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (5.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 49]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (3.5ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.1ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 75], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 75], ["auditable_type", "Node"], ["associated_id", 49], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "41be954e-e8b3-4c2d-bdba-59c6a3ab58b2"], ["created_at", "2019-08-23 10:52:56.747703"]]
  [1m[36mInputNode Update (4.3ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:52:56.745818"], ["id", 75]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mNode Load (5.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 49]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mNode Load (4.1ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 49]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (1.0ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 75], ["to_node_id", 76], ["created_at", "2019-08-23 10:52:56.792204"], ["updated_at", "2019-08-23 10:52:56.792204"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Edge"], ["associated_id", 75], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 75\nto_node_id: 76\n"], ["version", 1], ["request_uuid", "ad36f758-c0b1-4e95-bab3-64dd4bcea0ca"], ["created_at", "2019-08-23 10:52:56.799132"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (12.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 49]]
  [1m[36mEdge Load (12.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 49]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.8ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 49]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mNode Load (2.0ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 49]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mNode Load (2.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 49]]
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 49]]
  [1m[36mEdge Load (3.3ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 49]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 23], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 23], ["auditable_type", "Edge"], ["associated_id", 75], ["associated_type", "Node"], ["action", "destroy"], ["audited_changes", "---\nfrom_node_id: 75\nto_node_id: 76\n"], ["version", 2], ["request_uuid", "4ea39054-aa0e-4fd5-bcf9-604bbf9f06cf"], ["created_at", "2019-08-23 10:52:56.896038"]]
  [1m[36mEdge Destroy (4.3ms)[0m  [1m[31mDELETE FROM "edges" WHERE "edges"."id" = $1[0m  [["id", 23]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[35m (5.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
GraphServiceTest: test_does_it_also_delete
------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.5ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:56.933367"], ["updated_at", "2019-08-23 10:52:56.933367"]]
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 50], ["created_at", "2019-08-23 10:52:56.937205"], ["updated_at", "2019-08-23 10:52:56.937205"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 77], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (2.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 77], ["auditable_type", "Node"], ["associated_id", 50], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 50\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "46c9032f-4381-42d5-9f76-6dbea9d45b5e"], ["created_at", "2019-08-23 10:52:56.942124"]]
  [1m[36mOutputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 50], ["created_at", "2019-08-23 10:52:56.951288"], ["updated_at", "2019-08-23 10:52:56.951288"], ["type", "OutputNode"]]
  [1m[35m (2.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 78], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 78], ["auditable_type", "Node"], ["associated_id", 50], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 50\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5acc4a82-e0a6-4ea7-b727-0e7fc85d8bff"], ["created_at", "2019-08-23 10:52:56.958080"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (6.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."name" = $1 LIMIT $2[0m  [["name", "Node 2"], ["LIMIT", 1]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 50]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 50]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 50]]
  [1m[36mNode Destroy (3.6ms)[0m  [1m[31mDELETE FROM "nodes" WHERE "nodes"."id" = $1[0m  [["id", 77]]
  [1m[36mEdge Load (2.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 50]]
  [1m[36mEdge Load (3.8ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 50]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[35m (8.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 50]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
GraphServiceTest: test_doesn't_create_anything_if_unvalid_data
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "graphs"[0m
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes_and_those_edges
-----------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:57.092119"], ["updated_at", "2019-08-23 10:52:57.092119"]]
  [1m[36mInputNode Create (1.5ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 51], ["created_at", "2019-08-23 10:52:57.096021"], ["updated_at", "2019-08-23 10:52:57.096021"], ["type", "InputNode"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 79], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 79], ["auditable_type", "Node"], ["associated_id", 51], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 51\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "a86a01b2-b7b0-4ca2-8533-e397545bf883"], ["created_at", "2019-08-23 10:52:57.103078"]]
  [1m[36mOutputNode Create (1.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 51], ["created_at", "2019-08-23 10:52:57.110588"], ["updated_at", "2019-08-23 10:52:57.110588"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 80], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 80], ["auditable_type", "Node"], ["associated_id", 51], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 51\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "c748fe55-c75f-4d2b-8e78-cd3c0af2c065"], ["created_at", "2019-08-23 10:52:57.119274"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 51]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 79], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 79], ["auditable_type", "Node"], ["associated_id", 51], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "1f5ad73c-4bf4-48b8-82a8-b15534a93abe"], ["created_at", "2019-08-23 10:52:57.162050"]]
  [1m[36mInputNode Update (3.5ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:52:57.158913"], ["id", 79]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 51]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mNode Load (1.6ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 51]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 51]]
  [1m[36mEdge Load (3.0ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 51]]
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mNode Load (4.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 51], ["LIMIT", 1]]
  [1m[36mNode Load (4.4ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 51], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mNode Load (4.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 51], ["LIMIT", 1]]
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 51], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 51]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.9ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mNode Load (1.2ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 51]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mNode Load (2.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 51]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 79], ["to_node_id", 80], ["created_at", "2019-08-23 10:52:57.286389"], ["updated_at", "2019-08-23 10:52:57.286389"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 24], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 24], ["auditable_type", "Edge"], ["associated_id", 79], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 79\nto_node_id: 80\n"], ["version", 1], ["request_uuid", "451e0549-8c92-4d1a-9629-46cbddc6d0e1"], ["created_at", "2019-08-23 10:52:57.292214"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mEdge Load (3.6ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 51]]
  [1m[36mEdge Load (5.2ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 51]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mNode Load (3.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 51], ["LIMIT", 1]]
  [1m[36mNode Load (3.9ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 51], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (5.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "edges"[0m
  [1m[36mEdge Load (3.8ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (1.1ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEdge Load (3.7ms)[0m  [1m[34mSELECT  "edges".* FROM "edges" ORDER BY "edges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mNode Load (4.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" ORDER BY "nodes"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
GraphServiceTest: test_knows_how_to_update_graphs_nodes
-------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (0.8ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:57.382221"], ["updated_at", "2019-08-23 10:52:57.382221"]]
  [1m[36mInputNode Create (0.9ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 52], ["created_at", "2019-08-23 10:52:57.385900"], ["updated_at", "2019-08-23 10:52:57.385900"], ["type", "InputNode"]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 81], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.7ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 81], ["auditable_type", "Node"], ["associated_id", 52], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 52\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9e66796e-221c-4d85-b4da-ac23c9647720"], ["created_at", "2019-08-23 10:52:57.393238"]]
  [1m[36mOutputNode Create (2.0ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 52], ["created_at", "2019-08-23 10:52:57.407394"], ["updated_at", "2019-08-23 10:52:57.407394"], ["type", "OutputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 82], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 82], ["auditable_type", "Node"], ["associated_id", 52], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 52\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "35e25726-bc27-4d16-a2b2-fc13f5d50a74"], ["created_at", "2019-08-23 10:52:57.414095"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 52]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 81], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.9ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 81], ["auditable_type", "Node"], ["associated_id", 52], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "11557afe-e327-4c27-aec2-526ac272e23a"], ["created_at", "2019-08-23 10:52:57.441811"]]
  [1m[36mInputNode Update (2.9ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:52:57.439855"], ["id", 81]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.8ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.8ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mNode Load (1.5ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 52]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mNode Load (1.7ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 52]]
  [1m[36mEdge Load (3.1ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."from_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 52]]
  [1m[36mEdge Load (2.7ms)[0m  [1m[34mSELECT "edges".* FROM "edges" INNER JOIN "nodes" ON "edges"."to_node_id" = "nodes"."id" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 52]]
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mNode Load (4.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2[0m  [["graph_id", 52], ["LIMIT", 1]]
  [1m[36mNode Load (3.2ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1 ORDER BY "nodes"."id" ASC LIMIT $2 OFFSET $3[0m  [["graph_id", 52], ["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
GraphServiceTest: test_does_not_allow_duplicate_edges
-----------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (1.3ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:57.518547"], ["updated_at", "2019-08-23 10:52:57.518547"]]
  [1m[36mInputNode Create (1.6ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 53], ["created_at", "2019-08-23 10:52:57.522012"], ["updated_at", "2019-08-23 10:52:57.522012"], ["type", "InputNode"]]
  [1m[35m (2.1ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 83], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.1ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 83], ["auditable_type", "Node"], ["associated_id", 53], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 53\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "9cd283f0-4142-4d24-8376-d065890fc27a"], ["created_at", "2019-08-23 10:52:57.529497"]]
  [1m[36mOutputNode Create (1.8ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 53], ["created_at", "2019-08-23 10:52:57.540891"], ["updated_at", "2019-08-23 10:52:57.540891"], ["type", "OutputNode"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 84], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 84], ["auditable_type", "Node"], ["associated_id", 53], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 53\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "113d07ad-0b20-4ea4-84cd-b71f3ab46770"], ["created_at", "2019-08-23 10:52:57.548289"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (1.0ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mNode Load (2.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 53]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.6ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 83], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (1.2ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 83], ["auditable_type", "Node"], ["associated_id", 53], ["associated_type", "Graph"], ["action", "update"], ["audited_changes", "---\nname:\n- Node 1\n- New Node 1\n"], ["version", 2], ["request_uuid", "92bee00e-909e-4474-9b47-c72f7ca55168"], ["created_at", "2019-08-23 10:52:57.579785"]]
  [1m[36mInputNode Update (3.9ms)[0m  [1m[33mUPDATE "nodes" SET "name" = $1, "updated_at" = $2 WHERE "nodes"."id" = $3[0m  [["name", "New Node 1"], ["updated_at", "2019-08-23 10:52:57.574853"], ["id", 83]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mNode Load (0.7ms)[0m  [1m[34mSELECT  "nodes".* FROM "nodes" WHERE "nodes"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.7ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mNode Load (1.3ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 53]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mGraph Load (0.6ms)[0m  [1m[34mSELECT  "graphs".* FROM "graphs" WHERE "graphs"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mNode Load (1.4ms)[0m  [1m[34mSELECT "nodes".* FROM "nodes" WHERE "nodes"."graph_id" = $1[0m  [["graph_id", 53]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (0.8ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 83], ["to_node_id", 84], ["created_at", "2019-08-23 10:52:57.617257"], ["updated_at", "2019-08-23 10:52:57.617257"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 25], ["auditable_type", "Edge"]]
  [1m[36mAudited::Audit Create (1.0ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 25], ["auditable_type", "Edge"], ["associated_id", 83], ["associated_type", "Node"], ["action", "create"], ["audited_changes", "---\nfrom_node_id: 83\nto_node_id: 84\n"], ["version", 1], ["request_uuid", "73180fbb-a9ce-42ac-84ef-49377c34246b"], ["created_at", "2019-08-23 10:52:57.621409"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mEdge Create (2.9ms)[0m  [1m[32mINSERT INTO "edges" ("from_node_id", "to_node_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["from_node_id", 83], ["to_node_id", 84], ["created_at", "2019-08-23 10:52:57.633107"], ["updated_at", "2019-08-23 10:52:57.633107"]]
  [1m[35m (5.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
GraphServiceTest: test_saves_Graphs_Nodes
-----------------------------------------
  [1m[35m (7.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGraph Create (2.0ms)[0m  [1m[32mINSERT INTO "graphs" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Graph 1"], ["created_at", "2019-08-23 10:52:57.671960"], ["updated_at", "2019-08-23 10:52:57.671960"]]
  [1m[36mInputNode Create (2.2ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 1"], ["graph_id", 54], ["created_at", "2019-08-23 10:52:57.677321"], ["updated_at", "2019-08-23 10:52:57.677321"], ["type", "InputNode"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 85], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 85], ["auditable_type", "Node"], ["associated_id", 54], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 1\ngraph_id: 54\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "4244fcc9-1790-40e7-944c-7e74d8f0f379"], ["created_at", "2019-08-23 10:52:57.684782"]]
  [1m[36mOutputNode Create (1.1ms)[0m  [1m[32mINSERT INTO "nodes" ("name", "graph_id", "created_at", "updated_at", "type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Node 2"], ["graph_id", 54], ["created_at", "2019-08-23 10:52:57.690711"], ["updated_at", "2019-08-23 10:52:57.690711"], ["type", "OutputNode"]]
  [1m[35m (1.9ms)[0m  [1m[34mSELECT MAX("audits"."version") FROM "audits" WHERE "audits"."auditable_id" = $1 AND "audits"."auditable_type" = $2[0m  [["auditable_id", 86], ["auditable_type", "Node"]]
  [1m[36mAudited::Audit Create (0.8ms)[0m  [1m[32mINSERT INTO "audits" ("auditable_id", "auditable_type", "associated_id", "associated_type", "action", "audited_changes", "version", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["auditable_id", 86], ["auditable_type", "Node"], ["associated_id", 54], ["associated_type", "Graph"], ["action", "create"], ["audited_changes", "---\nname: Node 2\ngraph_id: 54\ncontent: \nx: 0.0\ny: 0.0\nnode_ref_id: \n"], ["version", 1], ["request_uuid", "5fc199ae-0cb7-4d88-9abc-0479215b3aa5"], ["created_at", "2019-08-23 10:52:57.697682"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "nodes"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
